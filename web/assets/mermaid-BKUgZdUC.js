// Copyright James Burvel Oâ€™Callaghan III
// President Citibank Demo Business Inc.

import{d as De,a as $d,b as Kd,c as Qd}from"./dayjs-CeEF-NGT.js";import{d as Fr}from"./@braintree-DzxiOROe.js";import"./d3-transition-CiCB8KJE.js";import"./d3-zoom-BYoC3mS3.js";import{p as Zr}from"./dompurify-J5RlrwSC.js";import{d as yt,e as ph}from"./d3-selection-C52G7wmG.js";import{w as Xi,l as Xs,G as Ii,a as gh,r as Zd,b as Jd,i as er,c as yh}from"./dagre-d3-es-CTpFWynZ.js";import{s as tf,a as ef,b as rf,d as sf,m as nf,e as af,f as of,c as ei,g as lf,h as cf,i as hf,j as uf,k as df,n as ff,o as pf,p as gf,q as yf,r as mf,t as xf,u as $s,l as fr,v as Jr,w as bf}from"./d3-shape-CX8xTzfR.js";import{a as et,i as kt,r as Xr,d as At,l as Ct,b as Rr,c as mh}from"./khroma-DUX6PT6k.js";import{v as kf}from"./uuid-DhYbOkY1.js";import{t as _f,l as Bs,o as Io,b as Yl}from"./d3-scale-DRZz3QW5.js";import{m as Tf,e as Cf}from"./d3-array-DGRYoJHh.js";import{g as Ef}from"./d3-interpolate-CtIaNujU.js";import{a as Sf,b as wf}from"./d3-axis-DSWTncID.js";import{t as Ul}from"./d3-time-format-CUNN4Ell.js";import{d as Hl,c as vf,n as Af,o as Lf,m as Bf,p as If,q as Df,i as Ff,b as Gl,a as jl,t as Xl,s as $l,r as Kl}from"./d3-time-6cSPyVSY.js";import{E as Rf}from"./elkjs-oKFFZvz7.js";import{c as xh}from"./cytoscape-DtBltrT8.js";import{c as Nf}from"./cytoscape-cose-bilkent-Cgr1thlj.js";import{S as Of,j as Pf,c as Mf,r as Vf,l as zf,s as qf}from"./d3-sankey-DgqkLiUE.js";import{s as bh}from"./d3-scale-chromatic-B-NsZVaP.js";import{d as kh}from"./ts-dedent-DrFu-skq.js";import{G as Do,y as Wf,d as La,F as Yf}from"./lodash-es-Dt6r0yiR.js";import{s as Uf,c as Hf,a as Gf}from"./stylis-D5iaQeiq.js";import{f as _h}from"./mdast-util-from-markdown-CLAsVoWb.js";const jf="modulepreload",Xf=function(t,e){return new URL(t,e).href},Ql={},ae=function(e,i,r){let s=Promise.resolve();if(i&&i.length>0){let h=function(u){return Promise.all(u.map(p=>Promise.resolve(p).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=h(i.map(u=>{if(u=Xf(u,r),u in Ql)return;Ql[u]=!0;const p=u.endsWith(".css"),d=p?'[rel="stylesheet"]':"";if(!!r)for(let x=a.length-1;x>=0;x--){const _=a[x];if(_.href===u&&(!p||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${d}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":jf,p||(y.as="script"),y.crossOrigin="",y.href=u,l&&y.setAttribute("nonce",l),document.head.appendChild(y),p)return new Promise((x,_)=>{y.addEventListener("load",x),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function n(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&n(o.reason);return e().catch(n)})},Yi={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},B={trace:(...t)=>{},debug:(...t)=>{},info:(...t)=>{},warn:(...t)=>{},error:(...t)=>{},fatal:(...t)=>{}},Fo=function(t="fatal"){let e=Yi.fatal;typeof t=="string"?(t=t.toLowerCase(),t in Yi&&(e=Yi[t])):typeof t=="number"&&(e=t),B.trace=()=>{},B.debug=()=>{},B.info=()=>{},B.warn=()=>{},B.error=()=>{},B.fatal=()=>{},e<=Yi.fatal&&(B.fatal=console.error?console.error.bind(console,oi("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",oi("FATAL"))),e<=Yi.error&&(B.error=console.error?console.error.bind(console,oi("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",oi("ERROR"))),e<=Yi.warn&&(B.warn=console.warn?console.warn.bind(console,oi("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",oi("WARN"))),e<=Yi.info&&(B.info=console.info?console.info.bind(console,oi("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",oi("INFO"))),e<=Yi.debug&&(B.debug=console.debug?console.debug.bind(console,oi("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",oi("DEBUG"))),e<=Yi.trace&&(B.trace=console.debug?console.debug.bind(console,oi("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",oi("TRACE")))},oi=t=>`%c${De().format("ss.SSS")} : ${t} : `,ds=/<br\s*\/?>/gi,$f=t=>t?Ch(t).replace(/\\n/g,"#br#").split("#br#"):[""],Kf=(()=>{let t=!1;return()=>{t||(Qf(),t=!0)}})();function Qf(){const t="data-temp-href-target";Zr.addHook("beforeSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")||"")}),Zr.addHook("afterSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)||""),e.removeAttribute(t),e.getAttribute("target")==="_blank"&&e.setAttribute("rel","noopener"))})}const Th=t=>(Kf(),Zr.sanitize(t)),Zl=(t,e)=>{var i;if(((i=e.flowchart)==null?void 0:i.htmlLabels)!==!1){const r=e.securityLevel;r==="antiscript"||r==="strict"?t=Th(t):r!=="loose"&&(t=Ch(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=e2(t))}return t},te=(t,e)=>t&&(e.dompurifyConfig?t=Zr.sanitize(Zl(t,e),e.dompurifyConfig).toString():t=Zr.sanitize(Zl(t,e),{FORBID_TAGS:["style"]}).toString(),t),Zf=(t,e)=>typeof t=="string"?te(t,e):t.flat().map(i=>te(i,e)),Jf=t=>ds.test(t),t2=t=>t.split(ds),e2=t=>t.replace(/#br#/g,"<br/>"),Ch=t=>t.replace(ds,"#br#"),i2=t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replaceAll(/\(/g,"\\("),e=e.replaceAll(/\)/g,"\\)")),e},Te=t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),r2=function(...t){const e=t.filter(i=>!isNaN(i));return Math.max(...e)},s2=function(...t){const e=t.filter(i=>!isNaN(i));return Math.min(...e)},_s=function(t){const e=t.split(/(,)/),i=[];for(let r=0;r<e.length;r++){let s=e[r];if(s===","&&r>0&&r+1<e.length){const n=e[r-1],a=e[r+1];n2(n,a)&&(s=n+","+a,r++,i.pop())}i.push(a2(s))}return i.join("")},Va=(t,e)=>Math.max(0,t.split(e).length-1),n2=(t,e)=>{const i=Va(t,"~"),r=Va(e,"~");return i===1&&r===1},a2=t=>{const e=Va(t,"~");let i=!1;if(e<=1)return t;e%2!==0&&t.startsWith("~")&&(t=t.substring(1),i=!0);const r=[...t];let s=r.indexOf("~"),n=r.lastIndexOf("~");for(;s!==-1&&n!==-1&&s!==n;)r[s]="<",r[n]=">",s=r.indexOf("~"),n=r.lastIndexOf("~");return i&&r.unshift("~"),r.join("")},Jl=()=>window.MathMLElement!==void 0,za=/\$\$(.*)\$\$/g,fi=t=>{var e;return(((e=t.match(za))==null?void 0:e.length)??0)>0},Ks=async(t,e)=>{const i=document.createElement("div");i.innerHTML=await Nr(t,e),i.id="katex-temp",i.style.visibility="hidden",i.style.position="absolute",i.style.top="0";const r=document.querySelector("body");r?.insertAdjacentElement("beforeend",i);const s={width:i.clientWidth,height:i.clientHeight};return i.remove(),s},o2=async(t,e)=>{if(!fi(t))return t;if(!Jl()&&!e.legacyMathML)return t.replace(za,"MathML is unsupported in this environment.");const{default:i}=await ae(async()=>{const{default:r}=await import("./katex-DsmCZfJr.js");return{default:r}},[],import.meta.url);return t.split(ds).map(r=>fi(r)?`
            <div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">
              ${r}
            </div>
          `:`<div>${r}</div>`).join("").replace(za,(r,s)=>i.renderToString(s,{throwOnError:!0,displayMode:!0,output:Jl()?"mathml":"htmlAndMathml"}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},Nr=async(t,e)=>te(await o2(t,e),e),mt={getRows:$f,sanitizeText:te,sanitizeTextOrArray:Zf,hasBreaks:Jf,splitBreaks:t2,lineBreakRegex:ds,removeScript:Th,getUrl:i2,evaluate:Te,getMax:r2,getMin:s2},ze=(t,e)=>e?et(t,{s:-40,l:10}):et(t,{s:-40,l:-10}),ra="#ffffff",sa="#f2f2f2";let l2=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||et(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||et(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||ze(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||ze(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||ze(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||ze(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||kt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||kt(this.tertiaryColor),this.lineColor=this.lineColor||kt(this.background),this.arrowheadColor=this.arrowheadColor||kt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||At(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||kt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Ct(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330}),this.darkMode)for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScale"+g]=At(this["cScale"+g],75);else for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScale"+g]=At(this["cScale"+g],25);for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScaleInv"+g]=this["cScaleInv"+g]||kt(this["cScale"+g]);for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this.darkMode?this["cScalePeer"+g]=this["cScalePeer"+g]||Ct(this["cScale"+g],10):this["cScalePeer"+g]=this["cScalePeer"+g]||At(this["cScale"+g],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScaleLabel"+g]=this["cScaleLabel"+g]||this.scaleLabelColor;const d=this.darkMode?-4:-1;for(let g=0;g<5;g++)this["surface"+g]=this["surface"+g]||et(this.mainBkg,{h:180,s:-15,l:d*(5+g*3)}),this["surfacePeer"+g]=this["surfacePeer"+g]||et(this.mainBkg,{h:180,s:-15,l:d*(8+g*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||et(this.primaryColor,{h:64}),this.fillType3=this.fillType3||et(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||et(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||et(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||et(this.primaryColor,{h:128}),this.fillType7=this.fillType7||et(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||et(this.primaryColor,{l:-10}),this.pie5=this.pie5||et(this.secondaryColor,{l:-10}),this.pie6=this.pie6||et(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||et(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||et(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||et(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||et(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||et(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||et(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||et(this.primaryColor,{h:-30}),this.git4=this.git4||et(this.primaryColor,{h:-60}),this.git5=this.git5||et(this.primaryColor,{h:-90}),this.git6=this.git6||et(this.primaryColor,{h:60}),this.git7=this.git7||et(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ra,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||sa}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const c2=t=>{const e=new l2;return e.calculate(t),e};let h2=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Ct(this.primaryColor,16),this.tertiaryColor=et(this.primaryColor,{h:-160}),this.primaryBorderColor=kt(this.background),this.secondaryBorderColor=ze(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ze(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.tertiaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Ct(kt("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=Xr(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=At("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=At(this.sectionBkgColor,10),this.taskBorderColor=Xr(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Xr(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;this.secondBkg=Ct(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Ct(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Ct(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||kt(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScalePeer"+d]=this["cScalePeer"+d]||Ct(this["cScale"+d],10);for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||et(this.mainBkg,{h:30,s:-30,l:-(-10+d*4)}),this["surfacePeer"+d]=this["surfacePeer"+d]||et(this.mainBkg,{h:30,s:-30,l:-(-7+d*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Ct(this.secondaryColor,20),this.git1=Ct(this.pie2||this.secondaryColor,20),this.git2=Ct(this.pie3||this.tertiaryColor,20),this.git3=Ct(this.pie4||et(this.primaryColor,{h:-30}),20),this.git4=Ct(this.pie5||et(this.primaryColor,{h:-60}),20),this.git5=Ct(this.pie6||et(this.primaryColor,{h:-90}),10),this.git6=Ct(this.pie7||et(this.primaryColor,{h:60}),10),this.git7=Ct(this.pie8||et(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||kt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||kt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ct(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ct(this.background,2)}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const u2=t=>{const e=new h2;return e.calculate(t),e};let d2=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=et(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=et(this.primaryColor,{h:-160}),this.primaryBorderColor=ze(this.primaryColor,this.darkMode),this.secondaryBorderColor=ze(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ze(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.tertiaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Xr(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||At(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||At(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=At(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||et(this["cScale"+d],{h:180});for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||et(this.mainBkg,{h:30,l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||et(this.mainBkg,{h:30,l:-(7+d*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||kt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||kt(this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Ct(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||et(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||et(this.primaryColor,{l:-10}),this.pie5=this.pie5||et(this.secondaryColor,{l:-30}),this.pie6=this.pie6||et(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||et(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||et(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||et(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||et(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||et(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||et(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||et(this.primaryColor,{h:-30}),this.git4=this.git4||et(this.primaryColor,{h:-60}),this.git5=this.git5||et(this.primaryColor,{h:-90}),this.git6=this.git6||et(this.primaryColor,{h:60}),this.git7=this.git7||et(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||At(kt(this.git0),25),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||kt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||kt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ra,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||sa}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const Ro=t=>{const e=new d2;return e.calculate(t),e};let f2=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Ct("#cde498",10),this.primaryBorderColor=ze(this.primaryColor,this.darkMode),this.secondaryBorderColor=ze(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ze(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.primaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;this.actorBorder=At(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||At(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||At(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=At(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||et(this["cScale"+d],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||et(this.mainBkg,{h:30,s:-30,l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||et(this.mainBkg,{h:30,s:-30,l:-(8+d*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||et(this.primaryColor,{l:-30}),this.pie5=this.pie5||et(this.secondaryColor,{l:-30}),this.pie6=this.pie6||et(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||et(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||et(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||et(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||et(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||et(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||et(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||et(this.primaryColor,{h:-30}),this.git4=this.git4||et(this.primaryColor,{h:-60}),this.git5=this.git5||et(this.primaryColor,{h:-90}),this.git6=this.git6||et(this.primaryColor,{h:60}),this.git7=this.git7||et(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||kt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||kt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ra,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||sa}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const p2=t=>{const e=new f2;return e.calculate(t),e};class g2{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Ct(this.contrast,55),this.background="#ffffff",this.tertiaryColor=et(this.primaryColor,{h:-160}),this.primaryBorderColor=ze(this.primaryColor,this.darkMode),this.secondaryBorderColor=ze(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ze(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.tertiaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;this.secondBkg=Ct(this.contrast,55),this.border2=this.contrast,this.actorBorder=Ct(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||kt(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this.darkMode?this["cScalePeer"+d]=this["cScalePeer"+d]||Ct(this["cScale"+d],10):this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||et(this.mainBkg,{l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||et(this.mainBkg,{l:-(8+d*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Ct(this.contrast,30),this.sectionBkgColor2=Ct(this.contrast,30),this.taskBorderColor=At(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Ct(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=At(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=At(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||et(this.primaryColor,{h:-30}),this.git4=this.pie5||et(this.primaryColor,{h:-60}),this.git5=this.pie6||et(this.primaryColor,{h:-90}),this.git6=this.pie7||et(this.primaryColor,{h:60}),this.git7=this.pie8||et(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ra,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||sa}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}}const y2=t=>{const e=new g2;return e.calculate(t),e},Zi={base:{getThemeVariables:c2},dark:{getThemeVariables:u2},default:{getThemeVariables:Ro},forest:{getThemeVariables:p2},neutral:{getThemeVariables:y2}},Ui={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},theme:"default",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","maxEdges"],legacyMathML:!1,deterministicIds:!1,fontSize:16},Eh={...Ui,deterministicIDSeed:void 0,themeCSS:void 0,themeVariables:Zi.default.getThemeVariables(),sequence:{...Ui.sequence,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{...Ui.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Ui.c4,useWidth:void 0,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}},pie:{...Ui.pie,useWidth:984},xyChart:{...Ui.xyChart,useWidth:void 0},requirement:{...Ui.requirement,useWidth:void 0},gitGraph:{...Ui.gitGraph,useMaxWidth:!1},sankey:{...Ui.sankey,useMaxWidth:!1}},Sh=(t,e="")=>Object.keys(t).reduce((i,r)=>Array.isArray(t[r])?i:typeof t[r]=="object"&&t[r]!==null?[...i,e+r,...Sh(t[r],"")]:[...i,e+r],[]),m2=new Set(Sh(Eh,"")),$t=Eh,Sn=t=>{if(B.debug("sanitizeDirective called with",t),!(typeof t!="object"||t==null)){if(Array.isArray(t)){t.forEach(e=>Sn(e));return}for(const e of Object.keys(t)){if(B.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!m2.has(e)||t[e]==null){B.debug("sanitize deleting key: ",e),delete t[e];continue}if(typeof t[e]=="object"){B.debug("sanitizing object",e),Sn(t[e]);continue}const i=["themeCSS","fontFamily","altFontFamily"];for(const r of i)e.includes(r)&&(B.debug("sanitizing css option",e),t[e]=x2(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const i=t.themeVariables[e];i?.match&&!i.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}B.debug("After sanitization",t)}},x2=t=>{let e=0,i=0;for(const r of t){if(e<i)return"{ /* ERROR: Unbalanced CSS */ }";r==="{"?e++:r==="}"&&i++}return e!==i?"{ /* ERROR: Unbalanced CSS */ }":t},wh=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Ts=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,b2=/\s*%%.*\n/gm;class vh extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}}const ts={},na=function(t,e){t=t.replace(wh,"").replace(Ts,"").replace(b2,`
`);for(const[i,{detector:r}]of Object.entries(ts))if(r(t,e))return i;throw new vh(`No diagram type detected matching given configuration for text: ${t}`)},Ah=(...t)=>{for(const{id:e,detector:i,loader:r}of t)Lh(e,i,r)},Lh=(t,e,i)=>{ts[t]?B.error(`Detector with key ${t} already exists`):ts[t]={detector:e,loader:i},B.debug(`Detector with key ${t} added${i?" with loader":""}`)},k2=t=>ts[t].loader,qa=(t,e,{depth:i=2,clobber:r=!1}={})=>{const s={depth:i,clobber:r};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(n=>qa(t,n,s)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(n=>{t.includes(n)||t.push(n)}),t):t===void 0||i<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(e!==void 0&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(n=>{typeof e[n]=="object"&&(t[n]===void 0||typeof t[n]=="object")?(t[n]===void 0&&(t[n]=Array.isArray(e[n])?[]:{}),t[n]=qa(t[n],e[n],{depth:i-1,clobber:r})):(r||typeof t[n]!="object"&&typeof e[n]!="object")&&(t[n]=e[n])}),t)},Ae=qa,Bh="â€‹",_2={curveBasis:$s,curveBasisClosed:xf,curveBasisOpen:mf,curveBumpX:yf,curveBumpY:gf,curveBundle:pf,curveCardinalClosed:ff,curveCardinalOpen:df,curveCardinal:uf,curveCatmullRomClosed:hf,curveCatmullRomOpen:cf,curveCatmullRom:lf,curveLinear:ei,curveLinearClosed:of,curveMonotoneX:af,curveMonotoneY:nf,curveNatural:sf,curveStep:rf,curveStepAfter:ef,curveStepBefore:tf},T2=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,C2=function(t,e){const i=Ih(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(i)){const a=i.map(o=>o.args);Sn(a),r=Ae(r,[...a])}else r=i.args;if(!r)return;let s=na(t,e);const n="config";return r[n]!==void 0&&(s==="flowchart-v2"&&(s="flowchart"),r[s]=r[n],delete r[n]),r},Ih=function(t,e=null){try{const i=new RegExp(`[%]{2}(?![{]${T2.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(i,"").replace(/'/gm,'"'),B.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let r;const s=[];for(;(r=Ts.exec(t))!==null;)if(r.index===Ts.lastIndex&&Ts.lastIndex++,r&&!e||e&&r[1]&&r[1].match(e)||e&&r[2]&&r[2].match(e)){const n=r[1]?r[1]:r[2],a=r[3]?r[3].trim():r[4]?JSON.parse(r[4].trim()):null;s.push({type:n,args:a})}return s.length===0?{type:t,args:null}:s.length===1?s[0]:s}catch(i){return B.error(`ERROR: ${i.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},E2=function(t){return t.replace(Ts,"")},S2=function(t,e){for(const[i,r]of e.entries())if(r.match(t))return i;return-1};function di(t,e){if(!t)return e;const i=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return _2[i]??e}function w2(t,e){const i=t.trim();if(i)return e.securityLevel!=="loose"?Fr.sanitizeUrl(i):i}const v2=(t,...e)=>{const i=t.split("."),r=i.length-1,s=i[r];let n=window;for(let a=0;a<r;a++)if(n=n[i[a]],!n){B.error(`Function name: ${t} not found in window`);return}n[s](...e)};function Dh(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function A2(t){let e,i=0;t.forEach(s=>{i+=Dh(s,e),e=s});const r=i/2;return No(t,r)}function L2(t){return t.length===1?t[0]:A2(t)}const tc=(t,e=2)=>{const i=Math.pow(10,e);return Math.round(t*i)/i},No=(t,e)=>{let i,r=e;for(const s of t){if(i){const n=Dh(s,i);if(n<r)r-=n;else{const a=r/n;if(a<=0)return i;if(a>=1)return{x:s.x,y:s.y};if(a>0&&a<1)return{x:tc((1-a)*i.x+a*s.x,5),y:tc((1-a)*i.y+a*s.y,5)}}}i=s}throw new Error("Could not find a suitable point for the given distance")},B2=(t,e,i)=>{B.info(`our points ${JSON.stringify(e)}`),e[0]!==i&&(e=e.reverse());const s=No(e,25),n=t?10:5,a=Math.atan2(e[0].y-s.y,e[0].x-s.x),o={x:0,y:0};return o.x=Math.sin(a)*n+(e[0].x+s.x)/2,o.y=-Math.cos(a)*n+(e[0].y+s.y)/2,o};function I2(t,e,i){const r=structuredClone(i);B.info("our points",r),e!=="start_left"&&e!=="start_right"&&r.reverse();const s=25+t,n=No(r,s),a=10+t*.5,o=Math.atan2(r[0].y-n.y,r[0].x-n.x),l={x:0,y:0};return e==="start_left"?(l.x=Math.sin(o+Math.PI)*a+(r[0].x+n.x)/2,l.y=-Math.cos(o+Math.PI)*a+(r[0].y+n.y)/2):e==="end_right"?(l.x=Math.sin(o-Math.PI)*a+(r[0].x+n.x)/2-5,l.y=-Math.cos(o-Math.PI)*a+(r[0].y+n.y)/2-5):e==="end_left"?(l.x=Math.sin(o)*a+(r[0].x+n.x)/2-5,l.y=-Math.cos(o)*a+(r[0].y+n.y)/2-5):(l.x=Math.sin(o)*a+(r[0].x+n.x)/2,l.y=-Math.cos(o)*a+(r[0].y+n.y)/2),l}function ii(t){let e="",i="";for(const r of t)r!==void 0&&(r.startsWith("color:")||r.startsWith("text-align:")?i=i+r+";":e=e+r+";");return{style:e,labelStyle:i}}let ec=0;const Fh=()=>(ec++,"id-"+Math.random().toString(36).substr(2,12)+"-"+ec);function D2(t){let e="";const i="0123456789abcdef",r=i.length;for(let s=0;s<t;s++)e+=i.charAt(Math.floor(Math.random()*r));return e}const Rh=t=>D2(t.length),F2=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},R2=function(t,e){const i=e.text.replace(mt.lineBreakRegex," "),[,r]=Or(e.fontSize),s=t.append("text");s.attr("x",e.x),s.attr("y",e.y),s.style("text-anchor",e.anchor),s.style("font-family",e.fontFamily),s.style("font-size",r),s.style("font-weight",e.fontWeight),s.attr("fill",e.fill),e.class!==void 0&&s.attr("class",e.class);const n=s.append("tspan");return n.attr("x",e.x+e.textMargin*2),n.attr("fill",e.fill),n.text(i),s},Nh=Do((t,e,i)=>{if(!t||(i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},i),mt.lineBreakRegex.test(t)))return t;const r=t.split(" "),s=[];let n="";return r.forEach((a,o)=>{const l=vi(`${a} `,i),h=vi(n,i);if(l>e){const{hyphenatedStrings:d,remainingWord:g}=N2(a,e,"-",i);s.push(n,...d),n=g}else h+l>=e?(s.push(n),n=a):n=[n,a].filter(Boolean).join(" ");o+1===r.length&&s.push(n)}),s.filter(a=>a!=="").join(i.joinWith)},(t,e,i)=>`${t}${e}${i.fontSize}${i.fontWeight}${i.fontFamily}${i.joinWith}`),N2=Do((t,e,i="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const s=[...t],n=[];let a="";return s.forEach((o,l)=>{const h=`${a}${o}`;if(vi(h,r)>=e){const p=l+1,d=s.length===p,g=`${h}${i}`;n.push(d?h:g),a=""}else a=h}),{hyphenatedStrings:n,remainingWord:a}},(t,e,i="-",r)=>`${t}${e}${i}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function Wa(t,e){return Oo(t,e).height}function vi(t,e){return Oo(t,e).width}const Oo=Do((t,e)=>{const{fontSize:i=12,fontFamily:r="Arial",fontWeight:s=400}=e;if(!t)return{width:0,height:0};const[,n]=Or(i),a=["sans-serif",r],o=t.split(mt.lineBreakRegex),l=[],h=yt("body");if(!h.remove)return{width:0,height:0,lineHeight:0};const u=h.append("svg");for(const d of a){let g=0;const y={width:0,height:0,lineHeight:0};for(const x of o){const _=F2();_.text=x||Bh;const w=R2(u,_).style("font-size",n).style("font-weight",s).style("font-family",d),E=(w._groups||w)[0][0].getBBox();if(E.width===0&&E.height===0)throw new Error("svg element not in render tree");y.width=Math.round(Math.max(y.width,E.width)),g=Math.round(E.height),y.height+=g,y.lineHeight=Math.round(Math.max(y.lineHeight,g))}l.push(y)}u.remove();const p=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[p]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`);class O2{constructor(e=!1,i){this.count=0,this.count=i?i.length:0,this.next=e?()=>this.count++:()=>Date.now()}}let cn;const P2=function(t){return cn=cn||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),cn.innerHTML=t,unescape(cn.textContent)};function Oh(t){return"str"in t}const M2=(t,e,i,r)=>{var s;if(!r)return;const n=(s=t.node())==null?void 0:s.getBBox();n&&t.append("text").text(r).attr("x",n.x+n.width/2).attr("y",-i).attr("class",e)},Or=t=>{if(typeof t=="number")return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]};function Qs(t,e){return Wf({},t,e)}const Rt={assignWithDepth:Ae,wrapLabel:Nh,calculateTextHeight:Wa,calculateTextWidth:vi,calculateTextDimensions:Oo,cleanAndMerge:Qs,detectInit:C2,detectDirective:Ih,isSubstringInArray:S2,interpolateToCurve:di,calcLabelPosition:L2,calcCardinalityPosition:B2,calcTerminalLabelPosition:I2,formatUrl:w2,getStylesFromArray:ii,generateId:Fh,random:Rh,runFunc:v2,entityDecode:P2,insertTitle:M2,parseFontSize:Or,InitIDGenerator:O2},V2=function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(i){return i.substring(0,i.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(i){return i.substring(0,i.length-1)}),e=e.replace(/#\w+;/g,function(i){const r=i.substring(1,i.length-1);return/^\+?\d+$/.test(r)?"ï¬‚Â°Â°"+r+"Â¶ÃŸ":"ï¬‚Â°"+r+"Â¶ÃŸ"}),e},Is=function(t){return t.replace(/ï¬‚Â°Â°/g,"&#").replace(/ï¬‚Â°/g,"&").replace(/Â¶ÃŸ/g,";")},ic="10.9.4",es=Object.freeze($t);let $e=Ae({},es),Ph,is=[],Cs=Ae({},es);const aa=(t,e)=>{let i=Ae({},t),r={};for(const s of e)zh(s),r=Ae(r,s);if(i=Ae(i,r),r.theme&&r.theme in Zi){const s=Ae({},Ph),n=Ae(s.themeVariables||{},r.themeVariables);i.theme&&i.theme in Zi&&(i.themeVariables=Zi[i.theme].getThemeVariables(n))}return Cs=i,qh(Cs),Cs},z2=t=>($e=Ae({},es),$e=Ae($e,t),t.theme&&Zi[t.theme]&&($e.themeVariables=Zi[t.theme].getThemeVariables(t.themeVariables)),aa($e,is),$e),q2=t=>{Ph=Ae({},t)},W2=t=>($e=Ae($e,t),aa($e,is),$e),Mh=()=>Ae({},$e),Vh=t=>(qh(t),Ae(Cs,t),ee()),ee=()=>Ae({},Cs),zh=t=>{t&&(["secure",...$e.secure??[]].forEach(e=>{Object.hasOwn(t,e)&&(B.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])}),Object.keys(t).forEach(e=>{e.startsWith("__")&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&zh(t[e])}))},Y2=t=>{Sn(t),t.fontFamily&&(!t.themeVariables||!t.themeVariables.fontFamily)&&(t.themeVariables={fontFamily:t.fontFamily}),is.push(t),aa($e,is)},wn=(t=$e)=>{is=[],aa(t,is)},U2={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},rc={},H2=t=>{rc[t]||(B.warn(U2[t]),rc[t]=!0)},qh=t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&H2("LAZY_LOAD_DEPRECATED")},Wh="c4",G2=t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),j2=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>ux);return{diagram:e}},void 0,import.meta.url);return{id:Wh,diagram:t}},X2={id:Wh,detector:G2,loader:j2},$2=X2,Yh="flowchart",K2=(t,e)=>{var i,r;return((i=e?.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"||((r=e?.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)},Q2=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>Q4);return{diagram:e}},void 0,import.meta.url);return{id:Yh,diagram:t}},Z2={id:Yh,detector:K2,loader:Q2},J2=Z2,Uh="flowchart-v2",tp=(t,e)=>{var i,r,s;return((i=e?.flowchart)==null?void 0:i.defaultRenderer)==="dagre-d3"||((r=e?.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)&&((s=e?.flowchart)==null?void 0:s.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(t)},ep=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>J4);return{diagram:e}},void 0,import.meta.url);return{id:Uh,diagram:t}},ip={id:Uh,detector:tp,loader:ep},rp=ip,Hh="er",sp=t=>/^\s*erDiagram/.test(t),np=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>Eb);return{diagram:e}},void 0,import.meta.url);return{id:Hh,diagram:t}},ap={id:Hh,detector:sp,loader:np},op=ap,Gh="gitGraph",lp=t=>/^\s*gitGraph/.test(t),cp=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>e5);return{diagram:e}},void 0,import.meta.url);return{id:Gh,diagram:t}},hp={id:Gh,detector:lp,loader:cp},up=hp,jh="gantt",dp=t=>/^\s*gantt/.test(t),fp=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>H5);return{diagram:e}},void 0,import.meta.url);return{id:jh,diagram:t}},pp={id:jh,detector:dp,loader:fp},gp=pp,Xh="info",yp=t=>/^\s*info/.test(t),mp=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>tk);return{diagram:e}},void 0,import.meta.url);return{id:Xh,diagram:t}},xp={id:Xh,detector:yp,loader:mp},$h="pie",bp=t=>/^\s*pie/.test(t),kp=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>xk);return{diagram:e}},void 0,import.meta.url);return{id:$h,diagram:t}},_p={id:$h,detector:bp,loader:kp},Kh="quadrantChart",Tp=t=>/^\s*quadrantChart/.test(t),Cp=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>Vk);return{diagram:e}},void 0,import.meta.url);return{id:Kh,diagram:t}},Ep={id:Kh,detector:Tp,loader:Cp},Sp=Ep,Qh="xychart",wp=t=>/^\s*xychart-beta/.test(t),vp=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>p6);return{diagram:e}},void 0,import.meta.url);return{id:Qh,diagram:t}},Ap={id:Qh,detector:wp,loader:vp},Lp=Ap,Zh="requirement",Bp=t=>/^\s*requirement(Diagram)?/.test(t),Ip=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>G6);return{diagram:e}},void 0,import.meta.url);return{id:Zh,diagram:t}},Dp={id:Zh,detector:Bp,loader:Ip},Fp=Dp,Jh="sequence",Rp=t=>/^\s*sequenceDiagram/.test(t),Np=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>Z_);return{diagram:e}},void 0,import.meta.url);return{id:Jh,diagram:t}},Op={id:Jh,detector:Rp,loader:Np},Pp=Op,t1="class",Mp=(t,e)=>{var i;return((i=e?.class)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(t)},Vp=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>F7);return{diagram:e}},void 0,import.meta.url);return{id:t1,diagram:t}},zp={id:t1,detector:Mp,loader:Vp},qp=zp,e1="classDiagram",Wp=(t,e)=>{var i;return/^\s*classDiagram/.test(t)&&((i=e?.class)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(t)},Yp=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>q7);return{diagram:e}},void 0,import.meta.url);return{id:e1,diagram:t}},Up={id:e1,detector:Wp,loader:Yp},Hp=Up,i1="state",Gp=(t,e)=>{var i;return((i=e?.state)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(t)},jp=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>IT);return{diagram:e}},void 0,import.meta.url);return{id:i1,diagram:t}},Xp={id:i1,detector:Gp,loader:jp},$p=Xp,r1="stateDiagram",Kp=(t,e)=>{var i;return!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&((i=e?.state)==null?void 0:i.defaultRenderer)==="dagre-wrapper")},Qp=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>r8);return{diagram:e}},void 0,import.meta.url);return{id:r1,diagram:t}},Zp={id:r1,detector:Kp,loader:Qp},Jp=Zp,s1="journey",tg=t=>/^\s*journey/.test(t),eg=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>w8);return{diagram:e}},void 0,import.meta.url);return{id:s1,diagram:t}},ig={id:s1,detector:tg,loader:eg},rg=ig,sg=function(t,e){for(let i of e)t.attr(i[0],i[1])},ng=function(t,e,i){let r=new Map;return i?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):(r.set("height",t),r.set("width",e)),r},Ne=function(t,e,i,r){const s=ng(e,i,r);sg(t,s)},yr=function(t,e,i,r){const s=e.node().getBBox(),n=s.width,a=s.height;B.info(`SVG bounds: ${n}x${a}`,s);let o=0,l=0;B.info(`Graph bounds: ${o}x${l}`,t),o=n+i*2,l=a+i*2,B.info(`Calculated bounds: ${o}x${l}`),Ne(e,l,o,r);const h=`${s.x-i} ${s.y-i} ${s.width+2*i} ${s.height+2*i}`;e.attr("viewBox",h)},yn={},ag=(t,e,i)=>{let r="";return t in yn&&yn[t]?r=yn[t](i):B.warn(`No theme found for ${t}`),` & {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
    fill: ${i.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${i.errorBkgColor};
  }
  & .error-text {
    fill: ${i.errorTextColor};
    stroke: ${i.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${i.lineColor};
    stroke: ${i.lineColor};
  }
  & .marker.cross {
    stroke: ${i.lineColor};
  }

  & svg {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
  }

  ${r}

  ${e}
`},og=(t,e)=>{e!==void 0&&(yn[t]=e)},lg=ag;let Po="",Mo="",Vo="";const zo=t=>te(t,ee()),Oe=()=>{Po="",Vo="",Mo=""},Pe=t=>{Po=zo(t).replace(/^\s+/g,"")},Ye=()=>Po,Ue=t=>{Vo=zo(t).replace(/\n\s+/g,`
`)},He=()=>Vo,ri=t=>{Mo=zo(t)},Ge=()=>Mo,n1=Object.freeze(Object.defineProperty({__proto__:null,clear:Oe,getAccDescription:He,getAccTitle:Ye,getDiagramTitle:Ge,setAccDescription:Ue,setAccTitle:Pe,setDiagramTitle:ri},Symbol.toStringTag,{value:"Module"})),cg=B,hg=Fo,Y=ee,ug=Vh,a1=es,dg=t=>te(t,Y()),o1=yr,fg=()=>n1,vn={},An=(t,e,i)=>{var r;if(vn[t])throw new Error(`Diagram ${t} already registered.`);vn[t]=e,i&&Lh(t,i),og(t,e.styles),(r=e.injectUtils)==null||r.call(e,cg,hg,Y,dg,o1,fg(),()=>{})},qo=t=>{if(t in vn)return vn[t];throw new pg(t)};class pg extends Error{constructor(e){super(`Diagram ${e} not found.`)}}const Zs=t=>{var e;const{securityLevel:i}=Y();let r=yt("body");if(i==="sandbox"){const a=((e=yt(`#i${t}`).node())==null?void 0:e.contentDocument)??document;r=yt(a.body)}return r.select(`#${t}`)},gg=(t,e,i)=>{B.debug(`rendering svg for syntax error
`);const r=Zs(e),s=r.append("g");r.attr("viewBox","0 0 2412 512"),Ne(r,100,512,!0),s.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),s.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),s.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),s.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),s.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),s.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),s.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),s.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${i}`)},l1={draw:gg},yg=l1,mg={db:{},renderer:l1,parser:{parser:{yy:{}},parse:()=>{}}},xg=mg,c1="flowchart-elk",bg=(t,e)=>{var i;return!!(/^\s*flowchart-elk/.test(t)||/^\s*flowchart|graph/.test(t)&&((i=e?.flowchart)==null?void 0:i.defaultRenderer)==="elk")},kg=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>Y8);return{diagram:e}},void 0,import.meta.url);return{id:c1,diagram:t}},_g={id:c1,detector:bg,loader:kg},Tg=_g,h1="timeline",Cg=t=>/^\s*timeline/.test(t),Eg=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>dC);return{diagram:e}},void 0,import.meta.url);return{id:h1,diagram:t}},Sg={id:h1,detector:Cg,loader:Eg},wg=Sg,u1="mindmap",vg=t=>/^\s*mindmap/.test(t),Ag=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>GC);return{diagram:e}},void 0,import.meta.url);return{id:u1,diagram:t}},Lg={id:u1,detector:vg,loader:Ag},Bg=Lg,d1="sankey",Ig=t=>/^\s*sankey-beta/.test(t),Dg=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>lE);return{diagram:e}},void 0,import.meta.url);return{id:d1,diagram:t}},Fg={id:d1,detector:Ig,loader:Dg},Rg=Fg,f1="block",Ng=t=>/^\s*block-beta/.test(t),Og=async()=>{const{diagram:t}=await ae(async()=>{const{diagram:e}=await Promise.resolve().then(()=>GE);return{diagram:e}},void 0,import.meta.url);return{id:f1,diagram:t}},Pg={id:f1,detector:Ng,loader:Og},Mg=Pg;let sc=!1;const Wo=()=>{sc||(sc=!0,An("error",xg,t=>t.toLowerCase().trim()==="error"),An("---",{db:{clear:()=>{}},styles:{},renderer:{draw:()=>{}},parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")}},init:()=>null},t=>t.toLowerCase().trimStart().startsWith("---")),Ah($2,Hp,qp,op,gp,xp,_p,Fp,Pp,Tg,rp,J2,Bg,wg,up,Jp,$p,rg,Sp,Rg,Lp,Mg))};class p1{constructor(e,i={}){this.text=e,this.metadata=i,this.type="graph",this.text=V2(e),this.text+=`
`;const r=ee();try{this.type=na(e,r)}catch(n){this.type="error",this.detectError=n}const s=qo(this.type);B.debug("Type "+this.type),this.db=s.db,this.renderer=s.renderer,this.parser=s.parser,this.parser.parser.yy=this.db,this.init=s.init,this.parse()}parse(){var e,i,r,s,n;if(this.detectError)throw this.detectError;(i=(e=this.db).clear)==null||i.call(e);const a=ee();(r=this.init)==null||r.call(this,a),this.metadata.title&&((n=(s=this.db).setDiagramTitle)==null||n.call(s,this.metadata.title)),this.parser.parse(this.text)}async render(e,i){await this.renderer.draw(this.text,e,i,this)}getParser(){return this.parser}getType(){return this.type}}const Vg=async(t,e={})=>{const i=na(t,ee());try{qo(i)}catch{const s=k2(i);if(!s)throw new vh(`Diagram ${i} not found.`);const{id:n,diagram:a}=await s();An(n,a)}return new p1(t,e)};let nc=[];const zg=()=>{nc.forEach(t=>{t()}),nc=[]},qg="graphics-document document";function Wg(t,e){t.attr("role",qg),e!==""&&t.attr("aria-roledescription",e)}function Yg(t,e,i,r){if(t.insert!==void 0){if(i){const s=`chart-desc-${r}`;t.attr("aria-describedby",s),t.insert("desc",":first-child").attr("id",s).text(i)}if(e){const s=`chart-title-${r}`;t.attr("aria-labelledby",s),t.insert("title",":first-child").attr("id",s).text(e)}}}const Ug=t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart();/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function g1(t){return typeof t>"u"||t===null}function Hg(t){return typeof t=="object"&&t!==null}function Gg(t){return Array.isArray(t)?t:g1(t)?[]:[t]}function jg(t,e){var i,r,s,n;if(e)for(n=Object.keys(e),i=0,r=n.length;i<r;i+=1)s=n[i],t[s]=e[s];return t}function Xg(t,e){var i="",r;for(r=0;r<e;r+=1)i+=t;return i}function $g(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Kg=g1,Qg=Hg,Zg=Gg,Jg=Xg,ty=$g,ey=jg,Ve={isNothing:Kg,isObject:Qg,toArray:Zg,repeat:Jg,isNegativeZero:ty,extend:ey};function y1(t,e){var i="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(i+='in "'+t.mark.name+'" '),i+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(i+=`

`+t.mark.snippet),r+" "+i):r}function Ds(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=y1(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ds.prototype=Object.create(Error.prototype);Ds.prototype.constructor=Ds;Ds.prototype.toString=function(e){return this.name+": "+y1(this,e)};var Gi=Ds;function Ba(t,e,i,r,s){var n="",a="",o=Math.floor(s/2)-1;return r-e>o&&(n=" ... ",e=r-o+n.length),i-r>o&&(a=" ...",i=r+o-a.length),{str:n+t.slice(e,i).replace(/\t/g,"â†’")+a,pos:r-e+n.length}}function Ia(t,e){return Ve.repeat(" ",e-t.length)+t}function iy(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var i=/\r?\n|\r|\0/g,r=[0],s=[],n,a=-1;n=i.exec(t.buffer);)s.push(n.index),r.push(n.index+n[0].length),t.position<=n.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var o="",l,h,u=Math.min(t.line+e.linesAfter,s.length).toString().length,p=e.maxLength-(e.indent+u+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)h=Ba(t.buffer,r[a-l],s[a-l],t.position-(r[a]-r[a-l]),p),o=Ve.repeat(" ",e.indent)+Ia((t.line-l+1).toString(),u)+" | "+h.str+`
`+o;for(h=Ba(t.buffer,r[a],s[a],t.position,p),o+=Ve.repeat(" ",e.indent)+Ia((t.line+1).toString(),u)+" | "+h.str+`
`,o+=Ve.repeat("-",e.indent+u+3+h.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=s.length);l++)h=Ba(t.buffer,r[a+l],s[a+l],t.position-(r[a]-r[a+l]),p),o+=Ve.repeat(" ",e.indent)+Ia((t.line+l+1).toString(),u)+" | "+h.str+`
`;return o.replace(/\n$/,"")}var ry=iy,sy=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ny=["scalar","sequence","mapping"];function ay(t){var e={};return t!==null&&Object.keys(t).forEach(function(i){t[i].forEach(function(r){e[String(r)]=i})}),e}function oy(t,e){if(e=e||{},Object.keys(e).forEach(function(i){if(sy.indexOf(i)===-1)throw new Gi('Unknown option "'+i+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(i){return i},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=ay(e.styleAliases||null),ny.indexOf(this.kind)===-1)throw new Gi('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Re=oy;function ac(t,e){var i=[];return t[e].forEach(function(r){var s=i.length;i.forEach(function(n,a){n.tag===r.tag&&n.kind===r.kind&&n.multi===r.multi&&(s=a)}),i[s]=r}),i}function ly(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,i;function r(s){s.multi?(t.multi[s.kind].push(s),t.multi.fallback.push(s)):t[s.kind][s.tag]=t.fallback[s.tag]=s}for(e=0,i=arguments.length;e<i;e+=1)arguments[e].forEach(r);return t}function Ya(t){return this.extend(t)}Ya.prototype.extend=function(e){var i=[],r=[];if(e instanceof Re)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(i=i.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Gi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(n){if(!(n instanceof Re))throw new Gi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new Gi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new Gi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(n){if(!(n instanceof Re))throw new Gi("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(Ya.prototype);return s.implicit=(this.implicit||[]).concat(i),s.explicit=(this.explicit||[]).concat(r),s.compiledImplicit=ac(s,"implicit"),s.compiledExplicit=ac(s,"explicit"),s.compiledTypeMap=ly(s.compiledImplicit,s.compiledExplicit),s};var cy=Ya,hy=new Re("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),uy=new Re("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),dy=new Re("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),fy=new cy({explicit:[hy,uy,dy]});function py(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function gy(){return null}function yy(t){return t===null}var my=new Re("tag:yaml.org,2002:null",{kind:"scalar",resolve:py,construct:gy,predicate:yy,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function xy(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function by(t){return t==="true"||t==="True"||t==="TRUE"}function ky(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var _y=new Re("tag:yaml.org,2002:bool",{kind:"scalar",resolve:xy,construct:by,predicate:ky,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Ty(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Cy(t){return 48<=t&&t<=55}function Ey(t){return 48<=t&&t<=57}function Sy(t){if(t===null)return!1;var e=t.length,i=0,r=!1,s;if(!e)return!1;if(s=t[i],(s==="-"||s==="+")&&(s=t[++i]),s==="0"){if(i+1===e)return!0;if(s=t[++i],s==="b"){for(i++;i<e;i++)if(s=t[i],s!=="_"){if(s!=="0"&&s!=="1")return!1;r=!0}return r&&s!=="_"}if(s==="x"){for(i++;i<e;i++)if(s=t[i],s!=="_"){if(!Ty(t.charCodeAt(i)))return!1;r=!0}return r&&s!=="_"}if(s==="o"){for(i++;i<e;i++)if(s=t[i],s!=="_"){if(!Cy(t.charCodeAt(i)))return!1;r=!0}return r&&s!=="_"}}if(s==="_")return!1;for(;i<e;i++)if(s=t[i],s!=="_"){if(!Ey(t.charCodeAt(i)))return!1;r=!0}return!(!r||s==="_")}function wy(t){var e=t,i=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(i=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return i*parseInt(e.slice(2),2);if(e[1]==="x")return i*parseInt(e.slice(2),16);if(e[1]==="o")return i*parseInt(e.slice(2),8)}return i*parseInt(e,10)}function vy(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Ve.isNegativeZero(t)}var Ay=new Re("tag:yaml.org,2002:int",{kind:"scalar",resolve:Sy,construct:wy,predicate:vy,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Ly=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function By(t){return!(t===null||!Ly.test(t)||t[t.length-1]==="_")}function Iy(t){var e,i;return e=t.replace(/_/g,"").toLowerCase(),i=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:i*parseFloat(e,10)}var Dy=/^[-+]?[0-9]+e/;function Fy(t,e){var i;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ve.isNegativeZero(t))return"-0.0";return i=t.toString(10),Dy.test(i)?i.replace("e",".e"):i}function Ry(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Ve.isNegativeZero(t))}var Ny=new Re("tag:yaml.org,2002:float",{kind:"scalar",resolve:By,construct:Iy,predicate:Ry,represent:Fy,defaultStyle:"lowercase"}),m1=fy.extend({implicit:[my,_y,Ay,Ny]}),Oy=m1,x1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),b1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Py(t){return t===null?!1:x1.exec(t)!==null||b1.exec(t)!==null}function My(t){var e,i,r,s,n,a,o,l=0,h=null,u,p,d;if(e=x1.exec(t),e===null&&(e=b1.exec(t)),e===null)throw new Error("Date resolve error");if(i=+e[1],r=+e[2]-1,s=+e[3],!e[4])return new Date(Date.UTC(i,r,s));if(n=+e[4],a=+e[5],o=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(u=+e[10],p=+(e[11]||0),h=(u*60+p)*6e4,e[9]==="-"&&(h=-h)),d=new Date(Date.UTC(i,r,s,n,a,o,l)),h&&d.setTime(d.getTime()-h),d}function Vy(t){return t.toISOString()}var zy=new Re("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Py,construct:My,instanceOf:Date,represent:Vy});function qy(t){return t==="<<"||t===null}var Wy=new Re("tag:yaml.org,2002:merge",{kind:"scalar",resolve:qy}),Yo=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Yy(t){if(t===null)return!1;var e,i,r=0,s=t.length,n=Yo;for(i=0;i<s;i++)if(e=n.indexOf(t.charAt(i)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function Uy(t){var e,i,r=t.replace(/[\r\n=]/g,""),s=r.length,n=Yo,a=0,o=[];for(e=0;e<s;e++)e%4===0&&e&&(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)),a=a<<6|n.indexOf(r.charAt(e));return i=s%4*6,i===0?(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)):i===18?(o.push(a>>10&255),o.push(a>>2&255)):i===12&&o.push(a>>4&255),new Uint8Array(o)}function Hy(t){var e="",i=0,r,s,n=t.length,a=Yo;for(r=0;r<n;r++)r%3===0&&r&&(e+=a[i>>18&63],e+=a[i>>12&63],e+=a[i>>6&63],e+=a[i&63]),i=(i<<8)+t[r];return s=n%3,s===0?(e+=a[i>>18&63],e+=a[i>>12&63],e+=a[i>>6&63],e+=a[i&63]):s===2?(e+=a[i>>10&63],e+=a[i>>4&63],e+=a[i<<2&63],e+=a[64]):s===1&&(e+=a[i>>2&63],e+=a[i<<4&63],e+=a[64],e+=a[64]),e}function Gy(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var jy=new Re("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Yy,construct:Uy,predicate:Gy,represent:Hy}),Xy=Object.prototype.hasOwnProperty,$y=Object.prototype.toString;function Ky(t){if(t===null)return!0;var e=[],i,r,s,n,a,o=t;for(i=0,r=o.length;i<r;i+=1){if(s=o[i],a=!1,$y.call(s)!=="[object Object]")return!1;for(n in s)if(Xy.call(s,n))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(n)===-1)e.push(n);else return!1}return!0}function Qy(t){return t!==null?t:[]}var Zy=new Re("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Ky,construct:Qy}),Jy=Object.prototype.toString;function t3(t){if(t===null)return!0;var e,i,r,s,n,a=t;for(n=new Array(a.length),e=0,i=a.length;e<i;e+=1){if(r=a[e],Jy.call(r)!=="[object Object]"||(s=Object.keys(r),s.length!==1))return!1;n[e]=[s[0],r[s[0]]]}return!0}function e3(t){if(t===null)return[];var e,i,r,s,n,a=t;for(n=new Array(a.length),e=0,i=a.length;e<i;e+=1)r=a[e],s=Object.keys(r),n[e]=[s[0],r[s[0]]];return n}var i3=new Re("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:t3,construct:e3}),r3=Object.prototype.hasOwnProperty;function s3(t){if(t===null)return!0;var e,i=t;for(e in i)if(r3.call(i,e)&&i[e]!==null)return!1;return!0}function n3(t){return t!==null?t:{}}var a3=new Re("tag:yaml.org,2002:set",{kind:"mapping",resolve:s3,construct:n3}),o3=Oy.extend({implicit:[zy,Wy],explicit:[jy,Zy,i3,a3]}),pr=Object.prototype.hasOwnProperty,Ln=1,k1=2,_1=3,Bn=4,Da=1,l3=2,oc=3,c3=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,h3=/[\x85\u2028\u2029]/,u3=/[,\[\]\{\}]/,T1=/^(?:!|!!|![a-z\-]+!)$/i,C1=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function lc(t){return Object.prototype.toString.call(t)}function Ai(t){return t===10||t===13}function Er(t){return t===9||t===32}function Je(t){return t===9||t===32||t===10||t===13}function Ur(t){return t===44||t===91||t===93||t===123||t===125}function d3(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function f3(t){return t===120?2:t===117?4:t===85?8:0}function p3(t){return 48<=t&&t<=57?t-48:-1}function cc(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"Â…":t===95?"Â ":t===76?"\u2028":t===80?"\u2029":""}function g3(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var E1=new Array(256),S1=new Array(256);for(var Wr=0;Wr<256;Wr++)E1[Wr]=cc(Wr)?1:0,S1[Wr]=cc(Wr);function y3(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||o3,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function w1(t,e){var i={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return i.snippet=ry(i),new Gi(e,i)}function wt(t,e){throw w1(t,e)}function In(t,e){t.onWarning&&t.onWarning.call(null,w1(t,e))}var hc={YAML:function(e,i,r){var s,n,a;e.version!==null&&wt(e,"duplication of %YAML directive"),r.length!==1&&wt(e,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),s===null&&wt(e,"ill-formed argument of the YAML directive"),n=parseInt(s[1],10),a=parseInt(s[2],10),n!==1&&wt(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&In(e,"unsupported YAML version of the document")},TAG:function(e,i,r){var s,n;r.length!==2&&wt(e,"TAG directive accepts exactly two arguments"),s=r[0],n=r[1],T1.test(s)||wt(e,"ill-formed tag handle (first argument) of the TAG directive"),pr.call(e.tagMap,s)&&wt(e,'there is a previously declared suffix for "'+s+'" tag handle'),C1.test(n)||wt(e,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch{wt(e,"tag prefix is malformed: "+n)}e.tagMap[s]=n}};function hr(t,e,i,r){var s,n,a,o;if(e<i){if(o=t.input.slice(e,i),r)for(s=0,n=o.length;s<n;s+=1)a=o.charCodeAt(s),a===9||32<=a&&a<=1114111||wt(t,"expected valid JSON character");else c3.test(o)&&wt(t,"the stream contains non-printable characters");t.result+=o}}function uc(t,e,i,r){var s,n,a,o;for(Ve.isObject(i)||wt(t,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(i),a=0,o=s.length;a<o;a+=1)n=s[a],pr.call(e,n)||(e[n]=i[n],r[n]=!0)}function Hr(t,e,i,r,s,n,a,o,l){var h,u;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),h=0,u=s.length;h<u;h+=1)Array.isArray(s[h])&&wt(t,"nested arrays are not supported inside keys"),typeof s=="object"&&lc(s[h])==="[object Object]"&&(s[h]="[object Object]");if(typeof s=="object"&&lc(s)==="[object Object]"&&(s="[object Object]"),s=String(s),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(n))for(h=0,u=n.length;h<u;h+=1)uc(t,e,n[h],i);else uc(t,e,n,i);else!t.json&&!pr.call(i,s)&&pr.call(e,s)&&(t.line=a||t.line,t.lineStart=o||t.lineStart,t.position=l||t.position,wt(t,"duplicated mapping key")),s==="__proto__"?Object.defineProperty(e,s,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[s]=n,delete i[s];return e}function Uo(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):wt(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ye(t,e,i){for(var r=0,s=t.input.charCodeAt(t.position);s!==0;){for(;Er(s);)s===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),s=t.input.charCodeAt(++t.position);if(e&&s===35)do s=t.input.charCodeAt(++t.position);while(s!==10&&s!==13&&s!==0);if(Ai(s))for(Uo(t),s=t.input.charCodeAt(t.position),r++,t.lineIndent=0;s===32;)t.lineIndent++,s=t.input.charCodeAt(++t.position);else break}return i!==-1&&r!==0&&t.lineIndent<i&&In(t,"deficient indentation"),r}function oa(t){var e=t.position,i;return i=t.input.charCodeAt(e),!!((i===45||i===46)&&i===t.input.charCodeAt(e+1)&&i===t.input.charCodeAt(e+2)&&(e+=3,i=t.input.charCodeAt(e),i===0||Je(i)))}function Ho(t,e){e===1?t.result+=" ":e>1&&(t.result+=Ve.repeat(`
`,e-1))}function m3(t,e,i){var r,s,n,a,o,l,h,u,p=t.kind,d=t.result,g;if(g=t.input.charCodeAt(t.position),Je(g)||Ur(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(s=t.input.charCodeAt(t.position+1),Je(s)||i&&Ur(s)))return!1;for(t.kind="scalar",t.result="",n=a=t.position,o=!1;g!==0;){if(g===58){if(s=t.input.charCodeAt(t.position+1),Je(s)||i&&Ur(s))break}else if(g===35){if(r=t.input.charCodeAt(t.position-1),Je(r))break}else{if(t.position===t.lineStart&&oa(t)||i&&Ur(g))break;if(Ai(g))if(l=t.line,h=t.lineStart,u=t.lineIndent,ye(t,!1,-1),t.lineIndent>=e){o=!0,g=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=h,t.lineIndent=u;break}}o&&(hr(t,n,a,!1),Ho(t,t.line-l),n=a=t.position,o=!1),Er(g)||(a=t.position+1),g=t.input.charCodeAt(++t.position)}return hr(t,n,a,!1),t.result?!0:(t.kind=p,t.result=d,!1)}function x3(t,e){var i,r,s;if(i=t.input.charCodeAt(t.position),i!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=s=t.position;(i=t.input.charCodeAt(t.position))!==0;)if(i===39)if(hr(t,r,t.position,!0),i=t.input.charCodeAt(++t.position),i===39)r=t.position,t.position++,s=t.position;else return!0;else Ai(i)?(hr(t,r,s,!0),Ho(t,ye(t,!1,e)),r=s=t.position):t.position===t.lineStart&&oa(t)?wt(t,"unexpected end of the document within a single quoted scalar"):(t.position++,s=t.position);wt(t,"unexpected end of the stream within a single quoted scalar")}function b3(t,e){var i,r,s,n,a,o;if(o=t.input.charCodeAt(t.position),o!==34)return!1;for(t.kind="scalar",t.result="",t.position++,i=r=t.position;(o=t.input.charCodeAt(t.position))!==0;){if(o===34)return hr(t,i,t.position,!0),t.position++,!0;if(o===92){if(hr(t,i,t.position,!0),o=t.input.charCodeAt(++t.position),Ai(o))ye(t,!1,e);else if(o<256&&E1[o])t.result+=S1[o],t.position++;else if((a=f3(o))>0){for(s=a,n=0;s>0;s--)o=t.input.charCodeAt(++t.position),(a=d3(o))>=0?n=(n<<4)+a:wt(t,"expected hexadecimal character");t.result+=g3(n),t.position++}else wt(t,"unknown escape sequence");i=r=t.position}else Ai(o)?(hr(t,i,r,!0),Ho(t,ye(t,!1,e)),i=r=t.position):t.position===t.lineStart&&oa(t)?wt(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}wt(t,"unexpected end of the stream within a double quoted scalar")}function k3(t,e){var i=!0,r,s,n,a=t.tag,o,l=t.anchor,h,u,p,d,g,y=Object.create(null),x,_,w,E;if(E=t.input.charCodeAt(t.position),E===91)u=93,g=!1,o=[];else if(E===123)u=125,g=!0,o={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),E=t.input.charCodeAt(++t.position);E!==0;){if(ye(t,!0,e),E=t.input.charCodeAt(t.position),E===u)return t.position++,t.tag=a,t.anchor=l,t.kind=g?"mapping":"sequence",t.result=o,!0;i?E===44&&wt(t,"expected the node content, but found ','"):wt(t,"missed comma between flow collection entries"),_=x=w=null,p=d=!1,E===63&&(h=t.input.charCodeAt(t.position+1),Je(h)&&(p=d=!0,t.position++,ye(t,!0,e))),r=t.line,s=t.lineStart,n=t.position,rs(t,e,Ln,!1,!0),_=t.tag,x=t.result,ye(t,!0,e),E=t.input.charCodeAt(t.position),(d||t.line===r)&&E===58&&(p=!0,E=t.input.charCodeAt(++t.position),ye(t,!0,e),rs(t,e,Ln,!1,!0),w=t.result),g?Hr(t,o,y,_,x,w,r,s,n):p?o.push(Hr(t,null,y,_,x,w,r,s,n)):o.push(x),ye(t,!0,e),E=t.input.charCodeAt(t.position),E===44?(i=!0,E=t.input.charCodeAt(++t.position)):i=!1}wt(t,"unexpected end of the stream within a flow collection")}function _3(t,e){var i,r,s=Da,n=!1,a=!1,o=e,l=0,h=!1,u,p;if(p=t.input.charCodeAt(t.position),p===124)r=!1;else if(p===62)r=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)Da===s?s=p===43?oc:l3:wt(t,"repeat of a chomping mode identifier");else if((u=p3(p))>=0)u===0?wt(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?wt(t,"repeat of an indentation width identifier"):(o=e+u-1,a=!0);else break;if(Er(p)){do p=t.input.charCodeAt(++t.position);while(Er(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!Ai(p)&&p!==0)}for(;p!==0;){for(Uo(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<o)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>o&&(o=t.lineIndent),Ai(p)){l++;continue}if(t.lineIndent<o){s===oc?t.result+=Ve.repeat(`
`,n?1+l:l):s===Da&&n&&(t.result+=`
`);break}for(r?Er(p)?(h=!0,t.result+=Ve.repeat(`
`,n?1+l:l)):h?(h=!1,t.result+=Ve.repeat(`
`,l+1)):l===0?n&&(t.result+=" "):t.result+=Ve.repeat(`
`,l):t.result+=Ve.repeat(`
`,n?1+l:l),n=!0,a=!0,l=0,i=t.position;!Ai(p)&&p!==0;)p=t.input.charCodeAt(++t.position);hr(t,i,t.position,!1)}return!0}function dc(t,e){var i,r=t.tag,s=t.anchor,n=[],a,o=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=n),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,wt(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!Je(a))));){if(o=!0,t.position++,ye(t,!0,-1)&&t.lineIndent<=e){n.push(null),l=t.input.charCodeAt(t.position);continue}if(i=t.line,rs(t,e,_1,!1,!0),n.push(t.result),ye(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===i||t.lineIndent>e)&&l!==0)wt(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return o?(t.tag=r,t.anchor=s,t.kind="sequence",t.result=n,!0):!1}function T3(t,e,i){var r,s,n,a,o,l,h=t.tag,u=t.anchor,p={},d=Object.create(null),g=null,y=null,x=null,_=!1,w=!1,E;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),E=t.input.charCodeAt(t.position);E!==0;){if(!_&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,wt(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),n=t.line,(E===63||E===58)&&Je(r))E===63?(_&&(Hr(t,p,d,g,y,null,a,o,l),g=y=x=null),w=!0,_=!0,s=!0):_?(_=!1,s=!0):wt(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,E=r;else{if(a=t.line,o=t.lineStart,l=t.position,!rs(t,i,k1,!1,!0))break;if(t.line===n){for(E=t.input.charCodeAt(t.position);Er(E);)E=t.input.charCodeAt(++t.position);if(E===58)E=t.input.charCodeAt(++t.position),Je(E)||wt(t,"a whitespace character is expected after the key-value separator within a block mapping"),_&&(Hr(t,p,d,g,y,null,a,o,l),g=y=x=null),w=!0,_=!1,s=!1,g=t.tag,y=t.result;else if(w)wt(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=h,t.anchor=u,!0}else if(w)wt(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=h,t.anchor=u,!0}if((t.line===n||t.lineIndent>e)&&(_&&(a=t.line,o=t.lineStart,l=t.position),rs(t,e,Bn,!0,s)&&(_?y=t.result:x=t.result),_||(Hr(t,p,d,g,y,x,a,o,l),g=y=x=null),ye(t,!0,-1),E=t.input.charCodeAt(t.position)),(t.line===n||t.lineIndent>e)&&E!==0)wt(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return _&&Hr(t,p,d,g,y,null,a,o,l),w&&(t.tag=h,t.anchor=u,t.kind="mapping",t.result=p),w}function C3(t){var e,i=!1,r=!1,s,n,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&wt(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(i=!0,a=t.input.charCodeAt(++t.position)):a===33?(r=!0,s="!!",a=t.input.charCodeAt(++t.position)):s="!",e=t.position,i){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(n=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):wt(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Je(a);)a===33&&(r?wt(t,"tag suffix cannot contain exclamation marks"):(s=t.input.slice(e-1,t.position+1),T1.test(s)||wt(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);n=t.input.slice(e,t.position),u3.test(n)&&wt(t,"tag suffix cannot contain flow indicator characters")}n&&!C1.test(n)&&wt(t,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{wt(t,"tag name is malformed: "+n)}return i?t.tag=n:pr.call(t.tagMap,s)?t.tag=t.tagMap[s]+n:s==="!"?t.tag="!"+n:s==="!!"?t.tag="tag:yaml.org,2002:"+n:wt(t,'undeclared tag handle "'+s+'"'),!0}function E3(t){var e,i;if(i=t.input.charCodeAt(t.position),i!==38)return!1;for(t.anchor!==null&&wt(t,"duplication of an anchor property"),i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!Je(i)&&!Ur(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&wt(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function S3(t){var e,i,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Je(r)&&!Ur(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&wt(t,"name of an alias node must contain at least one character"),i=t.input.slice(e,t.position),pr.call(t.anchorMap,i)||wt(t,'unidentified alias "'+i+'"'),t.result=t.anchorMap[i],ye(t,!0,-1),!0}function rs(t,e,i,r,s){var n,a,o,l=1,h=!1,u=!1,p,d,g,y,x,_;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,n=a=o=Bn===i||_1===i,r&&ye(t,!0,-1)&&(h=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;C3(t)||E3(t);)ye(t,!0,-1)?(h=!0,o=n,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):o=!1;if(o&&(o=h||s),(l===1||Bn===i)&&(Ln===i||k1===i?x=e:x=e+1,_=t.position-t.lineStart,l===1?o&&(dc(t,_)||T3(t,_,x))||k3(t,x)?u=!0:(a&&_3(t,x)||x3(t,x)||b3(t,x)?u=!0:S3(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&wt(t,"alias node should not have any properties")):m3(t,x,Ln===i)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=o&&dc(t,_))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&wt(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,d=t.implicitTypes.length;p<d;p+=1)if(y=t.implicitTypes[p],y.resolve(t.result)){t.result=y.construct(t.result),t.tag=y.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(pr.call(t.typeMap[t.kind||"fallback"],t.tag))y=t.typeMap[t.kind||"fallback"][t.tag];else for(y=null,g=t.typeMap.multi[t.kind||"fallback"],p=0,d=g.length;p<d;p+=1)if(t.tag.slice(0,g[p].tag.length)===g[p].tag){y=g[p];break}y||wt(t,"unknown tag !<"+t.tag+">"),t.result!==null&&y.kind!==t.kind&&wt(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+y.kind+'", not "'+t.kind+'"'),y.resolve(t.result,t.tag)?(t.result=y.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):wt(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function w3(t){var e=t.position,i,r,s,n=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(ye(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(n=!0,a=t.input.charCodeAt(++t.position),i=t.position;a!==0&&!Je(a);)a=t.input.charCodeAt(++t.position);for(r=t.input.slice(i,t.position),s=[],r.length<1&&wt(t,"directive name must not be less than one character in length");a!==0;){for(;Er(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!Ai(a));break}if(Ai(a))break;for(i=t.position;a!==0&&!Je(a);)a=t.input.charCodeAt(++t.position);s.push(t.input.slice(i,t.position))}a!==0&&Uo(t),pr.call(hc,r)?hc[r](t,r,s):In(t,'unknown document directive "'+r+'"')}if(ye(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,ye(t,!0,-1)):n&&wt(t,"directives end mark is expected"),rs(t,t.lineIndent-1,Bn,!1,!0),ye(t,!0,-1),t.checkLineBreaks&&h3.test(t.input.slice(e,t.position))&&In(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&oa(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,ye(t,!0,-1));return}if(t.position<t.length-1)wt(t,"end of the stream or a document separator is expected");else return}function v3(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var i=new y3(t,e),r=t.indexOf("\0");for(r!==-1&&(i.position=r,wt(i,"null byte is not allowed in input")),i.input+="\0";i.input.charCodeAt(i.position)===32;)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)w3(i);return i.documents}function A3(t,e){var i=v3(t,e);if(i.length!==0){if(i.length===1)return i[0];throw new Gi("expected a single document in the stream, but found more")}}var L3=A3,B3={load:L3},I3=m1,D3=B3.load;function F3(t){const e=t.match(wh);if(!e)return{text:t,metadata:{}};let i=D3(e[1],{schema:I3})??{};i=typeof i=="object"&&!Array.isArray(i)?i:{};const r={};return i.displayMode&&(r.displayMode=i.displayMode.toString()),i.title&&(r.title=i.title.toString()),i.config&&(r.config=i.config),{text:t.slice(e[0].length),metadata:r}}const R3=t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,i,r)=>"<"+i+r.replace(/="([^"]*)"/g,"='$1'")+">"),N3=t=>{const{text:e,metadata:i}=F3(t),{displayMode:r,title:s,config:n={}}=i;return r&&(n.gantt||(n.gantt={}),n.gantt.displayMode=r),{title:s,config:n,text:e}},O3=t=>{const e=Rt.detectInit(t)??{},i=Rt.detectDirective(t,"wrap");return Array.isArray(i)?e.wrap=i.some(({type:r})=>{}):i?.type==="wrap"&&(e.wrap=!0),{text:E2(t),directive:e}};function v1(t){const e=R3(t),i=N3(e),r=O3(i.text),s=Qs(i.config,r.directive);return t=Ug(r.text),{code:t,title:i.title,config:s}}const P3=5e4,M3="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",V3="sandbox",z3="loose",q3="http://www.w3.org/2000/svg",W3="http://www.w3.org/1999/xlink",Y3="http://www.w3.org/1999/xhtml",U3="100%",H3="100%",G3="border:0;margin:0;",j3="margin:0",X3="allow-top-navigation-by-user-activation allow-popups",$3='The "iframe" tag is not supported by your browser.',K3=["foreignobject"],Q3=["dominant-baseline"];function A1(t){const e=v1(t);return wn(),Y2(e.config??{}),e}async function Z3(t,e){Wo(),t=A1(t).code;try{await Go(t)}catch(i){if(e?.suppressErrors)return!1;throw i}return!0}const fc=(t,e,i=[])=>`
.${t} ${e} { ${i.join(" !important; ")} !important; }`,J3=(t,e={})=>{var i;let r="";if(t.themeCSS!==void 0&&(r+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),!La(e)){const o=t.htmlLabels||((i=t.flowchart)==null?void 0:i.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const l in e){const h=e[l];La(h.styles)||o.forEach(u=>{r+=fc(h.id,u,h.styles)}),La(h.textStyles)||(r+=fc(h.id,"tspan",h.textStyles))}}return r},tm=(t,e,i,r)=>{const s=J3(t,i),n=lg(e,s,t.themeVariables);return Uf(Hf(`${r}{${n}}`),Gf)},em=(t="",e,i)=>{let r=t;return!i&&!e&&(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=Is(r),r=r.replace(/<br>/g,"<br/>"),r},im=(t="",e)=>{var i,r;const s=(r=(i=e?.viewBox)==null?void 0:i.baseVal)!=null&&r.height?e.viewBox.baseVal.height+"px":H3,n=btoa('<body style="'+j3+'">'+t+"</body>");return`<iframe style="width:${U3};height:${s};${G3}" src="data:text/html;base64,${n}" sandbox="${X3}">
  ${$3}
</iframe>`},pc=(t,e,i,r,s)=>{const n=t.append("div");n.attr("id",i),r&&n.attr("style",r);const a=n.append("svg").attr("id",e).attr("width","100%").attr("xmlns",q3);return s&&a.attr("xmlns:xlink",s),a.append("g"),t};function gc(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const rm=(t,e,i,r)=>{var s,n,a;(s=t.getElementById(e))==null||s.remove(),(n=t.getElementById(i))==null||n.remove(),(a=t.getElementById(r))==null||a.remove()},sm=async function(t,e,i){var r,s,n,a,o,l;Wo();const h=A1(e);e=h.code;const u=ee();B.debug(u),e.length>(u?.maxTextSize??P3)&&(e=M3);const p="#"+t,d="i"+t,g="#"+d,y="d"+t,x="#"+y;let _=yt("body");const w=u.securityLevel===V3,E=u.securityLevel===z3,R=u.fontFamily;if(i!==void 0){if(i&&(i.innerHTML=""),w){const I=gc(yt(i),d);_=yt(I.nodes()[0].contentDocument.body),_.node().style.margin=0}else _=yt(i);pc(_,t,y,`font-family: ${R}`,W3)}else{if(rm(document,t,y,d),w){const I=gc(yt("body"),d);_=yt(I.nodes()[0].contentDocument.body),_.node().style.margin=0}else _=yt("body");pc(_,t,y)}let v,T;try{v=await Go(e,{title:h.title})}catch(I){v=new p1("error"),T=I}const k=_.select(x).node(),A=v.type,S=k.firstChild,m=S.firstChild,C=(s=(r=v.renderer).getClasses)==null?void 0:s.call(r,e,v),f=tm(u,A,C,p),L=document.createElement("style");L.innerHTML=f,S.insertBefore(L,m);try{await v.renderer.draw(e,t,ic,v)}catch(I){throw yg.draw(e,t,ic),I}const b=_.select(`${x} svg`),P=(a=(n=v.db).getAccTitle)==null?void 0:a.call(n),U=(l=(o=v.db).getAccDescription)==null?void 0:l.call(o);am(A,b,P,U),_.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",Y3);let N=_.select(x).node().innerHTML;if(B.debug("config.arrowMarkerAbsolute",u.arrowMarkerAbsolute),N=em(N,w,Te(u.arrowMarkerAbsolute)),w){const I=_.select(x+" svg").node();N=im(N,I)}else E||(N=Zr.sanitize(N,{ADD_TAGS:K3,ADD_ATTR:Q3}));if(zg(),T)throw T;const F=yt(w?g:x).node();return F&&"remove"in F&&F.remove(),{svg:N,bindFunctions:v.db.bindFunctions}};function nm(t={}){var e;t?.fontFamily&&!((e=t.themeVariables)!=null&&e.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),q2(t),t?.theme&&t.theme in Zi?t.themeVariables=Zi[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Zi.default.getThemeVariables(t.themeVariables));const i=typeof t=="object"?z2(t):Mh();Fo(i.logLevel),Wo()}const Go=(t,e={})=>{const{code:i}=v1(t);return Vg(i,e)};function am(t,e,i,r){Wg(e,t),Yg(e,i,r,e.attr("id"))}const wr=Object.freeze({render:sm,parse:Z3,getDiagramFromText:Go,initialize:nm,getConfig:ee,setConfig:Vh,getSiteConfig:Mh,updateSiteConfig:W2,reset:()=>{wn()},globalReset:()=>{wn(es)},defaultConfig:es});Fo(ee().logLevel);wn(ee());const om=async()=>{B.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(ts).map(async([i,{detector:r,loader:s}])=>{if(s)try{qo(i)}catch{try{const{diagram:a,id:o}=await s();An(o,a,r)}catch(a){throw B.error(`Failed to load external diagram with key ${i}. Removing from detectors.`),delete ts[i],a}}}))).filter(i=>i.status==="rejected");if(e.length>0){B.error(`Failed to load ${e.length} external diagrams`);for(const i of e)B.error(i);throw new Error(`Failed to load ${e.length} external diagrams`)}},lm=(t,e,i)=>{B.warn(t),Oh(t)?(i&&i(t.str,t.hash),e.push({...t,message:t.str,error:t})):(i&&i(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},L1=async function(t={querySelector:".mermaid"}){try{await cm(t)}catch(e){if(Oh(e)&&B.error(e.str),Li.parseError&&Li.parseError(e),!t.suppressErrors)throw B.error("Use the suppressErrors option to suppress these errors"),e}},cm=async function({postRenderCallback:t,querySelector:e,nodes:i}={querySelector:".mermaid"}){const r=wr.getConfig();B.debug(`${t?"":"No "}Callback function found`);let s;if(i)s=i;else if(e)s=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");B.debug(`Found ${s.length} diagrams`),r?.startOnLoad!==void 0&&(B.debug("Start On Load: "+r?.startOnLoad),wr.updateSiteConfig({startOnLoad:r?.startOnLoad}));const n=new Rt.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let a;const o=[];for(const l of Array.from(s)){B.info("Rendering diagram: "+l.id);/*! Check if previously processed */if(l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const h=`mermaid-${n.next()}`;a=l.innerHTML,a=kh(Rt.entityDecode(a)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=Rt.detectInit(a);u&&B.debug("Detected early reinit: ",u);try{const{svg:p,bindFunctions:d}=await F1(h,a,l);l.innerHTML=p,t&&await t(h),d&&d(l)}catch(p){lm(p,o,Li.parseError)}}if(o.length>0)throw o[0]},B1=function(t){wr.initialize(t)},hm=async function(t,e,i){B.warn("mermaid.init is deprecated. Please use run instead."),t&&B1(t);const r={postRenderCallback:i,querySelector:".mermaid"};typeof e=="string"?r.querySelector=e:e&&(e instanceof HTMLElement?r.nodes=[e]:r.nodes=e),await L1(r)},um=async(t,{lazyLoad:e=!0}={})=>{Ah(...t),e===!1&&await om()},I1=function(){if(Li.startOnLoad){const{startOnLoad:t}=wr.getConfig();t&&Li.run().catch(e=>B.error("Mermaid failed to initialize",e))}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",I1,!1)}const dm=function(t){Li.parseError=t},Dn=[];let Fa=!1;const D1=async()=>{if(!Fa){for(Fa=!0;Dn.length>0;){const t=Dn.shift();if(t)try{await t()}catch(e){B.error("Error executing queue",e)}}Fa=!1}},fm=async(t,e)=>new Promise((i,r)=>{const s=()=>new Promise((n,a)=>{wr.parse(t,e).then(o=>{n(o),i(o)},o=>{var l;B.error("Error parsing",o),(l=Li.parseError)==null||l.call(Li,o),a(o),r(o)})});Dn.push(s),D1().catch(r)}),F1=(t,e,i)=>new Promise((r,s)=>{const n=()=>new Promise((a,o)=>{wr.render(t,e,i).then(l=>{a(l),r(l)},l=>{var h;B.error("Error parsing",l),(h=Li.parseError)==null||h.call(Li,l),o(l),s(l)})});Dn.push(n),D1().catch(s)}),Li={startOnLoad:!0,mermaidAPI:wr,parse:fm,render:F1,init:hm,run:L1,registerExternalDiagrams:um,initialize:B1,parseError:void 0,contentLoaded:I1,setParseErrorHandler:dm,detectType:na},la=(t,e)=>{const i=t.append("rect");if(i.attr("x",e.x),i.attr("y",e.y),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("width",e.width),i.attr("height",e.height),e.name&&i.attr("name",e.name),e.rx!==void 0&&i.attr("rx",e.rx),e.ry!==void 0&&i.attr("ry",e.ry),e.attrs!==void 0)for(const r in e.attrs)i.attr(r,e.attrs[r]);return e.class!==void 0&&i.attr("class",e.class),i},R1=(t,e)=>{const i={x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,stroke:e.stroke,class:"rect"};la(t,i).lower()},pm=(t,e)=>{const i=e.text.replace(ds," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.attr("class","legend"),r.style("text-anchor",e.anchor),e.class!==void 0&&r.attr("class",e.class);const s=r.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.text(i),r},gm=(t,e,i,r)=>{const s=t.append("image");s.attr("x",e),s.attr("y",i);const n=Fr.sanitizeUrl(r);s.attr("xlink:href",n)},ym=(t,e,i,r)=>{const s=t.append("use");s.attr("x",e),s.attr("y",i);const n=Fr.sanitizeUrl(r);s.attr("xlink:href",`#${n}`)},Pr=()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0}),jo=()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0});var Fn=(function(){var t=function(pt,ut,ot,lt){for(ot=ot||{},lt=pt.length;lt--;ot[pt[lt]]=ut);return ot},e=[1,24],i=[1,25],r=[1,26],s=[1,27],n=[1,28],a=[1,63],o=[1,64],l=[1,65],h=[1,66],u=[1,67],p=[1,68],d=[1,69],g=[1,29],y=[1,30],x=[1,31],_=[1,32],w=[1,33],E=[1,34],R=[1,35],v=[1,36],T=[1,37],k=[1,38],A=[1,39],S=[1,40],m=[1,41],C=[1,42],f=[1,43],L=[1,44],b=[1,45],P=[1,46],U=[1,47],N=[1,48],D=[1,50],F=[1,51],I=[1,52],M=[1,53],z=[1,54],st=[1,55],j=[1,56],dt=[1,57],K=[1,58],G=[1,59],tt=[1,60],nt=[14,42],Q=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],J=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],O=[1,82],at=[1,83],W=[1,84],ft=[1,85],V=[12,14,42],vt=[12,14,33,42],X=[12,14,33,42,76,77,79,80],St=[12,33],bt=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],Vt={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:function(ut,ot,lt,ht,$,rt,it){var ct=rt.length-1;switch($){case 3:ht.setDirection("TB");break;case 4:ht.setDirection("BT");break;case 5:ht.setDirection("RL");break;case 6:ht.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:ht.setC4Type(rt[ct-3]);break;case 19:ht.setTitle(rt[ct].substring(6)),this.$=rt[ct].substring(6);break;case 20:ht.setAccDescription(rt[ct].substring(15)),this.$=rt[ct].substring(15);break;case 21:this.$=rt[ct].trim(),ht.setTitle(this.$);break;case 22:case 23:this.$=rt[ct].trim(),ht.setAccDescription(this.$);break;case 28:case 29:rt[ct].splice(2,0,"ENTERPRISE"),ht.addPersonOrSystemBoundary(...rt[ct]),this.$=rt[ct];break;case 30:ht.addPersonOrSystemBoundary(...rt[ct]),this.$=rt[ct];break;case 31:rt[ct].splice(2,0,"CONTAINER"),ht.addContainerBoundary(...rt[ct]),this.$=rt[ct];break;case 32:ht.addDeploymentNode("node",...rt[ct]),this.$=rt[ct];break;case 33:ht.addDeploymentNode("nodeL",...rt[ct]),this.$=rt[ct];break;case 34:ht.addDeploymentNode("nodeR",...rt[ct]),this.$=rt[ct];break;case 35:ht.popBoundaryParseStack();break;case 39:ht.addPersonOrSystem("person",...rt[ct]),this.$=rt[ct];break;case 40:ht.addPersonOrSystem("external_person",...rt[ct]),this.$=rt[ct];break;case 41:ht.addPersonOrSystem("system",...rt[ct]),this.$=rt[ct];break;case 42:ht.addPersonOrSystem("system_db",...rt[ct]),this.$=rt[ct];break;case 43:ht.addPersonOrSystem("system_queue",...rt[ct]),this.$=rt[ct];break;case 44:ht.addPersonOrSystem("external_system",...rt[ct]),this.$=rt[ct];break;case 45:ht.addPersonOrSystem("external_system_db",...rt[ct]),this.$=rt[ct];break;case 46:ht.addPersonOrSystem("external_system_queue",...rt[ct]),this.$=rt[ct];break;case 47:ht.addContainer("container",...rt[ct]),this.$=rt[ct];break;case 48:ht.addContainer("container_db",...rt[ct]),this.$=rt[ct];break;case 49:ht.addContainer("container_queue",...rt[ct]),this.$=rt[ct];break;case 50:ht.addContainer("external_container",...rt[ct]),this.$=rt[ct];break;case 51:ht.addContainer("external_container_db",...rt[ct]),this.$=rt[ct];break;case 52:ht.addContainer("external_container_queue",...rt[ct]),this.$=rt[ct];break;case 53:ht.addComponent("component",...rt[ct]),this.$=rt[ct];break;case 54:ht.addComponent("component_db",...rt[ct]),this.$=rt[ct];break;case 55:ht.addComponent("component_queue",...rt[ct]),this.$=rt[ct];break;case 56:ht.addComponent("external_component",...rt[ct]),this.$=rt[ct];break;case 57:ht.addComponent("external_component_db",...rt[ct]),this.$=rt[ct];break;case 58:ht.addComponent("external_component_queue",...rt[ct]),this.$=rt[ct];break;case 60:ht.addRel("rel",...rt[ct]),this.$=rt[ct];break;case 61:ht.addRel("birel",...rt[ct]),this.$=rt[ct];break;case 62:ht.addRel("rel_u",...rt[ct]),this.$=rt[ct];break;case 63:ht.addRel("rel_d",...rt[ct]),this.$=rt[ct];break;case 64:ht.addRel("rel_l",...rt[ct]),this.$=rt[ct];break;case 65:ht.addRel("rel_r",...rt[ct]),this.$=rt[ct];break;case 66:ht.addRel("rel_b",...rt[ct]),this.$=rt[ct];break;case 67:rt[ct].splice(0,1),ht.addRel("rel",...rt[ct]),this.$=rt[ct];break;case 68:ht.updateElStyle("update_el_style",...rt[ct]),this.$=rt[ct];break;case 69:ht.updateRelStyle("update_rel_style",...rt[ct]),this.$=rt[ct];break;case 70:ht.updateLayoutConfig("update_layout_config",...rt[ct]),this.$=rt[ct];break;case 71:this.$=[rt[ct]];break;case 72:rt[ct].unshift(rt[ct-1]),this.$=rt[ct];break;case 73:case 75:this.$=rt[ct].trim();break;case 74:let re={};re[rt[ct-1].trim()]=rt[ct].trim(),this.$=re;break;case 76:this.$="";break}},table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:w,49:E,50:R,51:v,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{13:70,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:w,49:E,50:R,51:v,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{13:71,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:w,49:E,50:R,51:v,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{13:72,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:w,49:E,50:R,51:v,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{13:73,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:w,49:E,50:R,51:v,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{14:[1,74]},t(nt,[2,13],{43:23,29:49,30:61,32:62,20:75,34:a,36:o,37:l,38:h,39:u,40:p,41:d,44:g,45:y,46:x,47:_,48:w,49:E,50:R,51:v,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt}),t(nt,[2,14]),t(Q,[2,16],{12:[1,76]}),t(nt,[2,36],{12:[1,77]}),t(J,[2,19]),t(J,[2,20]),{25:[1,78]},{27:[1,79]},t(J,[2,23]),{35:80,75:81,76:O,77:at,79:W,80:ft},{35:86,75:81,76:O,77:at,79:W,80:ft},{35:87,75:81,76:O,77:at,79:W,80:ft},{35:88,75:81,76:O,77:at,79:W,80:ft},{35:89,75:81,76:O,77:at,79:W,80:ft},{35:90,75:81,76:O,77:at,79:W,80:ft},{35:91,75:81,76:O,77:at,79:W,80:ft},{35:92,75:81,76:O,77:at,79:W,80:ft},{35:93,75:81,76:O,77:at,79:W,80:ft},{35:94,75:81,76:O,77:at,79:W,80:ft},{35:95,75:81,76:O,77:at,79:W,80:ft},{35:96,75:81,76:O,77:at,79:W,80:ft},{35:97,75:81,76:O,77:at,79:W,80:ft},{35:98,75:81,76:O,77:at,79:W,80:ft},{35:99,75:81,76:O,77:at,79:W,80:ft},{35:100,75:81,76:O,77:at,79:W,80:ft},{35:101,75:81,76:O,77:at,79:W,80:ft},{35:102,75:81,76:O,77:at,79:W,80:ft},{35:103,75:81,76:O,77:at,79:W,80:ft},{35:104,75:81,76:O,77:at,79:W,80:ft},t(V,[2,59]),{35:105,75:81,76:O,77:at,79:W,80:ft},{35:106,75:81,76:O,77:at,79:W,80:ft},{35:107,75:81,76:O,77:at,79:W,80:ft},{35:108,75:81,76:O,77:at,79:W,80:ft},{35:109,75:81,76:O,77:at,79:W,80:ft},{35:110,75:81,76:O,77:at,79:W,80:ft},{35:111,75:81,76:O,77:at,79:W,80:ft},{35:112,75:81,76:O,77:at,79:W,80:ft},{35:113,75:81,76:O,77:at,79:W,80:ft},{35:114,75:81,76:O,77:at,79:W,80:ft},{35:115,75:81,76:O,77:at,79:W,80:ft},{20:116,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:w,49:E,50:R,51:v,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{12:[1,118],33:[1,117]},{35:119,75:81,76:O,77:at,79:W,80:ft},{35:120,75:81,76:O,77:at,79:W,80:ft},{35:121,75:81,76:O,77:at,79:W,80:ft},{35:122,75:81,76:O,77:at,79:W,80:ft},{35:123,75:81,76:O,77:at,79:W,80:ft},{35:124,75:81,76:O,77:at,79:W,80:ft},{35:125,75:81,76:O,77:at,79:W,80:ft},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},t(nt,[2,15]),t(Q,[2,17],{21:22,19:130,22:e,23:i,24:r,26:s,28:n}),t(nt,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:e,23:i,24:r,26:s,28:n,34:a,36:o,37:l,38:h,39:u,40:p,41:d,44:g,45:y,46:x,47:_,48:w,49:E,50:R,51:v,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:L,60:b,61:P,62:U,63:N,64:D,65:F,66:I,67:M,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt}),t(J,[2,21]),t(J,[2,22]),t(V,[2,39]),t(vt,[2,71],{75:81,35:132,76:O,77:at,79:W,80:ft}),t(X,[2,73]),{78:[1,133]},t(X,[2,75]),t(X,[2,76]),t(V,[2,40]),t(V,[2,41]),t(V,[2,42]),t(V,[2,43]),t(V,[2,44]),t(V,[2,45]),t(V,[2,46]),t(V,[2,47]),t(V,[2,48]),t(V,[2,49]),t(V,[2,50]),t(V,[2,51]),t(V,[2,52]),t(V,[2,53]),t(V,[2,54]),t(V,[2,55]),t(V,[2,56]),t(V,[2,57]),t(V,[2,58]),t(V,[2,60]),t(V,[2,61]),t(V,[2,62]),t(V,[2,63]),t(V,[2,64]),t(V,[2,65]),t(V,[2,66]),t(V,[2,67]),t(V,[2,68]),t(V,[2,69]),t(V,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},t(St,[2,28]),t(St,[2,29]),t(St,[2,30]),t(St,[2,31]),t(St,[2,32]),t(St,[2,33]),t(St,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},t(Q,[2,18]),t(nt,[2,38]),t(vt,[2,72]),t(X,[2,74]),t(V,[2,24]),t(V,[2,35]),t(bt,[2,25]),t(bt,[2,26],{12:[1,138]}),t(bt,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:function(ut,ot){if(ot.recoverable)this.trace(ut);else{var lt=new Error(ut);throw lt.hash=ot,lt}},parse:function(ut){var ot=this,lt=[0],ht=[],$=[null],rt=[],it=this.table,ct="",re=0,Qt=0,de=2,zt=1,Gt=rt.slice.call(arguments,1),qt=Object.create(this.lexer),Ee={yy:{}};for(var fe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,fe)&&(Ee.yy[fe]=this.yy[fe]);qt.setInput(ut,Ee.yy),Ee.yy.lexer=qt,Ee.yy.parser=this,typeof qt.yylloc>"u"&&(qt.yylloc={});var sr=qt.yylloc;rt.push(sr);var Vr=qt.options&&qt.options.ranges;typeof Ee.yy.parseError=="function"?this.parseError=Ee.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function me(){var Be;return Be=ht.pop()||qt.lex()||zt,typeof Be!="number"&&(Be instanceof Array&&(ht=Be,Be=ht.pop()),Be=ot.symbols_[Be]||Be),Be}for(var jt,se,Ot,Zt,Dt={},Yt,Ut,Pt,Nt;;){if(se=lt[lt.length-1],this.defaultActions[se]?Ot=this.defaultActions[se]:((jt===null||typeof jt>"u")&&(jt=me()),Ot=it[se]&&it[se][jt]),typeof Ot>"u"||!Ot.length||!Ot[0]){var It="";Nt=[];for(Yt in it[se])this.terminals_[Yt]&&Yt>de&&Nt.push("'"+this.terminals_[Yt]+"'");qt.showPosition?It="Parse error on line "+(re+1)+`:
`+qt.showPosition()+`
Expecting `+Nt.join(", ")+", got '"+(this.terminals_[jt]||jt)+"'":It="Parse error on line "+(re+1)+": Unexpected "+(jt==zt?"end of input":"'"+(this.terminals_[jt]||jt)+"'"),this.parseError(It,{text:qt.match,token:this.terminals_[jt]||jt,line:qt.yylineno,loc:sr,expected:Nt})}if(Ot[0]instanceof Array&&Ot.length>1)throw new Error("Parse Error: multiple actions possible at state: "+se+", token: "+jt);switch(Ot[0]){case 1:lt.push(jt),$.push(qt.yytext),rt.push(qt.yylloc),lt.push(Ot[1]),jt=null,Qt=qt.yyleng,ct=qt.yytext,re=qt.yylineno,sr=qt.yylloc;break;case 2:if(Ut=this.productions_[Ot[1]][1],Dt.$=$[$.length-Ut],Dt._$={first_line:rt[rt.length-(Ut||1)].first_line,last_line:rt[rt.length-1].last_line,first_column:rt[rt.length-(Ut||1)].first_column,last_column:rt[rt.length-1].last_column},Vr&&(Dt._$.range=[rt[rt.length-(Ut||1)].range[0],rt[rt.length-1].range[1]]),Zt=this.performAction.apply(Dt,[ct,Qt,re,Ee.yy,Ot[1],$,rt].concat(Gt)),typeof Zt<"u")return Zt;Ut&&(lt=lt.slice(0,-1*Ut*2),$=$.slice(0,-1*Ut),rt=rt.slice(0,-1*Ut)),lt.push(this.productions_[Ot[1]][0]),$.push(Dt.$),rt.push(Dt._$),Pt=it[lt[lt.length-2]][lt[lt.length-1]],lt.push(Pt);break;case 3:return!0}}return!0}},Bt=(function(){var pt={EOF:1,parseError:function(ot,lt){if(this.yy.parser)this.yy.parser.parseError(ot,lt);else throw new Error(ot)},setInput:function(ut,ot){return this.yy=ot||this.yy||{},this._input=ut,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ut=this._input[0];this.yytext+=ut,this.yyleng++,this.offset++,this.match+=ut,this.matched+=ut;var ot=ut.match(/(?:\r\n?|\n).*/g);return ot?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ut},unput:function(ut){var ot=ut.length,lt=ut.split(/(?:\r\n?|\n)/g);this._input=ut+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ot),this.offset-=ot;var ht=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lt.length-1&&(this.yylineno-=lt.length-1);var $=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lt?(lt.length===ht.length?this.yylloc.first_column:0)+ht[ht.length-lt.length].length-lt[0].length:this.yylloc.first_column-ot},this.options.ranges&&(this.yylloc.range=[$[0],$[0]+this.yyleng-ot]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(ut){this.unput(this.match.slice(ut))},pastInput:function(){var ut=this.matched.substr(0,this.matched.length-this.match.length);return(ut.length>20?"...":"")+ut.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var ut=this.match;return ut.length<20&&(ut+=this._input.substr(0,20-ut.length)),(ut.substr(0,20)+(ut.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var ut=this.pastInput(),ot=new Array(ut.length+1).join("-");return ut+this.upcomingInput()+`
`+ot+"^"},test_match:function(ut,ot){var lt,ht,$;if(this.options.backtrack_lexer&&($={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&($.yylloc.range=this.yylloc.range.slice(0))),ht=ut[0].match(/(?:\r\n?|\n).*/g),ht&&(this.yylineno+=ht.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ht?ht[ht.length-1].length-ht[ht.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ut[0].length},this.yytext+=ut[0],this.match+=ut[0],this.matches=ut,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ut[0].length),this.matched+=ut[0],lt=this.performAction.call(this,this.yy,this,ot,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),lt)return lt;if(this._backtrack){for(var rt in $)this[rt]=$[rt];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ut,ot,lt,ht;this._more||(this.yytext="",this.match="");for(var $=this._currentRules(),rt=0;rt<$.length;rt++)if(lt=this._input.match(this.rules[$[rt]]),lt&&(!ot||lt[0].length>ot[0].length)){if(ot=lt,ht=rt,this.options.backtrack_lexer){if(ut=this.test_match(lt,$[rt]),ut!==!1)return ut;if(this._backtrack){ot=!1;continue}else return!1}else if(!this.options.flex)break}return ot?(ut=this.test_match(ot,$[ht]),ut!==!1?ut:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ot=this.next();return ot||this.lex()},begin:function(ot){this.conditionStack.push(ot)},popState:function(){var ot=this.conditionStack.length-1;return ot>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ot){return ot=this.conditionStack.length-1-Math.abs(ot||0),ot>=0?this.conditionStack[ot]:"INITIAL"},pushState:function(ot){this.begin(ot)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(ot,lt,ht,$){switch(ht){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:break;case 14:c;break;case 15:return 12;case 16:break;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:return this.begin("node"),39;case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:return this.begin("rel_u"),66;case 53:return this.begin("rel_u"),66;case 54:return this.begin("rel_d"),67;case 55:return this.begin("rel_d"),67;case 56:return this.begin("rel_l"),68;case 57:return this.begin("rel_l"),68;case 58:return this.begin("rel_r"),69;case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:this.popState(),this.popState();break;case 69:return 80;case 70:break;case 71:return 80;case 72:this.begin("string");break;case 73:this.popState();break;case 74:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 79:this.popState(),this.popState();break;case 80:return"STR";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}},rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}};return pt})();Vt.lexer=Bt;function Wt(){this.yy={}}return Wt.prototype=Vt,Vt.Parser=Wt,new Wt})();Fn.parser=Fn;const mm=Fn;let _i=[],ur=[""],qe="global",bi="",Bi=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Fs=[],Xo="",$o=!1,Rn=4,Nn=2;var N1;const xm=function(){return N1},bm=function(t){N1=te(t,Y())},km=function(t,e,i,r,s,n,a,o,l){if(t==null||e===void 0||e===null||i===void 0||i===null||r===void 0||r===null)return;let h={};const u=Fs.find(p=>p.from===e&&p.to===i);if(u?h=u:Fs.push(h),h.type=t,h.from=e,h.to=i,h.label={text:r},s==null)h.techn={text:""};else if(typeof s=="object"){let[p,d]=Object.entries(s)[0];h[p]={text:d}}else h.techn={text:s};if(n==null)h.descr={text:""};else if(typeof n=="object"){let[p,d]=Object.entries(n)[0];h[p]={text:d}}else h.descr={text:n};if(typeof a=="object"){let[p,d]=Object.entries(a)[0];h[p]=d}else h.sprite=a;if(typeof o=="object"){let[p,d]=Object.entries(o)[0];h[p]=d}else h.tags=o;if(typeof l=="object"){let[p,d]=Object.entries(l)[0];h[p]=d}else h.link=l;h.wrap=mr()},_m=function(t,e,i,r,s,n,a){if(e===null||i===null)return;let o={};const l=_i.find(h=>h.alias===e);if(l&&e===l.alias?o=l:(o.alias=e,_i.push(o)),i==null?o.label={text:""}:o.label={text:i},r==null)o.descr={text:""};else if(typeof r=="object"){let[h,u]=Object.entries(r)[0];o[h]={text:u}}else o.descr={text:r};if(typeof s=="object"){let[h,u]=Object.entries(s)[0];o[h]=u}else o.sprite=s;if(typeof n=="object"){let[h,u]=Object.entries(n)[0];o[h]=u}else o.tags=n;if(typeof a=="object"){let[h,u]=Object.entries(a)[0];o[h]=u}else o.link=a;o.typeC4Shape={text:t},o.parentBoundary=qe,o.wrap=mr()},Tm=function(t,e,i,r,s,n,a,o){if(e===null||i===null)return;let l={};const h=_i.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,_i.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.techn={text:""};else if(typeof r=="object"){let[u,p]=Object.entries(r)[0];l[u]={text:p}}else l.techn={text:r};if(s==null)l.descr={text:""};else if(typeof s=="object"){let[u,p]=Object.entries(s)[0];l[u]={text:p}}else l.descr={text:s};if(typeof n=="object"){let[u,p]=Object.entries(n)[0];l[u]=p}else l.sprite=n;if(typeof a=="object"){let[u,p]=Object.entries(a)[0];l[u]=p}else l.tags=a;if(typeof o=="object"){let[u,p]=Object.entries(o)[0];l[u]=p}else l.link=o;l.wrap=mr(),l.typeC4Shape={text:t},l.parentBoundary=qe},Cm=function(t,e,i,r,s,n,a,o){if(e===null||i===null)return;let l={};const h=_i.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,_i.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.techn={text:""};else if(typeof r=="object"){let[u,p]=Object.entries(r)[0];l[u]={text:p}}else l.techn={text:r};if(s==null)l.descr={text:""};else if(typeof s=="object"){let[u,p]=Object.entries(s)[0];l[u]={text:p}}else l.descr={text:s};if(typeof n=="object"){let[u,p]=Object.entries(n)[0];l[u]=p}else l.sprite=n;if(typeof a=="object"){let[u,p]=Object.entries(a)[0];l[u]=p}else l.tags=a;if(typeof o=="object"){let[u,p]=Object.entries(o)[0];l[u]=p}else l.link=o;l.wrap=mr(),l.typeC4Shape={text:t},l.parentBoundary=qe},Em=function(t,e,i,r,s){if(t===null||e===null)return;let n={};const a=Bi.find(o=>o.alias===t);if(a&&t===a.alias?n=a:(n.alias=t,Bi.push(n)),e==null?n.label={text:""}:n.label={text:e},i==null)n.type={text:"system"};else if(typeof i=="object"){let[o,l]=Object.entries(i)[0];n[o]={text:l}}else n.type={text:i};if(typeof r=="object"){let[o,l]=Object.entries(r)[0];n[o]=l}else n.tags=r;if(typeof s=="object"){let[o,l]=Object.entries(s)[0];n[o]=l}else n.link=s;n.parentBoundary=qe,n.wrap=mr(),bi=qe,qe=t,ur.push(bi)},Sm=function(t,e,i,r,s){if(t===null||e===null)return;let n={};const a=Bi.find(o=>o.alias===t);if(a&&t===a.alias?n=a:(n.alias=t,Bi.push(n)),e==null?n.label={text:""}:n.label={text:e},i==null)n.type={text:"container"};else if(typeof i=="object"){let[o,l]=Object.entries(i)[0];n[o]={text:l}}else n.type={text:i};if(typeof r=="object"){let[o,l]=Object.entries(r)[0];n[o]=l}else n.tags=r;if(typeof s=="object"){let[o,l]=Object.entries(s)[0];n[o]=l}else n.link=s;n.parentBoundary=qe,n.wrap=mr(),bi=qe,qe=t,ur.push(bi)},wm=function(t,e,i,r,s,n,a,o){if(e===null||i===null)return;let l={};const h=Bi.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,Bi.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.type={text:"node"};else if(typeof r=="object"){let[u,p]=Object.entries(r)[0];l[u]={text:p}}else l.type={text:r};if(s==null)l.descr={text:""};else if(typeof s=="object"){let[u,p]=Object.entries(s)[0];l[u]={text:p}}else l.descr={text:s};if(typeof a=="object"){let[u,p]=Object.entries(a)[0];l[u]=p}else l.tags=a;if(typeof o=="object"){let[u,p]=Object.entries(o)[0];l[u]=p}else l.link=o;l.nodeType=t,l.parentBoundary=qe,l.wrap=mr(),bi=qe,qe=e,ur.push(bi)},vm=function(){qe=bi,ur.pop(),bi=ur.pop(),ur.push(bi)},Am=function(t,e,i,r,s,n,a,o,l,h,u){let p=_i.find(d=>d.alias===e);if(!(p===void 0&&(p=Bi.find(d=>d.alias===e),p===void 0))){if(i!=null)if(typeof i=="object"){let[d,g]=Object.entries(i)[0];p[d]=g}else p.bgColor=i;if(r!=null)if(typeof r=="object"){let[d,g]=Object.entries(r)[0];p[d]=g}else p.fontColor=r;if(s!=null)if(typeof s=="object"){let[d,g]=Object.entries(s)[0];p[d]=g}else p.borderColor=s;if(n!=null)if(typeof n=="object"){let[d,g]=Object.entries(n)[0];p[d]=g}else p.shadowing=n;if(a!=null)if(typeof a=="object"){let[d,g]=Object.entries(a)[0];p[d]=g}else p.shape=a;if(o!=null)if(typeof o=="object"){let[d,g]=Object.entries(o)[0];p[d]=g}else p.sprite=o;if(l!=null)if(typeof l=="object"){let[d,g]=Object.entries(l)[0];p[d]=g}else p.techn=l;if(h!=null)if(typeof h=="object"){let[d,g]=Object.entries(h)[0];p[d]=g}else p.legendText=h;if(u!=null)if(typeof u=="object"){let[d,g]=Object.entries(u)[0];p[d]=g}else p.legendSprite=u}},Lm=function(t,e,i,r,s,n,a){const o=Fs.find(l=>l.from===e&&l.to===i);if(o!==void 0){if(r!=null)if(typeof r=="object"){let[l,h]=Object.entries(r)[0];o[l]=h}else o.textColor=r;if(s!=null)if(typeof s=="object"){let[l,h]=Object.entries(s)[0];o[l]=h}else o.lineColor=s;if(n!=null)if(typeof n=="object"){let[l,h]=Object.entries(n)[0];o[l]=parseInt(h)}else o.offsetX=parseInt(n);if(a!=null)if(typeof a=="object"){let[l,h]=Object.entries(a)[0];o[l]=parseInt(h)}else o.offsetY=parseInt(a)}},Bm=function(t,e,i){let r=Rn,s=Nn;if(typeof e=="object"){const n=Object.values(e)[0];r=parseInt(n)}else r=parseInt(e);if(typeof i=="object"){const n=Object.values(i)[0];s=parseInt(n)}else s=parseInt(i);r>=1&&(Rn=r),s>=1&&(Nn=s)},Im=function(){return Rn},Dm=function(){return Nn},Fm=function(){return qe},Rm=function(){return bi},O1=function(t){return t==null?_i:_i.filter(e=>e.parentBoundary===t)},Nm=function(t){return _i.find(e=>e.alias===t)},Om=function(t){return Object.keys(O1(t))},P1=function(t){return t==null?Bi:Bi.filter(e=>e.parentBoundary===t)},Pm=P1,Mm=function(){return Fs},Vm=function(){return Xo},zm=function(t){$o=t},mr=function(){return $o},qm=function(){_i=[],Bi=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],bi="",qe="global",ur=[""],Fs=[],ur=[""],Xo="",$o=!1,Rn=4,Nn=2},Wm={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},Ym={FILLED:0,OPEN:1},Um={LEFTOF:0,RIGHTOF:1,OVER:2},Hm=function(t){Xo=te(t,Y())},Ua={addPersonOrSystem:_m,addPersonOrSystemBoundary:Em,addContainer:Tm,addContainerBoundary:Sm,addComponent:Cm,addDeploymentNode:wm,popBoundaryParseStack:vm,addRel:km,updateElStyle:Am,updateRelStyle:Lm,updateLayoutConfig:Bm,autoWrap:mr,setWrap:zm,getC4ShapeArray:O1,getC4Shape:Nm,getC4ShapeKeys:Om,getBoundaries:P1,getBoundarys:Pm,getCurrentBoundaryParse:Fm,getParentBoundaryParse:Rm,getRels:Mm,getTitle:Vm,getC4Type:xm,getC4ShapeInRow:Im,getC4BoundaryInRow:Dm,setAccTitle:Pe,getAccTitle:Ye,getAccDescription:He,setAccDescription:Ue,getConfig:()=>Y().c4,clear:qm,LINETYPE:Wm,ARROWTYPE:Ym,PLACEMENT:Um,setTitle:Hm,setC4Type:bm},Ko=function(t,e){return la(t,e)},M1=function(t,e,i,r,s,n){const a=t.append("image");a.attr("width",e),a.attr("height",i),a.attr("x",r),a.attr("y",s);let o=n.startsWith("data:image/png;base64")?n:Fr.sanitizeUrl(n);a.attr("xlink:href",o)},Gm=(t,e,i)=>{const r=t.append("g");let s=0;for(let n of e){let a=n.textColor?n.textColor:"#444444",o=n.lineColor?n.lineColor:"#444444",l=n.offsetX?parseInt(n.offsetX):0,h=n.offsetY?parseInt(n.offsetY):0,u="";if(s===0){let d=r.append("line");d.attr("x1",n.startPoint.x),d.attr("y1",n.startPoint.y),d.attr("x2",n.endPoint.x),d.attr("y2",n.endPoint.y),d.attr("stroke-width","1"),d.attr("stroke",o),d.style("fill","none"),n.type!=="rel_b"&&d.attr("marker-end","url("+u+"#arrowhead)"),(n.type==="birel"||n.type==="rel_b")&&d.attr("marker-start","url("+u+"#arrowend)"),s=-1}else{let d=r.append("path");d.attr("fill","none").attr("stroke-width","1").attr("stroke",o).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",n.startPoint.x).replaceAll("starty",n.startPoint.y).replaceAll("controlx",n.startPoint.x+(n.endPoint.x-n.startPoint.x)/2-(n.endPoint.x-n.startPoint.x)/4).replaceAll("controly",n.startPoint.y+(n.endPoint.y-n.startPoint.y)/2).replaceAll("stopx",n.endPoint.x).replaceAll("stopy",n.endPoint.y)),n.type!=="rel_b"&&d.attr("marker-end","url("+u+"#arrowhead)"),(n.type==="birel"||n.type==="rel_b")&&d.attr("marker-start","url("+u+"#arrowend)")}let p=i.messageFont();$i(i)(n.label.text,r,Math.min(n.startPoint.x,n.endPoint.x)+Math.abs(n.endPoint.x-n.startPoint.x)/2+l,Math.min(n.startPoint.y,n.endPoint.y)+Math.abs(n.endPoint.y-n.startPoint.y)/2+h,n.label.width,n.label.height,{fill:a},p),n.techn&&n.techn.text!==""&&(p=i.messageFont(),$i(i)("["+n.techn.text+"]",r,Math.min(n.startPoint.x,n.endPoint.x)+Math.abs(n.endPoint.x-n.startPoint.x)/2+l,Math.min(n.startPoint.y,n.endPoint.y)+Math.abs(n.endPoint.y-n.startPoint.y)/2+i.messageFontSize+5+h,Math.max(n.label.width,n.techn.width),n.techn.height,{fill:a,"font-style":"italic"},p))}},jm=function(t,e,i){const r=t.append("g");let s=e.bgColor?e.bgColor:"none",n=e.borderColor?e.borderColor:"#444444",a=e.fontColor?e.fontColor:"black",o={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(o={"stroke-width":1});let l={x:e.x,y:e.y,fill:s,stroke:n,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:o};Ko(r,l);let h=i.boundaryFont();h.fontWeight="bold",h.fontSize=h.fontSize+2,h.fontColor=a,$i(i)(e.label.text,r,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},h),e.type&&e.type.text!==""&&(h=i.boundaryFont(),h.fontColor=a,$i(i)(e.type.text,r,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},h)),e.descr&&e.descr.text!==""&&(h=i.boundaryFont(),h.fontSize=h.fontSize-2,h.fontColor=a,$i(i)(e.descr.text,r,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},h))},Xm=function(t,e,i){var r;let s=e.bgColor?e.bgColor:i[e.typeC4Shape.text+"_bg_color"],n=e.borderColor?e.borderColor:i[e.typeC4Shape.text+"_border_color"],a=e.fontColor?e.fontColor:"#FFFFFF",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const l=t.append("g");l.attr("class","person-man");const h=Pr();switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":h.x=e.x,h.y=e.y,h.fill=s,h.width=e.width,h.height=e.height,h.stroke=n,h.rx=2.5,h.ry=2.5,h.attrs={"stroke-width":.5},Ko(l,h);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":l.append("path").attr("fill",s).attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),l.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":l.append("path").attr("fill",s).attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),l.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2));break}let u=rx(i,e.typeC4Shape.text);switch(l.append("text").attr("fill",a).attr("font-family",u.fontFamily).attr("font-size",u.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":M1(l,48,48,e.x+e.width/2-24,e.y+e.image.Y,o);break}let p=i[e.typeC4Shape.text+"Font"]();return p.fontWeight="bold",p.fontSize=p.fontSize+2,p.fontColor=a,$i(i)(e.label.text,l,e.x,e.y+e.label.Y,e.width,e.height,{fill:a},p),p=i[e.typeC4Shape.text+"Font"](),p.fontColor=a,e.techn&&((r=e.techn)==null?void 0:r.text)!==""?$i(i)(e.techn.text,l,e.x,e.y+e.techn.Y,e.width,e.height,{fill:a,"font-style":"italic"},p):e.type&&e.type.text!==""&&$i(i)(e.type.text,l,e.x,e.y+e.type.Y,e.width,e.height,{fill:a,"font-style":"italic"},p),e.descr&&e.descr.text!==""&&(p=i.personFont(),p.fontColor=a,$i(i)(e.descr.text,l,e.x,e.y+e.descr.Y,e.width,e.height,{fill:a},p)),e.height},$m=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},Km=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},Qm=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},Zm=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},Jm=function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},tx=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},ex=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},ix=function(t){const i=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);i.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),i.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},rx=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),$i=(function(){function t(s,n,a,o,l,h,u){const p=n.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("text-anchor","middle").text(s);r(p,u)}function e(s,n,a,o,l,h,u,p){const{fontSize:d,fontFamily:g,fontWeight:y}=p,x=s.split(mt.lineBreakRegex);for(let _=0;_<x.length;_++){const w=_*d-d*(x.length-1)/2,E=n.append("text").attr("x",a+l/2).attr("y",o).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",d).style("font-weight",y).style("font-family",g);E.append("tspan").attr("dy",w).text(x[_]).attr("alignment-baseline","mathematical"),r(E,u)}}function i(s,n,a,o,l,h,u,p){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,p),r(y,u)}function r(s,n){for(const a in n)n.hasOwnProperty(a)&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}})(),Ei={drawRect:Ko,drawBoundary:jm,drawC4Shape:Xm,drawRels:Gm,drawImage:M1,insertArrowHead:Zm,insertArrowEnd:Jm,insertArrowFilledHead:tx,insertDynamicNumber:ex,insertArrowCrossHead:ix,insertDatabaseIcon:$m,insertComputerIcon:Km,insertClockIcon:Qm};let On=0,Pn=0,V1=4,Ha=2;Fn.yy=Ua;let Tt={};class z1{constructor(e){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,Ga(e.db.getConfig())}setData(e,i,r,s){this.nextData.startx=this.data.startx=e,this.nextData.stopx=this.data.stopx=i,this.nextData.starty=this.data.starty=r,this.nextData.stopy=this.data.stopy=s}updateVal(e,i,r,s){e[i]===void 0?e[i]=r:e[i]=s(r,e[i])}insert(e){this.nextData.cnt=this.nextData.cnt+1;let i=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+e.margin:this.nextData.stopx+e.margin*2,r=i+e.width,s=this.nextData.starty+e.margin*2,n=s+e.height;(i>=this.data.widthLimit||r>=this.data.widthLimit||this.nextData.cnt>V1)&&(i=this.nextData.startx+e.margin+Tt.nextLinePaddingX,s=this.nextData.stopy+e.margin*2,this.nextData.stopx=r=i+e.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=n=s+e.height,this.nextData.cnt=1),e.x=i,e.y=s,this.updateVal(this.data,"startx",i,Math.min),this.updateVal(this.data,"starty",s,Math.min),this.updateVal(this.data,"stopx",r,Math.max),this.updateVal(this.data,"stopy",n,Math.max),this.updateVal(this.nextData,"startx",i,Math.min),this.updateVal(this.nextData,"starty",s,Math.min),this.updateVal(this.nextData,"stopx",r,Math.max),this.updateVal(this.nextData,"stopy",n,Math.max)}init(e){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},Ga(e.db.getConfig())}bumpLastMargin(e){this.data.stopx+=e,this.data.stopy+=e}}const Ga=function(t){Ae(Tt,t),t.fontFamily&&(Tt.personFontFamily=Tt.systemFontFamily=Tt.messageFontFamily=t.fontFamily),t.fontSize&&(Tt.personFontSize=Tt.systemFontSize=Tt.messageFontSize=t.fontSize),t.fontWeight&&(Tt.personFontWeight=Tt.systemFontWeight=Tt.messageFontWeight=t.fontWeight)},ps=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),mn=t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight}),sx=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight});function yi(t,e,i,r,s){if(!e[t].width)if(i)e[t].text=Nh(e[t].text,s,r),e[t].textLines=e[t].text.split(mt.lineBreakRegex).length,e[t].width=s,e[t].height=Wa(e[t].text,r);else{let n=e[t].text.split(mt.lineBreakRegex);e[t].textLines=n.length;let a=0;e[t].height=0,e[t].width=0;for(const o of n)e[t].width=Math.max(vi(o,r),e[t].width),a=Wa(o,r),e[t].height=e[t].height+a}}const q1=function(t,e,i){e.x=i.data.startx,e.y=i.data.starty,e.width=i.data.stopx-i.data.startx,e.height=i.data.stopy-i.data.starty,e.label.y=Tt.c4ShapeMargin-35;let r=e.wrap&&Tt.wrap,s=mn(Tt);s.fontSize=s.fontSize+2,s.fontWeight="bold";let n=vi(e.label.text,s);yi("label",e,r,s,n),Ei.drawBoundary(t,e,Tt)},W1=function(t,e,i,r){let s=0;for(const n of r){s=0;const a=i[n];let o=ps(Tt,a.typeC4Shape.text);switch(o.fontSize=o.fontSize-2,a.typeC4Shape.width=vi("Â«"+a.typeC4Shape.text+"Â»",o),a.typeC4Shape.height=o.fontSize+2,a.typeC4Shape.Y=Tt.c4ShapePadding,s=a.typeC4Shape.Y+a.typeC4Shape.height-4,a.image={width:0,height:0,Y:0},a.typeC4Shape.text){case"person":case"external_person":a.image.width=48,a.image.height=48,a.image.Y=s,s=a.image.Y+a.image.height;break}a.sprite&&(a.image.width=48,a.image.height=48,a.image.Y=s,s=a.image.Y+a.image.height);let l=a.wrap&&Tt.wrap,h=Tt.width-Tt.c4ShapePadding*2,u=ps(Tt,a.typeC4Shape.text);if(u.fontSize=u.fontSize+2,u.fontWeight="bold",yi("label",a,l,u,h),a.label.Y=s+8,s=a.label.Y+a.label.height,a.type&&a.type.text!==""){a.type.text="["+a.type.text+"]";let g=ps(Tt,a.typeC4Shape.text);yi("type",a,l,g,h),a.type.Y=s+5,s=a.type.Y+a.type.height}else if(a.techn&&a.techn.text!==""){a.techn.text="["+a.techn.text+"]";let g=ps(Tt,a.techn.text);yi("techn",a,l,g,h),a.techn.Y=s+5,s=a.techn.Y+a.techn.height}let p=s,d=a.label.width;if(a.descr&&a.descr.text!==""){let g=ps(Tt,a.typeC4Shape.text);yi("descr",a,l,g,h),a.descr.Y=s+20,s=a.descr.Y+a.descr.height,d=Math.max(a.label.width,a.descr.width),p=s-a.descr.textLines*5}d=d+Tt.c4ShapePadding,a.width=Math.max(a.width||Tt.width,d,Tt.width),a.height=Math.max(a.height||Tt.height,p,Tt.height),a.margin=a.margin||Tt.c4ShapeMargin,t.insert(a),Ei.drawC4Shape(e,a,Tt)}t.bumpLastMargin(Tt.c4ShapeMargin)};class li{constructor(e,i){this.x=e,this.y=i}}let yc=function(t,e){let i=t.x,r=t.y,s=e.x,n=e.y,a=i+t.width/2,o=r+t.height/2,l=Math.abs(i-s),h=Math.abs(r-n),u=h/l,p=t.height/t.width,d=null;return r==n&&i<s?d=new li(i+t.width,o):r==n&&i>s?d=new li(i,o):i==s&&r<n?d=new li(a,r+t.height):i==s&&r>n&&(d=new li(a,r)),i>s&&r<n?p>=u?d=new li(i,o+u*t.width/2):d=new li(a-l/h*t.height/2,r+t.height):i<s&&r<n?p>=u?d=new li(i+t.width,o+u*t.width/2):d=new li(a+l/h*t.height/2,r+t.height):i<s&&r>n?p>=u?d=new li(i+t.width,o-u*t.width/2):d=new li(a+t.height/2*l/h,r):i>s&&r>n&&(p>=u?d=new li(i,o-t.width/2*u):d=new li(a-t.height/2*l/h,r)),d},nx=function(t,e){let i={x:0,y:0};i.x=e.x+e.width/2,i.y=e.y+e.height/2;let r=yc(t,i);i.x=t.x+t.width/2,i.y=t.y+t.height/2;let s=yc(e,i);return{startPoint:r,endPoint:s}};const ax=function(t,e,i,r){let s=0;for(let n of e){s=s+1;let a=n.wrap&&Tt.wrap,o=sx(Tt);r.db.getC4Type()==="C4Dynamic"&&(n.label.text=s+": "+n.label.text);let h=vi(n.label.text,o);yi("label",n,a,o,h),n.techn&&n.techn.text!==""&&(h=vi(n.techn.text,o),yi("techn",n,a,o,h)),n.descr&&n.descr.text!==""&&(h=vi(n.descr.text,o),yi("descr",n,a,o,h));let u=i(n.from),p=i(n.to),d=nx(u,p);n.startPoint=d.startPoint,n.endPoint=d.endPoint}Ei.drawRels(t,e,Tt)};function Y1(t,e,i,r,s){let n=new z1(s);n.data.widthLimit=i.data.widthLimit/Math.min(Ha,r.length);for(let[a,o]of r.entries()){let l=0;o.image={width:0,height:0,Y:0},o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=l,l=o.image.Y+o.image.height);let h=o.wrap&&Tt.wrap,u=mn(Tt);if(u.fontSize=u.fontSize+2,u.fontWeight="bold",yi("label",o,h,u,n.data.widthLimit),o.label.Y=l+8,l=o.label.Y+o.label.height,o.type&&o.type.text!==""){o.type.text="["+o.type.text+"]";let y=mn(Tt);yi("type",o,h,y,n.data.widthLimit),o.type.Y=l+5,l=o.type.Y+o.type.height}if(o.descr&&o.descr.text!==""){let y=mn(Tt);y.fontSize=y.fontSize-2,yi("descr",o,h,y,n.data.widthLimit),o.descr.Y=l+20,l=o.descr.Y+o.descr.height}if(a==0||a%Ha===0){let y=i.data.startx+Tt.diagramMarginX,x=i.data.stopy+Tt.diagramMarginY+l;n.setData(y,y,x,x)}else{let y=n.data.stopx!==n.data.startx?n.data.stopx+Tt.diagramMarginX:n.data.startx,x=n.data.starty;n.setData(y,y,x,x)}n.name=o.alias;let p=s.db.getC4ShapeArray(o.alias),d=s.db.getC4ShapeKeys(o.alias);d.length>0&&W1(n,t,p,d),e=o.alias;let g=s.db.getBoundarys(e);g.length>0&&Y1(t,e,n,g,s),o.alias!=="global"&&q1(t,o,n),i.data.stopy=Math.max(n.data.stopy+Tt.c4ShapeMargin,i.data.stopy),i.data.stopx=Math.max(n.data.stopx+Tt.c4ShapeMargin,i.data.stopx),On=Math.max(On,i.data.stopx),Pn=Math.max(Pn,i.data.stopy)}}const ox=function(t,e,i,r){Tt=Y().c4;const s=Y().securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const a=s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body");let o=r.db;r.db.setWrap(Tt.wrap),V1=o.getC4ShapeInRow(),Ha=o.getC4BoundaryInRow(),B.debug(`C:${JSON.stringify(Tt,null,2)}`);const l=s==="sandbox"?a.select(`[id="${e}"]`):yt(`[id="${e}"]`);Ei.insertComputerIcon(l),Ei.insertDatabaseIcon(l),Ei.insertClockIcon(l);let h=new z1(r);h.setData(Tt.diagramMarginX,Tt.diagramMarginX,Tt.diagramMarginY,Tt.diagramMarginY),h.data.widthLimit=screen.availWidth,On=Tt.diagramMarginX,Pn=Tt.diagramMarginY;const u=r.db.getTitle();let p=r.db.getBoundarys("");Y1(l,"",h,p,r),Ei.insertArrowHead(l),Ei.insertArrowEnd(l),Ei.insertArrowCrossHead(l),Ei.insertArrowFilledHead(l),ax(l,r.db.getRels(),r.db.getC4Shape,r),h.data.stopx=On,h.data.stopy=Pn;const d=h.data;let y=d.stopy-d.starty+2*Tt.diagramMarginY;const _=d.stopx-d.startx+2*Tt.diagramMarginX;u&&l.append("text").text(u).attr("x",(d.stopx-d.startx)/2-4*Tt.diagramMarginX).attr("y",d.starty+Tt.diagramMarginY),Ne(l,y,_,Tt.useMaxWidth);const w=u?60:0;l.attr("viewBox",d.startx-Tt.diagramMarginX+" -"+(Tt.diagramMarginY+w)+" "+_+" "+(y+w)),B.debug("models:",d)},mc={drawPersonOrSystemArray:W1,drawBoundary:q1,setConf:Ga,draw:ox},lx=t=>`.person {
    stroke: ${t.personBorder};
    fill: ${t.personBkg};
  }
`,cx=lx,hx={parser:mm,db:Ua,renderer:mc,styles:cx,init:({c4:t,wrap:e})=>{mc.setConf(t),Ua.setWrap(e)}},ux=Object.freeze(Object.defineProperty({__proto__:null,diagram:hx},Symbol.toStringTag,{value:"Module"}));var ja=(function(){var t=function(ar,Et,Lt,Mt){for(Lt=Lt||{},Mt=ar.length;Mt--;Lt[ar[Mt]]=Et);return Lt},e=[1,4],i=[1,3],r=[1,5],s=[1,8,9,10,11,27,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],n=[2,2],a=[1,13],o=[1,14],l=[1,15],h=[1,16],u=[1,23],p=[1,25],d=[1,26],g=[1,27],y=[1,49],x=[1,48],_=[1,29],w=[1,30],E=[1,31],R=[1,32],v=[1,33],T=[1,44],k=[1,46],A=[1,42],S=[1,47],m=[1,43],C=[1,50],f=[1,45],L=[1,51],b=[1,52],P=[1,34],U=[1,35],N=[1,36],D=[1,37],F=[1,57],I=[1,8,9,10,11,27,32,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],M=[1,61],z=[1,60],st=[1,62],j=[8,9,11,73,75],dt=[1,88],K=[1,93],G=[1,92],tt=[1,89],nt=[1,85],Q=[1,91],J=[1,87],O=[1,94],at=[1,90],W=[1,95],ft=[1,86],V=[8,9,10,11,73,75],vt=[8,9,10,11,44,73,75],X=[8,9,10,11,29,42,44,46,48,50,52,54,56,58,61,63,65,66,68,73,75,86,99,102,103,106,108,111,112,113],St=[8,9,11,42,58,73,75,86,99,102,103,106,108,111,112,113],bt=[42,58,86,99,102,103,106,108,111,112,113],Vt=[1,121],Bt=[1,120],Wt=[1,128],pt=[1,142],ut=[1,143],ot=[1,144],lt=[1,145],ht=[1,130],$=[1,132],rt=[1,136],it=[1,137],ct=[1,138],re=[1,139],Qt=[1,140],de=[1,141],zt=[1,146],Gt=[1,147],qt=[1,126],Ee=[1,127],fe=[1,134],sr=[1,129],Vr=[1,133],me=[1,131],jt=[8,9,10,11,27,32,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],se=[1,149],Ot=[8,9,11],Zt=[8,9,10,11,14,42,58,86,102,103,106,108,111,112,113],Dt=[1,169],Yt=[1,165],Ut=[1,166],Pt=[1,170],Nt=[1,167],It=[1,168],Be=[75,113,116],Xt=[8,9,10,11,12,14,27,29,32,42,58,73,81,82,83,84,85,86,87,102,106,108,111,112,113],Ml=[10,103],nr=[31,47,49,51,53,55,60,62,64,65,67,69,113,114,115],Fi=[1,235],Ri=[1,233],Ni=[1,237],Oi=[1,231],Pi=[1,232],Mi=[1,234],Vi=[1,236],zi=[1,238],zr=[1,255],Vl=[8,9,11,103],Ti=[8,9,10,11,58,81,102,103,106,107,108,109],Ca={trace:function(){},yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeparator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,vertexStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,link:39,node:40,styledVertex:41,AMP:42,vertex:43,STYLE_SEPARATOR:44,idString:45,DOUBLECIRCLESTART:46,DOUBLECIRCLEEND:47,PS:48,PE:49,"(-":50,"-)":51,STADIUMSTART:52,STADIUMEND:53,SUBROUTINESTART:54,SUBROUTINEEND:55,VERTEX_WITH_PROPS_START:56,"NODE_STRING[field]":57,COLON:58,"NODE_STRING[value]":59,PIPE:60,CYLINDERSTART:61,CYLINDEREND:62,DIAMOND_START:63,DIAMOND_STOP:64,TAGEND:65,TRAPSTART:66,TRAPEND:67,INVTRAPSTART:68,INVTRAPEND:69,linkStatement:70,arrowText:71,TESTSTR:72,START_LINK:73,edgeText:74,LINK:75,edgeTextToken:76,STR:77,MD_STR:78,textToken:79,keywords:80,STYLE:81,LINKSTYLE:82,CLASSDEF:83,CLASS:84,CLICK:85,DOWN:86,UP:87,textNoTagsToken:88,stylesOpt:89,"idString[vertex]":90,"idString[class]":91,CALLBACKNAME:92,CALLBACKARGS:93,HREF:94,LINK_TARGET:95,"STR[link]":96,"STR[tooltip]":97,alphaNum:98,DEFAULT:99,numList:100,INTERPOLATE:101,NUM:102,COMMA:103,style:104,styleComponent:105,NODE_STRING:106,UNIT:107,BRKT:108,PCT:109,idStringToken:110,MINUS:111,MULT:112,UNICODE_TEXT:113,TEXT:114,TAGSTART:115,EDGE_TEXT:116,alphaNumToken:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",42:"AMP",44:"STYLE_SEPARATOR",46:"DOUBLECIRCLESTART",47:"DOUBLECIRCLEEND",48:"PS",49:"PE",50:"(-",51:"-)",52:"STADIUMSTART",53:"STADIUMEND",54:"SUBROUTINESTART",55:"SUBROUTINEEND",56:"VERTEX_WITH_PROPS_START",57:"NODE_STRING[field]",58:"COLON",59:"NODE_STRING[value]",60:"PIPE",61:"CYLINDERSTART",62:"CYLINDEREND",63:"DIAMOND_START",64:"DIAMOND_STOP",65:"TAGEND",66:"TRAPSTART",67:"TRAPEND",68:"INVTRAPSTART",69:"INVTRAPEND",72:"TESTSTR",73:"START_LINK",75:"LINK",77:"STR",78:"MD_STR",81:"STYLE",82:"LINKSTYLE",83:"CLASSDEF",84:"CLASS",85:"CLICK",86:"DOWN",87:"UP",90:"idString[vertex]",91:"idString[class]",92:"CALLBACKNAME",93:"CALLBACKARGS",94:"HREF",95:"LINK_TARGET",96:"STR[link]",97:"STR[tooltip]",99:"DEFAULT",101:"INTERPOLATE",102:"NUM",103:"COMMA",106:"NODE_STRING",107:"UNIT",108:"BRKT",109:"PCT",111:"MINUS",112:"MULT",113:"UNICODE_TEXT",114:"TEXT",115:"TAGSTART",116:"EDGE_TEXT",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[20,3],[20,4],[20,2],[20,1],[40,1],[40,5],[41,1],[41,3],[43,4],[43,4],[43,6],[43,4],[43,4],[43,4],[43,8],[43,4],[43,4],[43,4],[43,6],[43,4],[43,4],[43,4],[43,4],[43,4],[43,1],[39,2],[39,3],[39,3],[39,1],[39,3],[74,1],[74,2],[74,1],[74,1],[70,1],[71,3],[30,1],[30,2],[30,1],[30,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[100,1],[100,3],[89,1],[89,3],[104,1],[104,2],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[79,1],[79,1],[79,1],[79,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[76,1],[76,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[45,1],[45,2],[98,1],[98,2],[33,1],[33,1],[33,1],[33,1]],performAction:function(Et,Lt,Mt,xt,ne,q,fs){var H=q.length-1;switch(ne){case 2:this.$=[];break;case 3:(!Array.isArray(q[H])||q[H].length>0)&&q[H-1].push(q[H]),this.$=q[H-1];break;case 4:case 176:this.$=q[H];break;case 11:xt.setDirection("TB"),this.$="TB";break;case 12:xt.setDirection(q[H-1]),this.$=q[H-1];break;case 27:this.$=q[H-1].nodes;break;case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 33:this.$=xt.addSubGraph(q[H-6],q[H-1],q[H-4]);break;case 34:this.$=xt.addSubGraph(q[H-3],q[H-1],q[H-3]);break;case 35:this.$=xt.addSubGraph(void 0,q[H-1],void 0);break;case 37:this.$=q[H].trim(),xt.setAccTitle(this.$);break;case 38:case 39:this.$=q[H].trim(),xt.setAccDescription(this.$);break;case 43:xt.addLink(q[H-2].stmt,q[H],q[H-1]),this.$={stmt:q[H],nodes:q[H].concat(q[H-2].nodes)};break;case 44:xt.addLink(q[H-3].stmt,q[H-1],q[H-2]),this.$={stmt:q[H-1],nodes:q[H-1].concat(q[H-3].nodes)};break;case 45:this.$={stmt:q[H-1],nodes:q[H-1]};break;case 46:this.$={stmt:q[H],nodes:q[H]};break;case 47:this.$=[q[H]];break;case 48:this.$=q[H-4].concat(q[H]);break;case 49:this.$=q[H];break;case 50:this.$=q[H-2],xt.setClass(q[H-2],q[H]);break;case 51:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"square");break;case 52:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"doublecircle");break;case 53:this.$=q[H-5],xt.addVertex(q[H-5],q[H-2],"circle");break;case 54:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"ellipse");break;case 55:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"stadium");break;case 56:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"subroutine");break;case 57:this.$=q[H-7],xt.addVertex(q[H-7],q[H-1],"rect",void 0,void 0,void 0,Object.fromEntries([[q[H-5],q[H-3]]]));break;case 58:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"cylinder");break;case 59:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"round");break;case 60:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"diamond");break;case 61:this.$=q[H-5],xt.addVertex(q[H-5],q[H-2],"hexagon");break;case 62:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"odd");break;case 63:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"trapezoid");break;case 64:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"inv_trapezoid");break;case 65:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"lean_right");break;case 66:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"lean_left");break;case 67:this.$=q[H],xt.addVertex(q[H]);break;case 68:q[H-1].text=q[H],this.$=q[H-1];break;case 69:case 70:q[H-2].text=q[H-1],this.$=q[H-2];break;case 71:this.$=q[H];break;case 72:var ni=xt.destructLink(q[H],q[H-2]);this.$={type:ni.type,stroke:ni.stroke,length:ni.length,text:q[H-1]};break;case 73:this.$={text:q[H],type:"text"};break;case 74:this.$={text:q[H-1].text+""+q[H],type:q[H-1].type};break;case 75:this.$={text:q[H],type:"string"};break;case 76:this.$={text:q[H],type:"markdown"};break;case 77:var ni=xt.destructLink(q[H]);this.$={type:ni.type,stroke:ni.stroke,length:ni.length};break;case 78:this.$=q[H-1];break;case 79:this.$={text:q[H],type:"text"};break;case 80:this.$={text:q[H-1].text+""+q[H],type:q[H-1].type};break;case 81:this.$={text:q[H],type:"string"};break;case 82:case 97:this.$={text:q[H],type:"markdown"};break;case 94:this.$={text:q[H],type:"text"};break;case 95:this.$={text:q[H-1].text+""+q[H],type:q[H-1].type};break;case 96:this.$={text:q[H],type:"text"};break;case 98:this.$=q[H-4],xt.addClass(q[H-2],q[H]);break;case 99:this.$=q[H-4],xt.setClass(q[H-2],q[H]);break;case 100:case 108:this.$=q[H-1],xt.setClickEvent(q[H-1],q[H]);break;case 101:case 109:this.$=q[H-3],xt.setClickEvent(q[H-3],q[H-2]),xt.setTooltip(q[H-3],q[H]);break;case 102:this.$=q[H-2],xt.setClickEvent(q[H-2],q[H-1],q[H]);break;case 103:this.$=q[H-4],xt.setClickEvent(q[H-4],q[H-3],q[H-2]),xt.setTooltip(q[H-4],q[H]);break;case 104:this.$=q[H-2],xt.setLink(q[H-2],q[H]);break;case 105:this.$=q[H-4],xt.setLink(q[H-4],q[H-2]),xt.setTooltip(q[H-4],q[H]);break;case 106:this.$=q[H-4],xt.setLink(q[H-4],q[H-2],q[H]);break;case 107:this.$=q[H-6],xt.setLink(q[H-6],q[H-4],q[H]),xt.setTooltip(q[H-6],q[H-2]);break;case 110:this.$=q[H-1],xt.setLink(q[H-1],q[H]);break;case 111:this.$=q[H-3],xt.setLink(q[H-3],q[H-2]),xt.setTooltip(q[H-3],q[H]);break;case 112:this.$=q[H-3],xt.setLink(q[H-3],q[H-2],q[H]);break;case 113:this.$=q[H-5],xt.setLink(q[H-5],q[H-4],q[H]),xt.setTooltip(q[H-5],q[H-2]);break;case 114:this.$=q[H-4],xt.addVertex(q[H-2],void 0,void 0,q[H]);break;case 115:this.$=q[H-4],xt.updateLink([q[H-2]],q[H]);break;case 116:this.$=q[H-4],xt.updateLink(q[H-2],q[H]);break;case 117:this.$=q[H-8],xt.updateLinkInterpolate([q[H-6]],q[H-2]),xt.updateLink([q[H-6]],q[H]);break;case 118:this.$=q[H-8],xt.updateLinkInterpolate(q[H-6],q[H-2]),xt.updateLink(q[H-6],q[H]);break;case 119:this.$=q[H-6],xt.updateLinkInterpolate([q[H-4]],q[H]);break;case 120:this.$=q[H-6],xt.updateLinkInterpolate(q[H-4],q[H]);break;case 121:case 123:this.$=[q[H]];break;case 122:case 124:q[H-2].push(q[H]),this.$=q[H-2];break;case 126:this.$=q[H-1]+q[H];break;case 174:this.$=q[H];break;case 175:this.$=q[H-1]+""+q[H];break;case 177:this.$=q[H-1]+""+q[H];break;case 178:this.$={stmt:"dir",value:"TB"};break;case 179:this.$={stmt:"dir",value:"BT"};break;case 180:this.$={stmt:"dir",value:"RL"};break;case 181:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,9:e,10:i,12:r},{1:[3]},t(s,n,{5:6}),{4:7,9:e,10:i,12:r},{4:8,9:e,10:i,12:r},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,33:24,34:p,36:d,38:g,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:w,83:E,84:R,85:v,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:L,113:b,118:P,119:U,120:N,121:D},t(s,[2,9]),t(s,[2,10]),t(s,[2,11]),{8:[1,54],9:[1,55],10:F,15:53,18:56},t(I,[2,3]),t(I,[2,4]),t(I,[2,5]),t(I,[2,6]),t(I,[2,7]),t(I,[2,8]),{8:M,9:z,11:st,21:58,39:59,70:63,73:[1,64],75:[1,65]},{8:M,9:z,11:st,21:66},{8:M,9:z,11:st,21:67},{8:M,9:z,11:st,21:68},{8:M,9:z,11:st,21:69},{8:M,9:z,11:st,21:70},{8:M,9:z,10:[1,71],11:st,21:72},t(I,[2,36]),{35:[1,73]},{37:[1,74]},t(I,[2,39]),t(j,[2,46],{18:75,10:F}),{10:[1,76]},{10:[1,77]},{10:[1,78]},{10:[1,79]},{14:dt,42:K,58:G,77:[1,83],86:tt,92:[1,80],94:[1,81],98:82,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft,117:84},t(I,[2,178]),t(I,[2,179]),t(I,[2,180]),t(I,[2,181]),t(V,[2,47]),t(V,[2,49],{44:[1,96]}),t(vt,[2,67],{110:109,29:[1,97],42:y,46:[1,98],48:[1,99],50:[1,100],52:[1,101],54:[1,102],56:[1,103],58:x,61:[1,104],63:[1,105],65:[1,106],66:[1,107],68:[1,108],86:T,99:k,102:A,103:S,106:m,108:C,111:f,112:L,113:b}),t(X,[2,174]),t(X,[2,135]),t(X,[2,136]),t(X,[2,137]),t(X,[2,138]),t(X,[2,139]),t(X,[2,140]),t(X,[2,141]),t(X,[2,142]),t(X,[2,143]),t(X,[2,144]),t(X,[2,145]),t(s,[2,12]),t(s,[2,18]),t(s,[2,19]),{9:[1,110]},t(St,[2,26],{18:111,10:F}),t(I,[2,27]),{40:112,41:38,42:y,43:39,45:40,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:L,113:b},t(I,[2,40]),t(I,[2,41]),t(I,[2,42]),t(bt,[2,71],{71:113,60:[1,115],72:[1,114]}),{74:116,76:117,77:[1,118],78:[1,119],113:Vt,116:Bt},t([42,58,60,72,86,99,102,103,106,108,111,112,113],[2,77]),t(I,[2,28]),t(I,[2,29]),t(I,[2,30]),t(I,[2,31]),t(I,[2,32]),{10:Wt,12:pt,14:ut,27:ot,28:122,32:lt,42:ht,58:$,73:rt,77:[1,124],78:[1,125],80:135,81:it,82:ct,83:re,84:Qt,85:de,86:zt,87:Gt,88:123,102:qt,106:Ee,108:fe,111:sr,112:Vr,113:me},t(jt,n,{5:148}),t(I,[2,37]),t(I,[2,38]),t(j,[2,45],{42:se}),{42:y,45:150,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:L,113:b},{99:[1,151],100:152,102:[1,153]},{42:y,45:154,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:L,113:b},{42:y,45:155,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:L,113:b},t(Ot,[2,100],{10:[1,156],93:[1,157]}),{77:[1,158]},t(Ot,[2,108],{117:160,10:[1,159],14:dt,42:K,58:G,86:tt,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft}),t(Ot,[2,110],{10:[1,161]}),t(Zt,[2,176]),t(Zt,[2,163]),t(Zt,[2,164]),t(Zt,[2,165]),t(Zt,[2,166]),t(Zt,[2,167]),t(Zt,[2,168]),t(Zt,[2,169]),t(Zt,[2,170]),t(Zt,[2,171]),t(Zt,[2,172]),t(Zt,[2,173]),{42:y,45:162,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:L,113:b},{30:163,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:171,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:173,48:[1,172],65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:174,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:175,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:176,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{106:[1,177]},{30:178,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:179,63:[1,180],65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:181,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:182,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:183,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},t(X,[2,175]),t(s,[2,20]),t(St,[2,25]),t(j,[2,43],{18:184,10:F}),t(bt,[2,68],{10:[1,185]}),{10:[1,186]},{30:187,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{75:[1,188],76:189,113:Vt,116:Bt},t(Be,[2,73]),t(Be,[2,75]),t(Be,[2,76]),t(Be,[2,161]),t(Be,[2,162]),{8:M,9:z,10:Wt,11:st,12:pt,14:ut,21:191,27:ot,29:[1,190],32:lt,42:ht,58:$,73:rt,80:135,81:it,82:ct,83:re,84:Qt,85:de,86:zt,87:Gt,88:192,102:qt,106:Ee,108:fe,111:sr,112:Vr,113:me},t(Xt,[2,94]),t(Xt,[2,96]),t(Xt,[2,97]),t(Xt,[2,150]),t(Xt,[2,151]),t(Xt,[2,152]),t(Xt,[2,153]),t(Xt,[2,154]),t(Xt,[2,155]),t(Xt,[2,156]),t(Xt,[2,157]),t(Xt,[2,158]),t(Xt,[2,159]),t(Xt,[2,160]),t(Xt,[2,83]),t(Xt,[2,84]),t(Xt,[2,85]),t(Xt,[2,86]),t(Xt,[2,87]),t(Xt,[2,88]),t(Xt,[2,89]),t(Xt,[2,90]),t(Xt,[2,91]),t(Xt,[2,92]),t(Xt,[2,93]),{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,193],33:24,34:p,36:d,38:g,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:w,83:E,84:R,85:v,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:L,113:b,118:P,119:U,120:N,121:D},{10:F,18:194},{10:[1,195],42:y,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:109,111:f,112:L,113:b},{10:[1,196]},{10:[1,197],103:[1,198]},t(Ml,[2,121]),{10:[1,199],42:y,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:109,111:f,112:L,113:b},{10:[1,200],42:y,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:109,111:f,112:L,113:b},{77:[1,201]},t(Ot,[2,102],{10:[1,202]}),t(Ot,[2,104],{10:[1,203]}),{77:[1,204]},t(Zt,[2,177]),{77:[1,205],95:[1,206]},t(V,[2,50],{110:109,42:y,58:x,86:T,99:k,102:A,103:S,106:m,108:C,111:f,112:L,113:b}),{31:[1,207],65:Dt,79:208,113:Pt,114:Nt,115:It},t(nr,[2,79]),t(nr,[2,81]),t(nr,[2,82]),t(nr,[2,146]),t(nr,[2,147]),t(nr,[2,148]),t(nr,[2,149]),{47:[1,209],65:Dt,79:208,113:Pt,114:Nt,115:It},{30:210,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{49:[1,211],65:Dt,79:208,113:Pt,114:Nt,115:It},{51:[1,212],65:Dt,79:208,113:Pt,114:Nt,115:It},{53:[1,213],65:Dt,79:208,113:Pt,114:Nt,115:It},{55:[1,214],65:Dt,79:208,113:Pt,114:Nt,115:It},{58:[1,215]},{62:[1,216],65:Dt,79:208,113:Pt,114:Nt,115:It},{64:[1,217],65:Dt,79:208,113:Pt,114:Nt,115:It},{30:218,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{31:[1,219],65:Dt,79:208,113:Pt,114:Nt,115:It},{65:Dt,67:[1,220],69:[1,221],79:208,113:Pt,114:Nt,115:It},{65:Dt,67:[1,223],69:[1,222],79:208,113:Pt,114:Nt,115:It},t(j,[2,44],{42:se}),t(bt,[2,70]),t(bt,[2,69]),{60:[1,224],65:Dt,79:208,113:Pt,114:Nt,115:It},t(bt,[2,72]),t(Be,[2,74]),{30:225,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},t(jt,n,{5:226}),t(Xt,[2,95]),t(I,[2,35]),{41:227,42:y,43:39,45:40,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:L,113:b},{10:Fi,58:Ri,81:Ni,89:228,102:Oi,104:229,105:230,106:Pi,107:Mi,108:Vi,109:zi},{10:Fi,58:Ri,81:Ni,89:239,101:[1,240],102:Oi,104:229,105:230,106:Pi,107:Mi,108:Vi,109:zi},{10:Fi,58:Ri,81:Ni,89:241,101:[1,242],102:Oi,104:229,105:230,106:Pi,107:Mi,108:Vi,109:zi},{102:[1,243]},{10:Fi,58:Ri,81:Ni,89:244,102:Oi,104:229,105:230,106:Pi,107:Mi,108:Vi,109:zi},{42:y,45:245,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:L,113:b},t(Ot,[2,101]),{77:[1,246]},{77:[1,247],95:[1,248]},t(Ot,[2,109]),t(Ot,[2,111],{10:[1,249]}),t(Ot,[2,112]),t(vt,[2,51]),t(nr,[2,80]),t(vt,[2,52]),{49:[1,250],65:Dt,79:208,113:Pt,114:Nt,115:It},t(vt,[2,59]),t(vt,[2,54]),t(vt,[2,55]),t(vt,[2,56]),{106:[1,251]},t(vt,[2,58]),t(vt,[2,60]),{64:[1,252],65:Dt,79:208,113:Pt,114:Nt,115:It},t(vt,[2,62]),t(vt,[2,63]),t(vt,[2,65]),t(vt,[2,64]),t(vt,[2,66]),t([10,42,58,86,99,102,103,106,108,111,112,113],[2,78]),{31:[1,253],65:Dt,79:208,113:Pt,114:Nt,115:It},{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,254],33:24,34:p,36:d,38:g,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:w,83:E,84:R,85:v,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:L,113:b,118:P,119:U,120:N,121:D},t(V,[2,48]),t(Ot,[2,114],{103:zr}),t(Vl,[2,123],{105:256,10:Fi,58:Ri,81:Ni,102:Oi,106:Pi,107:Mi,108:Vi,109:zi}),t(Ti,[2,125]),t(Ti,[2,127]),t(Ti,[2,128]),t(Ti,[2,129]),t(Ti,[2,130]),t(Ti,[2,131]),t(Ti,[2,132]),t(Ti,[2,133]),t(Ti,[2,134]),t(Ot,[2,115],{103:zr}),{10:[1,257]},t(Ot,[2,116],{103:zr}),{10:[1,258]},t(Ml,[2,122]),t(Ot,[2,98],{103:zr}),t(Ot,[2,99],{110:109,42:y,58:x,86:T,99:k,102:A,103:S,106:m,108:C,111:f,112:L,113:b}),t(Ot,[2,103]),t(Ot,[2,105],{10:[1,259]}),t(Ot,[2,106]),{95:[1,260]},{49:[1,261]},{60:[1,262]},{64:[1,263]},{8:M,9:z,11:st,21:264},t(I,[2,34]),{10:Fi,58:Ri,81:Ni,102:Oi,104:265,105:230,106:Pi,107:Mi,108:Vi,109:zi},t(Ti,[2,126]),{14:dt,42:K,58:G,86:tt,98:266,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft,117:84},{14:dt,42:K,58:G,86:tt,98:267,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft,117:84},{95:[1,268]},t(Ot,[2,113]),t(vt,[2,53]),{30:269,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},t(vt,[2,61]),t(jt,n,{5:270}),t(Vl,[2,124],{105:256,10:Fi,58:Ri,81:Ni,102:Oi,106:Pi,107:Mi,108:Vi,109:zi}),t(Ot,[2,119],{117:160,10:[1,271],14:dt,42:K,58:G,86:tt,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft}),t(Ot,[2,120],{117:160,10:[1,272],14:dt,42:K,58:G,86:tt,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft}),t(Ot,[2,107]),{31:[1,273],65:Dt,79:208,113:Pt,114:Nt,115:It},{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,274],33:24,34:p,36:d,38:g,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:w,83:E,84:R,85:v,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:L,113:b,118:P,119:U,120:N,121:D},{10:Fi,58:Ri,81:Ni,89:275,102:Oi,104:229,105:230,106:Pi,107:Mi,108:Vi,109:zi},{10:Fi,58:Ri,81:Ni,89:276,102:Oi,104:229,105:230,106:Pi,107:Mi,108:Vi,109:zi},t(vt,[2,57]),t(I,[2,33]),t(Ot,[2,117],{103:zr}),t(Ot,[2,118],{103:zr})],defaultActions:{},parseError:function(Et,Lt){if(Lt.recoverable)this.trace(Et);else{var Mt=new Error(Et);throw Mt.hash=Lt,Mt}},parse:function(Et){var Lt=this,Mt=[0],xt=[],ne=[null],q=[],fs=this.table,H="",ni=0,zl=0,Hd=2,ql=1,Gd=q.slice.call(arguments,1),Se=Object.create(this.lexer),xr={yy:{}};for(var Sa in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Sa)&&(xr.yy[Sa]=this.yy[Sa]);Se.setInput(Et,xr.yy),xr.yy.lexer=Se,xr.yy.parser=this,typeof Se.yylloc>"u"&&(Se.yylloc={});var wa=Se.yylloc;q.push(wa);var jd=Se.options&&Se.options.ranges;typeof xr.yy.parseError=="function"?this.parseError=xr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Xd(){var Wi;return Wi=xt.pop()||Se.lex()||ql,typeof Wi!="number"&&(Wi instanceof Array&&(xt=Wi,Wi=xt.pop()),Wi=Lt.symbols_[Wi]||Wi),Wi}for(var je,br,ai,va,qr={},on,qi,Wl,ln;;){if(br=Mt[Mt.length-1],this.defaultActions[br]?ai=this.defaultActions[br]:((je===null||typeof je>"u")&&(je=Xd()),ai=fs[br]&&fs[br][je]),typeof ai>"u"||!ai.length||!ai[0]){var Aa="";ln=[];for(on in fs[br])this.terminals_[on]&&on>Hd&&ln.push("'"+this.terminals_[on]+"'");Se.showPosition?Aa="Parse error on line "+(ni+1)+`:
`+Se.showPosition()+`
Expecting `+ln.join(", ")+", got '"+(this.terminals_[je]||je)+"'":Aa="Parse error on line "+(ni+1)+": Unexpected "+(je==ql?"end of input":"'"+(this.terminals_[je]||je)+"'"),this.parseError(Aa,{text:Se.match,token:this.terminals_[je]||je,line:Se.yylineno,loc:wa,expected:ln})}if(ai[0]instanceof Array&&ai.length>1)throw new Error("Parse Error: multiple actions possible at state: "+br+", token: "+je);switch(ai[0]){case 1:Mt.push(je),ne.push(Se.yytext),q.push(Se.yylloc),Mt.push(ai[1]),je=null,zl=Se.yyleng,H=Se.yytext,ni=Se.yylineno,wa=Se.yylloc;break;case 2:if(qi=this.productions_[ai[1]][1],qr.$=ne[ne.length-qi],qr._$={first_line:q[q.length-(qi||1)].first_line,last_line:q[q.length-1].last_line,first_column:q[q.length-(qi||1)].first_column,last_column:q[q.length-1].last_column},jd&&(qr._$.range=[q[q.length-(qi||1)].range[0],q[q.length-1].range[1]]),va=this.performAction.apply(qr,[H,zl,ni,xr.yy,ai[1],ne,q].concat(Gd)),typeof va<"u")return va;qi&&(Mt=Mt.slice(0,-1*qi*2),ne=ne.slice(0,-1*qi),q=q.slice(0,-1*qi)),Mt.push(this.productions_[ai[1]][0]),ne.push(qr.$),q.push(qr._$),Wl=fs[Mt[Mt.length-2]][Mt[Mt.length-1]],Mt.push(Wl);break;case 3:return!0}}return!0}},Ud=(function(){var ar={EOF:1,parseError:function(Lt,Mt){if(this.yy.parser)this.yy.parser.parseError(Lt,Mt);else throw new Error(Lt)},setInput:function(Et,Lt){return this.yy=Lt||this.yy||{},this._input=Et,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Et=this._input[0];this.yytext+=Et,this.yyleng++,this.offset++,this.match+=Et,this.matched+=Et;var Lt=Et.match(/(?:\r\n?|\n).*/g);return Lt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Et},unput:function(Et){var Lt=Et.length,Mt=Et.split(/(?:\r\n?|\n)/g);this._input=Et+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Lt),this.offset-=Lt;var xt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Mt.length-1&&(this.yylineno-=Mt.length-1);var ne=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Mt?(Mt.length===xt.length?this.yylloc.first_column:0)+xt[xt.length-Mt.length].length-Mt[0].length:this.yylloc.first_column-Lt},this.options.ranges&&(this.yylloc.range=[ne[0],ne[0]+this.yyleng-Lt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Et){this.unput(this.match.slice(Et))},pastInput:function(){var Et=this.matched.substr(0,this.matched.length-this.match.length);return(Et.length>20?"...":"")+Et.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Et=this.match;return Et.length<20&&(Et+=this._input.substr(0,20-Et.length)),(Et.substr(0,20)+(Et.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Et=this.pastInput(),Lt=new Array(Et.length+1).join("-");return Et+this.upcomingInput()+`
`+Lt+"^"},test_match:function(Et,Lt){var Mt,xt,ne;if(this.options.backtrack_lexer&&(ne={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ne.yylloc.range=this.yylloc.range.slice(0))),xt=Et[0].match(/(?:\r\n?|\n).*/g),xt&&(this.yylineno+=xt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:xt?xt[xt.length-1].length-xt[xt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Et[0].length},this.yytext+=Et[0],this.match+=Et[0],this.matches=Et,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Et[0].length),this.matched+=Et[0],Mt=this.performAction.call(this,this.yy,this,Lt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Mt)return Mt;if(this._backtrack){for(var q in ne)this[q]=ne[q];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Et,Lt,Mt,xt;this._more||(this.yytext="",this.match="");for(var ne=this._currentRules(),q=0;q<ne.length;q++)if(Mt=this._input.match(this.rules[ne[q]]),Mt&&(!Lt||Mt[0].length>Lt[0].length)){if(Lt=Mt,xt=q,this.options.backtrack_lexer){if(Et=this.test_match(Mt,ne[q]),Et!==!1)return Et;if(this._backtrack){Lt=!1;continue}else return!1}else if(!this.options.flex)break}return Lt?(Et=this.test_match(Lt,ne[xt]),Et!==!1?Et:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Lt=this.next();return Lt||this.lex()},begin:function(Lt){this.conditionStack.push(Lt)},popState:function(){var Lt=this.conditionStack.length-1;return Lt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Lt){return Lt=this.conditionStack.length-1-Math.abs(Lt||0),Lt>=0?this.conditionStack[Lt]:"INITIAL"},pushState:function(Lt){this.begin(Lt)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Lt,Mt,xt,ne){switch(xt){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:this.begin("callbackname");break;case 8:this.popState();break;case 9:this.popState(),this.begin("callbackargs");break;case 10:return 92;case 11:this.popState();break;case 12:return 93;case 13:return"MD_STR";case 14:this.popState();break;case 15:this.begin("md_string");break;case 16:return"STR";case 17:this.popState();break;case 18:this.pushState("string");break;case 19:return 81;case 20:return 99;case 21:return 82;case 22:return 101;case 23:return 83;case 24:return 84;case 25:return 94;case 26:this.begin("click");break;case 27:this.popState();break;case 28:return 85;case 29:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 30:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 31:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 32:return 27;case 33:return 32;case 34:return 95;case 35:return 95;case 36:return 95;case 37:return 95;case 38:return this.popState(),13;case 39:return this.popState(),14;case 40:return this.popState(),14;case 41:return this.popState(),14;case 42:return this.popState(),14;case 43:return this.popState(),14;case 44:return this.popState(),14;case 45:return this.popState(),14;case 46:return this.popState(),14;case 47:return this.popState(),14;case 48:return this.popState(),14;case 49:return 118;case 50:return 119;case 51:return 120;case 52:return 121;case 53:return 102;case 54:return 108;case 55:return 44;case 56:return 58;case 57:return 42;case 58:return 8;case 59:return 103;case 60:return 112;case 61:return this.popState(),75;case 62:return this.pushState("edgeText"),73;case 63:return 116;case 64:return this.popState(),75;case 65:return this.pushState("thickEdgeText"),73;case 66:return 116;case 67:return this.popState(),75;case 68:return this.pushState("dottedEdgeText"),73;case 69:return 116;case 70:return 75;case 71:return this.popState(),51;case 72:return"TEXT";case 73:return this.pushState("ellipseText"),50;case 74:return this.popState(),53;case 75:return this.pushState("text"),52;case 76:return this.popState(),55;case 77:return this.pushState("text"),54;case 78:return 56;case 79:return this.pushState("text"),65;case 80:return this.popState(),62;case 81:return this.pushState("text"),61;case 82:return this.popState(),47;case 83:return this.pushState("text"),46;case 84:return this.popState(),67;case 85:return this.popState(),69;case 86:return 114;case 87:return this.pushState("trapText"),66;case 88:return this.pushState("trapText"),68;case 89:return 115;case 90:return 65;case 91:return 87;case 92:return"SEP";case 93:return 86;case 94:return 112;case 95:return 108;case 96:return 42;case 97:return 106;case 98:return 111;case 99:return 113;case 100:return this.popState(),60;case 101:return this.pushState("text"),60;case 102:return this.popState(),49;case 103:return this.pushState("text"),48;case 104:return this.popState(),31;case 105:return this.pushState("text"),29;case 106:return this.popState(),64;case 107:return this.pushState("text"),63;case 108:return"TEXT";case 109:return"QUOTE";case 110:return 9;case 111:return 10;case 112:return 11}},rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{callbackargs:{rules:[11,12,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},callbackname:{rules:[8,9,10,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},href:{rules:[15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},click:{rules:[15,18,27,28,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},dottedEdgeText:{rules:[15,18,67,69,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},thickEdgeText:{rules:[15,18,64,66,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},edgeText:{rules:[15,18,61,63,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},trapText:{rules:[15,18,70,73,75,77,81,83,84,85,86,87,88,101,103,105,107],inclusive:!1},ellipseText:{rules:[15,18,70,71,72,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},text:{rules:[15,18,70,73,74,75,76,77,80,81,82,83,87,88,100,101,102,103,104,105,106,107,108],inclusive:!1},vertex:{rules:[15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},dir:{rules:[15,18,38,39,40,41,42,43,44,45,46,47,48,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_descr_multiline:{rules:[5,6,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_descr:{rules:[3,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_title:{rules:[1,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},md_string:{rules:[13,14,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},string:{rules:[15,16,17,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},INITIAL:{rules:[0,2,4,7,15,18,19,20,21,22,23,24,25,26,29,30,31,32,33,34,35,36,37,49,50,51,52,53,54,55,56,57,58,59,60,61,62,64,65,67,68,70,73,75,77,78,79,81,83,87,88,89,90,91,92,93,94,95,96,97,98,99,101,103,105,107,109,110,111,112],inclusive:!0}}};return ar})();Ca.lexer=Ud;function Ea(){this.yy={}}return Ea.prototype=Ca,Ca.Parser=Ea,new Ea})();ja.parser=ja;const Qo=ja,dx="flowchart-";let xc=0,ss=Y(),Kt={},mi=[],Gr={},tr=[],Mn={},Vn={},xn=0,Xa=!0,ci,ca,ha=[];const ua=t=>mt.sanitizeText(t,ss),Js=function(t){const e=Object.keys(Kt);for(const i of e)if(Kt[i].id===t)return Kt[i].domId;return t},U1=function(t,e,i,r,s,n,a={}){let o,l=t;l!==void 0&&l.trim().length!==0&&(Kt[l]===void 0&&(Kt[l]={id:l,labelType:"text",domId:dx+l+"-"+xc,styles:[],classes:[]}),xc++,e!==void 0?(ss=Y(),o=ua(e.text.trim()),Kt[l].labelType=e.type,o[0]==='"'&&o[o.length-1]==='"'&&(o=o.substring(1,o.length-1)),Kt[l].text=o):Kt[l].text===void 0&&(Kt[l].text=t),i!==void 0&&(Kt[l].type=i),r?.forEach(function(h){Kt[l].styles.push(h)}),s?.forEach(function(h){Kt[l].classes.push(h)}),n!==void 0&&(Kt[l].dir=n),Kt[l].props===void 0?Kt[l].props=a:a!==void 0&&Object.assign(Kt[l].props,a))},H1=function(t,e,i){const n={start:t,end:e,type:void 0,text:"",labelType:"text"};B.info("abc78 Got edge...",n);const a=i.text;if(a!==void 0&&(n.text=ua(a.text.trim()),n.text[0]==='"'&&n.text[n.text.length-1]==='"'&&(n.text=n.text.substring(1,n.text.length-1)),n.labelType=a.type),i!==void 0&&(n.type=i.type,n.stroke=i.stroke,n.length=i.length),n?.length>10&&(n.length=10),mi.length<(ss.maxEdges??500))B.info("abc78 pushing edge..."),mi.push(n);else throw new Error(`Edge limit exceeded. ${mi.length} edges found, but the limit is ${ss.maxEdges}.

Initialize mermaid with maxEdges set to a higher number to allow more edges.
You cannot set this config via configuration inside the diagram as it is a secure config.
You have to call mermaid.initialize.`)},G1=function(t,e,i){B.info("addLink (abc78)",t,e,i);let r,s;for(r=0;r<t.length;r++)for(s=0;s<e.length;s++)H1(t[r],e[s],i)},j1=function(t,e){t.forEach(function(i){i==="default"?mi.defaultInterpolate=e:mi[i].interpolate=e})},X1=function(t,e){t.forEach(function(i){if(i>=mi.length)throw new Error(`The index ${i} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${mi.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);i==="default"?mi.defaultStyle=e:(Rt.isSubstringInArray("fill",e)===-1&&e.push("fill:none"),mi[i].style=e)})},$1=function(t,e){t.split(",").forEach(function(i){Gr[i]===void 0&&(Gr[i]={id:i,styles:[],textStyles:[]}),e?.forEach(function(r){if(r.match("color")){const s=r.replace("fill","bgFill").replace("color","fill");Gr[i].textStyles.push(s)}Gr[i].styles.push(r)})})},K1=function(t){ci=t,ci.match(/.*</)&&(ci="RL"),ci.match(/.*\^/)&&(ci="BT"),ci.match(/.*>/)&&(ci="LR"),ci.match(/.*v/)&&(ci="TB"),ci==="TD"&&(ci="TB")},da=function(t,e){t.split(",").forEach(function(i){let r=i;Kt[r]!==void 0&&Kt[r].classes.push(e),Mn[r]!==void 0&&Mn[r].classes.push(e)})},fx=function(t,e){t.split(",").forEach(function(i){e!==void 0&&(Vn[ca==="gen-1"?Js(i):i]=ua(e))})},px=function(t,e,i){let r=Js(t);if(Y().securityLevel!=="loose"||e===void 0)return;let s=[];if(typeof i=="string"){s=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<s.length;n++){let a=s[n].trim();a.charAt(0)==='"'&&a.charAt(a.length-1)==='"'&&(a=a.substr(1,a.length-2)),s[n]=a}}s.length===0&&s.push(t),Kt[t]!==void 0&&(Kt[t].haveCallback=!0,ha.push(function(){const n=document.querySelector(`[id="${r}"]`);n!==null&&n.addEventListener("click",function(){Rt.runFunc(e,...s)},!1)}))},Q1=function(t,e,i){t.split(",").forEach(function(r){Kt[r]!==void 0&&(Kt[r].link=Rt.formatUrl(e,ss),Kt[r].linkTarget=i)}),da(t,"clickable")},Z1=function(t){if(Vn.hasOwnProperty(t))return Vn[t]},J1=function(t,e,i){t.split(",").forEach(function(r){px(r,e,i)}),da(t,"clickable")},tu=function(t){ha.forEach(function(e){e(t)})},eu=function(){return ci.trim()},iu=function(){return Kt},ru=function(){return mi},su=function(){return Gr},nu=function(t){let e=yt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=yt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),yt(t).select("svg").selectAll("g.node").on("mouseover",function(){const s=yt(this);if(s.attr("title")===null)return;const a=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(s.attr("title")).style("left",window.scrollX+a.left+(a.right-a.left)/2+"px").style("top",window.scrollY+a.bottom+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),s.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),yt(this).classed("hover",!1)})};ha.push(nu);const au=function(t="gen-1"){Kt={},Gr={},mi=[],ha=[nu],tr=[],Mn={},xn=0,Vn={},Xa=!0,ca=t,ss=Y(),Oe()},ou=t=>{ca=t||"gen-2"},lu=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},cu=function(t,e,i){let r=t.text.trim(),s=i.text;t===i&&i.text.match(/\s/)&&(r=void 0);function n(u){const p={boolean:{},number:{},string:{}},d=[];let g;return{nodeList:u.filter(function(x){const _=typeof x;return x.stmt&&x.stmt==="dir"?(g=x.value,!1):x.trim()===""?!1:_ in p?p[_].hasOwnProperty(x)?!1:p[_][x]=!0:d.includes(x)?!1:d.push(x)}),dir:g}}let a=[];const{nodeList:o,dir:l}=n(a.concat.apply(a,e));if(a=o,ca==="gen-1")for(let u=0;u<a.length;u++)a[u]=Js(a[u]);r=r||"subGraph"+xn,s=s||"",s=ua(s),xn=xn+1;const h={id:r,nodes:a,title:s.trim(),classes:[],dir:l,labelType:i.type};return B.info("Adding",h.id,h.nodes,h.dir),h.nodes=xu(h,tr).nodes,tr.push(h),Mn[r]=h,r},gx=function(t){for(const[e,i]of tr.entries())if(i.id===t)return e;return-1};let ys=-1;const hu=[],uu=function(t,e){const i=tr[e].nodes;if(ys=ys+1,ys>2e3)return;if(hu[ys]=e,tr[e].id===t)return{result:!0,count:0};let r=0,s=1;for(;r<i.length;){const n=gx(i[r]);if(n>=0){const a=uu(t,n);if(a.result)return{result:!0,count:s+a.count};s=s+a.count}r=r+1}return{result:!1,count:s}},du=function(t){return hu[t]},fu=function(){ys=-1,tr.length>0&&uu("none",tr.length-1)},pu=function(){return tr},gu=()=>Xa?(Xa=!1,!0):!1,yx=t=>{let e=t.trim(),i="arrow_open";switch(e[0]){case"<":i="arrow_point",e=e.slice(1);break;case"x":i="arrow_cross",e=e.slice(1);break;case"o":i="arrow_circle",e=e.slice(1);break}let r="normal";return e.includes("=")&&(r="thick"),e.includes(".")&&(r="dotted"),{type:i,stroke:r}},mx=(t,e)=>{const i=e.length;let r=0;for(let s=0;s<i;++s)e[s]===t&&++r;return r},xx=t=>{const e=t.trim();let i=e.slice(0,-1),r="arrow_open";switch(e.slice(-1)){case"x":r="arrow_cross",e[0]==="x"&&(r="double_"+r,i=i.slice(1));break;case">":r="arrow_point",e[0]==="<"&&(r="double_"+r,i=i.slice(1));break;case"o":r="arrow_circle",e[0]==="o"&&(r="double_"+r,i=i.slice(1));break}let s="normal",n=i.length-1;i[0]==="="&&(s="thick"),i[0]==="~"&&(s="invisible");let a=mx(".",i);return a&&(s="dotted",n=a),{type:r,stroke:s,length:n}},yu=(t,e)=>{const i=xx(t);let r;if(e){if(r=yx(e),r.stroke!==i.stroke)return{type:"INVALID",stroke:"INVALID"};if(r.type==="arrow_open")r.type=i.type;else{if(r.type!==i.type)return{type:"INVALID",stroke:"INVALID"};r.type="double_"+r.type}return r.type==="double_arrow"&&(r.type="double_arrow_point"),r.length=i.length,r}return i},mu=(t,e)=>{let i=!1;return t.forEach(r=>{r.nodes.indexOf(e)>=0&&(i=!0)}),i},xu=(t,e)=>{const i=[];return t.nodes.forEach((r,s)=>{mu(e,r)||i.push(t.nodes[s])}),{nodes:i}},bu={firstGraph:gu},Sr={defaultConfig:()=>a1.flowchart,setAccTitle:Pe,getAccTitle:Ye,getAccDescription:He,setAccDescription:Ue,addVertex:U1,lookUpDomId:Js,addLink:G1,updateLinkInterpolate:j1,updateLink:X1,addClass:$1,setDirection:K1,setClass:da,setTooltip:fx,getTooltip:Z1,setClickEvent:J1,setLink:Q1,bindFunctions:tu,getDirection:eu,getVertices:iu,getEdges:ru,getClasses:su,clear:au,setGen:ou,defaultStyle:lu,addSubGraph:cu,getDepthFirstPos:du,indexNodes:fu,getSubGraphs:pu,destructLink:yu,lex:bu,exists:mu,makeUniq:xu,setDiagramTitle:ri,getDiagramTitle:Ge},bx=Object.freeze(Object.defineProperty({__proto__:null,addClass:$1,addLink:G1,addSingleLink:H1,addSubGraph:cu,addVertex:U1,bindFunctions:tu,clear:au,default:Sr,defaultStyle:lu,destructLink:yu,firstGraph:gu,getClasses:su,getDepthFirstPos:du,getDirection:eu,getEdges:ru,getSubGraphs:pu,getTooltip:Z1,getVertices:iu,indexNodes:fu,lex:bu,lookUpDomId:Js,setClass:da,setClickEvent:J1,setDirection:K1,setGen:ou,setLink:Q1,updateLink:X1,updateLinkInterpolate:j1},Symbol.toStringTag,{value:"Module"}));function kx(t){const e=t.replace(/\n{2,}/g,`
`);return kh(e)}function _x(t){const e=kx(t),{children:i}=_h(e),r=[[]];let s=0;function n(a,o="normal"){a.type==="text"?a.value.split(`
`).forEach((h,u)=>{u!==0&&(s++,r.push([])),h.split(" ").forEach(p=>{p&&r[s].push({content:p,type:o})})}):(a.type==="strong"||a.type==="emphasis")&&a.children.forEach(l=>{n(l,a.type)})}return i.forEach(a=>{a.type==="paragraph"&&a.children.forEach(o=>{n(o)})}),r}function Tx(t){const{children:e}=_h(t);function i(r){return r.type==="text"?r.value.replace(/\n/g,"<br/>"):r.type==="strong"?`<strong>${r.children.map(i).join("")}</strong>`:r.type==="emphasis"?`<em>${r.children.map(i).join("")}</em>`:r.type==="paragraph"?`<p>${r.children.map(i).join("")}</p>`:`Unsupported markdown: ${r.type}`}return e.map(i).join("")}function Cx(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map(e=>e.segment):[...t]}function Ex(t,e){const i=Cx(e.content);return ku(t,[],i,e.type)}function ku(t,e,i,r){if(i.length===0)return[{content:e.join(""),type:r},{content:"",type:r}];const[s,...n]=i,a=[...e,s];return t([{content:a.join(""),type:r}])?ku(t,a,n,r):(e.length===0&&s&&(e.push(s),i.shift()),[{content:e.join(""),type:r},{content:i.join(""),type:r}])}function Sx(t,e){if(t.some(({content:i})=>i.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return $a(t,e)}function $a(t,e,i=[],r=[]){if(t.length===0)return r.length>0&&i.push(r),i.length>0?i:[];let s="";t[0].content===" "&&(s=" ",t.shift());const n=t.shift()??{content:" ",type:"normal"},a=[...r];if(s!==""&&a.push({content:s,type:"normal"}),a.push(n),e(a))return $a(t,e,i,a);if(r.length>0)i.push(r),t.unshift(n);else if(n.content){const[o,l]=Ex(e,n);i.push([o]),l.content&&t.unshift(l)}return $a(t,e,i)}function wx(t,e){e&&t.attr("style",e)}function vx(t,e,i,r,s=!1){const n=t.append("foreignObject"),a=n.append("xhtml:div"),o=e.label,l=e.isNode?"nodeLabel":"edgeLabel";a.html(te(`
    <span class="${l} ${r}" `+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+o+"</span>",ee())),wx(a,e.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("max-width",i+"px"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),s&&a.attr("class","labelBkg");let h=a.node().getBoundingClientRect();return h.width===i&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",i+"px"),h=a.node().getBoundingClientRect()),n.style("width",h.width),n.style("height",h.height),n.node()}function Zo(t,e,i){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*i-.1+"em").attr("dy",i+"em")}function Ax(t,e,i){const r=t.append("text"),s=Zo(r,1,e);Jo(s,i);const n=s.node().getComputedTextLength();return r.remove(),n}function Lx(t,e,i){var r;const s=t.append("text"),n=Zo(s,1,e);Jo(n,[{content:i,type:"normal"}]);const a=(r=n.node())==null?void 0:r.getBoundingClientRect();return a&&s.remove(),a}function Bx(t,e,i,r=!1){const n=e.append("g"),a=n.insert("rect").attr("class","background"),o=n.append("text").attr("y","-10.1");let l=0;for(const h of i){const u=d=>Ax(n,1.1,d)<=t,p=u(h)?[h]:Sx(h,u);for(const d of p){const g=Zo(o,l,1.1);Jo(g,d),l++}}if(r){const h=o.node().getBBox(),u=2;return a.attr("x",-u).attr("y",-u).attr("width",h.width+2*u).attr("height",h.height+2*u),n.node()}else return o.node()}function Jo(t,e){t.text(""),e.forEach((i,r)=>{const s=t.append("tspan").attr("font-style",i.type==="emphasis"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",i.type==="strong"?"bold":"normal");r===0?s.text(i.content):s.text(" "+i.content)})}const fa=(t,e="",{style:i="",isTitle:r=!1,classes:s="",useHtmlLabels:n=!0,isNode:a=!0,width:o=200,addSvgBackground:l=!1}={})=>{if(B.info("createText",e,i,r,s,n,a,l),n){const h=Tx(e),u={isNode:a,label:Is(h).replace(/fa[blrs]?:fa-[\w-]+/g,d=>`<i class='${d.replace(":"," ")}'></i>`),labelStyle:i.replace("fill:","color:")};return vx(t,u,o,s,l)}else{const h=_x(e);return Bx(o,t,h,l)}},Ix=(t,e,i,r)=>{e.forEach(s=>{qx[s](t,i,r)})},Dx=(t,e,i)=>{B.trace("Making markers for ",i),t.append("defs").append("marker").attr("id",i+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},Fx=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},Rx=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},Nx=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},Ox=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",i+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},Px=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},Mx=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},Vx=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},zx=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},qx={extension:Dx,composition:Fx,aggregation:Rx,dependency:Nx,lollipop:Ox,point:Px,circle:Mx,cross:Vx,barb:zx},tl=Ix;function Wx(t,e){e&&t.attr("style",e)}function Yx(t,e){const i=yt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=i.append("xhtml:div"),s=t.label,n=t.isNode?"nodeLabel":"edgeLabel";return r.html(te('<span class="'+n+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+s+"</span>",e)),Wx(r,t.labelStyle),r.style("display","inline-block"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),i.node()}const Ux=(t,e,i,r)=>{let s=t||"";typeof s=="object"&&(s=s[0]);const n=Y();if(Te(n.flowchart.htmlLabels)){s=s.replace(/\\n|\n/g,"<br />"),B.debug("vertexText"+s);const a={isNode:r,label:Is(s).replace(/fa[blrs]?:fa-[\w-]+/g,l=>`<i class='${l.replace(":"," ")}'></i>`),labelStyle:e.replace("fill:","color:")};return Yx(a,n)}else{const a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("style",e.replace("color:","fill:"));let o=[];typeof s=="string"?o=s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?o=s:o=[];for(const l of o){const h=document.createElementNS("http://www.w3.org/2000/svg","tspan");h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),h.setAttribute("dy","1em"),h.setAttribute("x","0"),i?h.setAttribute("class","title-row"):h.setAttribute("class","row"),h.textContent=l.trim(),a.appendChild(h)}return a}},Ke=Ux,Ce=async(t,e,i,r)=>{let s;const n=e.useHtmlLabels||Te(Y().flowchart.htmlLabels);i?s=i:s="node default";const a=t.insert("g").attr("class",s).attr("id",e.domId||e.id),o=a.insert("g").attr("class","label").attr("style",e.labelStyle);let l;e.labelText===void 0?l="":l=typeof e.labelText=="string"?e.labelText:e.labelText[0];const h=o.node();let u;e.labelType==="markdown"?u=fa(o,te(Is(l),Y()),{useHtmlLabels:n,width:e.width||Y().flowchart.wrappingWidth,classes:"markdown-node-label"}):u=h.appendChild(Ke(te(Is(l),Y()),e.labelStyle,!1,r));let p=u.getBBox();const d=e.padding/2;if(Te(Y().flowchart.htmlLabels)){const g=u.children[0],y=yt(u),x=g.getElementsByTagName("img");if(x){const _=l.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...x].map(w=>new Promise(E=>{function R(){if(w.style.display="flex",w.style.flexDirection="column",_){const v=Y().fontSize?Y().fontSize:window.getComputedStyle(document.body).fontSize,k=parseInt(v,10)*5+"px";w.style.minWidth=k,w.style.maxWidth=k}else w.style.width="100%";E(w)}setTimeout(()=>{w.complete&&R()}),w.addEventListener("error",R),w.addEventListener("load",R)})))}p=g.getBoundingClientRect(),y.attr("width",p.width),y.attr("height",p.height)}return n?o.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"):o.attr("transform","translate(0, "+-p.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:a,bbox:p,halfPadding:d,label:o}},oe=(t,e)=>{const i=e.node().getBBox();t.width=i.width,t.height=i.height};function Di(t,e,i,r){return t.insert("polygon",":first-child").attr("points",r.map(function(s){return s.x+","+s.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+i/2+")")}function Hx(t,e){return t.intersect(e)}function _u(t,e,i,r){var s=t.x,n=t.y,a=s-r.x,o=n-r.y,l=Math.sqrt(e*e*o*o+i*i*a*a),h=Math.abs(e*i*a/l);r.x<s&&(h=-h);var u=Math.abs(e*i*o/l);return r.y<n&&(u=-u),{x:s+h,y:n+u}}function Gx(t,e,i){return _u(t,e,e,i)}function jx(t,e,i,r){var s,n,a,o,l,h,u,p,d,g,y,x,_,w,E;if(s=e.y-t.y,a=t.x-e.x,l=e.x*t.y-t.x*e.y,d=s*i.x+a*i.y+l,g=s*r.x+a*r.y+l,!(d!==0&&g!==0&&bc(d,g))&&(n=r.y-i.y,o=i.x-r.x,h=r.x*i.y-i.x*r.y,u=n*t.x+o*t.y+h,p=n*e.x+o*e.y+h,!(u!==0&&p!==0&&bc(u,p))&&(y=s*o-n*a,y!==0)))return x=Math.abs(y/2),_=a*h-o*l,w=_<0?(_-x)/y:(_+x)/y,_=n*l-s*h,E=_<0?(_-x)/y:(_+x)/y,{x:w,y:E}}function bc(t,e){return t*e>0}function Xx(t,e,i){var r=t.x,s=t.y,n=[],a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(y){a=Math.min(a,y.x),o=Math.min(o,y.y)}):(a=Math.min(a,e.x),o=Math.min(o,e.y));for(var l=r-t.width/2-a,h=s-t.height/2-o,u=0;u<e.length;u++){var p=e[u],d=e[u<e.length-1?u+1:0],g=jx(t,i,{x:l+p.x,y:h+p.y},{x:l+d.x,y:h+d.y});g&&n.push(g)}return n.length?(n.length>1&&n.sort(function(y,x){var _=y.x-i.x,w=y.y-i.y,E=Math.sqrt(_*_+w*w),R=x.x-i.x,v=x.y-i.y,T=Math.sqrt(R*R+v*v);return E<T?-1:E===T?0:1}),n[0]):t}const $x=(t,e)=>{var i=t.x,r=t.y,s=e.x-i,n=e.y-r,a=t.width/2,o=t.height/2,l,h;return Math.abs(n)*a>Math.abs(s)*o?(n<0&&(o=-o),l=n===0?0:o*s/n,h=o):(s<0&&(a=-a),l=a,h=s===0?0:a*n/s),{x:i+l,y:r+h}},tn=$x,ie={node:Hx,circle:Gx,ellipse:_u,polygon:Xx,rect:tn},Kx=async(t,e)=>{e.useHtmlLabels||Y().flowchart.htmlLabels||(e.centerLabel=!0);const{shapeSvg:r,bbox:s,halfPadding:n}=await Ce(t,e,"node "+e.classes,!0);B.info("Classes = ",e.classes);const a=r.insert("rect",":first-child");return a.attr("rx",e.rx).attr("ry",e.ry).attr("x",-s.width/2-n).attr("y",-s.height/2-n).attr("width",s.width+e.padding).attr("height",s.height+e.padding),oe(e,a),e.intersect=function(o){return ie.rect(e,o)},r},Qx=Kx,Zx=t=>{const e=new Set;for(const i of t)switch(i){case"x":e.add("right"),e.add("left");break;case"y":e.add("up"),e.add("down");break;default:e.add(i);break}return e},Jx=(t,e,i)=>{const r=Zx(t),s=2,n=e.height+2*i.padding,a=n/s,o=e.width+2*a+i.padding,l=i.padding/2;return r.has("right")&&r.has("left")&&r.has("up")&&r.has("down")?[{x:0,y:0},{x:a,y:0},{x:o/2,y:2*l},{x:o-a,y:0},{x:o,y:0},{x:o,y:-n/3},{x:o+2*l,y:-n/2},{x:o,y:-2*n/3},{x:o,y:-n},{x:o-a,y:-n},{x:o/2,y:-n-2*l},{x:a,y:-n},{x:0,y:-n},{x:0,y:-2*n/3},{x:-2*l,y:-n/2},{x:0,y:-n/3}]:r.has("right")&&r.has("left")&&r.has("up")?[{x:a,y:0},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:a,y:-n},{x:0,y:-n/2}]:r.has("right")&&r.has("left")&&r.has("down")?[{x:0,y:0},{x:a,y:-n},{x:o-a,y:-n},{x:o,y:0}]:r.has("right")&&r.has("up")&&r.has("down")?[{x:0,y:0},{x:o,y:-a},{x:o,y:-n+a},{x:0,y:-n}]:r.has("left")&&r.has("up")&&r.has("down")?[{x:o,y:0},{x:0,y:-a},{x:0,y:-n+a},{x:o,y:-n}]:r.has("right")&&r.has("left")?[{x:a,y:0},{x:a,y:-l},{x:o-a,y:-l},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:o-a,y:-n+l},{x:a,y:-n+l},{x:a,y:-n},{x:0,y:-n/2}]:r.has("up")&&r.has("down")?[{x:o/2,y:0},{x:0,y:-l},{x:a,y:-l},{x:a,y:-n+l},{x:0,y:-n+l},{x:o/2,y:-n},{x:o,y:-n+l},{x:o-a,y:-n+l},{x:o-a,y:-l},{x:o,y:-l}]:r.has("right")&&r.has("up")?[{x:0,y:0},{x:o,y:-a},{x:0,y:-n}]:r.has("right")&&r.has("down")?[{x:0,y:0},{x:o,y:0},{x:0,y:-n}]:r.has("left")&&r.has("up")?[{x:o,y:0},{x:0,y:-a},{x:o,y:-n}]:r.has("left")&&r.has("down")?[{x:o,y:0},{x:0,y:0},{x:o,y:-n}]:r.has("right")?[{x:a,y:-l},{x:a,y:-l},{x:o-a,y:-l},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:o-a,y:-n+l},{x:a,y:-n+l},{x:a,y:-n+l}]:r.has("left")?[{x:a,y:0},{x:a,y:-l},{x:o-a,y:-l},{x:o-a,y:-n+l},{x:a,y:-n+l},{x:a,y:-n},{x:0,y:-n/2}]:r.has("up")?[{x:a,y:-l},{x:a,y:-n+l},{x:0,y:-n+l},{x:o/2,y:-n},{x:o,y:-n+l},{x:o-a,y:-n+l},{x:o-a,y:-l}]:r.has("down")?[{x:o/2,y:0},{x:0,y:-l},{x:a,y:-l},{x:a,y:-n+l},{x:o-a,y:-n+l},{x:o-a,y:-l},{x:o,y:-l}]:[{x:0,y:0}]},kc=t=>t?" "+t:"",si=(t,e)=>`node default${kc(t.classes)} ${kc(t.class)}`,_c=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ce(t,e,si(e),!0),s=r.width+e.padding,n=r.height+e.padding,a=s+n,o=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}];B.info("Question main (Circle)");const l=Di(i,a,a,o);return l.attr("style",e.style),oe(e,l),e.intersect=function(h){return B.warn("Intersect called"),ie.polygon(e,o,h)},i},t4=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=28,s=[{x:0,y:r/2},{x:r/2,y:0},{x:0,y:-r/2},{x:-r/2,y:0}];return i.insert("polygon",":first-child").attr("points",s.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(a){return ie.circle(e,14,a)},i},e4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ce(t,e,si(e),!0),s=4,n=r.height+e.padding,a=n/s,o=r.width+2*a+e.padding,l=[{x:a,y:0},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:a,y:-n},{x:0,y:-n/2}],h=Di(i,o,n,l);return h.attr("style",e.style),oe(e,h),e.intersect=function(u){return ie.polygon(e,l,u)},i},i4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ce(t,e,void 0,!0),s=2,n=r.height+2*e.padding,a=n/s,o=r.width+2*a+e.padding,l=Jx(e.directions,r,e),h=Di(i,o,n,l);return h.attr("style",e.style),oe(e,h),e.intersect=function(u){return ie.polygon(e,l,u)},i},r4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ce(t,e,si(e),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:-n/2,y:0},{x:s,y:0},{x:s,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}];return Di(i,s,n,a).attr("style",e.style),e.width=s+n,e.height=n,e.intersect=function(l){return ie.polygon(e,a,l)},i},s4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ce(t,e,si(e),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:-2*n/6,y:0},{x:s-n/6,y:0},{x:s+2*n/6,y:-n},{x:n/6,y:-n}],o=Di(i,s,n,a);return o.attr("style",e.style),oe(e,o),e.intersect=function(l){return ie.polygon(e,a,l)},i},n4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ce(t,e,si(e),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:2*n/6,y:0},{x:s+n/6,y:0},{x:s-2*n/6,y:-n},{x:-n/6,y:-n}],o=Di(i,s,n,a);return o.attr("style",e.style),oe(e,o),e.intersect=function(l){return ie.polygon(e,a,l)},i},a4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ce(t,e,si(e),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:-2*n/6,y:0},{x:s+2*n/6,y:0},{x:s-n/6,y:-n},{x:n/6,y:-n}],o=Di(i,s,n,a);return o.attr("style",e.style),oe(e,o),e.intersect=function(l){return ie.polygon(e,a,l)},i},o4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ce(t,e,si(e),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:n/6,y:0},{x:s-n/6,y:0},{x:s+2*n/6,y:-n},{x:-2*n/6,y:-n}],o=Di(i,s,n,a);return o.attr("style",e.style),oe(e,o),e.intersect=function(l){return ie.polygon(e,a,l)},i},l4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ce(t,e,si(e),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:0,y:0},{x:s+n/2,y:0},{x:s,y:-n/2},{x:s+n/2,y:-n},{x:0,y:-n}],o=Di(i,s,n,a);return o.attr("style",e.style),oe(e,o),e.intersect=function(l){return ie.polygon(e,a,l)},i},c4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ce(t,e,si(e),!0),s=r.width+e.padding,n=s/2,a=n/(2.5+s/50),o=r.height+a+e.padding,l="M 0,"+a+" a "+n+","+a+" 0,0,0 "+s+" 0 a "+n+","+a+" 0,0,0 "+-s+" 0 l 0,"+o+" a "+n+","+a+" 0,0,0 "+s+" 0 l 0,"+-o,h=i.attr("label-offset-y",a).insert("path",":first-child").attr("style",e.style).attr("d",l).attr("transform","translate("+-s/2+","+-(o/2+a)+")");return oe(e,h),e.intersect=function(u){const p=ie.rect(e,u),d=p.x-e.x;if(n!=0&&(Math.abs(d)<e.width/2||Math.abs(d)==e.width/2&&Math.abs(p.y-e.y)>e.height/2-a)){let g=a*a*(1-d*d/(n*n));g!=0&&(g=Math.sqrt(g)),g=a-g,u.y-e.y>0&&(g=-g),p.y+=g}return p},i},h4=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Ce(t,e,"node "+e.classes+" "+e.class,!0),n=i.insert("rect",":first-child"),a=e.positioned?e.width:r.width+e.padding,o=e.positioned?e.height:r.height+e.padding,l=e.positioned?-a/2:-r.width/2-s,h=e.positioned?-o/2:-r.height/2-s;if(n.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",l).attr("y",h).attr("width",a).attr("height",o),e.props){const u=new Set(Object.keys(e.props));e.props.borders&&(el(n,e.props.borders,a,o),u.delete("borders")),u.forEach(p=>{B.warn(`Unknown node property ${p}`)})}return oe(e,n),e.intersect=function(u){return ie.rect(e,u)},i},u4=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Ce(t,e,"node "+e.classes,!0),n=i.insert("rect",":first-child"),a=e.positioned?e.width:r.width+e.padding,o=e.positioned?e.height:r.height+e.padding,l=e.positioned?-a/2:-r.width/2-s,h=e.positioned?-o/2:-r.height/2-s;if(n.attr("class","basic cluster composite label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",l).attr("y",h).attr("width",a).attr("height",o),e.props){const u=new Set(Object.keys(e.props));e.props.borders&&(el(n,e.props.borders,a,o),u.delete("borders")),u.forEach(p=>{B.warn(`Unknown node property ${p}`)})}return oe(e,n),e.intersect=function(u){return ie.rect(e,u)},i},d4=async(t,e)=>{const{shapeSvg:i}=await Ce(t,e,"label",!0);B.trace("Classes = ",e.class);const r=i.insert("rect",":first-child"),s=0,n=0;if(r.attr("width",s).attr("height",n),i.attr("class","label edgeLabel"),e.props){const a=new Set(Object.keys(e.props));e.props.borders&&(el(r,e.props.borders,s,n),a.delete("borders")),a.forEach(o=>{B.warn(`Unknown node property ${o}`)})}return oe(e,r),e.intersect=function(a){return ie.rect(e,a)},i};function el(t,e,i,r){const s=[],n=o=>{s.push(o,0)},a=o=>{s.push(0,o)};e.includes("t")?(B.debug("add top border"),n(i)):a(i),e.includes("r")?(B.debug("add right border"),n(r)):a(r),e.includes("b")?(B.debug("add bottom border"),n(i)):a(i),e.includes("l")?(B.debug("add left border"),n(r)):a(r),t.attr("stroke-dasharray",s.join(" "))}const f4=(t,e)=>{let i;e.classes?i="node "+e.classes:i="node default";const r=t.insert("g").attr("class",i).attr("id",e.domId||e.id),s=r.insert("rect",":first-child"),n=r.insert("line"),a=r.insert("g").attr("class","label"),o=e.labelText.flat?e.labelText.flat():e.labelText;let l="";typeof o=="object"?l=o[0]:l=o,B.info("Label text abc79",l,o,typeof o=="object");const h=a.node().appendChild(Ke(l,e.labelStyle,!0,!0));let u={width:0,height:0};if(Te(Y().flowchart.htmlLabels)){const x=h.children[0],_=yt(h);u=x.getBoundingClientRect(),_.attr("width",u.width),_.attr("height",u.height)}B.info("Text 2",o);const p=o.slice(1,o.length);let d=h.getBBox();const g=a.node().appendChild(Ke(p.join?p.join("<br/>"):p,e.labelStyle,!0,!0));if(Te(Y().flowchart.htmlLabels)){const x=g.children[0],_=yt(g);u=x.getBoundingClientRect(),_.attr("width",u.width),_.attr("height",u.height)}const y=e.padding/2;return yt(g).attr("transform","translate( "+(u.width>d.width?0:(d.width-u.width)/2)+", "+(d.height+y+5)+")"),yt(h).attr("transform","translate( "+(u.width<d.width?0:-(d.width-u.width)/2)+", 0)"),u=a.node().getBBox(),a.attr("transform","translate("+-u.width/2+", "+(-u.height/2-y+3)+")"),s.attr("class","outer title-state").attr("x",-u.width/2-y).attr("y",-u.height/2-y).attr("width",u.width+e.padding).attr("height",u.height+e.padding),n.attr("class","divider").attr("x1",-u.width/2-y).attr("x2",u.width/2+y).attr("y1",-u.height/2-y+d.height+y).attr("y2",-u.height/2-y+d.height+y),oe(e,s),e.intersect=function(x){return ie.rect(e,x)},r},p4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ce(t,e,si(e),!0),s=r.height+e.padding,n=r.width+s/4+e.padding,a=i.insert("rect",":first-child").attr("style",e.style).attr("rx",s/2).attr("ry",s/2).attr("x",-n/2).attr("y",-s/2).attr("width",n).attr("height",s);return oe(e,a),e.intersect=function(o){return ie.rect(e,o)},i},g4=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Ce(t,e,si(e),!0),n=i.insert("circle",":first-child");return n.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+s).attr("width",r.width+e.padding).attr("height",r.height+e.padding),B.info("Circle main"),oe(e,n),e.intersect=function(a){return B.info("Circle intersect",e,r.width/2+s,a),ie.circle(e,r.width/2+s,a)},i},y4=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Ce(t,e,si(e),!0),n=5,a=i.insert("g",":first-child"),o=a.insert("circle"),l=a.insert("circle");return a.attr("class",e.class),o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+s+n).attr("width",r.width+e.padding+n*2).attr("height",r.height+e.padding+n*2),l.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+s).attr("width",r.width+e.padding).attr("height",r.height+e.padding),B.info("DoubleCircle main"),oe(e,o),e.intersect=function(h){return B.info("DoubleCircle intersect",e,r.width/2+s+n,h),ie.circle(e,r.width/2+s+n,h)},i},m4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ce(t,e,si(e),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:0,y:0},{x:s,y:0},{x:s,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],o=Di(i,s,n,a);return o.attr("style",e.style),oe(e,o),e.intersect=function(l){return ie.polygon(e,a,l)},i},x4=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=i.insert("circle",":first-child");return r.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),oe(e,r),e.intersect=function(s){return ie.circle(e,7,s)},i},Tc=(t,e,i)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let s=70,n=10;i==="LR"&&(s=10,n=70);const a=r.append("rect").attr("x",-1*s/2).attr("y",-1*n/2).attr("width",s).attr("height",n).attr("class","fork-join");return oe(e,a),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(o){return ie.rect(e,o)},r},b4=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=i.insert("circle",":first-child"),s=i.insert("circle",":first-child");return s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),r.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),oe(e,s),e.intersect=function(n){return ie.circle(e,7,n)},i},k4=(t,e)=>{const i=e.padding/2,r=4,s=8;let n;e.classes?n="node "+e.classes:n="node default";const a=t.insert("g").attr("class",n).attr("id",e.domId||e.id),o=a.insert("rect",":first-child"),l=a.insert("line"),h=a.insert("line");let u=0,p=r;const d=a.insert("g").attr("class","label");let g=0;const y=e.classData.annotations&&e.classData.annotations[0],x=e.classData.annotations[0]?"Â«"+e.classData.annotations[0]+"Â»":"",_=d.node().appendChild(Ke(x,e.labelStyle,!0,!0));let w=_.getBBox();if(Te(Y().flowchart.htmlLabels)){const S=_.children[0],m=yt(_);w=S.getBoundingClientRect(),m.attr("width",w.width),m.attr("height",w.height)}e.classData.annotations[0]&&(p+=w.height+r,u+=w.width);let E=e.classData.label;e.classData.type!==void 0&&e.classData.type!==""&&(Y().flowchart.htmlLabels?E+="&lt;"+e.classData.type+"&gt;":E+="<"+e.classData.type+">");const R=d.node().appendChild(Ke(E,e.labelStyle,!0,!0));yt(R).attr("class","classTitle");let v=R.getBBox();if(Te(Y().flowchart.htmlLabels)){const S=R.children[0],m=yt(R);v=S.getBoundingClientRect(),m.attr("width",v.width),m.attr("height",v.height)}p+=v.height+r,v.width>u&&(u=v.width);const T=[];e.classData.members.forEach(S=>{const m=S.getDisplayDetails();let C=m.displayText;Y().flowchart.htmlLabels&&(C=C.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const f=d.node().appendChild(Ke(C,m.cssStyle?m.cssStyle:e.labelStyle,!0,!0));let L=f.getBBox();if(Te(Y().flowchart.htmlLabels)){const b=f.children[0],P=yt(f);L=b.getBoundingClientRect(),P.attr("width",L.width),P.attr("height",L.height)}L.width>u&&(u=L.width),p+=L.height+r,T.push(f)}),p+=s;const k=[];if(e.classData.methods.forEach(S=>{const m=S.getDisplayDetails();let C=m.displayText;Y().flowchart.htmlLabels&&(C=C.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const f=d.node().appendChild(Ke(C,m.cssStyle?m.cssStyle:e.labelStyle,!0,!0));let L=f.getBBox();if(Te(Y().flowchart.htmlLabels)){const b=f.children[0],P=yt(f);L=b.getBoundingClientRect(),P.attr("width",L.width),P.attr("height",L.height)}L.width>u&&(u=L.width),p+=L.height+r,k.push(f)}),p+=s,y){let S=(u-w.width)/2;yt(_).attr("transform","translate( "+(-1*u/2+S)+", "+-1*p/2+")"),g=w.height+r}let A=(u-v.width)/2;return yt(R).attr("transform","translate( "+(-1*u/2+A)+", "+(-1*p/2+g)+")"),g+=v.height+r,l.attr("class","divider").attr("x1",-u/2-i).attr("x2",u/2+i).attr("y1",-p/2-i+s+g).attr("y2",-p/2-i+s+g),g+=s,T.forEach(S=>{yt(S).attr("transform","translate( "+-u/2+", "+(-1*p/2+g+s/2)+")");const m=S?.getBBox();g+=(m?.height??0)+r}),g+=s,h.attr("class","divider").attr("x1",-u/2-i).attr("x2",u/2+i).attr("y1",-p/2-i+s+g).attr("y2",-p/2-i+s+g),g+=s,k.forEach(S=>{yt(S).attr("transform","translate( "+-u/2+", "+(-1*p/2+g)+")");const m=S?.getBBox();g+=(m?.height??0)+r}),o.attr("style",e.style).attr("class","outer title-state").attr("x",-u/2-i).attr("y",-(p/2)-i).attr("width",u+e.padding).attr("height",p+e.padding),oe(e,o),e.intersect=function(S){return ie.rect(e,S)},a},Cc={rhombus:_c,composite:u4,question:_c,rect:h4,labelRect:d4,rectWithTitle:f4,choice:t4,circle:g4,doublecircle:y4,stadium:p4,hexagon:e4,block_arrow:i4,rect_left_inv_arrow:r4,lean_right:s4,lean_left:n4,trapezoid:a4,inv_trapezoid:o4,rect_right_inv_arrow:l4,cylinder:c4,start:x4,end:b4,note:Qx,subroutine:m4,fork:Tc,join:Tc,class_box:k4};let $r={};const pa=async(t,e,i)=>{let r,s;if(e.link){let n;Y().securityLevel==="sandbox"?n="_top":e.linkTarget&&(n=e.linkTarget||"_blank"),r=t.insert("svg:a").attr("xlink:href",e.link).attr("target",n),s=await Cc[e.shape](r,e,i)}else s=await Cc[e.shape](t,e,i),r=s;return e.tooltip&&s.attr("title",e.tooltip),e.class&&s.attr("class","node default "+e.class),r.attr("data-node","true"),r.attr("data-id",e.id),$r[e.id]=r,e.haveCallback&&$r[e.id].attr("class",$r[e.id].attr("class")+" clickable"),r},_4=(t,e)=>{$r[e.id]=t},T4=()=>{$r={}},Ka=t=>{const e=$r[t.id];B.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const i=8,r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-i)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r},ga=({flowchart:t})=>{var e,i;const r=((e=t?.subGraphTitleMargin)==null?void 0:e.top)??0,s=((i=t?.subGraphTitleMargin)==null?void 0:i.bottom)??0,n=r+s;return{subGraphTitleTopMargin:r,subGraphTitleBottomMargin:s,subGraphTitleTotalMargin:n}},or={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:5.3};function hn(t,e){if(t===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};t=zn(t),e=zn(e);const[i,r]=[t.x,t.y],[s,n]=[e.x,e.y],a=s-i,o=n-r;return{angle:Math.atan(o/a),deltaX:a,deltaY:o}}const zn=t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,Tu=t=>({x:function(e,i,r){let s=0;if(i===0&&Object.hasOwn(or,t.arrowTypeStart)){const{angle:n,deltaX:a}=hn(r[0],r[1]);s=or[t.arrowTypeStart]*Math.cos(n)*(a>=0?1:-1)}else if(i===r.length-1&&Object.hasOwn(or,t.arrowTypeEnd)){const{angle:n,deltaX:a}=hn(r[r.length-1],r[r.length-2]);s=or[t.arrowTypeEnd]*Math.cos(n)*(a>=0?1:-1)}return zn(e).x+s},y:function(e,i,r){let s=0;if(i===0&&Object.hasOwn(or,t.arrowTypeStart)){const{angle:n,deltaY:a}=hn(r[0],r[1]);s=or[t.arrowTypeStart]*Math.abs(Math.sin(n))*(a>=0?1:-1)}else if(i===r.length-1&&Object.hasOwn(or,t.arrowTypeEnd)){const{angle:n,deltaY:a}=hn(r[r.length-1],r[r.length-2]);s=or[t.arrowTypeEnd]*Math.abs(Math.sin(n))*(a>=0?1:-1)}return zn(e).y+s}}),Cu=(t,e,i,r,s)=>{e.arrowTypeStart&&Ec(t,"start",e.arrowTypeStart,i,r,s),e.arrowTypeEnd&&Ec(t,"end",e.arrowTypeEnd,i,r,s)},C4={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},Ec=(t,e,i,r,s,n)=>{const a=C4[i];if(!a){B.warn(`Unknown arrow type: ${i}`);return}const o=e==="start"?"Start":"End";t.attr(`marker-${e}`,`url(${r}#${s}_${n}-${a}${o})`)};let qn={},Le={};const E4=()=>{qn={},Le={}},il=(t,e)=>{const i=Te(Y().flowchart.htmlLabels),r=e.labelType==="markdown"?fa(t,e.label,{style:e.labelStyle,useHtmlLabels:i,addSvgBackground:!0}):Ke(e.label,e.labelStyle),s=t.insert("g").attr("class","edgeLabel"),n=s.insert("g").attr("class","label");n.node().appendChild(r);let a=r.getBBox();if(i){const l=r.children[0],h=yt(r);a=l.getBoundingClientRect(),h.attr("width",a.width),h.attr("height",a.height)}n.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),qn[e.id]=s,e.width=a.width,e.height=a.height;let o;if(e.startLabelLeft){const l=Ke(e.startLabelLeft,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),Le[e.id]||(Le[e.id]={}),Le[e.id].startLeft=h,un(o,e.startLabelLeft)}if(e.startLabelRight){const l=Ke(e.startLabelRight,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=h.node().appendChild(l),u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),Le[e.id]||(Le[e.id]={}),Le[e.id].startRight=h,un(o,e.startLabelRight)}if(e.endLabelLeft){const l=Ke(e.endLabelLeft,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),h.node().appendChild(l),Le[e.id]||(Le[e.id]={}),Le[e.id].endLeft=h,un(o,e.endLabelLeft)}if(e.endLabelRight){const l=Ke(e.endLabelRight,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),h.node().appendChild(l),Le[e.id]||(Le[e.id]={}),Le[e.id].endRight=h,un(o,e.endLabelRight)}return r};function un(t,e){Y().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}const Eu=(t,e)=>{B.debug("Moving label abc88 ",t.id,t.label,qn[t.id],e);let i=e.updatedPath?e.updatedPath:e.originalPath;const r=Y(),{subGraphTitleTotalMargin:s}=ga(r);if(t.label){const n=qn[t.id];let a=t.x,o=t.y;if(i){const l=Rt.calcLabelPosition(i);B.debug("Moving label "+t.label+" from (",a,",",o,") to (",l.x,",",l.y,") abc88"),e.updatedPath&&(a=l.x,o=l.y)}n.attr("transform",`translate(${a}, ${o+s/2})`)}if(t.startLabelLeft){const n=Le[t.id].startLeft;let a=t.x,o=t.y;if(i){const l=Rt.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",i);a=l.x,o=l.y}n.attr("transform",`translate(${a}, ${o})`)}if(t.startLabelRight){const n=Le[t.id].startRight;let a=t.x,o=t.y;if(i){const l=Rt.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",i);a=l.x,o=l.y}n.attr("transform",`translate(${a}, ${o})`)}if(t.endLabelLeft){const n=Le[t.id].endLeft;let a=t.x,o=t.y;if(i){const l=Rt.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",i);a=l.x,o=l.y}n.attr("transform",`translate(${a}, ${o})`)}if(t.endLabelRight){const n=Le[t.id].endRight;let a=t.x,o=t.y;if(i){const l=Rt.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",i);a=l.x,o=l.y}n.attr("transform",`translate(${a}, ${o})`)}},S4=(t,e)=>{const i=t.x,r=t.y,s=Math.abs(e.x-i),n=Math.abs(e.y-r),a=t.width/2,o=t.height/2;return s>=a||n>=o},w4=(t,e,i)=>{B.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(i)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const r=t.x,s=t.y,n=Math.abs(r-i.x),a=t.width/2;let o=i.x<e.x?a-n:a+n;const l=t.height/2,h=Math.abs(e.y-i.y),u=Math.abs(e.x-i.x);if(Math.abs(s-e.y)*a>Math.abs(r-e.x)*l){let p=i.y<e.y?e.y-l-s:s-l-e.y;o=u*p/h;const d={x:i.x<e.x?i.x+o:i.x-u+o,y:i.y<e.y?i.y+h-p:i.y-h+p};return o===0&&(d.x=e.x,d.y=e.y),u===0&&(d.x=e.x),h===0&&(d.y=e.y),B.debug(`abc89 topp/bott calc, Q ${h}, q ${p}, R ${u}, r ${o}`,d),d}else{i.x<e.x?o=e.x-a-r:o=r-a-e.x;let p=h*o/u,d=i.x<e.x?i.x+u-o:i.x-u+o,g=i.y<e.y?i.y+p:i.y-p;return B.debug(`sides calc abc89, Q ${h}, q ${p}, R ${u}, r ${o}`,{_x:d,_y:g}),o===0&&(d=e.x,g=e.y),u===0&&(d=e.x),h===0&&(g=e.y),{x:d,y:g}}},Sc=(t,e)=>{B.debug("abc88 cutPathAtIntersect",t,e);let i=[],r=t[0],s=!1;return t.forEach(n=>{if(!S4(e,n)&&!s){const a=w4(e,r,n);let o=!1;i.forEach(l=>{o=o||l.x===a.x&&l.y===a.y}),i.some(l=>l.x===a.x&&l.y===a.y)||i.push(a),s=!0}else r=n,s||i.push(n)}),i},Su=function(t,e,i,r,s,n,a){let o=i.points;B.debug("abc88 InsertEdge: edge=",i,"e=",e);let l=!1;const h=n.node(e.v);var u=n.node(e.w);u?.intersect&&h?.intersect&&(o=o.slice(1,i.points.length-1),o.unshift(h.intersect(o[0])),o.push(u.intersect(o[o.length-1]))),i.toCluster&&(B.debug("to cluster abc88",r[i.toCluster]),o=Sc(i.points,r[i.toCluster].node),l=!0),i.fromCluster&&(B.debug("from cluster abc88",r[i.fromCluster]),o=Sc(o.reverse(),r[i.fromCluster].node).reverse(),l=!0);const p=o.filter(v=>!Number.isNaN(v.y));let d=$s;i.curve&&(s==="graph"||s==="flowchart")&&(d=i.curve);const{x:g,y}=Tu(i),x=fr().x(g).y(y).curve(d);let _;switch(i.thickness){case"normal":_="edge-thickness-normal";break;case"thick":_="edge-thickness-thick";break;case"invisible":_="edge-thickness-thick";break;default:_=""}switch(i.pattern){case"solid":_+=" edge-pattern-solid";break;case"dotted":_+=" edge-pattern-dotted";break;case"dashed":_+=" edge-pattern-dashed";break}const w=t.append("path").attr("d",x(p)).attr("id",i.id).attr("class"," "+_+(i.classes?" "+i.classes:"")).attr("style",i.style);let E="";(Y().flowchart.arrowMarkerAbsolute||Y().state.arrowMarkerAbsolute)&&(E=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,E=E.replace(/\(/g,"\\("),E=E.replace(/\)/g,"\\)")),Cu(w,i,E,a,s);let R={};return l&&(R.updatedPath=o),R.originalPath=i.points,R};let Ft={},xi={},wu={};const v4=()=>{xi={},wu={},Ft={}},Wn=(t,e)=>(B.trace("In isDescendant",e," ",t," = ",xi[e].includes(t)),!!xi[e].includes(t)),A4=(t,e)=>(B.info("Descendants of ",e," is ",xi[e]),B.info("Edge is ",t),t.v===e||t.w===e?!1:xi[e]?xi[e].includes(t.v)||Wn(t.v,e)||Wn(t.w,e)||xi[e].includes(t.w):(B.debug("Tilt, ",e,",not in descendants"),!1)),vu=(t,e,i,r)=>{B.warn("Copying children of ",t,"root",r,"data",e.node(t),r);const s=e.children(t)||[];t!==r&&s.push(t),B.warn("Copying (nodes) clusterId",t,"nodes",s),s.forEach(n=>{if(e.children(n).length>0)vu(n,e,i,r);else{const a=e.node(n);B.info("cp ",n," to ",r," with parent ",t),i.setNode(n,a),r!==e.parent(n)&&(B.warn("Setting parent",n,e.parent(n)),i.setParent(n,e.parent(n))),t!==r&&n!==t?(B.debug("Setting parent",n,t),i.setParent(n,t)):(B.info("In copy ",t,"root",r,"data",e.node(t),r),B.debug("Not Setting parent for node=",n,"cluster!==rootId",t!==r,"node!==clusterId",n!==t));const o=e.edges(n);B.debug("Copying Edges",o),o.forEach(l=>{B.info("Edge",l);const h=e.edge(l.v,l.w,l.name);B.info("Edge data",h,r);try{A4(l,r)?(B.info("Copying as ",l.v,l.w,h,l.name),i.setEdge(l.v,l.w,h,l.name),B.info("newGraph edges ",i.edges(),i.edge(i.edges()[0]))):B.info("Skipping copy of edge ",l.v,"-->",l.w," rootId: ",r," clusterId:",t)}catch(u){B.error(u)}})}B.debug("Removing node",n),e.removeNode(n)})},Au=(t,e)=>{const i=e.children(t);let r=[...i];for(const s of i)wu[s]=t,r=[...r,...Au(s,e)];return r},Rs=(t,e)=>{B.trace("Searching",t);const i=e.children(t);if(B.trace("Searching children of id ",t,i),i.length<1)return B.trace("This is a valid node",t),t;for(const r of i){const s=Rs(r,e);if(s)return B.trace("Found replacement for",t," => ",s),s}},dn=t=>!Ft[t]||!Ft[t].externalConnections?t:Ft[t]?Ft[t].id:t,L4=(t,e)=>{if(!t||e>10){B.debug("Opting out, no graph ");return}else B.debug("Opting in, graph ");t.nodes().forEach(function(i){t.children(i).length>0&&(B.warn("Cluster identified",i," Replacement id in edges: ",Rs(i,t)),xi[i]=Au(i,t),Ft[i]={id:Rs(i,t),clusterData:t.node(i)})}),t.nodes().forEach(function(i){const r=t.children(i),s=t.edges();r.length>0?(B.debug("Cluster identified",i,xi),s.forEach(n=>{if(n.v!==i&&n.w!==i){const a=Wn(n.v,i),o=Wn(n.w,i);a^o&&(B.warn("Edge: ",n," leaves cluster ",i),B.warn("Descendants of XXX ",i,": ",xi[i]),Ft[i].externalConnections=!0)}})):B.debug("Not a cluster ",i,xi)});for(let i of Object.keys(Ft)){const r=Ft[i].id,s=t.parent(r);s!==i&&Ft[s]&&!Ft[s].externalConnections&&(Ft[i].id=s)}t.edges().forEach(function(i){const r=t.edge(i);B.warn("Edge "+i.v+" -> "+i.w+": "+JSON.stringify(i)),B.warn("Edge "+i.v+" -> "+i.w+": "+JSON.stringify(t.edge(i)));let s=i.v,n=i.w;if(B.warn("Fix XXX",Ft,"ids:",i.v,i.w,"Translating: ",Ft[i.v]," --- ",Ft[i.w]),Ft[i.v]&&Ft[i.w]&&Ft[i.v]===Ft[i.w]){B.warn("Fixing and trixing link to self - removing XXX",i.v,i.w,i.name),B.warn("Fixing and trixing - removing XXX",i.v,i.w,i.name),s=dn(i.v),n=dn(i.w),t.removeEdge(i.v,i.w,i.name);const a=i.w+"---"+i.v;t.setNode(a,{domId:a,id:a,labelStyle:"",labelText:r.label,padding:0,shape:"labelRect",style:""});const o=structuredClone(r),l=structuredClone(r);o.label="",o.arrowTypeEnd="none",l.label="",o.fromCluster=i.v,l.toCluster=i.v,t.setEdge(s,a,o,i.name+"-cyclic-special"),t.setEdge(a,n,l,i.name+"-cyclic-special")}else if(Ft[i.v]||Ft[i.w]){if(B.warn("Fixing and trixing - removing XXX",i.v,i.w,i.name),s=dn(i.v),n=dn(i.w),t.removeEdge(i.v,i.w,i.name),s!==i.v){const a=t.parent(s);Ft[a].externalConnections=!0,r.fromCluster=i.v}if(n!==i.w){const a=t.parent(n);Ft[a].externalConnections=!0,r.toCluster=i.w}B.warn("Fix Replacing with XXX",s,n,i.name),t.setEdge(s,n,r,i.name)}}),B.warn("Adjusted Graph",Xi(t)),Lu(t,0),B.trace(Ft)},Lu=(t,e)=>{if(B.warn("extractor - ",e,Xi(t),t.children("D")),e>10){B.error("Bailing out");return}let i=t.nodes(),r=!1;for(const s of i){const n=t.children(s);r=r||n.length>0}if(!r){B.debug("Done, no node has children",t.nodes());return}B.debug("Nodes = ",i,e);for(const s of i)if(B.debug("Extracting node",s,Ft,Ft[s]&&!Ft[s].externalConnections,!t.parent(s),t.node(s),t.children("D")," Depth ",e),!Ft[s])B.debug("Not a cluster",s,e);else if(!Ft[s].externalConnections&&t.children(s)&&t.children(s).length>0){B.warn("Cluster without external connections, without a parent and with children",s,e);let a=t.graph().rankdir==="TB"?"LR":"TB";Ft[s]&&Ft[s].clusterData&&Ft[s].clusterData.dir&&(a=Ft[s].clusterData.dir,B.warn("Fixing dir",Ft[s].clusterData.dir,a));const o=new Ii({multigraph:!0,compound:!0}).setGraph({rankdir:a,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});B.warn("Old graph before copy",Xi(t)),vu(s,t,o,s),t.setNode(s,{clusterNode:!0,id:s,clusterData:Ft[s].clusterData,labelText:Ft[s].labelText,graph:o}),B.warn("New graph after copy node: (",s,")",Xi(o)),B.debug("Old graph after copy",Xi(t))}else B.warn("Cluster ** ",s," **not meeting the criteria !externalConnections:",!Ft[s].externalConnections," no parent: ",!t.parent(s)," children ",t.children(s)&&t.children(s).length>0,t.children("D"),e),B.debug(Ft);i=t.nodes(),B.warn("New list of nodes",i);for(const s of i){const n=t.node(s);B.warn(" Now next level",s,n),n.clusterNode&&Lu(n.graph,e+1)}},Bu=(t,e)=>{if(e.length===0)return[];let i=Object.assign(e);return e.forEach(r=>{const s=t.children(r),n=Bu(t,s);i=[...i,...n]}),i},B4=t=>Bu(t,t.children()),I4=(t,e)=>{B.info("Creating subgraph rect for ",e.id,e);const i=Y(),r=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),s=r.insert("rect",":first-child"),n=Te(i.flowchart.htmlLabels),a=r.insert("g").attr("class","cluster-label"),o=e.labelType==="markdown"?fa(a,e.labelText,{style:e.labelStyle,useHtmlLabels:n}):a.node().appendChild(Ke(e.labelText,e.labelStyle,void 0,!0));let l=o.getBBox();if(Te(i.flowchart.htmlLabels)){const y=o.children[0],x=yt(o);l=y.getBoundingClientRect(),x.attr("width",l.width),x.attr("height",l.height)}const h=0*e.padding,u=h/2,p=e.width<=l.width+h?l.width+h:e.width;e.width<=l.width+h?e.diff=(l.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,B.trace("Data ",e,JSON.stringify(e)),s.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-p/2).attr("y",e.y-e.height/2-u).attr("width",p).attr("height",e.height+h);const{subGraphTitleTopMargin:d}=ga(i);n?a.attr("transform",`translate(${e.x-l.width/2}, ${e.y-e.height/2+d})`):a.attr("transform",`translate(${e.x}, ${e.y-e.height/2+d})`);const g=s.node().getBBox();return e.width=g.width,e.height=g.height,e.intersect=function(y){return tn(e,y)},r},D4=(t,e)=>{const i=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=i.insert("rect",":first-child"),s=0*e.padding,n=s/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-n).attr("y",e.y-e.height/2-n).attr("width",e.width+s).attr("height",e.height+s).attr("fill","none");const a=r.node().getBBox();return e.width=a.width,e.height=a.height,e.intersect=function(o){return tn(e,o)},i},F4=(t,e)=>{const i=Y(),r=t.insert("g").attr("class",e.classes).attr("id",e.id),s=r.insert("rect",":first-child"),n=r.insert("g").attr("class","cluster-label"),a=r.append("rect"),o=n.node().appendChild(Ke(e.labelText,e.labelStyle,void 0,!0));let l=o.getBBox();if(Te(i.flowchart.htmlLabels)){const y=o.children[0],x=yt(o);l=y.getBoundingClientRect(),x.attr("width",l.width),x.attr("height",l.height)}l=o.getBBox();const h=0*e.padding,u=h/2,p=e.width<=l.width+e.padding?l.width+e.padding:e.width;e.width<=l.width+e.padding?e.diff=(l.width+e.padding*0-e.width)/2:e.diff=-e.padding/2,s.attr("class","outer").attr("x",e.x-p/2-u).attr("y",e.y-e.height/2-u).attr("width",p+h).attr("height",e.height+h),a.attr("class","inner").attr("x",e.x-p/2-u).attr("y",e.y-e.height/2-u+l.height-1).attr("width",p+h).attr("height",e.height+h-l.height-3);const{subGraphTitleTopMargin:d}=ga(i);n.attr("transform",`translate(${e.x-l.width/2}, ${e.y-e.height/2-e.padding/3+(Te(i.flowchart.htmlLabels)?5:3)+d})`);const g=s.node().getBBox();return e.height=g.height,e.intersect=function(y){return tn(e,y)},r},R4=(t,e)=>{const i=t.insert("g").attr("class",e.classes).attr("id",e.id),r=i.insert("rect",":first-child"),s=0*e.padding,n=s/2;r.attr("class","divider").attr("x",e.x-e.width/2-n).attr("y",e.y-e.height/2).attr("width",e.width+s).attr("height",e.height+s);const a=r.node().getBBox();return e.width=a.width,e.height=a.height,e.diff=-e.padding/2,e.intersect=function(o){return tn(e,o)},i},N4={rect:I4,roundedWithTitle:F4,noteGroup:D4,divider:R4};let Iu={};const O4=(t,e)=>{B.trace("Inserting cluster");const i=e.shape||"rect";Iu[e.id]=N4[i](t,e)},P4=()=>{Iu={}},Du=async(t,e,i,r,s,n)=>{B.info("Graph in recursive render: XXX",Xi(e),s);const a=e.graph().rankdir;B.trace("Dir in recursive render - dir:",a);const o=t.insert("g").attr("class","root");e.nodes()?B.info("Recursive render XXX",e.nodes()):B.info("No nodes found for",e),e.edges().length>0&&B.trace("Recursive edges",e.edge(e.edges()[0]));const l=o.insert("g").attr("class","clusters"),h=o.insert("g").attr("class","edgePaths"),u=o.insert("g").attr("class","edgeLabels"),p=o.insert("g").attr("class","nodes");await Promise.all(e.nodes().map(async function(y){const x=e.node(y);if(s!==void 0){const _=JSON.parse(JSON.stringify(s.clusterData));B.info("Setting data for cluster XXX (",y,") ",_,s),e.setNode(s.id,_),e.parent(y)||(B.trace("Setting parent",y,s.id),e.setParent(y,s.id,_))}if(B.info("(Insert) Node XXX"+y+": "+JSON.stringify(e.node(y))),x&&x.clusterNode){B.info("Cluster identified",y,x.width,e.node(y));const _=await Du(p,x.graph,i,r,e.node(y),n),w=_.elem;oe(x,w),x.diff=_.diff||0,B.info("Node bounds (abc123)",y,x,x.width,x.x,x.y),_4(w,x),B.warn("Recursive render complete ",w,x)}else e.children(y).length>0?(B.info("Cluster - the non recursive path XXX",y,x.id,x,e),B.info(Rs(x.id,e)),Ft[x.id]={id:Rs(x.id,e),node:x}):(B.info("Node - the non recursive path",y,x.id,x),await pa(p,e.node(y),a))})),e.edges().forEach(function(y){const x=e.edge(y.v,y.w,y.name);B.info("Edge "+y.v+" -> "+y.w+": "+JSON.stringify(y)),B.info("Edge "+y.v+" -> "+y.w+": ",y," ",JSON.stringify(e.edge(y))),B.info("Fix",Ft,"ids:",y.v,y.w,"Translating: ",Ft[y.v],Ft[y.w]),il(u,x)}),e.edges().forEach(function(y){B.info("Edge "+y.v+" -> "+y.w+": "+JSON.stringify(y))}),B.info("#############################################"),B.info("###                Layout                 ###"),B.info("#############################################"),B.info(e),Xs(e),B.info("Graph after layout:",Xi(e));let d=0;const{subGraphTitleTotalMargin:g}=ga(n);return B4(e).forEach(function(y){const x=e.node(y);B.info("Position "+y+": "+JSON.stringify(e.node(y))),B.info("Position "+y+": ("+x.x,","+x.y,") width: ",x.width," height: ",x.height),x&&x.clusterNode?(x.y+=g,Ka(x)):e.children(y).length>0?(x.height+=g,O4(l,x),Ft[x.id].node=x):(x.y+=g/2,Ka(x))}),e.edges().forEach(function(y){const x=e.edge(y);B.info("Edge "+y.v+" -> "+y.w+": "+JSON.stringify(x),x),x.points.forEach(w=>w.y+=g/2);const _=Su(h,y,x,Ft,i,e,r);Eu(x,_)}),e.nodes().forEach(function(y){const x=e.node(y);B.info(y,x.type,x.diff),x.type==="group"&&(d=x.diff)}),{elem:o,diff:d}},rl=async(t,e,i,r,s)=>{tl(t,i,r,s),T4(),E4(),P4(),v4(),B.warn("Graph at first:",JSON.stringify(Xi(e))),L4(e),B.warn("Graph after:",JSON.stringify(Xi(e)));const n=Y();await Du(t,e,r,s,void 0,n)},Fu={},M4=function(t){const e=Object.keys(t);for(const i of e)Fu[i]=t[i]},Ru=async function(t,e,i,r,s,n){const a=r.select(`[id="${i}"]`),o=Object.keys(t);for(const l of o){const h=t[l];let u="default";h.classes.length>0&&(u=h.classes.join(" ")),u=u+" flowchart-label";const p=ii(h.styles);let d=h.text!==void 0?h.text:h.id,g;if(B.info("vertex",h,h.labelType),h.labelType==="markdown")B.info("vertex",h,h.labelType);else if(Te(Y().flowchart.htmlLabels))g=gh(a,{label:d}).node(),g.parentNode.removeChild(g);else{const w=s.createElementNS("http://www.w3.org/2000/svg","text");w.setAttribute("style",p.labelStyle.replace("color:","fill:"));const E=d.split(mt.lineBreakRegex);for(const R of E){const v=s.createElementNS("http://www.w3.org/2000/svg","tspan");v.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),v.setAttribute("dy","1em"),v.setAttribute("x","1"),v.textContent=R,w.appendChild(v)}g=w}let y=0,x="";switch(h.type){case"round":y=5,x="rect";break;case"square":x="rect";break;case"diamond":x="question";break;case"hexagon":x="hexagon";break;case"odd":x="rect_left_inv_arrow";break;case"lean_right":x="lean_right";break;case"lean_left":x="lean_left";break;case"trapezoid":x="trapezoid";break;case"inv_trapezoid":x="inv_trapezoid";break;case"odd_right":x="rect_left_inv_arrow";break;case"circle":x="circle";break;case"ellipse":x="ellipse";break;case"stadium":x="stadium";break;case"subroutine":x="subroutine";break;case"cylinder":x="cylinder";break;case"group":x="rect";break;case"doublecircle":x="doublecircle";break;default:x="rect"}const _=await Nr(d,Y());e.setNode(h.id,{labelStyle:p.labelStyle,shape:x,labelText:_,labelType:h.labelType,rx:y,ry:y,class:u,style:p.style,id:h.id,link:h.link,linkTarget:h.linkTarget,tooltip:n.db.getTooltip(h.id)||"",domId:n.db.lookUpDomId(h.id),haveCallback:h.haveCallback,width:h.type==="group"?500:void 0,dir:h.dir,type:h.type,props:h.props,padding:Y().flowchart.padding}),B.info("setNode",{labelStyle:p.labelStyle,labelType:h.labelType,shape:x,labelText:_,rx:y,ry:y,class:u,style:p.style,id:h.id,domId:n.db.lookUpDomId(h.id),width:h.type==="group"?500:void 0,type:h.type,dir:h.dir,props:h.props,padding:Y().flowchart.padding})}},Nu=async function(t,e,i){B.info("abc78 edges = ",t);let r=0,s={},n,a;if(t.defaultStyle!==void 0){const o=ii(t.defaultStyle);n=o.style,a=o.labelStyle}for(const o of t){r++;const l="L-"+o.start+"-"+o.end;s[l]===void 0?(s[l]=0,B.info("abc78 new entry",l,s[l])):(s[l]++,B.info("abc78 new entry",l,s[l]));let h=l+"-"+s[l];B.info("abc78 new link id to be used is",l,h,s[l]);const u="LS-"+o.start,p="LE-"+o.end,d={style:"",labelStyle:""};switch(d.minlen=o.length||1,o.type==="arrow_open"?d.arrowhead="none":d.arrowhead="normal",d.arrowTypeStart="arrow_open",d.arrowTypeEnd="arrow_open",o.type){case"double_arrow_cross":d.arrowTypeStart="arrow_cross";case"arrow_cross":d.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":d.arrowTypeStart="arrow_point";case"arrow_point":d.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":d.arrowTypeStart="arrow_circle";case"arrow_circle":d.arrowTypeEnd="arrow_circle";break}let g="",y="";switch(o.stroke){case"normal":g="fill:none;",n!==void 0&&(g=n),a!==void 0&&(y=a),d.thickness="normal",d.pattern="solid";break;case"dotted":d.thickness="normal",d.pattern="dotted",d.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":d.thickness="thick",d.pattern="solid",d.style="stroke-width: 3.5px;fill:none;";break;case"invisible":d.thickness="invisible",d.pattern="solid",d.style="stroke-width: 0;fill:none;";break}if(o.style!==void 0){const x=ii(o.style);g=x.style,y=x.labelStyle}d.style=d.style+=g,d.labelStyle=d.labelStyle+=y,o.interpolate!==void 0?d.curve=di(o.interpolate,ei):t.defaultInterpolate!==void 0?d.curve=di(t.defaultInterpolate,ei):d.curve=di(Fu.curve,ei),o.text===void 0?o.style!==void 0&&(d.arrowheadStyle="fill: #333"):(d.arrowheadStyle="fill: #333",d.labelpos="c"),d.labelType=o.labelType,d.label=await Nr(o.text.replace(mt.lineBreakRegex,`
`),Y()),o.style===void 0&&(d.style=d.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),d.labelStyle=d.labelStyle.replace("color:","fill:"),d.id=h,d.classes="flowchart-link "+u+" "+p,e.setEdge(o.start,o.end,d,r)}},V4=function(t,e){return e.db.getClasses()},z4=async function(t,e,i,r){B.info("Drawing flowchart");let s=r.db.getDirection();s===void 0&&(s="TD");const{securityLevel:n,flowchart:a}=Y(),o=a.nodeSpacing||50,l=a.rankSpacing||50;let h;n==="sandbox"&&(h=yt("#i"+e));const u=n==="sandbox"?yt(h.nodes()[0].contentDocument.body):yt("body"),p=n==="sandbox"?h.nodes()[0].contentDocument:document,d=new Ii({multigraph:!0,compound:!0}).setGraph({rankdir:s,nodesep:o,ranksep:l,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let g;const y=r.db.getSubGraphs();B.info("Subgraphs - ",y);for(let T=y.length-1;T>=0;T--)g=y[T],B.info("Subgraph - ",g),r.db.addVertex(g.id,{text:g.title,type:g.labelType},"group",void 0,g.classes,g.dir);const x=r.db.getVertices(),_=r.db.getEdges();B.info("Edges",_);let w=0;for(w=y.length-1;w>=0;w--){g=y[w],ph("cluster").append("text");for(let T=0;T<g.nodes.length;T++)B.info("Setting up subgraphs",g.nodes[T],g.id),d.setParent(g.nodes[T],g.id)}await Ru(x,d,e,u,p,r),await Nu(_,d);const E=u.select(`[id="${e}"]`),R=u.select("#"+e+" g");if(await rl(R,d,["point","circle","cross"],"flowchart",e),Rt.insertTitle(E,"flowchartTitleText",a.titleTopMargin,r.db.getDiagramTitle()),yr(d,E,a.diagramPadding,a.useMaxWidth),r.db.indexNodes("subGraph"+w),!a.htmlLabels){const T=p.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const k of T){const A=k.getBBox(),S=p.createElementNS("http://www.w3.org/2000/svg","rect");S.setAttribute("rx",0),S.setAttribute("ry",0),S.setAttribute("width",A.width),S.setAttribute("height",A.height),k.insertBefore(S,k.firstChild)}}Object.keys(x).forEach(function(T){const k=x[T];if(k.link){const A=yt("#"+e+' [id="'+T+'"]');if(A){const S=p.createElementNS("http://www.w3.org/2000/svg","a");S.setAttributeNS("http://www.w3.org/2000/svg","class",k.classes.join(" ")),S.setAttributeNS("http://www.w3.org/2000/svg","href",k.link),S.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),n==="sandbox"?S.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):k.linkTarget&&S.setAttributeNS("http://www.w3.org/2000/svg","target",k.linkTarget);const m=A.insert(function(){return S},":first-child"),C=A.select(".label-container");C&&m.append(function(){return C.node()});const f=A.select(".label");f&&m.append(function(){return f.node()})}}})},Qa={setConf:M4,addVertices:Ru,addEdges:Nu,getClasses:V4,draw:z4},q4=(t,e)=>{const i=mh,r=i(t,"r"),s=i(t,"g"),n=i(t,"b");return Xr(r,s,n,e)},W4=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span,p {
    color: ${t.titleColor};
  }

  .label text,span,p {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .katex path {
    fill: #000;
    stroke: #000;
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${q4(t.edgeLabelBackground,.5)};
    // background-color: 
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span,p {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,Ou=W4;function Pu(t,e,i){const r=e.width,s=e.height,n=(r+s)*.9,a=[{x:n/2,y:0},{x:n,y:-n/2},{x:n/2,y:-n},{x:0,y:-n/2}],o=ir(t,n,n,a);return i.intersect=function(l){return er(i,a,l)},o}function Mu(t,e,i){const s=e.height,n=s/4,a=e.width+2*n,o=[{x:n,y:0},{x:a-n,y:0},{x:a,y:-s/2},{x:a-n,y:-s},{x:n,y:-s},{x:0,y:-s/2}],l=ir(t,a,s,o);return i.intersect=function(h){return er(i,o,h)},l}function Vu(t,e,i){const r=e.width,s=e.height,n=[{x:-s/2,y:0},{x:r,y:0},{x:r,y:-s},{x:-s/2,y:-s},{x:0,y:-s/2}],a=ir(t,r,s,n);return i.intersect=function(o){return er(i,n,o)},a}function zu(t,e,i){const r=e.width,s=e.height,n=[{x:-2*s/6,y:0},{x:r-s/6,y:0},{x:r+2*s/6,y:-s},{x:s/6,y:-s}],a=ir(t,r,s,n);return i.intersect=function(o){return er(i,n,o)},a}function qu(t,e,i){const r=e.width,s=e.height,n=[{x:2*s/6,y:0},{x:r+s/6,y:0},{x:r-2*s/6,y:-s},{x:-s/6,y:-s}],a=ir(t,r,s,n);return i.intersect=function(o){return er(i,n,o)},a}function Wu(t,e,i){const r=e.width,s=e.height,n=[{x:-2*s/6,y:0},{x:r+2*s/6,y:0},{x:r-s/6,y:-s},{x:s/6,y:-s}],a=ir(t,r,s,n);return i.intersect=function(o){return er(i,n,o)},a}function Yu(t,e,i){const r=e.width,s=e.height,n=[{x:s/6,y:0},{x:r-s/6,y:0},{x:r+2*s/6,y:-s},{x:-2*s/6,y:-s}],a=ir(t,r,s,n);return i.intersect=function(o){return er(i,n,o)},a}function Uu(t,e,i){const r=e.width,s=e.height,n=[{x:0,y:0},{x:r+s/2,y:0},{x:r,y:-s/2},{x:r+s/2,y:-s},{x:0,y:-s}],a=ir(t,r,s,n);return i.intersect=function(o){return er(i,n,o)},a}function Hu(t,e,i){const r=e.height,s=e.width+r/4,n=t.insert("rect",":first-child").attr("rx",r/2).attr("ry",r/2).attr("x",-s/2).attr("y",-r/2).attr("width",s).attr("height",r);return i.intersect=function(a){return yh(i,a)},n}function Gu(t,e,i){const r=e.width,s=e.height,n=[{x:0,y:0},{x:r,y:0},{x:r,y:-s},{x:0,y:-s},{x:0,y:0},{x:-8,y:0},{x:r+8,y:0},{x:r+8,y:-s},{x:-8,y:-s},{x:-8,y:0}],a=ir(t,r,s,n);return i.intersect=function(o){return er(i,n,o)},a}function ju(t,e,i){const r=e.width,s=r/2,n=s/(2.5+r/50),a=e.height+n,o="M 0,"+n+" a "+s+","+n+" 0,0,0 "+r+" 0 a "+s+","+n+" 0,0,0 "+-r+" 0 l 0,"+a+" a "+s+","+n+" 0,0,0 "+r+" 0 l 0,"+-a,l=t.attr("label-offset-y",n).insert("path",":first-child").attr("d",o).attr("transform","translate("+-r/2+","+-(a/2+n)+")");return i.intersect=function(h){const u=yh(i,h),p=u.x-i.x;if(s!=0&&(Math.abs(p)<i.width/2||Math.abs(p)==i.width/2&&Math.abs(u.y-i.y)>i.height/2-n)){let d=n*n*(1-p*p/(s*s));d!=0&&(d=Math.sqrt(d)),d=n-d,h.y-i.y>0&&(d=-d),u.y+=d}return u},l}function Y4(t){t.shapes().question=Pu,t.shapes().hexagon=Mu,t.shapes().stadium=Hu,t.shapes().subroutine=Gu,t.shapes().cylinder=ju,t.shapes().rect_left_inv_arrow=Vu,t.shapes().lean_right=zu,t.shapes().lean_left=qu,t.shapes().trapezoid=Wu,t.shapes().inv_trapezoid=Yu,t.shapes().rect_right_inv_arrow=Uu}function U4(t){t({question:Pu}),t({hexagon:Mu}),t({stadium:Hu}),t({subroutine:Gu}),t({cylinder:ju}),t({rect_left_inv_arrow:Vu}),t({lean_right:zu}),t({lean_left:qu}),t({trapezoid:Wu}),t({inv_trapezoid:Yu}),t({rect_right_inv_arrow:Uu})}function ir(t,e,i,r){return t.insert("polygon",":first-child").attr("points",r.map(function(s){return s.x+","+s.y}).join(" ")).attr("transform","translate("+-e/2+","+i/2+")")}const H4={addToRender:Y4,addToRenderV2:U4},Xu={},G4=function(t){const e=Object.keys(t);for(const i of e)Xu[i]=t[i]},$u=async function(t,e,i,r,s,n){const a=r?r.select(`[id="${i}"]`):yt(`[id="${i}"]`),o=s||document,l=Object.keys(t);for(const h of l){const u=t[h];let p="default";u.classes.length>0&&(p=u.classes.join(" "));const d=ii(u.styles);let g=u.text!==void 0?u.text:u.id,y;if(Te(Y().flowchart.htmlLabels)){const w={label:await Nr(g.replace(/fa[blrs]?:fa-[\w-]+/g,E=>`<i class='${E.replace(":"," ")}'></i>`),Y())};y=gh(a,w).node(),y.parentNode.removeChild(y)}else{const w=o.createElementNS("http://www.w3.org/2000/svg","text");w.setAttribute("style",d.labelStyle.replace("color:","fill:"));const E=g.split(mt.lineBreakRegex);for(const R of E){const v=o.createElementNS("http://www.w3.org/2000/svg","tspan");v.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),v.setAttribute("dy","1em"),v.setAttribute("x","1"),v.textContent=R,w.appendChild(v)}y=w}let x=0,_="";switch(u.type){case"round":x=5,_="rect";break;case"square":_="rect";break;case"diamond":_="question";break;case"hexagon":_="hexagon";break;case"odd":_="rect_left_inv_arrow";break;case"lean_right":_="lean_right";break;case"lean_left":_="lean_left";break;case"trapezoid":_="trapezoid";break;case"inv_trapezoid":_="inv_trapezoid";break;case"odd_right":_="rect_left_inv_arrow";break;case"circle":_="circle";break;case"ellipse":_="ellipse";break;case"stadium":_="stadium";break;case"subroutine":_="subroutine";break;case"cylinder":_="cylinder";break;case"group":_="rect";break;default:_="rect"}B.warn("Adding node",u.id,u.domId),e.setNode(n.db.lookUpDomId(u.id),{labelType:"svg",labelStyle:d.labelStyle,shape:_,label:y,rx:x,ry:x,class:p,style:d.style,id:n.db.lookUpDomId(u.id)})}},Ku=async function(t,e,i){let r=0,s,n;if(t.defaultStyle!==void 0){const a=ii(t.defaultStyle);s=a.style,n=a.labelStyle}for(const a of t){r++;const o="L-"+a.start+"-"+a.end,l="LS-"+a.start,h="LE-"+a.end,u={};a.type==="arrow_open"?u.arrowhead="none":u.arrowhead="normal";let p="",d="";if(a.style!==void 0){const g=ii(a.style);p=g.style,d=g.labelStyle}else switch(a.stroke){case"normal":p="fill:none",s!==void 0&&(p=s),n!==void 0&&(d=n);break;case"dotted":p="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":p=" stroke-width: 3.5px;fill:none";break}u.style=p,u.labelStyle=d,a.interpolate!==void 0?u.curve=di(a.interpolate,ei):t.defaultInterpolate!==void 0?u.curve=di(t.defaultInterpolate,ei):u.curve=di(Xu.curve,ei),a.text===void 0?a.style!==void 0&&(u.arrowheadStyle="fill: #333"):(u.arrowheadStyle="fill: #333",u.labelpos="c",Te(Y().flowchart.htmlLabels)?(u.labelType="html",u.label=`<span id="L-${o}" class="edgeLabel L-${l}' L-${h}" style="${u.labelStyle}">${await Nr(a.text.replace(/fa[blrs]?:fa-[\w-]+/g,g=>`<i class='${g.replace(":"," ")}'></i>`),Y())}</span>`):(u.labelType="text",u.label=a.text.replace(mt.lineBreakRegex,`
`),a.style===void 0&&(u.style=u.style||"stroke: #333; stroke-width: 1.5px;fill:none"),u.labelStyle=u.labelStyle.replace("color:","fill:"))),u.id=o,u.class=l+" "+h,u.minlen=a.length||1,e.setEdge(i.db.lookUpDomId(a.start),i.db.lookUpDomId(a.end),u,r)}},j4=function(t,e){return B.info("Extracting classes"),e.db.getClasses()},X4=async function(t,e,i,r){B.info("Drawing flowchart");const{securityLevel:s,flowchart:n}=Y();let a;s==="sandbox"&&(a=yt("#i"+e));const o=s==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=s==="sandbox"?a.nodes()[0].contentDocument:document;let h=r.db.getDirection();h===void 0&&(h="TD");const u=n.nodeSpacing||50,p=n.rankSpacing||50,d=new Ii({multigraph:!0,compound:!0}).setGraph({rankdir:h,nodesep:u,ranksep:p,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let g;const y=r.db.getSubGraphs();for(let k=y.length-1;k>=0;k--)g=y[k],r.db.addVertex(g.id,g.title,"group",void 0,g.classes);const x=r.db.getVertices();B.warn("Get vertices",x);const _=r.db.getEdges();let w=0;for(w=y.length-1;w>=0;w--){g=y[w],ph("cluster").append("text");for(let k=0;k<g.nodes.length;k++)B.warn("Setting subgraph",g.nodes[k],r.db.lookUpDomId(g.nodes[k]),r.db.lookUpDomId(g.id)),d.setParent(r.db.lookUpDomId(g.nodes[k]),r.db.lookUpDomId(g.id))}await $u(x,d,e,o,l,r),await Ku(_,d,r);const E=new Zd;H4.addToRender(E),E.arrows().none=function(A,S,m,C){const L=A.append("marker").attr("id",S).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");Jd(L,m[C+"Style"])},E.arrows().normal=function(A,S){A.append("marker").attr("id",S).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const R=o.select(`[id="${e}"]`),v=o.select("#"+e+" g");for(E(v,d),v.selectAll("g.node").attr("title",function(){return r.db.getTooltip(this.id)}),r.db.indexNodes("subGraph"+w),w=0;w<y.length;w++)if(g=y[w],g.title!=="undefined"){const k=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(g.id)+'"] rect'),A=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(g.id)+'"]'),S=k[0].x.baseVal.value,m=k[0].y.baseVal.value,C=k[0].width.baseVal.value,L=yt(A[0]).select(".label");L.attr("transform",`translate(${S+C/2}, ${m+14})`),L.attr("id",e+"Text");for(let b=0;b<g.classes.length;b++)A[0].classList.add(g.classes[b])}if(!n.htmlLabels){const k=l.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const A of k){const S=A.getBBox(),m=l.createElementNS("http://www.w3.org/2000/svg","rect");m.setAttribute("rx",0),m.setAttribute("ry",0),m.setAttribute("width",S.width),m.setAttribute("height",S.height),A.insertBefore(m,A.firstChild)}}yr(d,R,n.diagramPadding,n.useMaxWidth),Object.keys(x).forEach(function(k){const A=x[k];if(A.link){const S=o.select("#"+e+' [id="'+r.db.lookUpDomId(k)+'"]');if(S){const m=l.createElementNS("http://www.w3.org/2000/svg","a");m.setAttributeNS("http://www.w3.org/2000/svg","class",A.classes.join(" ")),m.setAttributeNS("http://www.w3.org/2000/svg","href",A.link),m.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),s==="sandbox"?m.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):A.linkTarget&&m.setAttributeNS("http://www.w3.org/2000/svg","target",A.linkTarget);const C=S.insert(function(){return m},":first-child"),f=S.select(".label-container");f&&C.append(function(){return f.node()});const L=S.select(".label");L&&C.append(function(){return L.node()})}}})},$4={setConf:G4,addVertices:$u,addEdges:Ku,getClasses:j4,draw:X4},K4={parser:Qo,db:Sr,renderer:Qa,styles:Ou,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,$4.setConf(t.flowchart),Sr.clear(),Sr.setGen("gen-1")}},Q4=Object.freeze(Object.defineProperty({__proto__:null,diagram:K4},Symbol.toStringTag,{value:"Module"})),Z4={parser:Qo,db:Sr,renderer:Qa,styles:Ou,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,ug({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}}),Qa.setConf(t.flowchart),Sr.clear(),Sr.setGen("gen-2")}},J4=Object.freeze(Object.defineProperty({__proto__:null,diagram:Z4},Symbol.toStringTag,{value:"Module"}));var Za=(function(){var t=function(S,m,C,f){for(C=C||{},f=S.length;f--;C[S[f]]=m);return C},e=[6,8,10,20,22,24,26,27,28],i=[1,10],r=[1,11],s=[1,12],n=[1,13],a=[1,14],o=[1,15],l=[1,21],h=[1,22],u=[1,23],p=[1,24],d=[1,25],g=[6,8,10,13,15,18,19,20,22,24,26,27,28,41,42,43,44,45],y=[1,34],x=[27,28,46,47],_=[41,42,43,44,45],w=[17,34],E=[1,54],R=[1,53],v=[17,34,36,38],T={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,":":13,role:14,BLOCK_START:15,attributes:16,BLOCK_STOP:17,SQS:18,SQE:19,title:20,title_value:21,acc_title:22,acc_title_value:23,acc_descr:24,acc_descr_value:25,acc_descr_multiline_value:26,ALPHANUM:27,ENTITY_NAME:28,attribute:29,attributeType:30,attributeName:31,attributeKeyTypeList:32,attributeComment:33,ATTRIBUTE_WORD:34,attributeKeyType:35,COMMA:36,ATTRIBUTE_KEY:37,COMMENT:38,cardinality:39,relType:40,ZERO_OR_ONE:41,ZERO_OR_MORE:42,ONE_OR_MORE:43,ONLY_ONE:44,MD_PARENT:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:":",15:"BLOCK_START",17:"BLOCK_STOP",18:"SQS",19:"SQE",20:"title",21:"title_value",22:"acc_title",23:"acc_title_value",24:"acc_descr",25:"acc_descr_value",26:"acc_descr_multiline_value",27:"ALPHANUM",28:"ENTITY_NAME",34:"ATTRIBUTE_WORD",36:"COMMA",37:"ATTRIBUTE_KEY",38:"COMMENT",41:"ZERO_OR_ONE",42:"ZERO_OR_MORE",43:"ONE_OR_MORE",44:"ONLY_ONE",45:"MD_PARENT",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,4],[9,3],[9,1],[9,7],[9,6],[9,4],[9,2],[9,2],[9,2],[9,1],[11,1],[11,1],[16,1],[16,2],[29,2],[29,3],[29,3],[29,4],[30,1],[31,1],[32,1],[32,3],[35,1],[33,1],[12,3],[39,1],[39,1],[39,1],[39,1],[39,1],[40,1],[40,1],[14,1],[14,1],[14,1]],performAction:function(m,C,f,L,b,P,U){var N=P.length-1;switch(b){case 1:break;case 2:this.$=[];break;case 3:P[N-1].push(P[N]),this.$=P[N-1];break;case 4:case 5:this.$=P[N];break;case 6:case 7:this.$=[];break;case 8:L.addEntity(P[N-4]),L.addEntity(P[N-2]),L.addRelationship(P[N-4],P[N],P[N-2],P[N-3]);break;case 9:L.addEntity(P[N-3]),L.addAttributes(P[N-3],P[N-1]);break;case 10:L.addEntity(P[N-2]);break;case 11:L.addEntity(P[N]);break;case 12:L.addEntity(P[N-6],P[N-4]),L.addAttributes(P[N-6],P[N-1]);break;case 13:L.addEntity(P[N-5],P[N-3]);break;case 14:L.addEntity(P[N-3],P[N-1]);break;case 15:case 16:this.$=P[N].trim(),L.setAccTitle(this.$);break;case 17:case 18:this.$=P[N].trim(),L.setAccDescription(this.$);break;case 19:case 43:this.$=P[N];break;case 20:case 41:case 42:this.$=P[N].replace(/"/g,"");break;case 21:case 29:this.$=[P[N]];break;case 22:P[N].push(P[N-1]),this.$=P[N];break;case 23:this.$={attributeType:P[N-1],attributeName:P[N]};break;case 24:this.$={attributeType:P[N-2],attributeName:P[N-1],attributeKeyTypeList:P[N]};break;case 25:this.$={attributeType:P[N-2],attributeName:P[N-1],attributeComment:P[N]};break;case 26:this.$={attributeType:P[N-3],attributeName:P[N-2],attributeKeyTypeList:P[N-1],attributeComment:P[N]};break;case 27:case 28:case 31:this.$=P[N];break;case 30:P[N-2].push(P[N]),this.$=P[N-2];break;case 32:this.$=P[N].replace(/"/g,"");break;case 33:this.$={cardA:P[N],relType:P[N-1],cardB:P[N-2]};break;case 34:this.$=L.Cardinality.ZERO_OR_ONE;break;case 35:this.$=L.Cardinality.ZERO_OR_MORE;break;case 36:this.$=L.Cardinality.ONE_OR_MORE;break;case 37:this.$=L.Cardinality.ONLY_ONE;break;case 38:this.$=L.Cardinality.MD_PARENT;break;case 39:this.$=L.Identification.NON_IDENTIFYING;break;case 40:this.$=L.Identification.IDENTIFYING;break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,20:i,22:r,24:s,26:n,27:a,28:o},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:16,11:9,20:i,22:r,24:s,26:n,27:a,28:o},t(e,[2,5]),t(e,[2,6]),t(e,[2,11],{12:17,39:20,15:[1,18],18:[1,19],41:l,42:h,43:u,44:p,45:d}),{21:[1,26]},{23:[1,27]},{25:[1,28]},t(e,[2,18]),t(g,[2,19]),t(g,[2,20]),t(e,[2,4]),{11:29,27:a,28:o},{16:30,17:[1,31],29:32,30:33,34:y},{11:35,27:a,28:o},{40:36,46:[1,37],47:[1,38]},t(x,[2,34]),t(x,[2,35]),t(x,[2,36]),t(x,[2,37]),t(x,[2,38]),t(e,[2,15]),t(e,[2,16]),t(e,[2,17]),{13:[1,39]},{17:[1,40]},t(e,[2,10]),{16:41,17:[2,21],29:32,30:33,34:y},{31:42,34:[1,43]},{34:[2,27]},{19:[1,44]},{39:45,41:l,42:h,43:u,44:p,45:d},t(_,[2,39]),t(_,[2,40]),{14:46,27:[1,49],28:[1,48],48:[1,47]},t(e,[2,9]),{17:[2,22]},t(w,[2,23],{32:50,33:51,35:52,37:E,38:R}),t([17,34,37,38],[2,28]),t(e,[2,14],{15:[1,55]}),t([27,28],[2,33]),t(e,[2,8]),t(e,[2,41]),t(e,[2,42]),t(e,[2,43]),t(w,[2,24],{33:56,36:[1,57],38:R}),t(w,[2,25]),t(v,[2,29]),t(w,[2,32]),t(v,[2,31]),{16:58,17:[1,59],29:32,30:33,34:y},t(w,[2,26]),{35:60,37:E},{17:[1,61]},t(e,[2,13]),t(v,[2,30]),t(e,[2,12])],defaultActions:{34:[2,27],41:[2,22]},parseError:function(m,C){if(C.recoverable)this.trace(m);else{var f=new Error(m);throw f.hash=C,f}},parse:function(m){var C=this,f=[0],L=[],b=[null],P=[],U=this.table,N="",D=0,F=0,I=2,M=1,z=P.slice.call(arguments,1),st=Object.create(this.lexer),j={yy:{}};for(var dt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,dt)&&(j.yy[dt]=this.yy[dt]);st.setInput(m,j.yy),j.yy.lexer=st,j.yy.parser=this,typeof st.yylloc>"u"&&(st.yylloc={});var K=st.yylloc;P.push(K);var G=st.options&&st.options.ranges;typeof j.yy.parseError=="function"?this.parseError=j.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function tt(){var St;return St=L.pop()||st.lex()||M,typeof St!="number"&&(St instanceof Array&&(L=St,St=L.pop()),St=C.symbols_[St]||St),St}for(var nt,Q,J,O,at={},W,ft,V,vt;;){if(Q=f[f.length-1],this.defaultActions[Q]?J=this.defaultActions[Q]:((nt===null||typeof nt>"u")&&(nt=tt()),J=U[Q]&&U[Q][nt]),typeof J>"u"||!J.length||!J[0]){var X="";vt=[];for(W in U[Q])this.terminals_[W]&&W>I&&vt.push("'"+this.terminals_[W]+"'");st.showPosition?X="Parse error on line "+(D+1)+`:
`+st.showPosition()+`
Expecting `+vt.join(", ")+", got '"+(this.terminals_[nt]||nt)+"'":X="Parse error on line "+(D+1)+": Unexpected "+(nt==M?"end of input":"'"+(this.terminals_[nt]||nt)+"'"),this.parseError(X,{text:st.match,token:this.terminals_[nt]||nt,line:st.yylineno,loc:K,expected:vt})}if(J[0]instanceof Array&&J.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Q+", token: "+nt);switch(J[0]){case 1:f.push(nt),b.push(st.yytext),P.push(st.yylloc),f.push(J[1]),nt=null,F=st.yyleng,N=st.yytext,D=st.yylineno,K=st.yylloc;break;case 2:if(ft=this.productions_[J[1]][1],at.$=b[b.length-ft],at._$={first_line:P[P.length-(ft||1)].first_line,last_line:P[P.length-1].last_line,first_column:P[P.length-(ft||1)].first_column,last_column:P[P.length-1].last_column},G&&(at._$.range=[P[P.length-(ft||1)].range[0],P[P.length-1].range[1]]),O=this.performAction.apply(at,[N,F,D,j.yy,J[1],b,P].concat(z)),typeof O<"u")return O;ft&&(f=f.slice(0,-1*ft*2),b=b.slice(0,-1*ft),P=P.slice(0,-1*ft)),f.push(this.productions_[J[1]][0]),b.push(at.$),P.push(at._$),V=U[f[f.length-2]][f[f.length-1]],f.push(V);break;case 3:return!0}}return!0}},k=(function(){var S={EOF:1,parseError:function(C,f){if(this.yy.parser)this.yy.parser.parseError(C,f);else throw new Error(C)},setInput:function(m,C){return this.yy=C||this.yy||{},this._input=m,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var m=this._input[0];this.yytext+=m,this.yyleng++,this.offset++,this.match+=m,this.matched+=m;var C=m.match(/(?:\r\n?|\n).*/g);return C?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),m},unput:function(m){var C=m.length,f=m.split(/(?:\r\n?|\n)/g);this._input=m+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-C),this.offset-=C;var L=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),f.length-1&&(this.yylineno-=f.length-1);var b=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:f?(f.length===L.length?this.yylloc.first_column:0)+L[L.length-f.length].length-f[0].length:this.yylloc.first_column-C},this.options.ranges&&(this.yylloc.range=[b[0],b[0]+this.yyleng-C]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(m){this.unput(this.match.slice(m))},pastInput:function(){var m=this.matched.substr(0,this.matched.length-this.match.length);return(m.length>20?"...":"")+m.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var m=this.match;return m.length<20&&(m+=this._input.substr(0,20-m.length)),(m.substr(0,20)+(m.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var m=this.pastInput(),C=new Array(m.length+1).join("-");return m+this.upcomingInput()+`
`+C+"^"},test_match:function(m,C){var f,L,b;if(this.options.backtrack_lexer&&(b={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(b.yylloc.range=this.yylloc.range.slice(0))),L=m[0].match(/(?:\r\n?|\n).*/g),L&&(this.yylineno+=L.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:L?L[L.length-1].length-L[L.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+m[0].length},this.yytext+=m[0],this.match+=m[0],this.matches=m,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(m[0].length),this.matched+=m[0],f=this.performAction.call(this,this.yy,this,C,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),f)return f;if(this._backtrack){for(var P in b)this[P]=b[P];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var m,C,f,L;this._more||(this.yytext="",this.match="");for(var b=this._currentRules(),P=0;P<b.length;P++)if(f=this._input.match(this.rules[b[P]]),f&&(!C||f[0].length>C[0].length)){if(C=f,L=P,this.options.backtrack_lexer){if(m=this.test_match(f,b[P]),m!==!1)return m;if(this._backtrack){C=!1;continue}else return!1}else if(!this.options.flex)break}return C?(m=this.test_match(C,b[L]),m!==!1?m:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var C=this.next();return C||this.lex()},begin:function(C){this.conditionStack.push(C)},popState:function(){var C=this.conditionStack.length-1;return C>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(C){return C=this.conditionStack.length-1-Math.abs(C||0),C>=0?this.conditionStack[C]:"INITIAL"},pushState:function(C){this.begin(C)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(C,f,L,b){switch(L){case 0:return this.begin("acc_title"),22;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),24;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 10;case 8:break;case 9:return 8;case 10:return 28;case 11:return 48;case 12:return 4;case 13:return this.begin("block"),15;case 14:return 36;case 15:break;case 16:return 37;case 17:return 34;case 18:return 34;case 19:return 38;case 20:break;case 21:return this.popState(),17;case 22:return f.yytext[0];case 23:return 18;case 24:return 19;case 25:return 41;case 26:return 43;case 27:return 43;case 28:return 43;case 29:return 41;case 30:return 41;case 31:return 42;case 32:return 42;case 33:return 42;case 34:return 42;case 35:return 42;case 36:return 43;case 37:return 42;case 38:return 43;case 39:return 44;case 40:return 44;case 41:return 44;case 42:return 44;case 43:return 41;case 44:return 42;case 45:return 43;case 46:return 45;case 47:return 46;case 48:return 47;case 49:return 47;case 50:return 46;case 51:return 46;case 52:return 46;case 53:return 27;case 54:return f.yytext[0];case 55:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:,)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[\*A-Za-z_][A-Za-z0-9\-_\[\]\(\)]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z_][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[14,15,16,17,18,19,20,21,22],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55],inclusive:!0}}};return S})();T.lexer=k;function A(){this.yy={}}return A.prototype=T,T.Parser=A,new A})();Za.parser=Za;const tb=Za;let lr={},sl=[];const eb={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},ib={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},Qu=function(t,e=void 0){return lr[t]===void 0?(lr[t]={attributes:[],alias:e},B.info("Added new entity :",t)):lr[t]&&!lr[t].alias&&e&&(lr[t].alias=e,B.info(`Add alias '${e}' to entity '${t}'`)),lr[t]},rb=()=>lr,sb=function(t,e){let i=Qu(t),r;for(r=e.length-1;r>=0;r--)i.attributes.push(e[r]),B.debug("Added attribute ",e[r].attributeName)},nb=function(t,e,i,r){let s={entityA:t,roleA:e,entityB:i,relSpec:r};sl.push(s),B.debug("Added new relationship :",s)},ab=()=>sl,ob=function(){lr={},sl=[],Oe()},lb={Cardinality:eb,Identification:ib,getConfig:()=>Y().er,addEntity:Qu,addAttributes:sb,getEntities:rb,addRelationship:nb,getRelationships:ab,clear:ob,setAccTitle:Pe,getAccTitle:Ye,setAccDescription:Ue,getAccDescription:He,setDiagramTitle:ri,getDiagramTitle:Ge},pi={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END",MD_PARENT_END:"MD_PARENT_END",MD_PARENT_START:"MD_PARENT_START"},cb=function(t,e){let i;t.append("defs").append("marker").attr("id",pi.MD_PARENT_START).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",pi.MD_PARENT_END).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",pi.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",pi.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),i=t.append("defs").append("marker").attr("id",pi.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),i=t.append("defs").append("marker").attr("id",pi.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",pi.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",pi.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),i=t.append("defs").append("marker").attr("id",pi.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),i=t.append("defs").append("marker").attr("id",pi.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},gi={ERMarkers:pi,insertMarkers:cb},hb=/[^\dA-Za-z](\W)*/g;let be={},Ns=new Map;const ub=function(t){const e=Object.keys(t);for(const i of e)be[i]=t[i]},db=(t,e,i)=>{const r=be.entityPadding/3,s=be.entityPadding/3,n=be.fontSize*.85,a=e.node().getBBox(),o=[];let l=!1,h=!1,u=0,p=0,d=0,g=0,y=a.height+r*2,x=1;i.forEach(R=>{R.attributeKeyTypeList!==void 0&&R.attributeKeyTypeList.length>0&&(l=!0),R.attributeComment!==void 0&&(h=!0)}),i.forEach(R=>{const v=`${e.node().id}-attr-${x}`;let T=0;const k=_s(R.attributeType),A=t.append("text").classed("er entityLabel",!0).attr("id",`${v}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(k),S=t.append("text").classed("er entityLabel",!0).attr("id",`${v}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(R.attributeName),m={};m.tn=A,m.nn=S;const C=A.node().getBBox(),f=S.node().getBBox();if(u=Math.max(u,C.width),p=Math.max(p,f.width),T=Math.max(C.height,f.height),l){const L=R.attributeKeyTypeList!==void 0?R.attributeKeyTypeList.join(","):"",b=t.append("text").classed("er entityLabel",!0).attr("id",`${v}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(L);m.kn=b;const P=b.node().getBBox();d=Math.max(d,P.width),T=Math.max(T,P.height)}if(h){const L=t.append("text").classed("er entityLabel",!0).attr("id",`${v}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(R.attributeComment||"");m.cn=L;const b=L.node().getBBox();g=Math.max(g,b.width),T=Math.max(T,b.height)}m.height=T,o.push(m),y+=T+r*2,x+=1});let _=4;l&&(_+=2),h&&(_+=2);const w=u+p+d+g,E={width:Math.max(be.minEntityWidth,Math.max(a.width+be.entityPadding*2,w+s*_)),height:i.length>0?y:Math.max(be.minEntityHeight,a.height+be.entityPadding*2)};if(i.length>0){const R=Math.max(0,(E.width-w-s*_)/(_/2));e.attr("transform","translate("+E.width/2+","+(r+a.height/2)+")");let v=a.height+r*2,T="attributeBoxOdd";o.forEach(k=>{const A=v+r+k.height/2;k.tn.attr("transform","translate("+s+","+A+")");const S=t.insert("rect","#"+k.tn.node().id).classed(`er ${T}`,!0).attr("x",0).attr("y",v).attr("width",u+s*2+R).attr("height",k.height+r*2),m=parseFloat(S.attr("x"))+parseFloat(S.attr("width"));k.nn.attr("transform","translate("+(m+s)+","+A+")");const C=t.insert("rect","#"+k.nn.node().id).classed(`er ${T}`,!0).attr("x",m).attr("y",v).attr("width",p+s*2+R).attr("height",k.height+r*2);let f=parseFloat(C.attr("x"))+parseFloat(C.attr("width"));if(l){k.kn.attr("transform","translate("+(f+s)+","+A+")");const L=t.insert("rect","#"+k.kn.node().id).classed(`er ${T}`,!0).attr("x",f).attr("y",v).attr("width",d+s*2+R).attr("height",k.height+r*2);f=parseFloat(L.attr("x"))+parseFloat(L.attr("width"))}h&&(k.cn.attr("transform","translate("+(f+s)+","+A+")"),t.insert("rect","#"+k.cn.node().id).classed(`er ${T}`,"true").attr("x",f).attr("y",v).attr("width",g+s*2+R).attr("height",k.height+r*2)),v+=k.height+r*2,T=T==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else E.height=Math.max(be.minEntityHeight,y),e.attr("transform","translate("+E.width/2+","+E.height/2+")");return E},fb=function(t,e,i){const r=Object.keys(e);let s;return r.forEach(function(n){const a=bb(n,"entity");Ns.set(n,a);const o=t.append("g").attr("id",a);s=s===void 0?a:s;const l="text-"+a,h=o.append("text").classed("er entityLabel",!0).attr("id",l).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",Y().fontFamily).style("font-size",be.fontSize+"px").text(e[n].alias??n),{width:u,height:p}=db(o,h,e[n].attributes),g=o.insert("rect","#"+l).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",u).attr("height",p).node().getBBox();i.setNode(a,{width:g.width,height:g.height,shape:"rect",id:a})}),s},pb=function(t,e){e.nodes().forEach(function(i){i!==void 0&&e.node(i)!==void 0&&t.select("#"+i).attr("transform","translate("+(e.node(i).x-e.node(i).width/2)+","+(e.node(i).y-e.node(i).height/2)+" )")})},Zu=function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")},gb=function(t,e){return t.forEach(function(i){e.setEdge(Ns.get(i.entityA),Ns.get(i.entityB),{relationship:i},Zu(i))}),t};let wc=0;const yb=function(t,e,i,r,s){wc++;const n=i.edge(Ns.get(e.entityA),Ns.get(e.entityB),Zu(e)),a=fr().x(function(y){return y.x}).y(function(y){return y.y}).curve($s),o=t.insert("path","#"+r).classed("er relationshipLine",!0).attr("d",a(n.points)).style("stroke",be.stroke).style("fill","none");e.relSpec.relType===s.db.Identification.NON_IDENTIFYING&&o.attr("stroke-dasharray","8,8");let l="";switch(be.arrowMarkerAbsolute&&(l=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,l=l.replace(/\(/g,"\\("),l=l.replace(/\)/g,"\\)")),e.relSpec.cardA){case s.db.Cardinality.ZERO_OR_ONE:o.attr("marker-end","url("+l+"#"+gi.ERMarkers.ZERO_OR_ONE_END+")");break;case s.db.Cardinality.ZERO_OR_MORE:o.attr("marker-end","url("+l+"#"+gi.ERMarkers.ZERO_OR_MORE_END+")");break;case s.db.Cardinality.ONE_OR_MORE:o.attr("marker-end","url("+l+"#"+gi.ERMarkers.ONE_OR_MORE_END+")");break;case s.db.Cardinality.ONLY_ONE:o.attr("marker-end","url("+l+"#"+gi.ERMarkers.ONLY_ONE_END+")");break;case s.db.Cardinality.MD_PARENT:o.attr("marker-end","url("+l+"#"+gi.ERMarkers.MD_PARENT_END+")");break}switch(e.relSpec.cardB){case s.db.Cardinality.ZERO_OR_ONE:o.attr("marker-start","url("+l+"#"+gi.ERMarkers.ZERO_OR_ONE_START+")");break;case s.db.Cardinality.ZERO_OR_MORE:o.attr("marker-start","url("+l+"#"+gi.ERMarkers.ZERO_OR_MORE_START+")");break;case s.db.Cardinality.ONE_OR_MORE:o.attr("marker-start","url("+l+"#"+gi.ERMarkers.ONE_OR_MORE_START+")");break;case s.db.Cardinality.ONLY_ONE:o.attr("marker-start","url("+l+"#"+gi.ERMarkers.ONLY_ONE_START+")");break;case s.db.Cardinality.MD_PARENT:o.attr("marker-start","url("+l+"#"+gi.ERMarkers.MD_PARENT_START+")");break}const h=o.node().getTotalLength(),u=o.node().getPointAtLength(h*.5),p="rel"+wc,g=t.append("text").classed("er relationshipLabel",!0).attr("id",p).attr("x",u.x).attr("y",u.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",Y().fontFamily).style("font-size",be.fontSize+"px").text(e.roleA).node().getBBox();t.insert("rect","#"+p).classed("er relationshipLabelBox",!0).attr("x",u.x-g.width/2).attr("y",u.y-g.height/2).attr("width",g.width).attr("height",g.height)},mb=function(t,e,i,r){be=Y().er,B.info("Drawing ER diagram");const s=Y().securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const o=(s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body")).select(`[id='${e}']`);gi.insertMarkers(o,be);let l;l=new Ii({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:be.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const h=fb(o,r.db.getEntities(),l),u=gb(r.db.getRelationships(),l);Xs(l),pb(o,l),u.forEach(function(x){yb(o,x,l,h,r)});const p=be.diagramPadding;Rt.insertTitle(o,"entityTitleText",be.titleTopMargin,r.db.getDiagramTitle());const d=o.node().getBBox(),g=d.width+p*2,y=d.height+p*2;Ne(o,y,g,be.useMaxWidth),o.attr("viewBox",`${d.x-p} ${d.y-p} ${g} ${y}`)},xb="28e9f9db-3c8d-5aa5-9faf-44286ae5937c";function bb(t="",e=""){const i=t.replace(hb,"");return`${vc(e)}${vc(i)}${kf(t,xb)}`}function vc(t=""){return t.length>0?`${t}-`:""}const kb={setConf:ub,draw:mb},_b=t=>`
  .entityBox {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${t.attributeBackgroundColorOdd};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${t.attributeBackgroundColorEven};
    stroke: ${t.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${t.tertiaryColor};
    opacity: 0.7;
    background-color: ${t.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${t.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }    
  #MD_PARENT_START {
    fill: #f5f5f5 !important;
    stroke: ${t.lineColor} !important;
    stroke-width: 1;
  }
  #MD_PARENT_END {
    fill: #f5f5f5 !important;
    stroke: ${t.lineColor} !important;
    stroke-width: 1;
  }
  
`,Tb=_b,Cb={parser:tb,db:lb,renderer:kb,styles:Tb},Eb=Object.freeze(Object.defineProperty({__proto__:null,diagram:Cb},Symbol.toStringTag,{value:"Module"}));var Ja=(function(){var t=function(T,k,A,S){for(A=A||{},S=T.length;S--;A[T[S]]=k);return A},e=[1,3],i=[1,6],r=[1,4],s=[1,5],n=[2,5],a=[1,12],o=[5,7,13,19,21,23,24,26,28,31,37,40,47],l=[7,13,19,21,23,24,26,28,31,37,40],h=[7,12,13,19,21,23,24,26,28,31,37,40],u=[7,13,47],p=[1,42],d=[1,41],g=[7,13,29,32,35,38,47],y=[1,55],x=[1,56],_=[1,57],w=[7,13,32,35,42,47],E={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,GG:5,document:6,EOF:7,":":8,DIR:9,options:10,body:11,OPT:12,NL:13,line:14,statement:15,commitStatement:16,mergeStatement:17,cherryPickStatement:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,section:24,branchStatement:25,CHECKOUT:26,ref:27,BRANCH:28,ORDER:29,NUM:30,CHERRY_PICK:31,COMMIT_ID:32,STR:33,PARENT_COMMIT:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,ID:46,";":47,$accept:0,$end:1},terminals_:{2:"error",5:"GG",7:"EOF",8:":",9:"DIR",12:"OPT",13:"NL",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"section",26:"CHECKOUT",28:"BRANCH",29:"ORDER",30:"NUM",31:"CHERRY_PICK",32:"COMMIT_ID",33:"STR",34:"PARENT_COMMIT",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",46:"ID",47:";"},productions_:[0,[3,2],[3,3],[3,4],[3,5],[6,0],[6,2],[10,2],[10,1],[11,0],[11,2],[14,2],[14,1],[15,1],[15,1],[15,1],[15,2],[15,2],[15,1],[15,1],[15,1],[15,2],[25,2],[25,4],[18,3],[18,5],[18,5],[18,7],[18,7],[18,5],[18,5],[18,5],[18,7],[18,7],[18,7],[18,7],[17,2],[17,4],[17,4],[17,4],[17,6],[17,6],[17,6],[17,6],[17,6],[17,6],[17,8],[17,8],[17,8],[17,8],[17,8],[17,8],[16,2],[16,3],[16,3],[16,5],[16,5],[16,3],[16,5],[16,5],[16,5],[16,5],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,3],[16,5],[16,5],[16,5],[16,5],[16,5],[16,5],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[41,0],[41,1],[39,1],[39,1],[39,1],[27,1],[27,1],[4,1],[4,1],[4,1]],performAction:function(k,A,S,m,C,f,L){var b=f.length-1;switch(C){case 2:return f[b];case 3:return f[b-1];case 4:return m.setDirection(f[b-3]),f[b-1];case 6:m.setOptions(f[b-1]),this.$=f[b];break;case 7:f[b-1]+=f[b],this.$=f[b-1];break;case 9:this.$=[];break;case 10:f[b-1].push(f[b]),this.$=f[b-1];break;case 11:this.$=f[b-1];break;case 16:this.$=f[b].trim(),m.setAccTitle(this.$);break;case 17:case 18:this.$=f[b].trim(),m.setAccDescription(this.$);break;case 19:m.addSection(f[b].substr(8)),this.$=f[b].substr(8);break;case 21:m.checkout(f[b]);break;case 22:m.branch(f[b]);break;case 23:m.branch(f[b-2],f[b]);break;case 24:m.cherryPick(f[b],"",void 0);break;case 25:m.cherryPick(f[b-2],"",void 0,f[b]);break;case 26:m.cherryPick(f[b-2],"",f[b]);break;case 27:m.cherryPick(f[b-4],"",f[b],f[b-2]);break;case 28:m.cherryPick(f[b-4],"",f[b-2],f[b]);break;case 29:m.cherryPick(f[b],"",f[b-2]);break;case 30:m.cherryPick(f[b],"","");break;case 31:m.cherryPick(f[b-2],"","");break;case 32:m.cherryPick(f[b-4],"","",f[b-2]);break;case 33:m.cherryPick(f[b-4],"","",f[b]);break;case 34:m.cherryPick(f[b-2],"",f[b-4],f[b]);break;case 35:m.cherryPick(f[b-2],"","",f[b]);break;case 36:m.merge(f[b],"","","");break;case 37:m.merge(f[b-2],f[b],"","");break;case 38:m.merge(f[b-2],"",f[b],"");break;case 39:m.merge(f[b-2],"","",f[b]);break;case 40:m.merge(f[b-4],f[b],"",f[b-2]);break;case 41:m.merge(f[b-4],"",f[b],f[b-2]);break;case 42:m.merge(f[b-4],"",f[b-2],f[b]);break;case 43:m.merge(f[b-4],f[b-2],f[b],"");break;case 44:m.merge(f[b-4],f[b-2],"",f[b]);break;case 45:m.merge(f[b-4],f[b],f[b-2],"");break;case 46:m.merge(f[b-6],f[b-4],f[b-2],f[b]);break;case 47:m.merge(f[b-6],f[b],f[b-4],f[b-2]);break;case 48:m.merge(f[b-6],f[b-4],f[b],f[b-2]);break;case 49:m.merge(f[b-6],f[b-2],f[b-4],f[b]);break;case 50:m.merge(f[b-6],f[b],f[b-2],f[b-4]);break;case 51:m.merge(f[b-6],f[b-2],f[b],f[b-4]);break;case 52:m.commit(f[b]);break;case 53:m.commit("","",m.commitType.NORMAL,f[b]);break;case 54:m.commit("","",f[b],"");break;case 55:m.commit("","",f[b],f[b-2]);break;case 56:m.commit("","",f[b-2],f[b]);break;case 57:m.commit("",f[b],m.commitType.NORMAL,"");break;case 58:m.commit("",f[b-2],m.commitType.NORMAL,f[b]);break;case 59:m.commit("",f[b],m.commitType.NORMAL,f[b-2]);break;case 60:m.commit("",f[b-2],f[b],"");break;case 61:m.commit("",f[b],f[b-2],"");break;case 62:m.commit("",f[b-4],f[b-2],f[b]);break;case 63:m.commit("",f[b-4],f[b],f[b-2]);break;case 64:m.commit("",f[b-2],f[b-4],f[b]);break;case 65:m.commit("",f[b],f[b-4],f[b-2]);break;case 66:m.commit("",f[b],f[b-2],f[b-4]);break;case 67:m.commit("",f[b-2],f[b],f[b-4]);break;case 68:m.commit(f[b],"",m.commitType.NORMAL,"");break;case 69:m.commit(f[b],"",m.commitType.NORMAL,f[b-2]);break;case 70:m.commit(f[b-2],"",m.commitType.NORMAL,f[b]);break;case 71:m.commit(f[b-2],"",f[b],"");break;case 72:m.commit(f[b],"",f[b-2],"");break;case 73:m.commit(f[b],f[b-2],m.commitType.NORMAL,"");break;case 74:m.commit(f[b-2],f[b],m.commitType.NORMAL,"");break;case 75:m.commit(f[b-4],"",f[b-2],f[b]);break;case 76:m.commit(f[b-4],"",f[b],f[b-2]);break;case 77:m.commit(f[b-2],"",f[b-4],f[b]);break;case 78:m.commit(f[b],"",f[b-4],f[b-2]);break;case 79:m.commit(f[b],"",f[b-2],f[b-4]);break;case 80:m.commit(f[b-2],"",f[b],f[b-4]);break;case 81:m.commit(f[b-4],f[b],f[b-2],"");break;case 82:m.commit(f[b-4],f[b-2],f[b],"");break;case 83:m.commit(f[b-2],f[b],f[b-4],"");break;case 84:m.commit(f[b],f[b-2],f[b-4],"");break;case 85:m.commit(f[b],f[b-4],f[b-2],"");break;case 86:m.commit(f[b-2],f[b-4],f[b],"");break;case 87:m.commit(f[b-4],f[b],m.commitType.NORMAL,f[b-2]);break;case 88:m.commit(f[b-4],f[b-2],m.commitType.NORMAL,f[b]);break;case 89:m.commit(f[b-2],f[b],m.commitType.NORMAL,f[b-4]);break;case 90:m.commit(f[b],f[b-2],m.commitType.NORMAL,f[b-4]);break;case 91:m.commit(f[b],f[b-4],m.commitType.NORMAL,f[b-2]);break;case 92:m.commit(f[b-2],f[b-4],m.commitType.NORMAL,f[b]);break;case 93:m.commit(f[b-6],f[b-4],f[b-2],f[b]);break;case 94:m.commit(f[b-6],f[b-4],f[b],f[b-2]);break;case 95:m.commit(f[b-6],f[b-2],f[b-4],f[b]);break;case 96:m.commit(f[b-6],f[b],f[b-4],f[b-2]);break;case 97:m.commit(f[b-6],f[b-2],f[b],f[b-4]);break;case 98:m.commit(f[b-6],f[b],f[b-2],f[b-4]);break;case 99:m.commit(f[b-4],f[b-6],f[b-2],f[b]);break;case 100:m.commit(f[b-4],f[b-6],f[b],f[b-2]);break;case 101:m.commit(f[b-2],f[b-6],f[b-4],f[b]);break;case 102:m.commit(f[b],f[b-6],f[b-4],f[b-2]);break;case 103:m.commit(f[b-2],f[b-6],f[b],f[b-4]);break;case 104:m.commit(f[b],f[b-6],f[b-2],f[b-4]);break;case 105:m.commit(f[b],f[b-4],f[b-2],f[b-6]);break;case 106:m.commit(f[b-2],f[b-4],f[b],f[b-6]);break;case 107:m.commit(f[b],f[b-2],f[b-4],f[b-6]);break;case 108:m.commit(f[b-2],f[b],f[b-4],f[b-6]);break;case 109:m.commit(f[b-4],f[b-2],f[b],f[b-6]);break;case 110:m.commit(f[b-4],f[b],f[b-2],f[b-6]);break;case 111:m.commit(f[b-2],f[b-4],f[b-6],f[b]);break;case 112:m.commit(f[b],f[b-4],f[b-6],f[b-2]);break;case 113:m.commit(f[b-2],f[b],f[b-6],f[b-4]);break;case 114:m.commit(f[b],f[b-2],f[b-6],f[b-4]);break;case 115:m.commit(f[b-4],f[b-2],f[b-6],f[b]);break;case 116:m.commit(f[b-4],f[b],f[b-6],f[b-2]);break;case 117:this.$="";break;case 118:this.$=f[b];break;case 119:this.$=m.commitType.NORMAL;break;case 120:this.$=m.commitType.REVERSE;break;case 121:this.$=m.commitType.HIGHLIGHT;break}},table:[{3:1,4:2,5:e,7:i,13:r,47:s},{1:[3]},{3:7,4:2,5:e,7:i,13:r,47:s},{6:8,7:n,8:[1,9],9:[1,10],10:11,13:a},t(o,[2,124]),t(o,[2,125]),t(o,[2,126]),{1:[2,1]},{7:[1,13]},{6:14,7:n,10:11,13:a},{8:[1,15]},t(l,[2,9],{11:16,12:[1,17]}),t(h,[2,8]),{1:[2,2]},{7:[1,18]},{6:19,7:n,10:11,13:a},{7:[2,6],13:[1,22],14:20,15:21,16:23,17:24,18:25,19:[1,26],21:[1,27],23:[1,28],24:[1,29],25:30,26:[1,31],28:[1,35],31:[1,34],37:[1,33],40:[1,32]},t(h,[2,7]),{1:[2,3]},{7:[1,36]},t(l,[2,10]),{4:37,7:i,13:r,47:s},t(l,[2,12]),t(u,[2,13]),t(u,[2,14]),t(u,[2,15]),{20:[1,38]},{22:[1,39]},t(u,[2,18]),t(u,[2,19]),t(u,[2,20]),{27:40,33:p,46:d},t(u,[2,117],{41:43,32:[1,46],33:[1,48],35:[1,44],38:[1,45],42:[1,47]}),{27:49,33:p,46:d},{32:[1,50],35:[1,51]},{27:52,33:p,46:d},{1:[2,4]},t(l,[2,11]),t(u,[2,16]),t(u,[2,17]),t(u,[2,21]),t(g,[2,122]),t(g,[2,123]),t(u,[2,52]),{33:[1,53]},{39:54,43:y,44:x,45:_},{33:[1,58]},{33:[1,59]},t(u,[2,118]),t(u,[2,36],{32:[1,60],35:[1,62],38:[1,61]}),{33:[1,63]},{33:[1,64],36:[1,65]},t(u,[2,22],{29:[1,66]}),t(u,[2,53],{32:[1,68],38:[1,67],42:[1,69]}),t(u,[2,54],{32:[1,71],35:[1,70],42:[1,72]}),t(w,[2,119]),t(w,[2,120]),t(w,[2,121]),t(u,[2,57],{35:[1,73],38:[1,74],42:[1,75]}),t(u,[2,68],{32:[1,78],35:[1,76],38:[1,77]}),{33:[1,79]},{39:80,43:y,44:x,45:_},{33:[1,81]},t(u,[2,24],{34:[1,82],35:[1,83]}),{32:[1,84]},{32:[1,85]},{30:[1,86]},{39:87,43:y,44:x,45:_},{33:[1,88]},{33:[1,89]},{33:[1,90]},{33:[1,91]},{33:[1,92]},{33:[1,93]},{39:94,43:y,44:x,45:_},{33:[1,95]},{33:[1,96]},{39:97,43:y,44:x,45:_},{33:[1,98]},t(u,[2,37],{35:[1,100],38:[1,99]}),t(u,[2,38],{32:[1,102],35:[1,101]}),t(u,[2,39],{32:[1,103],38:[1,104]}),{33:[1,105]},{33:[1,106],36:[1,107]},{33:[1,108]},{33:[1,109]},t(u,[2,23]),t(u,[2,55],{32:[1,110],42:[1,111]}),t(u,[2,59],{38:[1,112],42:[1,113]}),t(u,[2,69],{32:[1,115],38:[1,114]}),t(u,[2,56],{32:[1,116],42:[1,117]}),t(u,[2,61],{35:[1,118],42:[1,119]}),t(u,[2,72],{32:[1,121],35:[1,120]}),t(u,[2,58],{38:[1,122],42:[1,123]}),t(u,[2,60],{35:[1,124],42:[1,125]}),t(u,[2,73],{35:[1,127],38:[1,126]}),t(u,[2,70],{32:[1,129],38:[1,128]}),t(u,[2,71],{32:[1,131],35:[1,130]}),t(u,[2,74],{35:[1,133],38:[1,132]}),{39:134,43:y,44:x,45:_},{33:[1,135]},{33:[1,136]},{33:[1,137]},{33:[1,138]},{39:139,43:y,44:x,45:_},t(u,[2,25],{35:[1,140]}),t(u,[2,26],{34:[1,141]}),t(u,[2,31],{34:[1,142]}),t(u,[2,29],{34:[1,143]}),t(u,[2,30],{34:[1,144]}),{33:[1,145]},{33:[1,146]},{39:147,43:y,44:x,45:_},{33:[1,148]},{39:149,43:y,44:x,45:_},{33:[1,150]},{33:[1,151]},{33:[1,152]},{33:[1,153]},{33:[1,154]},{33:[1,155]},{33:[1,156]},{39:157,43:y,44:x,45:_},{33:[1,158]},{33:[1,159]},{33:[1,160]},{39:161,43:y,44:x,45:_},{33:[1,162]},{39:163,43:y,44:x,45:_},{33:[1,164]},{33:[1,165]},{33:[1,166]},{39:167,43:y,44:x,45:_},{33:[1,168]},t(u,[2,43],{35:[1,169]}),t(u,[2,44],{38:[1,170]}),t(u,[2,42],{32:[1,171]}),t(u,[2,45],{35:[1,172]}),t(u,[2,40],{38:[1,173]}),t(u,[2,41],{32:[1,174]}),{33:[1,175],36:[1,176]},{33:[1,177]},{33:[1,178]},{33:[1,179]},{33:[1,180]},t(u,[2,66],{42:[1,181]}),t(u,[2,79],{32:[1,182]}),t(u,[2,67],{42:[1,183]}),t(u,[2,90],{38:[1,184]}),t(u,[2,80],{32:[1,185]}),t(u,[2,89],{38:[1,186]}),t(u,[2,65],{42:[1,187]}),t(u,[2,78],{32:[1,188]}),t(u,[2,64],{42:[1,189]}),t(u,[2,84],{35:[1,190]}),t(u,[2,77],{32:[1,191]}),t(u,[2,83],{35:[1,192]}),t(u,[2,63],{42:[1,193]}),t(u,[2,91],{38:[1,194]}),t(u,[2,62],{42:[1,195]}),t(u,[2,85],{35:[1,196]}),t(u,[2,86],{35:[1,197]}),t(u,[2,92],{38:[1,198]}),t(u,[2,76],{32:[1,199]}),t(u,[2,87],{38:[1,200]}),t(u,[2,75],{32:[1,201]}),t(u,[2,81],{35:[1,202]}),t(u,[2,82],{35:[1,203]}),t(u,[2,88],{38:[1,204]}),{33:[1,205]},{39:206,43:y,44:x,45:_},{33:[1,207]},{33:[1,208]},{39:209,43:y,44:x,45:_},{33:[1,210]},t(u,[2,27]),t(u,[2,32]),t(u,[2,28]),t(u,[2,33]),t(u,[2,34]),t(u,[2,35]),{33:[1,211]},{33:[1,212]},{33:[1,213]},{39:214,43:y,44:x,45:_},{33:[1,215]},{39:216,43:y,44:x,45:_},{33:[1,217]},{33:[1,218]},{33:[1,219]},{33:[1,220]},{33:[1,221]},{33:[1,222]},{33:[1,223]},{39:224,43:y,44:x,45:_},{33:[1,225]},{33:[1,226]},{33:[1,227]},{39:228,43:y,44:x,45:_},{33:[1,229]},{39:230,43:y,44:x,45:_},{33:[1,231]},{33:[1,232]},{33:[1,233]},{39:234,43:y,44:x,45:_},t(u,[2,46]),t(u,[2,48]),t(u,[2,47]),t(u,[2,49]),t(u,[2,51]),t(u,[2,50]),t(u,[2,107]),t(u,[2,108]),t(u,[2,105]),t(u,[2,106]),t(u,[2,110]),t(u,[2,109]),t(u,[2,114]),t(u,[2,113]),t(u,[2,112]),t(u,[2,111]),t(u,[2,116]),t(u,[2,115]),t(u,[2,104]),t(u,[2,103]),t(u,[2,102]),t(u,[2,101]),t(u,[2,99]),t(u,[2,100]),t(u,[2,98]),t(u,[2,97]),t(u,[2,96]),t(u,[2,95]),t(u,[2,93]),t(u,[2,94])],defaultActions:{7:[2,1],13:[2,2],18:[2,3],36:[2,4]},parseError:function(k,A){if(A.recoverable)this.trace(k);else{var S=new Error(k);throw S.hash=A,S}},parse:function(k){var A=this,S=[0],m=[],C=[null],f=[],L=this.table,b="",P=0,U=0,N=2,D=1,F=f.slice.call(arguments,1),I=Object.create(this.lexer),M={yy:{}};for(var z in this.yy)Object.prototype.hasOwnProperty.call(this.yy,z)&&(M.yy[z]=this.yy[z]);I.setInput(k,M.yy),M.yy.lexer=I,M.yy.parser=this,typeof I.yylloc>"u"&&(I.yylloc={});var st=I.yylloc;f.push(st);var j=I.options&&I.options.ranges;typeof M.yy.parseError=="function"?this.parseError=M.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function dt(){var V;return V=m.pop()||I.lex()||D,typeof V!="number"&&(V instanceof Array&&(m=V,V=m.pop()),V=A.symbols_[V]||V),V}for(var K,G,tt,nt,Q={},J,O,at,W;;){if(G=S[S.length-1],this.defaultActions[G]?tt=this.defaultActions[G]:((K===null||typeof K>"u")&&(K=dt()),tt=L[G]&&L[G][K]),typeof tt>"u"||!tt.length||!tt[0]){var ft="";W=[];for(J in L[G])this.terminals_[J]&&J>N&&W.push("'"+this.terminals_[J]+"'");I.showPosition?ft="Parse error on line "+(P+1)+`:
`+I.showPosition()+`
Expecting `+W.join(", ")+", got '"+(this.terminals_[K]||K)+"'":ft="Parse error on line "+(P+1)+": Unexpected "+(K==D?"end of input":"'"+(this.terminals_[K]||K)+"'"),this.parseError(ft,{text:I.match,token:this.terminals_[K]||K,line:I.yylineno,loc:st,expected:W})}if(tt[0]instanceof Array&&tt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+G+", token: "+K);switch(tt[0]){case 1:S.push(K),C.push(I.yytext),f.push(I.yylloc),S.push(tt[1]),K=null,U=I.yyleng,b=I.yytext,P=I.yylineno,st=I.yylloc;break;case 2:if(O=this.productions_[tt[1]][1],Q.$=C[C.length-O],Q._$={first_line:f[f.length-(O||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(O||1)].first_column,last_column:f[f.length-1].last_column},j&&(Q._$.range=[f[f.length-(O||1)].range[0],f[f.length-1].range[1]]),nt=this.performAction.apply(Q,[b,U,P,M.yy,tt[1],C,f].concat(F)),typeof nt<"u")return nt;O&&(S=S.slice(0,-1*O*2),C=C.slice(0,-1*O),f=f.slice(0,-1*O)),S.push(this.productions_[tt[1]][0]),C.push(Q.$),f.push(Q._$),at=L[S[S.length-2]][S[S.length-1]],S.push(at);break;case 3:return!0}}return!0}},R=(function(){var T={EOF:1,parseError:function(A,S){if(this.yy.parser)this.yy.parser.parseError(A,S);else throw new Error(A)},setInput:function(k,A){return this.yy=A||this.yy||{},this._input=k,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var k=this._input[0];this.yytext+=k,this.yyleng++,this.offset++,this.match+=k,this.matched+=k;var A=k.match(/(?:\r\n?|\n).*/g);return A?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),k},unput:function(k){var A=k.length,S=k.split(/(?:\r\n?|\n)/g);this._input=k+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-A),this.offset-=A;var m=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),S.length-1&&(this.yylineno-=S.length-1);var C=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:S?(S.length===m.length?this.yylloc.first_column:0)+m[m.length-S.length].length-S[0].length:this.yylloc.first_column-A},this.options.ranges&&(this.yylloc.range=[C[0],C[0]+this.yyleng-A]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(k){this.unput(this.match.slice(k))},pastInput:function(){var k=this.matched.substr(0,this.matched.length-this.match.length);return(k.length>20?"...":"")+k.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var k=this.match;return k.length<20&&(k+=this._input.substr(0,20-k.length)),(k.substr(0,20)+(k.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var k=this.pastInput(),A=new Array(k.length+1).join("-");return k+this.upcomingInput()+`
`+A+"^"},test_match:function(k,A){var S,m,C;if(this.options.backtrack_lexer&&(C={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(C.yylloc.range=this.yylloc.range.slice(0))),m=k[0].match(/(?:\r\n?|\n).*/g),m&&(this.yylineno+=m.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:m?m[m.length-1].length-m[m.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+k[0].length},this.yytext+=k[0],this.match+=k[0],this.matches=k,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(k[0].length),this.matched+=k[0],S=this.performAction.call(this,this.yy,this,A,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),S)return S;if(this._backtrack){for(var f in C)this[f]=C[f];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var k,A,S,m;this._more||(this.yytext="",this.match="");for(var C=this._currentRules(),f=0;f<C.length;f++)if(S=this._input.match(this.rules[C[f]]),S&&(!A||S[0].length>A[0].length)){if(A=S,m=f,this.options.backtrack_lexer){if(k=this.test_match(S,C[f]),k!==!1)return k;if(this._backtrack){A=!1;continue}else return!1}else if(!this.options.flex)break}return A?(k=this.test_match(A,C[m]),k!==!1?k:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var A=this.next();return A||this.lex()},begin:function(A){this.conditionStack.push(A)},popState:function(){var A=this.conditionStack.length-1;return A>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(A){return A=this.conditionStack.length-1-Math.abs(A||0),A>=0?this.conditionStack[A]:"INITIAL"},pushState:function(A){this.begin(A)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(A,S,m,C){switch(m){case 0:return this.begin("acc_title"),19;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),21;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 13;case 8:break;case 9:break;case 10:return 5;case 11:return 40;case 12:return 32;case 13:return 38;case 14:return 42;case 15:return 43;case 16:return 44;case 17:return 45;case 18:return 35;case 19:return 28;case 20:return 29;case 21:return 37;case 22:return 31;case 23:return 34;case 24:return 26;case 25:return 9;case 26:return 9;case 27:return 8;case 28:return"CARET";case 29:this.begin("options");break;case 30:this.popState();break;case 31:return 12;case 32:return 36;case 33:this.begin("string");break;case 34:this.popState();break;case 35:return 33;case 36:return 30;case 37:return 46;case 38:return 7}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:parent:)/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:TB\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},options:{rules:[30,31],inclusive:!1},string:{rules:[34,35],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32,33,36,37,38,39],inclusive:!0}}};return T})();E.lexer=R;function v(){this.yy={}}return v.prototype=E,E.Parser=v,new v})();Ja.parser=Ja;const Sb=Ja;let Yn=Y().gitGraph.mainBranchName,wb=Y().gitGraph.mainBranchOrder,_e={},We=null,Os={};Os[Yn]={name:Yn,order:wb};let ge={};ge[Yn]=We;let ve=Yn,Ju="LR",vr=0;function nl(){return Rh({length:7})}function vb(t,e){const i=Object.create(null);return t.reduce((r,s)=>{const n=e(s);return i[n]||(i[n]=!0,r.push(s)),r},[])}const Ab=function(t){Ju=t};let t0={};const Lb=function(t){B.debug("options str",t),t=t&&t.trim(),t=t||"{}";try{t0=JSON.parse(t)}catch(e){B.error("error while parsing gitGraph options",e.message)}},Bb=function(){return t0},Ib=function(t,e,i,r){B.debug("Entering commit:",t,e,i,r),e=mt.sanitizeText(e,Y()),t=mt.sanitizeText(t,Y()),r=mt.sanitizeText(r,Y());const s={id:e||vr+"-"+nl(),message:t,seq:vr++,type:i||Kr.NORMAL,tag:r||"",parents:We==null?[]:[We.id],branch:ve};We=s,_e[s.id]=s,ge[ve]=s.id,B.debug("in pushCommit "+s.id)},Db=function(t,e){if(t=mt.sanitizeText(t,Y()),ge[t]===void 0)ge[t]=We!=null?We.id:null,Os[t]={name:t,order:e?parseInt(e,10):null},e0(t),B.debug("in createBranch");else{let i=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+t+'")');throw i.hash={text:"branch "+t,token:"branch "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+t+'"']},i}},Fb=function(t,e,i,r){t=mt.sanitizeText(t,Y()),e=mt.sanitizeText(e,Y());const s=_e[ge[ve]],n=_e[ge[t]];if(ve===t){let o=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},o}else if(s===void 0||!s){let o=new Error('Incorrect usage of "merge". Current branch ('+ve+")has no commits");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},o}else if(ge[t]===void 0){let o=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+t]},o}else if(n===void 0||!n){let o=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},o}else if(s===n){let o=new Error('Incorrect usage of "merge". Both branches have same head');throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},o}else if(e&&_e[e]!==void 0){let o=new Error('Incorrect usage of "merge". Commit with id:'+e+" already exists, use different custom Id");throw o.hash={text:"merge "+t+e+i+r,token:"merge "+t+e+i+r,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+t+" "+e+"_UNIQUE "+i+" "+r]},o}const a={id:e||vr+"-"+nl(),message:"merged branch "+t+" into "+ve,seq:vr++,parents:[We==null?null:We.id,ge[t]],branch:ve,type:Kr.MERGE,customType:i,customId:!!e,tag:r||""};We=a,_e[a.id]=a,ge[ve]=a.id,B.debug(ge),B.debug("in mergeBranch")},Rb=function(t,e,i,r){if(B.debug("Entering cherryPick:",t,e,i),t=mt.sanitizeText(t,Y()),e=mt.sanitizeText(e,Y()),i=mt.sanitizeText(i,Y()),r=mt.sanitizeText(r,Y()),!t||_e[t]===void 0){let a=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw a.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},a}let s=_e[t],n=s.branch;if(r&&!(Array.isArray(s.parents)&&s.parents.includes(r)))throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");if(s.type===Kr.MERGE&&!r)throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!e||_e[e]===void 0){if(n===ve){let l=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw l.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},l}const a=_e[ge[ve]];if(a===void 0||!a){let l=new Error('Incorrect usage of "cherry-pick". Current branch ('+ve+")has no commits");throw l.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},l}const o={id:vr+"-"+nl(),message:"cherry-picked "+s+" into "+ve,seq:vr++,parents:[We==null?null:We.id,s.id],branch:ve,type:Kr.CHERRY_PICK,tag:i??`cherry-pick:${s.id}${s.type===Kr.MERGE?`|parent:${r}`:""}`};We=o,_e[o.id]=o,ge[ve]=o.id,B.debug(ge),B.debug("in cherryPick")}},e0=function(t){if(t=mt.sanitizeText(t,Y()),ge[t]===void 0){let e=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+t+'")');throw e.hash={text:"checkout "+t,token:"checkout "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+t+'"']},e}else{ve=t;const e=ge[ve];We=_e[e]}};function Ac(t,e,i){const r=t.indexOf(e);r===-1?t.push(i):t.splice(r,1,i)}function i0(t){const e=t.reduce((s,n)=>s.seq>n.seq?s:n,t[0]);let i="";t.forEach(function(s){s===e?i+="	*":i+="	|"});const r=[i,e.id,e.seq];for(let s in ge)ge[s]===e.id&&r.push(s);if(B.debug(r.join(" ")),e.parents&&e.parents.length==2){const s=_e[e.parents[0]];Ac(t,e,s),t.push(_e[e.parents[1]])}else{if(e.parents.length==0)return;{const s=_e[e.parents];Ac(t,e,s)}}t=vb(t,s=>s.id),i0(t)}const Nb=function(){B.debug(_e);const t=r0()[0];i0([t])},Ob=function(){_e={},We=null;let t=Y().gitGraph.mainBranchName,e=Y().gitGraph.mainBranchOrder;ge={},ge[t]=null,Os={},Os[t]={name:t,order:e},ve=t,vr=0,Oe()},Pb=function(){return Object.values(Os).map((e,i)=>e.order!==null?e:{...e,order:parseFloat(`0.${i}`,10)}).sort((e,i)=>e.order-i.order).map(({name:e})=>({name:e}))},Mb=function(){return ge},Vb=function(){return _e},r0=function(){const t=Object.keys(_e).map(function(e){return _e[e]});return t.forEach(function(e){B.debug(e.id)}),t.sort((e,i)=>e.seq-i.seq),t},zb=function(){return ve},qb=function(){return Ju},Wb=function(){return We},Kr={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},Yb={getConfig:()=>Y().gitGraph,setDirection:Ab,setOptions:Lb,getOptions:Bb,commit:Ib,branch:Db,merge:Fb,cherryPick:Rb,checkout:e0,prettyPrint:Nb,clear:Ob,getBranchesAsObjArray:Pb,getBranches:Mb,getCommits:Vb,getCommitsArray:r0,getCurrentBranch:zb,getDirection:qb,getHead:Wb,setAccTitle:Pe,getAccTitle:Ye,getAccDescription:He,setAccDescription:Ue,setDiagramTitle:ri,getDiagramTitle:Ge,commitType:Kr};let ms={};const we={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},kr=8;let Xe={},Ki={},Un=[],Ps=0,pe="LR";const Ub=()=>{Xe={},Ki={},ms={},Ps=0,Un=[],pe="LR"},s0=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","text");let i=[];typeof t=="string"?i=t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(t)?i=t:i=[];for(const r of i){const s=document.createElementNS("http://www.w3.org/2000/svg","tspan");s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),s.setAttribute("dy","1em"),s.setAttribute("x","0"),s.setAttribute("class","row"),s.textContent=r.trim(),e.appendChild(s)}return e},Hb=t=>{let e="",i=0;return t.forEach(r=>{const s=pe==="TB"?Ki[r].y:Ki[r].x;s>=i&&(e=r,i=s)}),e||void 0},Lc=(t,e,i)=>{const r=Y().gitGraph,s=t.append("g").attr("class","commit-bullets"),n=t.append("g").attr("class","commit-labels");let a=0;pe==="TB"&&(a=30);const l=Object.keys(e).sort((d,g)=>e[d].seq-e[g].seq),h=r.parallelCommits,u=10,p=40;l.forEach(d=>{const g=e[d];if(h)if(g.parents.length){const w=Hb(g.parents);a=pe==="TB"?Ki[w].y+p:Ki[w].x+p}else a=0,pe==="TB"&&(a=30);const y=a+u,x=pe==="TB"?y:Xe[g.branch].pos,_=pe==="TB"?Xe[g.branch].pos:y;if(i){let w,E=g.customType!==void 0&&g.customType!==""?g.customType:g.type;switch(E){case we.NORMAL:w="commit-normal";break;case we.REVERSE:w="commit-reverse";break;case we.HIGHLIGHT:w="commit-highlight";break;case we.MERGE:w="commit-merge";break;case we.CHERRY_PICK:w="commit-cherry-pick";break;default:w="commit-normal"}if(E===we.HIGHLIGHT){const R=s.append("rect");R.attr("x",_-10),R.attr("y",x-10),R.attr("height",20),R.attr("width",20),R.attr("class",`commit ${g.id} commit-highlight${Xe[g.branch].index%kr} ${w}-outer`),s.append("rect").attr("x",_-6).attr("y",x-6).attr("height",12).attr("width",12).attr("class",`commit ${g.id} commit${Xe[g.branch].index%kr} ${w}-inner`)}else if(E===we.CHERRY_PICK)s.append("circle").attr("cx",_).attr("cy",x).attr("r",10).attr("class",`commit ${g.id} ${w}`),s.append("circle").attr("cx",_-3).attr("cy",x+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${g.id} ${w}`),s.append("circle").attr("cx",_+3).attr("cy",x+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${g.id} ${w}`),s.append("line").attr("x1",_+3).attr("y1",x+1).attr("x2",_).attr("y2",x-5).attr("stroke","#fff").attr("class",`commit ${g.id} ${w}`),s.append("line").attr("x1",_-3).attr("y1",x+1).attr("x2",_).attr("y2",x-5).attr("stroke","#fff").attr("class",`commit ${g.id} ${w}`);else{const R=s.append("circle");if(R.attr("cx",_),R.attr("cy",x),R.attr("r",g.type===we.MERGE?9:10),R.attr("class",`commit ${g.id} commit${Xe[g.branch].index%kr}`),E===we.MERGE){const v=s.append("circle");v.attr("cx",_),v.attr("cy",x),v.attr("r",6),v.attr("class",`commit ${w} ${g.id} commit${Xe[g.branch].index%kr}`)}E===we.REVERSE&&s.append("path").attr("d",`M ${_-5},${x-5}L${_+5},${x+5}M${_-5},${x+5}L${_+5},${x-5}`).attr("class",`commit ${w} ${g.id} commit${Xe[g.branch].index%kr}`)}}if(pe==="TB"?Ki[g.id]={x:_,y}:Ki[g.id]={x:y,y:x},i){if(g.type!==we.CHERRY_PICK&&(g.customId&&g.type===we.MERGE||g.type!==we.MERGE)&&r.showCommitLabel){const R=n.append("g"),v=R.insert("rect").attr("class","commit-label-bkg"),T=R.append("text").attr("x",a).attr("y",x+25).attr("class","commit-label").text(g.id);let k=T.node().getBBox();if(v.attr("x",y-k.width/2-2).attr("y",x+13.5).attr("width",k.width+4).attr("height",k.height+4),pe==="TB"&&(v.attr("x",_-(k.width+16+5)).attr("y",x-12),T.attr("x",_-(k.width+16)).attr("y",x+k.height-12)),pe!=="TB"&&T.attr("x",y-k.width/2),r.rotateCommitLabel)if(pe==="TB")T.attr("transform","rotate(-45, "+_+", "+x+")"),v.attr("transform","rotate(-45, "+_+", "+x+")");else{let A=-7.5-(k.width+10)/25*9.5,S=10+k.width/25*8.5;R.attr("transform","translate("+A+", "+S+") rotate(-45, "+a+", "+x+")")}}if(g.tag){const R=n.insert("polygon"),v=n.append("circle"),T=n.append("text").attr("y",x-16).attr("class","tag-label").text(g.tag);let k=T.node().getBBox();T.attr("x",y-k.width/2);const A=k.height/2,S=x-19.2;R.attr("class","tag-label-bkg").attr("points",`
          ${a-k.width/2-4/2},${S+2}
          ${a-k.width/2-4/2},${S-2}
          ${y-k.width/2-4},${S-A-2}
          ${y+k.width/2+4},${S-A-2}
          ${y+k.width/2+4},${S+A+2}
          ${y-k.width/2-4},${S+A+2}`),v.attr("cx",a-k.width/2+4/2).attr("cy",S).attr("r",1.5).attr("class","tag-hole"),pe==="TB"&&(R.attr("class","tag-label-bkg").attr("points",`
            ${_},${a+2}
            ${_},${a-2}
            ${_+u},${a-A-2}
            ${_+u+k.width+4},${a-A-2}
            ${_+u+k.width+4},${a+A+2}
            ${_+u},${a+A+2}`).attr("transform","translate(12,12) rotate(45, "+_+","+a+")"),v.attr("cx",_+4/2).attr("cy",a).attr("transform","translate(12,12) rotate(45, "+_+","+a+")"),T.attr("x",_+5).attr("y",a+3).attr("transform","translate(14,14) rotate(45, "+_+","+a+")"))}}a+=p+u,a>Ps&&(Ps=a)})},Gb=(t,e,i,r,s)=>{const a=(pe==="TB"?i.x<r.x:i.y<r.y)?e.branch:t.branch,o=h=>h.branch===a,l=h=>h.seq>t.seq&&h.seq<e.seq;return Object.values(s).some(h=>l(h)&&o(h))},xs=(t,e,i=0)=>{const r=t+Math.abs(t-e)/2;if(i>5)return r;if(Un.every(a=>Math.abs(a-r)>=10))return Un.push(r),r;const n=Math.abs(t-e);return xs(t,e-n/5,i+1)},jb=(t,e,i,r)=>{const s=Ki[e.id],n=Ki[i.id],a=Gb(e,i,s,n,r);let o="",l="",h=0,u=0,p=Xe[i.branch].index;i.type===we.MERGE&&e.id!==i.parents[0]&&(p=Xe[e.branch].index);let d;if(a){o="A 10 10, 0, 0, 0,",l="A 10 10, 0, 0, 1,",h=10,u=10;const g=s.y<n.y?xs(s.y,n.y):xs(n.y,s.y),y=s.x<n.x?xs(s.x,n.x):xs(n.x,s.x);pe==="TB"?s.x<n.x?d=`M ${s.x} ${s.y} L ${y-h} ${s.y} ${l} ${y} ${s.y+u} L ${y} ${n.y-h} ${o} ${y+u} ${n.y} L ${n.x} ${n.y}`:(p=Xe[e.branch].index,d=`M ${s.x} ${s.y} L ${y+h} ${s.y} ${o} ${y} ${s.y+u} L ${y} ${n.y-h} ${l} ${y-u} ${n.y} L ${n.x} ${n.y}`):s.y<n.y?d=`M ${s.x} ${s.y} L ${s.x} ${g-h} ${o} ${s.x+u} ${g} L ${n.x-h} ${g} ${l} ${n.x} ${g+u} L ${n.x} ${n.y}`:(p=Xe[e.branch].index,d=`M ${s.x} ${s.y} L ${s.x} ${g+h} ${l} ${s.x+u} ${g} L ${n.x-h} ${g} ${o} ${n.x} ${g-u} L ${n.x} ${n.y}`)}else o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",h=20,u=20,pe==="TB"?(s.x<n.x&&(i.type===we.MERGE&&e.id!==i.parents[0]?d=`M ${s.x} ${s.y} L ${s.x} ${n.y-h} ${o} ${s.x+u} ${n.y} L ${n.x} ${n.y}`:d=`M ${s.x} ${s.y} L ${n.x-h} ${s.y} ${l} ${n.x} ${s.y+u} L ${n.x} ${n.y}`),s.x>n.x&&(o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",h=20,u=20,i.type===we.MERGE&&e.id!==i.parents[0]?d=`M ${s.x} ${s.y} L ${s.x} ${n.y-h} ${l} ${s.x-u} ${n.y} L ${n.x} ${n.y}`:d=`M ${s.x} ${s.y} L ${n.x+h} ${s.y} ${o} ${n.x} ${s.y+u} L ${n.x} ${n.y}`),s.x===n.x&&(d=`M ${s.x} ${s.y} L ${n.x} ${n.y}`)):(s.y<n.y&&(i.type===we.MERGE&&e.id!==i.parents[0]?d=`M ${s.x} ${s.y} L ${n.x-h} ${s.y} ${l} ${n.x} ${s.y+u} L ${n.x} ${n.y}`:d=`M ${s.x} ${s.y} L ${s.x} ${n.y-h} ${o} ${s.x+u} ${n.y} L ${n.x} ${n.y}`),s.y>n.y&&(i.type===we.MERGE&&e.id!==i.parents[0]?d=`M ${s.x} ${s.y} L ${n.x-h} ${s.y} ${o} ${n.x} ${s.y-u} L ${n.x} ${n.y}`:d=`M ${s.x} ${s.y} L ${s.x} ${n.y+h} ${l} ${s.x+u} ${n.y} L ${n.x} ${n.y}`),s.y===n.y&&(d=`M ${s.x} ${s.y} L ${n.x} ${n.y}`));t.append("path").attr("d",d).attr("class","arrow arrow"+p%kr)},Xb=(t,e)=>{const i=t.append("g").attr("class","commit-arrows");Object.keys(e).forEach(r=>{const s=e[r];s.parents&&s.parents.length>0&&s.parents.forEach(n=>{jb(i,e[n],s,e)})})},$b=(t,e)=>{const i=Y().gitGraph,r=t.append("g");e.forEach((s,n)=>{const a=n%kr,o=Xe[s.name].pos,l=r.append("line");l.attr("x1",0),l.attr("y1",o),l.attr("x2",Ps),l.attr("y2",o),l.attr("class","branch branch"+a),pe==="TB"&&(l.attr("y1",30),l.attr("x1",o),l.attr("y2",Ps),l.attr("x2",o)),Un.push(o);let h=s.name;const u=s0(h),p=r.insert("rect"),g=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+a);g.node().appendChild(u);let y=u.getBBox();p.attr("class","branchLabelBkg label"+a).attr("rx",4).attr("ry",4).attr("x",-y.width-4-(i.rotateCommitLabel===!0?30:0)).attr("y",-y.height/2+8).attr("width",y.width+18).attr("height",y.height+4),g.attr("transform","translate("+(-y.width-14-(i.rotateCommitLabel===!0?30:0))+", "+(o-y.height/2-1)+")"),pe==="TB"&&(p.attr("x",o-y.width/2-10).attr("y",0),g.attr("transform","translate("+(o-y.width/2-5)+", 0)")),pe!=="TB"&&p.attr("transform","translate(-19, "+(o-y.height/2)+")")})},Kb=function(t,e,i,r){Ub();const s=Y(),n=s.gitGraph;B.debug("in gitgraph renderer",t+`
`,"id:",e,i),ms=r.db.getCommits();const a=r.db.getBranchesAsObjArray();pe=r.db.getDirection();const o=yt(`[id="${e}"]`);let l=0;a.forEach((h,u)=>{const p=s0(h.name),d=o.append("g"),g=d.insert("g").attr("class","branchLabel"),y=g.insert("g").attr("class","label branch-label");y.node().appendChild(p);let x=p.getBBox();Xe[h.name]={pos:l,index:u},l+=50+(n.rotateCommitLabel?40:0)+(pe==="TB"?x.width/2:0),y.remove(),g.remove(),d.remove()}),Lc(o,ms,!1),n.showBranches&&$b(o,a),Xb(o,ms),Lc(o,ms,!0),Rt.insertTitle(o,"gitTitleText",n.titleTopMargin,r.db.getDiagramTitle()),o1(void 0,o,n.diagramPadding,n.useMaxWidth??s.useMaxWidth)},Qb={draw:Kb},Zb=t=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(e=>`
        .branch-label${e} { fill: ${t["gitBranchLabel"+e]}; }
        .commit${e} { stroke: ${t["git"+e]}; fill: ${t["git"+e]}; }
        .commit-highlight${e} { stroke: ${t["gitInv"+e]}; fill: ${t["gitInv"+e]}; }
        .label${e}  { fill: ${t["git"+e]}; }
        .arrow${e} { stroke: ${t["git"+e]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${t.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelColor};}
  .commit-label-bkg { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${t.tagLabelFontSize}; fill: ${t.tagLabelColor};}
  .tag-label-bkg { fill: ${t.tagLabelBackground}; stroke: ${t.tagLabelBorder}; }
  .tag-hole { fill: ${t.textColor}; }

  .commit-merge {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }
  .commit-reverse {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,Jb=Zb,t5={parser:Sb,db:Yb,renderer:Qb,styles:Jb},e5=Object.freeze(Object.defineProperty({__proto__:null,diagram:t5},Symbol.toStringTag,{value:"Module"}));var to=(function(){var t=function(f,L,b,P){for(b=b||{},P=f.length;P--;b[f[P]]=L);return b},e=[6,8,10,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,30,32,33,35,37],i=[1,25],r=[1,26],s=[1,27],n=[1,28],a=[1,29],o=[1,30],l=[1,31],h=[1,9],u=[1,10],p=[1,11],d=[1,12],g=[1,13],y=[1,14],x=[1,15],_=[1,16],w=[1,18],E=[1,19],R=[1,20],v=[1,21],T=[1,22],k=[1,24],A=[1,32],S={trace:function(){},yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,dateFormat:19,inclusiveEndDates:20,topAxis:21,axisFormat:22,tickInterval:23,excludes:24,includes:25,todayMarker:26,title:27,acc_title:28,acc_title_value:29,acc_descr:30,acc_descr_value:31,acc_descr_multiline_value:32,section:33,clickStatement:34,taskTxt:35,taskData:36,click:37,callbackname:38,callbackargs:39,href:40,clickStatementDebug:41,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",19:"dateFormat",20:"inclusiveEndDates",21:"topAxis",22:"axisFormat",23:"tickInterval",24:"excludes",25:"includes",26:"todayMarker",27:"title",28:"acc_title",29:"acc_title_value",30:"acc_descr",31:"acc_descr_value",32:"acc_descr_multiline_value",33:"section",35:"taskTxt",36:"taskData",37:"click",38:"callbackname",39:"callbackargs",40:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[34,2],[34,3],[34,3],[34,4],[34,3],[34,4],[34,2],[41,2],[41,3],[41,3],[41,4],[41,3],[41,4],[41,2]],performAction:function(L,b,P,U,N,D,F){var I=D.length-1;switch(N){case 1:return D[I-1];case 2:this.$=[];break;case 3:D[I-1].push(D[I]),this.$=D[I-1];break;case 4:case 5:this.$=D[I];break;case 6:case 7:this.$=[];break;case 8:U.setWeekday("monday");break;case 9:U.setWeekday("tuesday");break;case 10:U.setWeekday("wednesday");break;case 11:U.setWeekday("thursday");break;case 12:U.setWeekday("friday");break;case 13:U.setWeekday("saturday");break;case 14:U.setWeekday("sunday");break;case 15:U.setDateFormat(D[I].substr(11)),this.$=D[I].substr(11);break;case 16:U.enableInclusiveEndDates(),this.$=D[I].substr(18);break;case 17:U.TopAxis(),this.$=D[I].substr(8);break;case 18:U.setAxisFormat(D[I].substr(11)),this.$=D[I].substr(11);break;case 19:U.setTickInterval(D[I].substr(13)),this.$=D[I].substr(13);break;case 20:U.setExcludes(D[I].substr(9)),this.$=D[I].substr(9);break;case 21:U.setIncludes(D[I].substr(9)),this.$=D[I].substr(9);break;case 22:U.setTodayMarker(D[I].substr(12)),this.$=D[I].substr(12);break;case 24:U.setDiagramTitle(D[I].substr(6)),this.$=D[I].substr(6);break;case 25:this.$=D[I].trim(),U.setAccTitle(this.$);break;case 26:case 27:this.$=D[I].trim(),U.setAccDescription(this.$);break;case 28:U.addSection(D[I].substr(8)),this.$=D[I].substr(8);break;case 30:U.addTask(D[I-1],D[I]),this.$="task";break;case 31:this.$=D[I-1],U.setClickEvent(D[I-1],D[I],null);break;case 32:this.$=D[I-2],U.setClickEvent(D[I-2],D[I-1],D[I]);break;case 33:this.$=D[I-2],U.setClickEvent(D[I-2],D[I-1],null),U.setLink(D[I-2],D[I]);break;case 34:this.$=D[I-3],U.setClickEvent(D[I-3],D[I-2],D[I-1]),U.setLink(D[I-3],D[I]);break;case 35:this.$=D[I-2],U.setClickEvent(D[I-2],D[I],null),U.setLink(D[I-2],D[I-1]);break;case 36:this.$=D[I-3],U.setClickEvent(D[I-3],D[I-1],D[I]),U.setLink(D[I-3],D[I-2]);break;case 37:this.$=D[I-1],U.setLink(D[I-1],D[I]);break;case 38:case 44:this.$=D[I-1]+" "+D[I];break;case 39:case 40:case 42:this.$=D[I-2]+" "+D[I-1]+" "+D[I];break;case 41:case 43:this.$=D[I-3]+" "+D[I-2]+" "+D[I-1]+" "+D[I];break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:i,13:r,14:s,15:n,16:a,17:o,18:l,19:h,20:u,21:p,22:d,23:g,24:y,25:x,26:_,27:w,28:E,30:R,32:v,33:T,34:23,35:k,37:A},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:33,11:17,12:i,13:r,14:s,15:n,16:a,17:o,18:l,19:h,20:u,21:p,22:d,23:g,24:y,25:x,26:_,27:w,28:E,30:R,32:v,33:T,34:23,35:k,37:A},t(e,[2,5]),t(e,[2,6]),t(e,[2,15]),t(e,[2,16]),t(e,[2,17]),t(e,[2,18]),t(e,[2,19]),t(e,[2,20]),t(e,[2,21]),t(e,[2,22]),t(e,[2,23]),t(e,[2,24]),{29:[1,34]},{31:[1,35]},t(e,[2,27]),t(e,[2,28]),t(e,[2,29]),{36:[1,36]},t(e,[2,8]),t(e,[2,9]),t(e,[2,10]),t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),{38:[1,37],40:[1,38]},t(e,[2,4]),t(e,[2,25]),t(e,[2,26]),t(e,[2,30]),t(e,[2,31],{39:[1,39],40:[1,40]}),t(e,[2,37],{38:[1,41]}),t(e,[2,32],{40:[1,42]}),t(e,[2,33]),t(e,[2,35],{39:[1,43]}),t(e,[2,34]),t(e,[2,36])],defaultActions:{},parseError:function(L,b){if(b.recoverable)this.trace(L);else{var P=new Error(L);throw P.hash=b,P}},parse:function(L){var b=this,P=[0],U=[],N=[null],D=[],F=this.table,I="",M=0,z=0,st=2,j=1,dt=D.slice.call(arguments,1),K=Object.create(this.lexer),G={yy:{}};for(var tt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,tt)&&(G.yy[tt]=this.yy[tt]);K.setInput(L,G.yy),G.yy.lexer=K,G.yy.parser=this,typeof K.yylloc>"u"&&(K.yylloc={});var nt=K.yylloc;D.push(nt);var Q=K.options&&K.options.ranges;typeof G.yy.parseError=="function"?this.parseError=G.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function J(){var Bt;return Bt=U.pop()||K.lex()||j,typeof Bt!="number"&&(Bt instanceof Array&&(U=Bt,Bt=U.pop()),Bt=b.symbols_[Bt]||Bt),Bt}for(var O,at,W,ft,V={},vt,X,St,bt;;){if(at=P[P.length-1],this.defaultActions[at]?W=this.defaultActions[at]:((O===null||typeof O>"u")&&(O=J()),W=F[at]&&F[at][O]),typeof W>"u"||!W.length||!W[0]){var Vt="";bt=[];for(vt in F[at])this.terminals_[vt]&&vt>st&&bt.push("'"+this.terminals_[vt]+"'");K.showPosition?Vt="Parse error on line "+(M+1)+`:
`+K.showPosition()+`
Expecting `+bt.join(", ")+", got '"+(this.terminals_[O]||O)+"'":Vt="Parse error on line "+(M+1)+": Unexpected "+(O==j?"end of input":"'"+(this.terminals_[O]||O)+"'"),this.parseError(Vt,{text:K.match,token:this.terminals_[O]||O,line:K.yylineno,loc:nt,expected:bt})}if(W[0]instanceof Array&&W.length>1)throw new Error("Parse Error: multiple actions possible at state: "+at+", token: "+O);switch(W[0]){case 1:P.push(O),N.push(K.yytext),D.push(K.yylloc),P.push(W[1]),O=null,z=K.yyleng,I=K.yytext,M=K.yylineno,nt=K.yylloc;break;case 2:if(X=this.productions_[W[1]][1],V.$=N[N.length-X],V._$={first_line:D[D.length-(X||1)].first_line,last_line:D[D.length-1].last_line,first_column:D[D.length-(X||1)].first_column,last_column:D[D.length-1].last_column},Q&&(V._$.range=[D[D.length-(X||1)].range[0],D[D.length-1].range[1]]),ft=this.performAction.apply(V,[I,z,M,G.yy,W[1],N,D].concat(dt)),typeof ft<"u")return ft;X&&(P=P.slice(0,-1*X*2),N=N.slice(0,-1*X),D=D.slice(0,-1*X)),P.push(this.productions_[W[1]][0]),N.push(V.$),D.push(V._$),St=F[P[P.length-2]][P[P.length-1]],P.push(St);break;case 3:return!0}}return!0}},m=(function(){var f={EOF:1,parseError:function(b,P){if(this.yy.parser)this.yy.parser.parseError(b,P);else throw new Error(b)},setInput:function(L,b){return this.yy=b||this.yy||{},this._input=L,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var L=this._input[0];this.yytext+=L,this.yyleng++,this.offset++,this.match+=L,this.matched+=L;var b=L.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),L},unput:function(L){var b=L.length,P=L.split(/(?:\r\n?|\n)/g);this._input=L+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b),this.offset-=b;var U=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),P.length-1&&(this.yylineno-=P.length-1);var N=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:P?(P.length===U.length?this.yylloc.first_column:0)+U[U.length-P.length].length-P[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[N[0],N[0]+this.yyleng-b]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(L){this.unput(this.match.slice(L))},pastInput:function(){var L=this.matched.substr(0,this.matched.length-this.match.length);return(L.length>20?"...":"")+L.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var L=this.match;return L.length<20&&(L+=this._input.substr(0,20-L.length)),(L.substr(0,20)+(L.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var L=this.pastInput(),b=new Array(L.length+1).join("-");return L+this.upcomingInput()+`
`+b+"^"},test_match:function(L,b){var P,U,N;if(this.options.backtrack_lexer&&(N={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(N.yylloc.range=this.yylloc.range.slice(0))),U=L[0].match(/(?:\r\n?|\n).*/g),U&&(this.yylineno+=U.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:U?U[U.length-1].length-U[U.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+L[0].length},this.yytext+=L[0],this.match+=L[0],this.matches=L,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(L[0].length),this.matched+=L[0],P=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),P)return P;if(this._backtrack){for(var D in N)this[D]=N[D];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var L,b,P,U;this._more||(this.yytext="",this.match="");for(var N=this._currentRules(),D=0;D<N.length;D++)if(P=this._input.match(this.rules[N[D]]),P&&(!b||P[0].length>b[0].length)){if(b=P,U=D,this.options.backtrack_lexer){if(L=this.test_match(P,N[D]),L!==!1)return L;if(this._backtrack){b=!1;continue}else return!1}else if(!this.options.flex)break}return b?(L=this.test_match(b,N[U]),L!==!1?L:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var b=this.next();return b||this.lex()},begin:function(b){this.conditionStack.push(b)},popState:function(){var b=this.conditionStack.length-1;return b>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(b){return b=this.conditionStack.length-1-Math.abs(b||0),b>=0?this.conditionStack[b]:"INITIAL"},pushState:function(b){this.begin(b)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(b,P,U,N){switch(U){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),28;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),30;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:break;case 9:break;case 10:break;case 11:return 10;case 12:break;case 13:break;case 14:this.begin("href");break;case 15:this.popState();break;case 16:return 40;case 17:this.begin("callbackname");break;case 18:this.popState();break;case 19:this.popState(),this.begin("callbackargs");break;case 20:return 38;case 21:this.popState();break;case 22:return 39;case 23:this.begin("click");break;case 24:this.popState();break;case 25:return 37;case 26:return 4;case 27:return 19;case 28:return 20;case 29:return 21;case 30:return 22;case 31:return 23;case 32:return 25;case 33:return 24;case 34:return 26;case 35:return 12;case 36:return 13;case 37:return 14;case 38:return 15;case 39:return 16;case 40:return 17;case 41:return 18;case 42:return"date";case 43:return 27;case 44:return"accDescription";case 45:return 33;case 46:return 35;case 47:return 36;case 48:return":";case 49:return 6;case 50:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^\n]+)/i,/^(?:[^:\n]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[21,22],inclusive:!1},callbackname:{rules:[18,19,20],inclusive:!1},href:{rules:[15,16],inclusive:!1},click:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,17,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],inclusive:!0}}};return f})();S.lexer=m;function C(){this.yy={}}return C.prototype=S,S.Parser=C,new C})();to.parser=to;const i5=to;De.extend($d);De.extend(Kd);De.extend(Qd);let wi="",al="",ol,ll="",en=[],rn=[],cl={},hl=[],Hn=[],ns="",ul="";const n0=["active","done","crit","milestone"];let dl=[],sn=!1,fl=!1,pl="sunday",eo=0;const r5=function(){hl=[],Hn=[],ns="",dl=[],bn=0,ro=void 0,kn=void 0,xe=[],wi="",al="",ul="",ol=void 0,ll="",en=[],rn=[],sn=!1,fl=!1,eo=0,cl={},Oe(),pl="sunday"},s5=function(t){al=t},n5=function(){return al},a5=function(t){ol=t},o5=function(){return ol},l5=function(t){ll=t},c5=function(){return ll},h5=function(t){wi=t},u5=function(){sn=!0},d5=function(){return sn},f5=function(){fl=!0},p5=function(){return fl},g5=function(t){ul=t},y5=function(){return ul},m5=function(){return wi},x5=function(t){en=t.toLowerCase().split(/[\s,]+/)},b5=function(){return en},k5=function(t){rn=t.toLowerCase().split(/[\s,]+/)},_5=function(){return rn},T5=function(){return cl},C5=function(t){ns=t,hl.push(t)},E5=function(){return hl},S5=function(){let t=Bc();const e=10;let i=0;for(;!t&&i<e;)t=Bc(),i++;return Hn=xe,Hn},a0=function(t,e,i,r){return r.includes(t.format(e.trim()))?!1:t.isoWeekday()>=6&&i.includes("weekends")||i.includes(t.format("dddd").toLowerCase())?!0:i.includes(t.format(e.trim()))},w5=function(t){pl=t},v5=function(){return pl},o0=function(t,e,i,r){if(!i.length||t.manualEndTime)return;let s;t.startTime instanceof Date?s=De(t.startTime):s=De(t.startTime,e,!0),s=s.add(1,"d");let n;t.endTime instanceof Date?n=De(t.endTime):n=De(t.endTime,e,!0);const[a,o]=A5(s,n,e,i,r);t.endTime=a.toDate(),t.renderEndTime=o},A5=function(t,e,i,r,s){let n=!1,a=null;for(;t<=e;)n||(a=e.toDate()),n=a0(t,i,r,s),n&&(e=e.add(1,"d")),t=t.add(1,"d");return[e,a]},io=function(t,e,i){i=i.trim();const s=/^after\s+(?<ids>[\d\w- ]+)/.exec(i);if(s!==null){let a=null;for(const l of s.groups.ids.split(" ")){let h=Mr(l);h!==void 0&&(!a||h.endTime>a.endTime)&&(a=h)}if(a)return a.endTime;const o=new Date;return o.setHours(0,0,0,0),o}let n=De(i,e.trim(),!0);if(n.isValid())return n.toDate();{B.debug("Invalid date:"+i),B.debug("With date format:"+e.trim());const a=new Date(i);if(a===void 0||isNaN(a.getTime())||a.getFullYear()<-1e4||a.getFullYear()>1e4)throw new Error("Invalid date:"+i);return a}},l0=function(t){const e=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(t.trim());return e!==null?[Number.parseFloat(e[1]),e[2]]:[NaN,"ms"]},c0=function(t,e,i,r=!1){i=i.trim();const n=/^until\s+(?<ids>[\d\w- ]+)/.exec(i);if(n!==null){let u=null;for(const d of n.groups.ids.split(" ")){let g=Mr(d);g!==void 0&&(!u||g.startTime<u.startTime)&&(u=g)}if(u)return u.startTime;const p=new Date;return p.setHours(0,0,0,0),p}let a=De(i,e.trim(),!0);if(a.isValid())return r&&(a=a.add(1,"d")),a.toDate();let o=De(t);const[l,h]=l0(i);if(!Number.isNaN(l)){const u=o.add(l,h);u.isValid()&&(o=u)}return o.toDate()};let bn=0;const Qr=function(t){return t===void 0?(bn=bn+1,"task"+bn):t},L5=function(t,e){let i;e.substr(0,1)===":"?i=e.substr(1,e.length):i=e;const r=i.split(","),s={};f0(r,s,n0);for(let a=0;a<r.length;a++)r[a]=r[a].trim();let n="";switch(r.length){case 1:s.id=Qr(),s.startTime=t.endTime,n=r[0];break;case 2:s.id=Qr(),s.startTime=io(void 0,wi,r[0]),n=r[1];break;case 3:s.id=Qr(r[0]),s.startTime=io(void 0,wi,r[1]),n=r[2];break}return n&&(s.endTime=c0(s.startTime,wi,n,sn),s.manualEndTime=De(n,"YYYY-MM-DD",!0).isValid(),o0(s,wi,rn,en)),s},B5=function(t,e){let i;e.substr(0,1)===":"?i=e.substr(1,e.length):i=e;const r=i.split(","),s={};f0(r,s,n0);for(let n=0;n<r.length;n++)r[n]=r[n].trim();switch(r.length){case 1:s.id=Qr(),s.startTime={type:"prevTaskEnd",id:t},s.endTime={data:r[0]};break;case 2:s.id=Qr(),s.startTime={type:"getStartDate",startData:r[0]},s.endTime={data:r[1]};break;case 3:s.id=Qr(r[0]),s.startTime={type:"getStartDate",startData:r[1]},s.endTime={data:r[2]};break}return s};let ro,kn,xe=[];const h0={},I5=function(t,e){const i={section:ns,type:ns,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},r=B5(kn,e);i.raw.startTime=r.startTime,i.raw.endTime=r.endTime,i.id=r.id,i.prevTaskId=kn,i.active=r.active,i.done=r.done,i.crit=r.crit,i.milestone=r.milestone,i.order=eo,eo++;const s=xe.push(i);kn=i.id,h0[i.id]=s-1},Mr=function(t){const e=h0[t];return xe[e]},D5=function(t,e){const i={section:ns,type:ns,description:t,task:t,classes:[]},r=L5(ro,e);i.startTime=r.startTime,i.endTime=r.endTime,i.id=r.id,i.active=r.active,i.done=r.done,i.crit=r.crit,i.milestone=r.milestone,ro=i,Hn.push(i)},Bc=function(){const t=function(i){const r=xe[i];let s="";switch(xe[i].raw.startTime.type){case"prevTaskEnd":{const n=Mr(r.prevTaskId);r.startTime=n.endTime;break}case"getStartDate":s=io(void 0,wi,xe[i].raw.startTime.startData),s&&(xe[i].startTime=s);break}return xe[i].startTime&&(xe[i].endTime=c0(xe[i].startTime,wi,xe[i].raw.endTime.data,sn),xe[i].endTime&&(xe[i].processed=!0,xe[i].manualEndTime=De(xe[i].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),o0(xe[i],wi,rn,en))),xe[i].processed};let e=!0;for(const[i,r]of xe.entries())t(i),e=e&&r.processed;return e},F5=function(t,e){let i=e;Y().securityLevel!=="loose"&&(i=Fr.sanitizeUrl(e)),t.split(",").forEach(function(r){Mr(r)!==void 0&&(d0(r,()=>{window.open(i,"_self")}),cl[r]=i)}),u0(t,"clickable")},u0=function(t,e){t.split(",").forEach(function(i){let r=Mr(i);r!==void 0&&r.classes.push(e)})},R5=function(t,e,i){if(Y().securityLevel!=="loose"||e===void 0)return;let r=[];if(typeof i=="string"){r=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<r.length;n++){let a=r[n].trim();a.charAt(0)==='"'&&a.charAt(a.length-1)==='"'&&(a=a.substr(1,a.length-2)),r[n]=a}}r.length===0&&r.push(t),Mr(t)!==void 0&&d0(t,()=>{Rt.runFunc(e,...r)})},d0=function(t,e){dl.push(function(){const i=document.querySelector(`[id="${t}"]`);i!==null&&i.addEventListener("click",function(){e()})},function(){const i=document.querySelector(`[id="${t}-text"]`);i!==null&&i.addEventListener("click",function(){e()})})},N5=function(t,e,i){t.split(",").forEach(function(r){R5(r,e,i)}),u0(t,"clickable")},O5=function(t){dl.forEach(function(e){e(t)})},P5={getConfig:()=>Y().gantt,clear:r5,setDateFormat:h5,getDateFormat:m5,enableInclusiveEndDates:u5,endDatesAreInclusive:d5,enableTopAxis:f5,topAxisEnabled:p5,setAxisFormat:s5,getAxisFormat:n5,setTickInterval:a5,getTickInterval:o5,setTodayMarker:l5,getTodayMarker:c5,setAccTitle:Pe,getAccTitle:Ye,setDiagramTitle:ri,getDiagramTitle:Ge,setDisplayMode:g5,getDisplayMode:y5,setAccDescription:Ue,getAccDescription:He,addSection:C5,getSections:E5,getTasks:S5,addTask:I5,findTaskById:Mr,addTaskOrg:D5,setIncludes:x5,getIncludes:b5,setExcludes:k5,getExcludes:_5,setClickEvent:N5,setLink:F5,getLinks:T5,bindFunctions:O5,parseDuration:l0,isInvalidDate:a0,setWeekday:w5,getWeekday:v5};function f0(t,e,i){let r=!0;for(;r;)r=!1,i.forEach(function(s){const n="^\\s*"+s+"\\s*$",a=new RegExp(n);t[0].match(a)&&(e[s]=!0,t.shift(1),r=!0)})}const M5=function(){B.debug("Something is calling, setConf, remove the call")},Ic={monday:Ff,tuesday:Df,wednesday:If,thursday:Bf,friday:Lf,saturday:Af,sunday:vf},V5=(t,e)=>{let i=[...t].map(()=>-1/0),r=[...t].sort((n,a)=>n.startTime-a.startTime||n.order-a.order),s=0;for(const n of r)for(let a=0;a<i.length;a++)if(n.startTime>=i[a]){i[a]=n.endTime,n.order=a+e,a>s&&(s=a);break}return s};let Hi;const z5=function(t,e,i,r){const s=Y().gantt,n=Y().securityLevel;let a;n==="sandbox"&&(a=yt("#i"+e));const o=n==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=n==="sandbox"?a.nodes()[0].contentDocument:document,h=l.getElementById(e);Hi=h.parentElement.offsetWidth,Hi===void 0&&(Hi=1200),s.useWidth!==void 0&&(Hi=s.useWidth);const u=r.db.getTasks();let p=[];for(const S of u)p.push(S.type);p=A(p);const d={};let g=2*s.topPadding;if(r.db.getDisplayMode()==="compact"||s.displayMode==="compact"){const S={};for(const C of u)S[C.section]===void 0?S[C.section]=[C]:S[C.section].push(C);let m=0;for(const C of Object.keys(S)){const f=V5(S[C],m)+1;m+=f,g+=f*(s.barHeight+s.barGap),d[C]=f}}else{g+=u.length*(s.barHeight+s.barGap);for(const S of p)d[S]=u.filter(m=>m.type===S).length}h.setAttribute("viewBox","0 0 "+Hi+" "+g);const y=o.select(`[id="${e}"]`),x=_f().domain([Tf(u,function(S){return S.startTime}),Cf(u,function(S){return S.endTime})]).rangeRound([0,Hi-s.leftPadding-s.rightPadding]);function _(S,m){const C=S.startTime,f=m.startTime;let L=0;return C>f?L=1:C<f&&(L=-1),L}u.sort(_),w(u,Hi,g),Ne(y,g,Hi,s.useMaxWidth),y.append("text").text(r.db.getDiagramTitle()).attr("x",Hi/2).attr("y",s.titleTopMargin).attr("class","titleText");function w(S,m,C){const f=s.barHeight,L=f+s.barGap,b=s.topPadding,P=s.leftPadding,U=Bs().domain([0,p.length]).range(["#00B9FA","#F95002"]).interpolate(Ef);R(L,b,P,m,C,S,r.db.getExcludes(),r.db.getIncludes()),v(P,b,m,C),E(S,L,b,P,f,U,m),T(L,b),k(P,b,m,C)}function E(S,m,C,f,L,b,P){const N=[...new Set(S.map(M=>M.order))].map(M=>S.find(z=>z.order===M));y.append("g").selectAll("rect").data(N).enter().append("rect").attr("x",0).attr("y",function(M,z){return z=M.order,z*m+C-2}).attr("width",function(){return P-s.rightPadding/2}).attr("height",m).attr("class",function(M){for(const[z,st]of p.entries())if(M.type===st)return"section section"+z%s.numberSectionStyles;return"section section0"});const D=y.append("g").selectAll("rect").data(S).enter(),F=r.db.getLinks();if(D.append("rect").attr("id",function(M){return M.id}).attr("rx",3).attr("ry",3).attr("x",function(M){return M.milestone?x(M.startTime)+f+.5*(x(M.endTime)-x(M.startTime))-.5*L:x(M.startTime)+f}).attr("y",function(M,z){return z=M.order,z*m+C}).attr("width",function(M){return M.milestone?L:x(M.renderEndTime||M.endTime)-x(M.startTime)}).attr("height",L).attr("transform-origin",function(M,z){return z=M.order,(x(M.startTime)+f+.5*(x(M.endTime)-x(M.startTime))).toString()+"px "+(z*m+C+.5*L).toString()+"px"}).attr("class",function(M){const z="task";let st="";M.classes.length>0&&(st=M.classes.join(" "));let j=0;for(const[K,G]of p.entries())M.type===G&&(j=K%s.numberSectionStyles);let dt="";return M.active?M.crit?dt+=" activeCrit":dt=" active":M.done?M.crit?dt=" doneCrit":dt=" done":M.crit&&(dt+=" crit"),dt.length===0&&(dt=" task"),M.milestone&&(dt=" milestone "+dt),dt+=j,dt+=" "+st,z+dt}),D.append("text").attr("id",function(M){return M.id+"-text"}).text(function(M){return M.task}).attr("font-size",s.fontSize).attr("x",function(M){let z=x(M.startTime),st=x(M.renderEndTime||M.endTime);M.milestone&&(z+=.5*(x(M.endTime)-x(M.startTime))-.5*L),M.milestone&&(st=z+L);const j=this.getBBox().width;return j>st-z?st+j+1.5*s.leftPadding>P?z+f-5:st+f+5:(st-z)/2+z+f}).attr("y",function(M,z){return z=M.order,z*m+s.barHeight/2+(s.fontSize/2-2)+C}).attr("text-height",L).attr("class",function(M){const z=x(M.startTime);let st=x(M.endTime);M.milestone&&(st=z+L);const j=this.getBBox().width;let dt="";M.classes.length>0&&(dt=M.classes.join(" "));let K=0;for(const[tt,nt]of p.entries())M.type===nt&&(K=tt%s.numberSectionStyles);let G="";return M.active&&(M.crit?G="activeCritText"+K:G="activeText"+K),M.done?M.crit?G=G+" doneCritText"+K:G=G+" doneText"+K:M.crit&&(G=G+" critText"+K),M.milestone&&(G+=" milestoneText"),j>st-z?st+j+1.5*s.leftPadding>P?dt+" taskTextOutsideLeft taskTextOutside"+K+" "+G:dt+" taskTextOutsideRight taskTextOutside"+K+" "+G+" width-"+j:dt+" taskText taskText"+K+" "+G+" width-"+j}),Y().securityLevel==="sandbox"){let M;M=yt("#i"+e);const z=M.nodes()[0].contentDocument;D.filter(function(st){return F[st.id]!==void 0}).each(function(st){var j=z.querySelector("#"+st.id),dt=z.querySelector("#"+st.id+"-text");const K=j.parentNode;var G=z.createElement("a");G.setAttribute("xlink:href",F[st.id]),G.setAttribute("target","_top"),K.appendChild(G),G.appendChild(j),G.appendChild(dt)})}}function R(S,m,C,f,L,b,P,U){if(P.length===0&&U.length===0)return;let N,D;for(const{startTime:j,endTime:dt}of b)(N===void 0||j<N)&&(N=j),(D===void 0||dt>D)&&(D=dt);if(!N||!D)return;if(De(D).diff(De(N),"year")>5){B.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");return}const F=r.db.getDateFormat(),I=[];let M=null,z=De(N);for(;z.valueOf()<=D;)r.db.isInvalidDate(z,F,P,U)?M?M.end=z:M={start:z,end:z}:M&&(I.push(M),M=null),z=z.add(1,"d");y.append("g").selectAll("rect").data(I).enter().append("rect").attr("id",function(j){return"exclude-"+j.start.format("YYYY-MM-DD")}).attr("x",function(j){return x(j.start)+C}).attr("y",s.gridLineStartPadding).attr("width",function(j){const dt=j.end.add(1,"day");return x(dt)-x(j.start)}).attr("height",L-m-s.gridLineStartPadding).attr("transform-origin",function(j,dt){return(x(j.start)+C+.5*(x(j.end)-x(j.start))).toString()+"px "+(dt*S+.5*L).toString()+"px"}).attr("class","exclude-range")}function v(S,m,C,f){let L=Sf(x).tickSize(-f+m+s.gridLineStartPadding).tickFormat(Ul(r.db.getAxisFormat()||s.axisFormat||"%Y-%m-%d"));const P=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(r.db.getTickInterval()||s.tickInterval);if(P!==null){const U=P[1],N=P[2],D=r.db.getWeekday()||s.weekday;switch(N){case"millisecond":L.ticks(Kl.every(U));break;case"second":L.ticks($l.every(U));break;case"minute":L.ticks(Xl.every(U));break;case"hour":L.ticks(jl.every(U));break;case"day":L.ticks(Gl.every(U));break;case"week":L.ticks(Ic[D].every(U));break;case"month":L.ticks(Hl.every(U));break}}if(y.append("g").attr("class","grid").attr("transform","translate("+S+", "+(f-50)+")").call(L).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),r.db.topAxisEnabled()||s.topAxis){let U=wf(x).tickSize(-f+m+s.gridLineStartPadding).tickFormat(Ul(r.db.getAxisFormat()||s.axisFormat||"%Y-%m-%d"));if(P!==null){const N=P[1],D=P[2],F=r.db.getWeekday()||s.weekday;switch(D){case"millisecond":U.ticks(Kl.every(N));break;case"second":U.ticks($l.every(N));break;case"minute":U.ticks(Xl.every(N));break;case"hour":U.ticks(jl.every(N));break;case"day":U.ticks(Gl.every(N));break;case"week":U.ticks(Ic[F].every(N));break;case"month":U.ticks(Hl.every(N));break}}y.append("g").attr("class","grid").attr("transform","translate("+S+", "+m+")").call(U).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function T(S,m){let C=0;const f=Object.keys(d).map(L=>[L,d[L]]);y.append("g").selectAll("text").data(f).enter().append(function(L){const b=L[0].split(mt.lineBreakRegex),P=-(b.length-1)/2,U=l.createElementNS("http://www.w3.org/2000/svg","text");U.setAttribute("dy",P+"em");for(const[N,D]of b.entries()){const F=l.createElementNS("http://www.w3.org/2000/svg","tspan");F.setAttribute("alignment-baseline","central"),F.setAttribute("x","10"),N>0&&F.setAttribute("dy","1em"),F.textContent=D,U.appendChild(F)}return U}).attr("x",10).attr("y",function(L,b){if(b>0)for(let P=0;P<b;P++)return C+=f[b-1][1],L[1]*S/2+C*S+m;else return L[1]*S/2+m}).attr("font-size",s.sectionFontSize).attr("class",function(L){for(const[b,P]of p.entries())if(L[0]===P)return"sectionTitle sectionTitle"+b%s.numberSectionStyles;return"sectionTitle"})}function k(S,m,C,f){const L=r.db.getTodayMarker();if(L==="off")return;const b=y.append("g").attr("class","today"),P=new Date,U=b.append("line");U.attr("x1",x(P)+S).attr("x2",x(P)+S).attr("y1",s.titleTopMargin).attr("y2",f-s.titleTopMargin).attr("class","today"),L!==""&&U.attr("style",L.replace(/,/g,";"))}function A(S){const m={},C=[];for(let f=0,L=S.length;f<L;++f)Object.prototype.hasOwnProperty.call(m,S[f])||(m[S[f]]=!0,C.push(S[f]));return C}},q5={setConf:M5,draw:z5},W5=t=>`
  .mermaid-main-font {
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .exclude-range {
    fill: ${t.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${t.sectionBkgColor};
  }

  .section2 {
    fill: ${t.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${t.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${t.titleColor};
  }

  .sectionTitle1 {
    fill: ${t.titleColor};
  }

  .sectionTitle2 {
    fill: ${t.titleColor};
  }

  .sectionTitle3 {
    fill: ${t.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${t.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
  }

  .grid .tick text {
    font-family: ${t.fontFamily};
    fill: ${t.textColor};
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${t.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .taskTextOutsideRight {
    fill: ${t.taskTextDarkColor};
    text-anchor: start;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .taskTextOutsideLeft {
    fill: ${t.taskTextDarkColor};
    text-anchor: end;
  }


  /* Special case clickable */

  .task.clickable {
    cursor: pointer;
  }

  .taskText.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }


  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${t.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${t.taskBkgColor};
    stroke: ${t.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${t.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${t.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${t.activeTaskBkgColor};
    stroke: ${t.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${t.doneTaskBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.titleColor||t.textColor};
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }
`,Y5=W5,U5={parser:i5,db:P5,renderer:q5,styles:Y5},H5=Object.freeze(Object.defineProperty({__proto__:null,diagram:U5},Symbol.toStringTag,{value:"Module"}));var so=(function(){var t=function(n,a,o,l){for(o=o||{},l=n.length;l--;o[n[l]]=a);return o},e=[6,9,10],i={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(a,o,l,h,u,p,d){switch(p.length-1,u){case 1:return h;case 4:break;case 6:h.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},t(e,[2,3]),t(e,[2,4]),t(e,[2,5]),t(e,[2,6])],defaultActions:{4:[2,1]},parseError:function(a,o){if(o.recoverable)this.trace(a);else{var l=new Error(a);throw l.hash=o,l}},parse:function(a){var o=this,l=[0],h=[],u=[null],p=[],d=this.table,g="",y=0,x=0,_=2,w=1,E=p.slice.call(arguments,1),R=Object.create(this.lexer),v={yy:{}};for(var T in this.yy)Object.prototype.hasOwnProperty.call(this.yy,T)&&(v.yy[T]=this.yy[T]);R.setInput(a,v.yy),v.yy.lexer=R,v.yy.parser=this,typeof R.yylloc>"u"&&(R.yylloc={});var k=R.yylloc;p.push(k);var A=R.options&&R.options.ranges;typeof v.yy.parseError=="function"?this.parseError=v.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function S(){var I;return I=h.pop()||R.lex()||w,typeof I!="number"&&(I instanceof Array&&(h=I,I=h.pop()),I=o.symbols_[I]||I),I}for(var m,C,f,L,b={},P,U,N,D;;){if(C=l[l.length-1],this.defaultActions[C]?f=this.defaultActions[C]:((m===null||typeof m>"u")&&(m=S()),f=d[C]&&d[C][m]),typeof f>"u"||!f.length||!f[0]){var F="";D=[];for(P in d[C])this.terminals_[P]&&P>_&&D.push("'"+this.terminals_[P]+"'");R.showPosition?F="Parse error on line "+(y+1)+`:
`+R.showPosition()+`
Expecting `+D.join(", ")+", got '"+(this.terminals_[m]||m)+"'":F="Parse error on line "+(y+1)+": Unexpected "+(m==w?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(F,{text:R.match,token:this.terminals_[m]||m,line:R.yylineno,loc:k,expected:D})}if(f[0]instanceof Array&&f.length>1)throw new Error("Parse Error: multiple actions possible at state: "+C+", token: "+m);switch(f[0]){case 1:l.push(m),u.push(R.yytext),p.push(R.yylloc),l.push(f[1]),m=null,x=R.yyleng,g=R.yytext,y=R.yylineno,k=R.yylloc;break;case 2:if(U=this.productions_[f[1]][1],b.$=u[u.length-U],b._$={first_line:p[p.length-(U||1)].first_line,last_line:p[p.length-1].last_line,first_column:p[p.length-(U||1)].first_column,last_column:p[p.length-1].last_column},A&&(b._$.range=[p[p.length-(U||1)].range[0],p[p.length-1].range[1]]),L=this.performAction.apply(b,[g,x,y,v.yy,f[1],u,p].concat(E)),typeof L<"u")return L;U&&(l=l.slice(0,-1*U*2),u=u.slice(0,-1*U),p=p.slice(0,-1*U)),l.push(this.productions_[f[1]][0]),u.push(b.$),p.push(b._$),N=d[l[l.length-2]][l[l.length-1]],l.push(N);break;case 3:return!0}}return!0}},r=(function(){var n={EOF:1,parseError:function(o,l){if(this.yy.parser)this.yy.parser.parseError(o,l);else throw new Error(o)},setInput:function(a,o){return this.yy=o||this.yy||{},this._input=a,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var o=a.match(/(?:\r\n?|\n).*/g);return o?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var o=a.length,l=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-o),this.offset-=o;var h=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),l.length-1&&(this.yylineno-=l.length-1);var u=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:l?(l.length===h.length?this.yylloc.first_column:0)+h[h.length-l.length].length-l[0].length:this.yylloc.first_column-o},this.options.ranges&&(this.yylloc.range=[u[0],u[0]+this.yyleng-o]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),o=new Array(a.length+1).join("-");return a+this.upcomingInput()+`
`+o+"^"},test_match:function(a,o){var l,h,u;if(this.options.backtrack_lexer&&(u={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(u.yylloc.range=this.yylloc.range.slice(0))),h=a[0].match(/(?:\r\n?|\n).*/g),h&&(this.yylineno+=h.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:h?h[h.length-1].length-h[h.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length},this.yytext+=a[0],this.match+=a[0],this.matches=a,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(a[0].length),this.matched+=a[0],l=this.performAction.call(this,this.yy,this,o,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),l)return l;if(this._backtrack){for(var p in u)this[p]=u[p];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,o,l,h;this._more||(this.yytext="",this.match="");for(var u=this._currentRules(),p=0;p<u.length;p++)if(l=this._input.match(this.rules[u[p]]),l&&(!o||l[0].length>o[0].length)){if(o=l,h=p,this.options.backtrack_lexer){if(a=this.test_match(l,u[p]),a!==!1)return a;if(this._backtrack){o=!1;continue}else return!1}else if(!this.options.flex)break}return o?(a=this.test_match(o,u[h]),a!==!1?a:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var o=this.next();return o||this.lex()},begin:function(o){this.conditionStack.push(o)},popState:function(){var o=this.conditionStack.length-1;return o>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(o){return o=this.conditionStack.length-1-Math.abs(o||0),o>=0?this.conditionStack[o]:"INITIAL"},pushState:function(o){this.begin(o)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(o,l,h,u){switch(h){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return n})();i.lexer=r;function s(){this.yy={}}return s.prototype=i,i.Parser=s,new s})();so.parser=so;const G5=so,p0={info:!1};let gl=p0.info;const j5=t=>{gl=t},X5=()=>gl,$5=()=>{gl=p0.info},K5={clear:$5,setInfo:j5,getInfo:X5},Q5=(t,e,i)=>{B.debug(`rendering info diagram
`+t);const r=Zs(e);Ne(r,100,400,!0),r.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${i}`)},Z5={draw:Q5},J5={parser:G5,db:K5,renderer:Z5},tk=Object.freeze(Object.defineProperty({__proto__:null,diagram:J5},Symbol.toStringTag,{value:"Module"}));var no=(function(){var t=function(R,v,T,k){for(T=T||{},k=R.length;k--;T[R[k]]=v);return T},e=[1,3],i=[1,4],r=[1,5],s=[1,6],n=[1,10,12,14,16,18,19,20,21,22],a=[2,4],o=[1,5,10,12,14,16,18,19,20,21,22],l=[20,21,22],h=[2,7],u=[1,12],p=[1,13],d=[1,14],g=[1,15],y=[1,16],x=[1,17],_={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,PIE:5,document:6,showData:7,line:8,statement:9,txt:10,value:11,title:12,title_value:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,section:19,NEWLINE:20,";":21,EOF:22,$accept:0,$end:1},terminals_:{2:"error",5:"PIE",7:"showData",10:"txt",11:"value",12:"title",13:"title_value",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"section",20:"NEWLINE",21:";",22:"EOF"},productions_:[0,[3,2],[3,2],[3,3],[6,0],[6,2],[8,2],[9,0],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[4,1],[4,1],[4,1]],performAction:function(v,T,k,A,S,m,C){var f=m.length-1;switch(S){case 3:A.setShowData(!0);break;case 6:this.$=m[f-1];break;case 8:A.addSection(m[f-1],A.cleanupValue(m[f]));break;case 9:this.$=m[f].trim(),A.setDiagramTitle(this.$);break;case 10:this.$=m[f].trim(),A.setAccTitle(this.$);break;case 11:case 12:this.$=m[f].trim(),A.setAccDescription(this.$);break;case 13:A.addSection(m[f].substr(8)),this.$=m[f].substr(8);break}},table:[{3:1,4:2,5:e,20:i,21:r,22:s},{1:[3]},{3:7,4:2,5:e,20:i,21:r,22:s},t(n,a,{6:8,7:[1,9]}),t(o,[2,14]),t(o,[2,15]),t(o,[2,16]),{1:[2,1]},t(l,h,{8:10,9:11,1:[2,2],10:u,12:p,14:d,16:g,18:y,19:x}),t(n,a,{6:18}),t(n,[2,5]),{4:19,20:i,21:r,22:s},{11:[1,20]},{13:[1,21]},{15:[1,22]},{17:[1,23]},t(l,[2,12]),t(l,[2,13]),t(l,h,{8:10,9:11,1:[2,3],10:u,12:p,14:d,16:g,18:y,19:x}),t(n,[2,6]),t(l,[2,8]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11])],defaultActions:{7:[2,1]},parseError:function(v,T){if(T.recoverable)this.trace(v);else{var k=new Error(v);throw k.hash=T,k}},parse:function(v){var T=this,k=[0],A=[],S=[null],m=[],C=this.table,f="",L=0,b=0,P=2,U=1,N=m.slice.call(arguments,1),D=Object.create(this.lexer),F={yy:{}};for(var I in this.yy)Object.prototype.hasOwnProperty.call(this.yy,I)&&(F.yy[I]=this.yy[I]);D.setInput(v,F.yy),F.yy.lexer=D,F.yy.parser=this,typeof D.yylloc>"u"&&(D.yylloc={});var M=D.yylloc;m.push(M);var z=D.options&&D.options.ranges;typeof F.yy.parseError=="function"?this.parseError=F.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function st(){var W;return W=A.pop()||D.lex()||U,typeof W!="number"&&(W instanceof Array&&(A=W,W=A.pop()),W=T.symbols_[W]||W),W}for(var j,dt,K,G,tt={},nt,Q,J,O;;){if(dt=k[k.length-1],this.defaultActions[dt]?K=this.defaultActions[dt]:((j===null||typeof j>"u")&&(j=st()),K=C[dt]&&C[dt][j]),typeof K>"u"||!K.length||!K[0]){var at="";O=[];for(nt in C[dt])this.terminals_[nt]&&nt>P&&O.push("'"+this.terminals_[nt]+"'");D.showPosition?at="Parse error on line "+(L+1)+`:
`+D.showPosition()+`
Expecting `+O.join(", ")+", got '"+(this.terminals_[j]||j)+"'":at="Parse error on line "+(L+1)+": Unexpected "+(j==U?"end of input":"'"+(this.terminals_[j]||j)+"'"),this.parseError(at,{text:D.match,token:this.terminals_[j]||j,line:D.yylineno,loc:M,expected:O})}if(K[0]instanceof Array&&K.length>1)throw new Error("Parse Error: multiple actions possible at state: "+dt+", token: "+j);switch(K[0]){case 1:k.push(j),S.push(D.yytext),m.push(D.yylloc),k.push(K[1]),j=null,b=D.yyleng,f=D.yytext,L=D.yylineno,M=D.yylloc;break;case 2:if(Q=this.productions_[K[1]][1],tt.$=S[S.length-Q],tt._$={first_line:m[m.length-(Q||1)].first_line,last_line:m[m.length-1].last_line,first_column:m[m.length-(Q||1)].first_column,last_column:m[m.length-1].last_column},z&&(tt._$.range=[m[m.length-(Q||1)].range[0],m[m.length-1].range[1]]),G=this.performAction.apply(tt,[f,b,L,F.yy,K[1],S,m].concat(N)),typeof G<"u")return G;Q&&(k=k.slice(0,-1*Q*2),S=S.slice(0,-1*Q),m=m.slice(0,-1*Q)),k.push(this.productions_[K[1]][0]),S.push(tt.$),m.push(tt._$),J=C[k[k.length-2]][k[k.length-1]],k.push(J);break;case 3:return!0}}return!0}},w=(function(){var R={EOF:1,parseError:function(T,k){if(this.yy.parser)this.yy.parser.parseError(T,k);else throw new Error(T)},setInput:function(v,T){return this.yy=T||this.yy||{},this._input=v,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var v=this._input[0];this.yytext+=v,this.yyleng++,this.offset++,this.match+=v,this.matched+=v;var T=v.match(/(?:\r\n?|\n).*/g);return T?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),v},unput:function(v){var T=v.length,k=v.split(/(?:\r\n?|\n)/g);this._input=v+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-T),this.offset-=T;var A=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),k.length-1&&(this.yylineno-=k.length-1);var S=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:k?(k.length===A.length?this.yylloc.first_column:0)+A[A.length-k.length].length-k[0].length:this.yylloc.first_column-T},this.options.ranges&&(this.yylloc.range=[S[0],S[0]+this.yyleng-T]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(v){this.unput(this.match.slice(v))},pastInput:function(){var v=this.matched.substr(0,this.matched.length-this.match.length);return(v.length>20?"...":"")+v.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var v=this.match;return v.length<20&&(v+=this._input.substr(0,20-v.length)),(v.substr(0,20)+(v.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var v=this.pastInput(),T=new Array(v.length+1).join("-");return v+this.upcomingInput()+`
`+T+"^"},test_match:function(v,T){var k,A,S;if(this.options.backtrack_lexer&&(S={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(S.yylloc.range=this.yylloc.range.slice(0))),A=v[0].match(/(?:\r\n?|\n).*/g),A&&(this.yylineno+=A.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:A?A[A.length-1].length-A[A.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+v[0].length},this.yytext+=v[0],this.match+=v[0],this.matches=v,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(v[0].length),this.matched+=v[0],k=this.performAction.call(this,this.yy,this,T,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),k)return k;if(this._backtrack){for(var m in S)this[m]=S[m];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var v,T,k,A;this._more||(this.yytext="",this.match="");for(var S=this._currentRules(),m=0;m<S.length;m++)if(k=this._input.match(this.rules[S[m]]),k&&(!T||k[0].length>T[0].length)){if(T=k,A=m,this.options.backtrack_lexer){if(v=this.test_match(k,S[m]),v!==!1)return v;if(this._backtrack){T=!1;continue}else return!1}else if(!this.options.flex)break}return T?(v=this.test_match(T,S[A]),v!==!1?v:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var T=this.next();return T||this.lex()},begin:function(T){this.conditionStack.push(T)},popState:function(){var T=this.conditionStack.length-1;return T>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(T){return T=this.conditionStack.length-1-Math.abs(T||0),T>=0?this.conditionStack[T]:"INITIAL"},pushState:function(T){this.begin(T)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(T,k,A,S){switch(A){case 0:break;case 1:break;case 2:return 20;case 3:break;case 4:break;case 5:return this.begin("title"),12;case 6:return this.popState(),"title_value";case 7:return this.begin("acc_title"),14;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),16;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"txt";case 17:return 5;case 18:return 7;case 19:return"value";case 20:return 22}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[6],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,7,9,11,14,17,18,19,20],inclusive:!0}}};return R})();_.lexer=w;function E(){this.yy={}}return E.prototype=_,_.Parser=E,new E})();no.parser=no;const ek=no,ik=$t.pie,Gn={sections:{},showData:!1};let jn=Gn.sections,yl=Gn.showData;const rk=structuredClone(ik),sk=()=>structuredClone(rk),nk=()=>{jn=structuredClone(Gn.sections),yl=Gn.showData,Oe()},ak=(t,e)=>{t=te(t,Y()),jn[t]===void 0&&(jn[t]=e,B.debug(`added new section: ${t}, with value: ${e}`))},ok=()=>jn,lk=t=>(t.substring(0,1)===":"&&(t=t.substring(1).trim()),Number(t.trim())),ck=t=>{yl=t},hk=()=>yl,uk={getConfig:sk,clear:nk,setDiagramTitle:ri,getDiagramTitle:Ge,setAccTitle:Pe,getAccTitle:Ye,setAccDescription:Ue,getAccDescription:He,addSection:ak,getSections:ok,cleanupValue:lk,setShowData:ck,getShowData:hk},dk=t=>`
  .pieCircle{
    stroke: ${t.pieStrokeColor};
    stroke-width : ${t.pieStrokeWidth};
    opacity : ${t.pieOpacity};
  }
  .pieOuterCircle{
    stroke: ${t.pieOuterStrokeColor};
    stroke-width: ${t.pieOuterStrokeWidth};
    fill: none;
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${t.pieTitleTextSize};
    fill: ${t.pieTitleTextColor};
    font-family: ${t.fontFamily};
  }
  .slice {
    font-family: ${t.fontFamily};
    fill: ${t.pieSectionTextColor};
    font-size:${t.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${t.pieLegendTextColor};
    font-family: ${t.fontFamily};
    font-size: ${t.pieLegendTextSize};
  }
`,fk=dk,pk=t=>{const e=Object.entries(t).map(r=>({label:r[0],value:r[1]})).sort((r,s)=>s.value-r.value);return bf().value(r=>r.value)(e)},gk=(t,e,i,r)=>{B.debug(`rendering pie chart
`+t);const s=r.db,n=Y(),a=Qs(s.getConfig(),n.pie),o=40,l=18,h=4,u=450,p=u,d=Zs(e),g=d.append("g"),y=s.getSections();g.attr("transform","translate("+p/2+","+u/2+")");const{themeVariables:x}=n;let[_]=Or(x.pieOuterStrokeWidth);_??(_=2);const w=a.textPosition,E=Math.min(p,u)/2-o,R=Jr().innerRadius(0).outerRadius(E),v=Jr().innerRadius(E*w).outerRadius(E*w);g.append("circle").attr("cx",0).attr("cy",0).attr("r",E+_/2).attr("class","pieOuterCircle");const T=pk(y),k=[x.pie1,x.pie2,x.pie3,x.pie4,x.pie5,x.pie6,x.pie7,x.pie8,x.pie9,x.pie10,x.pie11,x.pie12],A=Io(k);g.selectAll("mySlices").data(T).enter().append("path").attr("d",R).attr("fill",L=>A(L.data.label)).attr("class","pieCircle");let S=0;Object.keys(y).forEach(L=>{S+=y[L]}),g.selectAll("mySlices").data(T).enter().append("text").text(L=>(L.data.value/S*100).toFixed(0)+"%").attr("transform",L=>"translate("+v.centroid(L)+")").style("text-anchor","middle").attr("class","slice"),g.append("text").text(s.getDiagramTitle()).attr("x",0).attr("y",-400/2).attr("class","pieTitleText");const m=g.selectAll(".legend").data(A.domain()).enter().append("g").attr("class","legend").attr("transform",(L,b)=>{const P=l+h,U=P*A.domain().length/2,N=12*l,D=b*P-U;return"translate("+N+","+D+")"});m.append("rect").attr("width",l).attr("height",l).style("fill",A).style("stroke",A),m.data(T).append("text").attr("x",l+h).attr("y",l-h).text(L=>{const{label:b,value:P}=L.data;return s.getShowData()?`${b} [${P}]`:b});const C=Math.max(...m.selectAll("text").nodes().map(L=>L?.getBoundingClientRect().width??0)),f=p+o+l+h+C;d.attr("viewBox",`0 0 ${f} ${u}`),Ne(d,u,f,a.useMaxWidth)},yk={draw:gk},mk={parser:ek,db:uk,renderer:yk,styles:fk},xk=Object.freeze(Object.defineProperty({__proto__:null,diagram:mk},Symbol.toStringTag,{value:"Module"}));var ao=(function(){var t=function(K,G,tt,nt){for(tt=tt||{},nt=K.length;nt--;tt[K[nt]]=G);return tt},e=[1,3],i=[1,4],r=[1,5],s=[1,6],n=[1,7],a=[1,5,13,15,17,19,20,25,27,28,29,30,31,32,33,34,37,38,40,41,42,43,44,45,46,47,48,49,50],o=[1,5,6,13,15,17,19,20,25,27,28,29,30,31,32,33,34,37,38,40,41,42,43,44,45,46,47,48,49,50],l=[32,33,34],h=[2,7],u=[1,13],p=[1,17],d=[1,18],g=[1,19],y=[1,20],x=[1,21],_=[1,22],w=[1,23],E=[1,24],R=[1,25],v=[1,26],T=[1,27],k=[1,30],A=[1,31],S=[1,32],m=[1,33],C=[1,34],f=[1,35],L=[1,36],b=[1,37],P=[1,38],U=[1,39],N=[1,40],D=[1,41],F=[1,42],I=[1,57],M=[1,58],z=[5,22,26,32,33,34,40,41,42,43,44,45,46,47,48,49,50,51],st={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,SPACE:5,QUADRANT:6,document:7,line:8,statement:9,axisDetails:10,quadrantDetails:11,points:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,text:21,point_start:22,point_x:23,point_y:24,"X-AXIS":25,"AXIS-TEXT-DELIMITER":26,"Y-AXIS":27,QUADRANT_1:28,QUADRANT_2:29,QUADRANT_3:30,QUADRANT_4:31,NEWLINE:32,SEMI:33,EOF:34,alphaNumToken:35,textNoTagsToken:36,STR:37,MD_STR:38,alphaNum:39,PUNCTUATION:40,AMP:41,NUM:42,ALPHA:43,COMMA:44,PLUS:45,EQUALS:46,MULT:47,DOT:48,BRKT:49,UNDERSCORE:50,MINUS:51,$accept:0,$end:1},terminals_:{2:"error",5:"SPACE",6:"QUADRANT",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",22:"point_start",23:"point_x",24:"point_y",25:"X-AXIS",26:"AXIS-TEXT-DELIMITER",27:"Y-AXIS",28:"QUADRANT_1",29:"QUADRANT_2",30:"QUADRANT_3",31:"QUADRANT_4",32:"NEWLINE",33:"SEMI",34:"EOF",37:"STR",38:"MD_STR",40:"PUNCTUATION",41:"AMP",42:"NUM",43:"ALPHA",44:"COMMA",45:"PLUS",46:"EQUALS",47:"MULT",48:"DOT",49:"BRKT",50:"UNDERSCORE",51:"MINUS"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[9,0],[9,2],[9,1],[9,1],[9,1],[9,2],[9,2],[9,2],[9,1],[9,1],[12,4],[10,4],[10,3],[10,2],[10,4],[10,3],[10,2],[11,2],[11,2],[11,2],[11,2],[4,1],[4,1],[4,1],[21,1],[21,2],[21,1],[21,1],[39,1],[39,2],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[36,1],[36,1],[36,1]],performAction:function(G,tt,nt,Q,J,O,at){var W=O.length-1;switch(J){case 12:this.$=O[W].trim(),Q.setDiagramTitle(this.$);break;case 13:this.$=O[W].trim(),Q.setAccTitle(this.$);break;case 14:case 15:this.$=O[W].trim(),Q.setAccDescription(this.$);break;case 16:Q.addSection(O[W].substr(8)),this.$=O[W].substr(8);break;case 17:Q.addPoint(O[W-3],O[W-1],O[W]);break;case 18:Q.setXAxisLeftText(O[W-2]),Q.setXAxisRightText(O[W]);break;case 19:O[W-1].text+=" âŸ¶ ",Q.setXAxisLeftText(O[W-1]);break;case 20:Q.setXAxisLeftText(O[W]);break;case 21:Q.setYAxisBottomText(O[W-2]),Q.setYAxisTopText(O[W]);break;case 22:O[W-1].text+=" âŸ¶ ",Q.setYAxisBottomText(O[W-1]);break;case 23:Q.setYAxisBottomText(O[W]);break;case 24:Q.setQuadrant1Text(O[W]);break;case 25:Q.setQuadrant2Text(O[W]);break;case 26:Q.setQuadrant3Text(O[W]);break;case 27:Q.setQuadrant4Text(O[W]);break;case 31:this.$={text:O[W],type:"text"};break;case 32:this.$={text:O[W-1].text+""+O[W],type:O[W-1].type};break;case 33:this.$={text:O[W],type:"text"};break;case 34:this.$={text:O[W],type:"markdown"};break;case 35:this.$=O[W];break;case 36:this.$=O[W-1]+""+O[W];break}},table:[{3:1,4:2,5:e,6:i,32:r,33:s,34:n},{1:[3]},{3:8,4:2,5:e,6:i,32:r,33:s,34:n},{3:9,4:2,5:e,6:i,32:r,33:s,34:n},t(a,[2,4],{7:10}),t(o,[2,28]),t(o,[2,29]),t(o,[2,30]),{1:[2,1]},{1:[2,2]},t(l,h,{8:11,9:12,10:14,11:15,12:16,21:28,35:29,1:[2,3],5:u,13:p,15:d,17:g,19:y,20:x,25:_,27:w,28:E,29:R,30:v,31:T,37:k,38:A,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F}),t(a,[2,5]),{4:43,32:r,33:s,34:n},t(l,h,{10:14,11:15,12:16,21:28,35:29,9:44,5:u,13:p,15:d,17:g,19:y,20:x,25:_,27:w,28:E,29:R,30:v,31:T,37:k,38:A,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F}),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),{14:[1,45]},{16:[1,46]},{18:[1,47]},t(l,[2,15]),t(l,[2,16]),{21:48,35:29,37:k,38:A,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F},{21:49,35:29,37:k,38:A,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F},{21:50,35:29,37:k,38:A,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F},{21:51,35:29,37:k,38:A,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F},{21:52,35:29,37:k,38:A,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F},{21:53,35:29,37:k,38:A,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F},{5:I,22:[1,54],35:56,36:55,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M},t(z,[2,31]),t(z,[2,33]),t(z,[2,34]),t(z,[2,37]),t(z,[2,38]),t(z,[2,39]),t(z,[2,40]),t(z,[2,41]),t(z,[2,42]),t(z,[2,43]),t(z,[2,44]),t(z,[2,45]),t(z,[2,46]),t(z,[2,47]),t(a,[2,6]),t(l,[2,8]),t(l,[2,12]),t(l,[2,13]),t(l,[2,14]),t(l,[2,20],{36:55,35:56,5:I,26:[1,59],40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),t(l,[2,23],{36:55,35:56,5:I,26:[1,60],40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),t(l,[2,24],{36:55,35:56,5:I,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),t(l,[2,25],{36:55,35:56,5:I,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),t(l,[2,26],{36:55,35:56,5:I,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),t(l,[2,27],{36:55,35:56,5:I,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),{23:[1,61]},t(z,[2,32]),t(z,[2,48]),t(z,[2,49]),t(z,[2,50]),t(l,[2,19],{35:29,21:62,37:k,38:A,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F}),t(l,[2,22],{35:29,21:63,37:k,38:A,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F}),{24:[1,64]},t(l,[2,18],{36:55,35:56,5:I,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),t(l,[2,21],{36:55,35:56,5:I,40:S,41:m,42:C,43:f,44:L,45:b,46:P,47:U,48:N,49:D,50:F,51:M}),t(l,[2,17])],defaultActions:{8:[2,1],9:[2,2]},parseError:function(G,tt){if(tt.recoverable)this.trace(G);else{var nt=new Error(G);throw nt.hash=tt,nt}},parse:function(G){var tt=this,nt=[0],Q=[],J=[null],O=[],at=this.table,W="",ft=0,V=0,vt=2,X=1,St=O.slice.call(arguments,1),bt=Object.create(this.lexer),Vt={yy:{}};for(var Bt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Bt)&&(Vt.yy[Bt]=this.yy[Bt]);bt.setInput(G,Vt.yy),Vt.yy.lexer=bt,Vt.yy.parser=this,typeof bt.yylloc>"u"&&(bt.yylloc={});var Wt=bt.yylloc;O.push(Wt);var pt=bt.options&&bt.options.ranges;typeof Vt.yy.parseError=="function"?this.parseError=Vt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ut(){var zt;return zt=Q.pop()||bt.lex()||X,typeof zt!="number"&&(zt instanceof Array&&(Q=zt,zt=Q.pop()),zt=tt.symbols_[zt]||zt),zt}for(var ot,lt,ht,$,rt={},it,ct,re,Qt;;){if(lt=nt[nt.length-1],this.defaultActions[lt]?ht=this.defaultActions[lt]:((ot===null||typeof ot>"u")&&(ot=ut()),ht=at[lt]&&at[lt][ot]),typeof ht>"u"||!ht.length||!ht[0]){var de="";Qt=[];for(it in at[lt])this.terminals_[it]&&it>vt&&Qt.push("'"+this.terminals_[it]+"'");bt.showPosition?de="Parse error on line "+(ft+1)+`:
`+bt.showPosition()+`
Expecting `+Qt.join(", ")+", got '"+(this.terminals_[ot]||ot)+"'":de="Parse error on line "+(ft+1)+": Unexpected "+(ot==X?"end of input":"'"+(this.terminals_[ot]||ot)+"'"),this.parseError(de,{text:bt.match,token:this.terminals_[ot]||ot,line:bt.yylineno,loc:Wt,expected:Qt})}if(ht[0]instanceof Array&&ht.length>1)throw new Error("Parse Error: multiple actions possible at state: "+lt+", token: "+ot);switch(ht[0]){case 1:nt.push(ot),J.push(bt.yytext),O.push(bt.yylloc),nt.push(ht[1]),ot=null,V=bt.yyleng,W=bt.yytext,ft=bt.yylineno,Wt=bt.yylloc;break;case 2:if(ct=this.productions_[ht[1]][1],rt.$=J[J.length-ct],rt._$={first_line:O[O.length-(ct||1)].first_line,last_line:O[O.length-1].last_line,first_column:O[O.length-(ct||1)].first_column,last_column:O[O.length-1].last_column},pt&&(rt._$.range=[O[O.length-(ct||1)].range[0],O[O.length-1].range[1]]),$=this.performAction.apply(rt,[W,V,ft,Vt.yy,ht[1],J,O].concat(St)),typeof $<"u")return $;ct&&(nt=nt.slice(0,-1*ct*2),J=J.slice(0,-1*ct),O=O.slice(0,-1*ct)),nt.push(this.productions_[ht[1]][0]),J.push(rt.$),O.push(rt._$),re=at[nt[nt.length-2]][nt[nt.length-1]],nt.push(re);break;case 3:return!0}}return!0}},j=(function(){var K={EOF:1,parseError:function(tt,nt){if(this.yy.parser)this.yy.parser.parseError(tt,nt);else throw new Error(tt)},setInput:function(G,tt){return this.yy=tt||this.yy||{},this._input=G,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var G=this._input[0];this.yytext+=G,this.yyleng++,this.offset++,this.match+=G,this.matched+=G;var tt=G.match(/(?:\r\n?|\n).*/g);return tt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),G},unput:function(G){var tt=G.length,nt=G.split(/(?:\r\n?|\n)/g);this._input=G+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-tt),this.offset-=tt;var Q=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),nt.length-1&&(this.yylineno-=nt.length-1);var J=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:nt?(nt.length===Q.length?this.yylloc.first_column:0)+Q[Q.length-nt.length].length-nt[0].length:this.yylloc.first_column-tt},this.options.ranges&&(this.yylloc.range=[J[0],J[0]+this.yyleng-tt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(G){this.unput(this.match.slice(G))},pastInput:function(){var G=this.matched.substr(0,this.matched.length-this.match.length);return(G.length>20?"...":"")+G.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var G=this.match;return G.length<20&&(G+=this._input.substr(0,20-G.length)),(G.substr(0,20)+(G.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var G=this.pastInput(),tt=new Array(G.length+1).join("-");return G+this.upcomingInput()+`
`+tt+"^"},test_match:function(G,tt){var nt,Q,J;if(this.options.backtrack_lexer&&(J={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(J.yylloc.range=this.yylloc.range.slice(0))),Q=G[0].match(/(?:\r\n?|\n).*/g),Q&&(this.yylineno+=Q.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Q?Q[Q.length-1].length-Q[Q.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+G[0].length},this.yytext+=G[0],this.match+=G[0],this.matches=G,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(G[0].length),this.matched+=G[0],nt=this.performAction.call(this,this.yy,this,tt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),nt)return nt;if(this._backtrack){for(var O in J)this[O]=J[O];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var G,tt,nt,Q;this._more||(this.yytext="",this.match="");for(var J=this._currentRules(),O=0;O<J.length;O++)if(nt=this._input.match(this.rules[J[O]]),nt&&(!tt||nt[0].length>tt[0].length)){if(tt=nt,Q=O,this.options.backtrack_lexer){if(G=this.test_match(nt,J[O]),G!==!1)return G;if(this._backtrack){tt=!1;continue}else return!1}else if(!this.options.flex)break}return tt?(G=this.test_match(tt,J[Q]),G!==!1?G:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var tt=this.next();return tt||this.lex()},begin:function(tt){this.conditionStack.push(tt)},popState:function(){var tt=this.conditionStack.length-1;return tt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(tt){return tt=this.conditionStack.length-1-Math.abs(tt||0),tt>=0?this.conditionStack[tt]:"INITIAL"},pushState:function(tt){this.begin(tt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(tt,nt,Q,J){switch(Q){case 0:break;case 1:break;case 2:return 32;case 3:break;case 4:return this.begin("title"),13;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),15;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),17;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 25;case 14:return 27;case 15:return 26;case 16:return 28;case 17:return 29;case 18:return 30;case 19:return 31;case 20:this.begin("md_string");break;case 21:return"MD_STR";case 22:this.popState();break;case 23:this.begin("string");break;case 24:this.popState();break;case 25:return"STR";case 26:return this.begin("point_start"),22;case 27:return this.begin("point_x"),23;case 28:this.popState();break;case 29:this.popState(),this.begin("point_y");break;case 30:return this.popState(),24;case 31:return 6;case 32:return 43;case 33:return"COLON";case 34:return 45;case 35:return 44;case 36:return 46;case 37:return 46;case 38:return 47;case 39:return 49;case 40:return 50;case 41:return 48;case 42:return 41;case 43:return 51;case 44:return 42;case 45:return 5;case 46:return 33;case 47:return 40;case 48:return 34}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{point_y:{rules:[30],inclusive:!1},point_x:{rules:[29],inclusive:!1},point_start:{rules:[27,28],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[21,22],inclusive:!1},string:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,23,26,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};return K})();st.lexer=j;function dt(){this.yy={}}return dt.prototype=st,st.Parser=dt,new dt})();ao.parser=ao;const bk=ao,Me=Ro();class kk{constructor(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){var e,i,r,s,n,a,o,l,h,u,p,d,g,y,x,_,w,E;return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:((e=$t.quadrantChart)==null?void 0:e.chartWidth)||500,chartWidth:((i=$t.quadrantChart)==null?void 0:i.chartHeight)||500,titlePadding:((r=$t.quadrantChart)==null?void 0:r.titlePadding)||10,titleFontSize:((s=$t.quadrantChart)==null?void 0:s.titleFontSize)||20,quadrantPadding:((n=$t.quadrantChart)==null?void 0:n.quadrantPadding)||5,xAxisLabelPadding:((a=$t.quadrantChart)==null?void 0:a.xAxisLabelPadding)||5,yAxisLabelPadding:((o=$t.quadrantChart)==null?void 0:o.yAxisLabelPadding)||5,xAxisLabelFontSize:((l=$t.quadrantChart)==null?void 0:l.xAxisLabelFontSize)||16,yAxisLabelFontSize:((h=$t.quadrantChart)==null?void 0:h.yAxisLabelFontSize)||16,quadrantLabelFontSize:((u=$t.quadrantChart)==null?void 0:u.quadrantLabelFontSize)||16,quadrantTextTopPadding:((p=$t.quadrantChart)==null?void 0:p.quadrantTextTopPadding)||5,pointTextPadding:((d=$t.quadrantChart)==null?void 0:d.pointTextPadding)||5,pointLabelFontSize:((g=$t.quadrantChart)==null?void 0:g.pointLabelFontSize)||12,pointRadius:((y=$t.quadrantChart)==null?void 0:y.pointRadius)||5,xAxisPosition:((x=$t.quadrantChart)==null?void 0:x.xAxisPosition)||"top",yAxisPosition:((_=$t.quadrantChart)==null?void 0:_.yAxisPosition)||"left",quadrantInternalBorderStrokeWidth:((w=$t.quadrantChart)==null?void 0:w.quadrantInternalBorderStrokeWidth)||1,quadrantExternalBorderStrokeWidth:((E=$t.quadrantChart)==null?void 0:E.quadrantExternalBorderStrokeWidth)||2}}getDefaultThemeConfig(){return{quadrant1Fill:Me.quadrant1Fill,quadrant2Fill:Me.quadrant2Fill,quadrant3Fill:Me.quadrant3Fill,quadrant4Fill:Me.quadrant4Fill,quadrant1TextFill:Me.quadrant1TextFill,quadrant2TextFill:Me.quadrant2TextFill,quadrant3TextFill:Me.quadrant3TextFill,quadrant4TextFill:Me.quadrant4TextFill,quadrantPointFill:Me.quadrantPointFill,quadrantPointTextFill:Me.quadrantPointTextFill,quadrantXAxisTextFill:Me.quadrantXAxisTextFill,quadrantYAxisTextFill:Me.quadrantYAxisTextFill,quadrantTitleFill:Me.quadrantTitleFill,quadrantInternalBorderStrokeFill:Me.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:Me.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),B.info("clear called")}setData(e){this.data={...this.data,...e}}addPoints(e){this.data.points=[...e,...this.data.points]}setConfig(e){B.trace("setConfig called with: ",e),this.config={...this.config,...e}}setThemeConfig(e){B.trace("setThemeConfig called with: ",e),this.themeConfig={...this.themeConfig,...e}}calculateSpace(e,i,r,s){const n=this.config.xAxisLabelPadding*2+this.config.xAxisLabelFontSize,a={top:e==="top"&&i?n:0,bottom:e==="bottom"&&i?n:0},o=this.config.yAxisLabelPadding*2+this.config.yAxisLabelFontSize,l={left:this.config.yAxisPosition==="left"&&r?o:0,right:this.config.yAxisPosition==="right"&&r?o:0},h=this.config.titleFontSize+this.config.titlePadding*2,u={top:s?h:0},p=this.config.quadrantPadding+l.left,d=this.config.quadrantPadding+a.top+u.top,g=this.config.chartWidth-this.config.quadrantPadding*2-l.left-l.right,y=this.config.chartHeight-this.config.quadrantPadding*2-a.top-a.bottom-u.top,x=g/2,_=y/2;return{xAxisSpace:a,yAxisSpace:l,titleSpace:u,quadrantSpace:{quadrantLeft:p,quadrantTop:d,quadrantWidth:g,quadrantHalfWidth:x,quadrantHeight:y,quadrantHalfHeight:_}}}getAxisLabels(e,i,r,s){const{quadrantSpace:n,titleSpace:a}=s,{quadrantHalfHeight:o,quadrantHeight:l,quadrantLeft:h,quadrantHalfWidth:u,quadrantTop:p,quadrantWidth:d}=n,g=!!this.data.xAxisRightText,y=!!this.data.yAxisTopText,x=[];return this.data.xAxisLeftText&&i&&x.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:h+(g?u/2:0),y:e==="top"?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+p+l+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:g?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&i&&x.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:h+u+(g?u/2:0),y:e==="top"?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+p+l+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:g?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&r&&x.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+h+d+this.config.quadrantPadding,y:p+l-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&r&&x.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+h+d+this.config.quadrantPadding,y:p+o-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),x}getQuadrants(e){const{quadrantSpace:i}=e,{quadrantHalfHeight:r,quadrantLeft:s,quadrantHalfWidth:n,quadrantTop:a}=i,o=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s+n,y:a,width:n,height:r,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s,y:a,width:n,height:r,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s,y:a+r,width:n,height:r,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s+n,y:a+r,width:n,height:r,fill:this.themeConfig.quadrant4Fill}];for(const l of o)l.text.x=l.x+l.width/2,this.data.points.length===0?(l.text.y=l.y+l.height/2,l.text.horizontalPos="middle"):(l.text.y=l.y+this.config.quadrantTextTopPadding,l.text.horizontalPos="top");return o}getQuadrantPoints(e){const{quadrantSpace:i}=e,{quadrantHeight:r,quadrantLeft:s,quadrantTop:n,quadrantWidth:a}=i,o=Bs().domain([0,1]).range([s,a+s]),l=Bs().domain([0,1]).range([r+n,n]);return this.data.points.map(u=>({x:o(u.x),y:l(u.y),fill:this.themeConfig.quadrantPointFill,radius:this.config.pointRadius,text:{text:u.text,fill:this.themeConfig.quadrantPointTextFill,x:o(u.x),y:l(u.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0}}))}getBorders(e){const i=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:r}=e,{quadrantHalfHeight:s,quadrantHeight:n,quadrantLeft:a,quadrantHalfWidth:o,quadrantTop:l,quadrantWidth:h}=r;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-i,y1:l,x2:a+h+i,y2:l},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a+h,y1:l+i,x2:a+h,y2:l+n-i},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-i,y1:l+n,x2:a+h+i,y2:l+n},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a,y1:l+i,x2:a,y2:l+n-i},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+o,y1:l+i,x2:a+o,y2:l+n-i},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+i,y1:l+s,x2:a+h-i,y2:l+s}]}getTitle(e){if(e)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){const e=this.config.showXAxis&&!!(this.data.xAxisLeftText||this.data.xAxisRightText),i=this.config.showYAxis&&!!(this.data.yAxisTopText||this.data.yAxisBottomText),r=this.config.showTitle&&!!this.data.titleText,s=this.data.points.length>0?"bottom":this.config.xAxisPosition,n=this.calculateSpace(s,e,i,r);return{points:this.getQuadrantPoints(n),quadrants:this.getQuadrants(n),axisLabels:this.getAxisLabels(s,e,i,n),borderLines:this.getBorders(n),title:this.getTitle(r)}}}const _k=Y();function rr(t){return te(t.trim(),_k)}const Fe=new kk;function Tk(t){Fe.setData({quadrant1Text:rr(t.text)})}function Ck(t){Fe.setData({quadrant2Text:rr(t.text)})}function Ek(t){Fe.setData({quadrant3Text:rr(t.text)})}function Sk(t){Fe.setData({quadrant4Text:rr(t.text)})}function wk(t){Fe.setData({xAxisLeftText:rr(t.text)})}function vk(t){Fe.setData({xAxisRightText:rr(t.text)})}function Ak(t){Fe.setData({yAxisTopText:rr(t.text)})}function Lk(t){Fe.setData({yAxisBottomText:rr(t.text)})}function Bk(t,e,i){Fe.addPoints([{x:e,y:i,text:rr(t.text)}])}function Ik(t){Fe.setConfig({chartWidth:t})}function Dk(t){Fe.setConfig({chartHeight:t})}function Fk(){const t=Y(),{themeVariables:e,quadrantChart:i}=t;return i&&Fe.setConfig(i),Fe.setThemeConfig({quadrant1Fill:e.quadrant1Fill,quadrant2Fill:e.quadrant2Fill,quadrant3Fill:e.quadrant3Fill,quadrant4Fill:e.quadrant4Fill,quadrant1TextFill:e.quadrant1TextFill,quadrant2TextFill:e.quadrant2TextFill,quadrant3TextFill:e.quadrant3TextFill,quadrant4TextFill:e.quadrant4TextFill,quadrantPointFill:e.quadrantPointFill,quadrantPointTextFill:e.quadrantPointTextFill,quadrantXAxisTextFill:e.quadrantXAxisTextFill,quadrantYAxisTextFill:e.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:e.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:e.quadrantInternalBorderStrokeFill,quadrantTitleFill:e.quadrantTitleFill}),Fe.setData({titleText:Ge()}),Fe.build()}const Rk=function(){Fe.clear(),Oe()},Nk={setWidth:Ik,setHeight:Dk,setQuadrant1Text:Tk,setQuadrant2Text:Ck,setQuadrant3Text:Ek,setQuadrant4Text:Sk,setXAxisLeftText:wk,setXAxisRightText:vk,setYAxisTopText:Ak,setYAxisBottomText:Lk,addPoint:Bk,getQuadrantData:Fk,clear:Rk,setAccTitle:Pe,getAccTitle:Ye,setDiagramTitle:ri,getDiagramTitle:Ge,getAccDescription:He,setAccDescription:Ue},Ok=(t,e,i,r)=>{var s,n,a;function o(f){return f==="top"?"hanging":"middle"}function l(f){return f==="left"?"start":"middle"}function h(f){return`translate(${f.x}, ${f.y}) rotate(${f.rotation||0})`}const u=Y();B.debug(`Rendering quadrant chart
`+t);const p=u.securityLevel;let d;p==="sandbox"&&(d=yt("#i"+e));const y=(p==="sandbox"?yt(d.nodes()[0].contentDocument.body):yt("body")).select(`[id="${e}"]`),x=y.append("g").attr("class","main"),_=((s=u.quadrantChart)==null?void 0:s.chartWidth)||500,w=((n=u.quadrantChart)==null?void 0:n.chartHeight)||500;Ne(y,w,_,((a=u.quadrantChart)==null?void 0:a.useMaxWidth)||!0),y.attr("viewBox","0 0 "+_+" "+w),r.db.setHeight(w),r.db.setWidth(_);const E=r.db.getQuadrantData(),R=x.append("g").attr("class","quadrants"),v=x.append("g").attr("class","border"),T=x.append("g").attr("class","data-points"),k=x.append("g").attr("class","labels"),A=x.append("g").attr("class","title");E.title&&A.append("text").attr("x",0).attr("y",0).attr("fill",E.title.fill).attr("font-size",E.title.fontSize).attr("dominant-baseline",o(E.title.horizontalPos)).attr("text-anchor",l(E.title.verticalPos)).attr("transform",h(E.title)).text(E.title.text),E.borderLines&&v.selectAll("line").data(E.borderLines).enter().append("line").attr("x1",f=>f.x1).attr("y1",f=>f.y1).attr("x2",f=>f.x2).attr("y2",f=>f.y2).style("stroke",f=>f.strokeFill).style("stroke-width",f=>f.strokeWidth);const S=R.selectAll("g.quadrant").data(E.quadrants).enter().append("g").attr("class","quadrant");S.append("rect").attr("x",f=>f.x).attr("y",f=>f.y).attr("width",f=>f.width).attr("height",f=>f.height).attr("fill",f=>f.fill),S.append("text").attr("x",0).attr("y",0).attr("fill",f=>f.text.fill).attr("font-size",f=>f.text.fontSize).attr("dominant-baseline",f=>o(f.text.horizontalPos)).attr("text-anchor",f=>l(f.text.verticalPos)).attr("transform",f=>h(f.text)).text(f=>f.text.text),k.selectAll("g.label").data(E.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text(f=>f.text).attr("fill",f=>f.fill).attr("font-size",f=>f.fontSize).attr("dominant-baseline",f=>o(f.horizontalPos)).attr("text-anchor",f=>l(f.verticalPos)).attr("transform",f=>h(f));const C=T.selectAll("g.data-point").data(E.points).enter().append("g").attr("class","data-point");C.append("circle").attr("cx",f=>f.x).attr("cy",f=>f.y).attr("r",f=>f.radius).attr("fill",f=>f.fill),C.append("text").attr("x",0).attr("y",0).text(f=>f.text.text).attr("fill",f=>f.text.fill).attr("font-size",f=>f.text.fontSize).attr("dominant-baseline",f=>o(f.text.horizontalPos)).attr("text-anchor",f=>l(f.text.verticalPos)).attr("transform",f=>h(f.text))},Pk={draw:Ok},Mk={parser:bk,db:Nk,renderer:Pk,styles:()=>""},Vk=Object.freeze(Object.defineProperty({__proto__:null,diagram:Mk},Symbol.toStringTag,{value:"Module"}));var oo=(function(){var t=function(U,N,D,F){for(D=D||{},F=U.length;F--;D[U[F]]=N);return D},e=[1,10,12,14,16,18,19,21,23],i=[2,6],r=[1,3],s=[1,5],n=[1,6],a=[1,7],o=[1,5,10,12,14,16,18,19,21,23,34,35,36],l=[1,25],h=[1,26],u=[1,28],p=[1,29],d=[1,30],g=[1,31],y=[1,32],x=[1,33],_=[1,34],w=[1,35],E=[1,36],R=[1,37],v=[1,43],T=[1,42],k=[1,47],A=[1,50],S=[1,10,12,14,16,18,19,21,23,34,35,36],m=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],C=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],f=[1,64],L={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:function(N,D,F,I,M,z,st){var j=z.length-1;switch(M){case 5:I.setOrientation(z[j]);break;case 9:I.setDiagramTitle(z[j].text.trim());break;case 12:I.setLineData({text:"",type:"text"},z[j]);break;case 13:I.setLineData(z[j-1],z[j]);break;case 14:I.setBarData({text:"",type:"text"},z[j]);break;case 15:I.setBarData(z[j-1],z[j]);break;case 16:this.$=z[j].trim(),I.setAccTitle(this.$);break;case 17:case 18:this.$=z[j].trim(),I.setAccDescription(this.$);break;case 19:this.$=z[j-1];break;case 20:this.$=[Number(z[j-2]),...z[j]];break;case 21:this.$=[Number(z[j])];break;case 22:I.setXAxisTitle(z[j]);break;case 23:I.setXAxisTitle(z[j-1]);break;case 24:I.setXAxisTitle({type:"text",text:""});break;case 25:I.setXAxisBand(z[j]);break;case 26:I.setXAxisRangeData(Number(z[j-2]),Number(z[j]));break;case 27:this.$=z[j-1];break;case 28:this.$=[z[j-2],...z[j]];break;case 29:this.$=[z[j]];break;case 30:I.setYAxisTitle(z[j]);break;case 31:I.setYAxisTitle(z[j-1]);break;case 32:I.setYAxisTitle({type:"text",text:""});break;case 33:I.setYAxisRangeData(Number(z[j-2]),Number(z[j]));break;case 37:this.$={text:z[j],type:"text"};break;case 38:this.$={text:z[j],type:"text"};break;case 39:this.$={text:z[j],type:"markdown"};break;case 40:this.$=z[j];break;case 41:this.$=z[j-1]+""+z[j];break}},table:[t(e,i,{3:1,4:2,7:4,5:r,34:s,35:n,36:a}),{1:[3]},t(e,i,{4:2,7:4,3:8,5:r,34:s,35:n,36:a}),t(e,i,{4:2,7:4,6:9,3:10,5:r,8:[1,11],34:s,35:n,36:a}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},t(o,[2,34]),t(o,[2,35]),t(o,[2,36]),{1:[2,1]},t(e,i,{4:2,7:4,3:21,5:r,34:s,35:n,36:a}),{1:[2,3]},t(o,[2,5]),t(e,[2,7],{4:22,34:s,35:n,36:a}),{11:23,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:w,49:E,50:R},{11:39,13:38,24:v,27:T,29:40,30:41,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:w,49:E,50:R},{11:45,15:44,27:k,33:46,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:w,49:E,50:R},{11:49,17:48,24:A,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:w,49:E,50:R},{11:52,17:51,24:A,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:w,49:E,50:R},{20:[1,53]},{22:[1,54]},t(S,[2,18]),{1:[2,2]},t(S,[2,8]),t(S,[2,9]),t(m,[2,37],{40:55,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:w,49:E,50:R}),t(m,[2,38]),t(m,[2,39]),t(C,[2,40]),t(C,[2,42]),t(C,[2,43]),t(C,[2,44]),t(C,[2,45]),t(C,[2,46]),t(C,[2,47]),t(C,[2,48]),t(C,[2,49]),t(C,[2,50]),t(C,[2,51]),t(S,[2,10]),t(S,[2,22],{30:41,29:56,24:v,27:T}),t(S,[2,24]),t(S,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:w,49:E,50:R},t(S,[2,11]),t(S,[2,30],{33:60,27:k}),t(S,[2,32]),{31:[1,61]},t(S,[2,12]),{17:62,24:A},{25:63,27:f},t(S,[2,14]),{17:65,24:A},t(S,[2,16]),t(S,[2,17]),t(C,[2,41]),t(S,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},t(S,[2,31]),{27:[1,69]},t(S,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},t(S,[2,15]),t(S,[2,26]),t(S,[2,27]),{11:59,32:72,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:w,49:E,50:R},t(S,[2,33]),t(S,[2,19]),{25:73,27:f},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:function(N,D){if(D.recoverable)this.trace(N);else{var F=new Error(N);throw F.hash=D,F}},parse:function(N){var D=this,F=[0],I=[],M=[null],z=[],st=this.table,j="",dt=0,K=0,G=2,tt=1,nt=z.slice.call(arguments,1),Q=Object.create(this.lexer),J={yy:{}};for(var O in this.yy)Object.prototype.hasOwnProperty.call(this.yy,O)&&(J.yy[O]=this.yy[O]);Q.setInput(N,J.yy),J.yy.lexer=Q,J.yy.parser=this,typeof Q.yylloc>"u"&&(Q.yylloc={});var at=Q.yylloc;z.push(at);var W=Q.options&&Q.options.ranges;typeof J.yy.parseError=="function"?this.parseError=J.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ft(){var ot;return ot=I.pop()||Q.lex()||tt,typeof ot!="number"&&(ot instanceof Array&&(I=ot,ot=I.pop()),ot=D.symbols_[ot]||ot),ot}for(var V,vt,X,St,bt={},Vt,Bt,Wt,pt;;){if(vt=F[F.length-1],this.defaultActions[vt]?X=this.defaultActions[vt]:((V===null||typeof V>"u")&&(V=ft()),X=st[vt]&&st[vt][V]),typeof X>"u"||!X.length||!X[0]){var ut="";pt=[];for(Vt in st[vt])this.terminals_[Vt]&&Vt>G&&pt.push("'"+this.terminals_[Vt]+"'");Q.showPosition?ut="Parse error on line "+(dt+1)+`:
`+Q.showPosition()+`
Expecting `+pt.join(", ")+", got '"+(this.terminals_[V]||V)+"'":ut="Parse error on line "+(dt+1)+": Unexpected "+(V==tt?"end of input":"'"+(this.terminals_[V]||V)+"'"),this.parseError(ut,{text:Q.match,token:this.terminals_[V]||V,line:Q.yylineno,loc:at,expected:pt})}if(X[0]instanceof Array&&X.length>1)throw new Error("Parse Error: multiple actions possible at state: "+vt+", token: "+V);switch(X[0]){case 1:F.push(V),M.push(Q.yytext),z.push(Q.yylloc),F.push(X[1]),V=null,K=Q.yyleng,j=Q.yytext,dt=Q.yylineno,at=Q.yylloc;break;case 2:if(Bt=this.productions_[X[1]][1],bt.$=M[M.length-Bt],bt._$={first_line:z[z.length-(Bt||1)].first_line,last_line:z[z.length-1].last_line,first_column:z[z.length-(Bt||1)].first_column,last_column:z[z.length-1].last_column},W&&(bt._$.range=[z[z.length-(Bt||1)].range[0],z[z.length-1].range[1]]),St=this.performAction.apply(bt,[j,K,dt,J.yy,X[1],M,z].concat(nt)),typeof St<"u")return St;Bt&&(F=F.slice(0,-1*Bt*2),M=M.slice(0,-1*Bt),z=z.slice(0,-1*Bt)),F.push(this.productions_[X[1]][0]),M.push(bt.$),z.push(bt._$),Wt=st[F[F.length-2]][F[F.length-1]],F.push(Wt);break;case 3:return!0}}return!0}},b=(function(){var U={EOF:1,parseError:function(D,F){if(this.yy.parser)this.yy.parser.parseError(D,F);else throw new Error(D)},setInput:function(N,D){return this.yy=D||this.yy||{},this._input=N,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var N=this._input[0];this.yytext+=N,this.yyleng++,this.offset++,this.match+=N,this.matched+=N;var D=N.match(/(?:\r\n?|\n).*/g);return D?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),N},unput:function(N){var D=N.length,F=N.split(/(?:\r\n?|\n)/g);this._input=N+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-D),this.offset-=D;var I=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),F.length-1&&(this.yylineno-=F.length-1);var M=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:F?(F.length===I.length?this.yylloc.first_column:0)+I[I.length-F.length].length-F[0].length:this.yylloc.first_column-D},this.options.ranges&&(this.yylloc.range=[M[0],M[0]+this.yyleng-D]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(N){this.unput(this.match.slice(N))},pastInput:function(){var N=this.matched.substr(0,this.matched.length-this.match.length);return(N.length>20?"...":"")+N.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var N=this.match;return N.length<20&&(N+=this._input.substr(0,20-N.length)),(N.substr(0,20)+(N.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var N=this.pastInput(),D=new Array(N.length+1).join("-");return N+this.upcomingInput()+`
`+D+"^"},test_match:function(N,D){var F,I,M;if(this.options.backtrack_lexer&&(M={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(M.yylloc.range=this.yylloc.range.slice(0))),I=N[0].match(/(?:\r\n?|\n).*/g),I&&(this.yylineno+=I.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:I?I[I.length-1].length-I[I.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+N[0].length},this.yytext+=N[0],this.match+=N[0],this.matches=N,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(N[0].length),this.matched+=N[0],F=this.performAction.call(this,this.yy,this,D,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),F)return F;if(this._backtrack){for(var z in M)this[z]=M[z];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var N,D,F,I;this._more||(this.yytext="",this.match="");for(var M=this._currentRules(),z=0;z<M.length;z++)if(F=this._input.match(this.rules[M[z]]),F&&(!D||F[0].length>D[0].length)){if(D=F,I=z,this.options.backtrack_lexer){if(N=this.test_match(F,M[z]),N!==!1)return N;if(this._backtrack){D=!1;continue}else return!1}else if(!this.options.flex)break}return D?(N=this.test_match(D,M[I]),N!==!1?N:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var D=this.next();return D||this.lex()},begin:function(D){this.conditionStack.push(D)},popState:function(){var D=this.conditionStack.length-1;return D>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(D){return D=this.conditionStack.length-1-Math.abs(D||0),D>=0?this.conditionStack[D]:"INITIAL"},pushState:function(D){this.begin(D)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(D,F,I,M){switch(I){case 0:break;case 1:break;case 2:return this.popState(),34;case 3:return this.popState(),34;case 4:return 34;case 5:break;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 5;case 15:return 8;case 16:return this.pushState("axis_data"),"X_AXIS";case 17:return this.pushState("axis_data"),"Y_AXIS";case 18:return this.pushState("axis_band_data"),24;case 19:return 31;case 20:return this.pushState("data"),16;case 21:return this.pushState("data"),18;case 22:return this.pushState("data_inner"),24;case 23:return 27;case 24:return this.popState(),26;case 25:this.popState();break;case 26:this.pushState("string");break;case 27:this.popState();break;case 28:return"STR";case 29:return 24;case 30:return 26;case 31:return 43;case 32:return"COLON";case 33:return 44;case 34:return 28;case 35:return 45;case 36:return 46;case 37:return 48;case 38:return 50;case 39:return 47;case 40:return 41;case 41:return 49;case 42:return 42;case 43:break;case 44:return 35;case 45:return 36}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,23,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,20,21,22,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,23,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[27,28],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0}}};return U})();L.lexer=b;function P(){this.yy={}}return P.prototype=L,L.Parser=P,new P})();oo.parser=oo;const zk=oo;function Dc(t){return t.type==="bar"}function g0(t){return t.type==="band"}function Es(t){return t.type==="linear"}class y0{constructor(e){this.parentGroup=e}getMaxDimension(e,i){if(!this.parentGroup)return{width:e.reduce((n,a)=>Math.max(a.length,n),0)*i,height:i};const r={width:0,height:0},s=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",i);for(const n of e){const a=Lx(s,1,n),o=a?a.width:n.length*i,l=a?a.height:i;r.width=Math.max(r.width,o),r.height=Math.max(r.height,l)}return s.remove(),r}}const Fc=.7,Rc=.2;class m0{constructor(e,i,r,s){this.axisConfig=e,this.title=i,this.textDimensionCalculator=r,this.axisThemeConfig=s,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}setRange(e){this.range=e,this.axisPosition==="left"||this.axisPosition==="right"?this.boundingRect.height=e[1]-e[0]:this.boundingRect.width=e[1]-e[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(e){this.axisPosition=e,this.setRange(this.range)}getTickDistance(){const e=this.getRange();return Math.abs(e[0]-e[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map(e=>e.toString()),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){Fc*this.getTickDistance()>this.outerPadding*2&&(this.outerPadding=Math.floor(Fc*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(e){let i=e.height;if(this.axisConfig.showAxisLine&&i>this.axisConfig.axisLineWidth&&(i-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const r=this.getLabelDimension(),s=Rc*e.width;this.outerPadding=Math.min(r.width/2,s);const n=r.height+this.axisConfig.labelPadding*2;this.labelTextHeight=r.height,n<=i&&(i-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&i>=this.axisConfig.tickLength&&(this.showTick=!0,i-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const r=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),s=r.height+this.axisConfig.titlePadding*2;this.titleTextHeight=r.height,s<=i&&(i-=s,this.showTitle=!0)}this.boundingRect.width=e.width,this.boundingRect.height=e.height-i}calculateSpaceIfDrawnVertical(e){let i=e.width;if(this.axisConfig.showAxisLine&&i>this.axisConfig.axisLineWidth&&(i-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const r=this.getLabelDimension(),s=Rc*e.height;this.outerPadding=Math.min(r.height/2,s);const n=r.width+this.axisConfig.labelPadding*2;n<=i&&(i-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&i>=this.axisConfig.tickLength&&(this.showTick=!0,i-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const r=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),s=r.height+this.axisConfig.titlePadding*2;this.titleTextHeight=r.height,s<=i&&(i-=s,this.showTitle=!0)}this.boundingRect.width=e.width-i,this.boundingRect.height=e.height}calculateSpace(e){return this.axisPosition==="left"||this.axisPosition==="right"?this.calculateSpaceIfDrawnVertical(e):this.calculateSpaceIfDrawnHorizontally(e),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}getDrawableElementsForLeftAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${i},${this.boundingRect.y} L ${i},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(i),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"}))}),this.showTick){const i=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${i},${this.getScaleValue(r)} L ${i-this.axisConfig.tickLength},${this.getScaleValue(r)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForBottomAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.y+this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${i} L ${this.boundingRect.x+this.boundingRect.width},${i}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.getScaleValue(i),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const i=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${this.getScaleValue(r)},${i} L ${this.getScaleValue(r)},${i+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForTopAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${i} L ${this.boundingRect.x+this.boundingRect.width},${i}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.getScaleValue(i),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+this.axisConfig.titlePadding*2:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const i=this.boundingRect.y;e.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${this.getScaleValue(r)},${i+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(r)},${i+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElements(){if(this.axisPosition==="left")return this.getDrawableElementsForLeftAxis();if(this.axisPosition==="right")throw Error("Drawing of right axis is not implemented");return this.axisPosition==="bottom"?this.getDrawableElementsForBottomAxis():this.axisPosition==="top"?this.getDrawableElementsForTopAxis():[]}}class qk extends m0{constructor(e,i,r,s,n){super(e,s,n,i),this.categories=r,this.scale=Yl().domain(this.categories).range(this.getRange())}setRange(e){super.setRange(e)}recalculateScale(){this.scale=Yl().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),B.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(e){return this.scale(e)||this.getRange()[0]}}class Wk extends m0{constructor(e,i,r,s,n){super(e,s,n,i),this.domain=r,this.scale=Bs().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){const e=[...this.domain];this.axisPosition==="left"&&e.reverse(),this.scale=Bs().domain(e).range(this.getRange())}getScaleValue(e){return this.scale(e)}}function Nc(t,e,i,r){const s=new y0(r);return g0(t)?new qk(e,i,t.categories,t.title,s):new Wk(e,i,[t.min,t.max],t.title,s)}class Yk{constructor(e,i,r,s){this.textDimensionCalculator=e,this.chartConfig=i,this.chartData=r,this.chartThemeConfig=s,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){const i=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),r=Math.max(i.width,e.width),s=i.height+2*this.chartConfig.titlePadding;return i.width<=r&&i.height<=s&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=r,this.boundingRect.height=s,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){const e=[];return this.showChartTitle&&e.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),e}}function Uk(t,e,i,r){const s=new y0(r);return new Yk(s,t,e,i)}class Hk{constructor(e,i,r,s,n){this.plotData=e,this.xAxis=i,this.yAxis=r,this.orientation=s,this.plotIndex=n}getDrawableElement(){const e=this.plotData.data.map(r=>[this.xAxis.getScaleValue(r[0]),this.yAxis.getScaleValue(r[1])]);let i;return this.orientation==="horizontal"?i=fr().y(r=>r[0]).x(r=>r[1])(e):i=fr().x(r=>r[0]).y(r=>r[1])(e),i?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:i,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}}class Gk{constructor(e,i,r,s,n,a){this.barData=e,this.boundingRect=i,this.xAxis=r,this.yAxis=s,this.orientation=n,this.plotIndex=a}getDrawableElement(){const e=this.barData.data.map(n=>[this.xAxis.getScaleValue(n[0]),this.yAxis.getScaleValue(n[1])]),r=Math.min(this.xAxis.getAxisOuterPadding()*2,this.xAxis.getTickDistance())*(1-.05),s=r/2;return this.orientation==="horizontal"?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map(n=>({x:this.boundingRect.x,y:n[0]-s,height:r,width:n[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map(n=>({x:n[0]-s,y:n[1],width:r,height:this.boundingRect.y+this.boundingRect.height-n[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]}}class jk{constructor(e,i,r){this.chartConfig=e,this.chartData=i,this.chartThemeConfig=r,this.boundingRect={x:0,y:0,width:0,height:0}}setAxes(e,i){this.xAxis=e,this.yAxis=i}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){return this.boundingRect.width=e.width,this.boundingRect.height=e.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!(this.xAxis&&this.yAxis))throw Error("Axes must be passed to render Plots");const e=[];for(const[i,r]of this.chartData.plots.entries())switch(r.type){case"line":{const s=new Hk(r,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,i);e.push(...s.getDrawableElement())}break;case"bar":{const s=new Gk(r,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,i);e.push(...s.getDrawableElement())}break}return e}}function Xk(t,e,i){return new jk(t,e,i)}class $k{constructor(e,i,r,s){this.chartConfig=e,this.chartData=i,this.componentStore={title:Uk(e,i,r,s),plot:Xk(e,i,r),xAxis:Nc(i.xAxis,e.xAxis,{titleColor:r.xAxisTitleColor,labelColor:r.xAxisLabelColor,tickColor:r.xAxisTickColor,axisLineColor:r.xAxisLineColor},s),yAxis:Nc(i.yAxis,e.yAxis,{titleColor:r.yAxisTitleColor,labelColor:r.yAxisLabelColor,tickColor:r.yAxisTickColor,axisLineColor:r.yAxisLineColor},s)}}calculateVerticalSpace(){let e=this.chartConfig.width,i=this.chartConfig.height,r=0,s=0,n=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),a=Math.floor(i*this.chartConfig.plotReservedSpacePercent/100),o=this.componentStore.plot.calculateSpace({width:n,height:a});e-=o.width,i-=o.height,o=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:i}),s=o.height,i-=o.height,this.componentStore.xAxis.setAxisPosition("bottom"),o=this.componentStore.xAxis.calculateSpace({width:e,height:i}),i-=o.height,this.componentStore.yAxis.setAxisPosition("left"),o=this.componentStore.yAxis.calculateSpace({width:e,height:i}),r=o.width,e-=o.width,e>0&&(n+=e,e=0),i>0&&(a+=i,i=0),this.componentStore.plot.calculateSpace({width:n,height:a}),this.componentStore.plot.setBoundingBoxXY({x:r,y:s}),this.componentStore.xAxis.setRange([r,r+n]),this.componentStore.xAxis.setBoundingBoxXY({x:r,y:s+a}),this.componentStore.yAxis.setRange([s,s+a]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:s}),this.chartData.plots.some(l=>Dc(l))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizontalSpace(){let e=this.chartConfig.width,i=this.chartConfig.height,r=0,s=0,n=0,a=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),o=Math.floor(i*this.chartConfig.plotReservedSpacePercent/100),l=this.componentStore.plot.calculateSpace({width:a,height:o});e-=l.width,i-=l.height,l=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:i}),r=l.height,i-=l.height,this.componentStore.xAxis.setAxisPosition("left"),l=this.componentStore.xAxis.calculateSpace({width:e,height:i}),e-=l.width,s=l.width,this.componentStore.yAxis.setAxisPosition("top"),l=this.componentStore.yAxis.calculateSpace({width:e,height:i}),i-=l.height,n=r+l.height,e>0&&(a+=e,e=0),i>0&&(o+=i,i=0),this.componentStore.plot.calculateSpace({width:a,height:o}),this.componentStore.plot.setBoundingBoxXY({x:s,y:n}),this.componentStore.yAxis.setRange([s,s+a]),this.componentStore.yAxis.setBoundingBoxXY({x:s,y:r}),this.componentStore.xAxis.setRange([n,n+o]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:n}),this.chartData.plots.some(h=>Dc(h))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){this.chartConfig.chartOrientation==="horizontal"?this.calculateHorizontalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();const e=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(const i of Object.values(this.componentStore))e.push(...i.getDrawableElements());return e}}class Kk{static build(e,i,r,s){return new $k(e,i,r,s).getDrawableElement()}}let Ms=0,x0,Vs=k0(),zs=b0(),Ht=_0(),lo=zs.plotColorPalette.split(",").map(t=>t.trim()),ya=!1,ml=!1;function b0(){const t=Ro(),e=ee();return Qs(t.xyChart,e.themeVariables.xyChart)}function k0(){const t=ee();return Qs($t.xyChart,t.xyChart)}function _0(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}}function xl(t){const e=ee();return te(t.trim(),e)}function Qk(t){x0=t}function Zk(t){t==="horizontal"?Vs.chartOrientation="horizontal":Vs.chartOrientation="vertical"}function Jk(t){Ht.xAxis.title=xl(t.text)}function T0(t,e){Ht.xAxis={type:"linear",title:Ht.xAxis.title,min:t,max:e},ya=!0}function t6(t){Ht.xAxis={type:"band",title:Ht.xAxis.title,categories:t.map(e=>xl(e.text))},ya=!0}function e6(t){Ht.yAxis.title=xl(t.text)}function i6(t,e){Ht.yAxis={type:"linear",title:Ht.yAxis.title,min:t,max:e},ml=!0}function r6(t){const e=Math.min(...t),i=Math.max(...t),r=Es(Ht.yAxis)?Ht.yAxis.min:1/0,s=Es(Ht.yAxis)?Ht.yAxis.max:-1/0;Ht.yAxis={type:"linear",title:Ht.yAxis.title,min:Math.min(r,e),max:Math.max(s,i)}}function C0(t){let e=[];if(t.length===0)return e;if(!ya){const i=Es(Ht.xAxis)?Ht.xAxis.min:1/0,r=Es(Ht.xAxis)?Ht.xAxis.max:-1/0;T0(Math.min(i,1),Math.max(r,t.length))}if(ml||r6(t),g0(Ht.xAxis)&&(e=Ht.xAxis.categories.map((i,r)=>[i,t[r]])),Es(Ht.xAxis)){const i=Ht.xAxis.min,r=Ht.xAxis.max,s=(r-i+1)/t.length,n=[];for(let a=i;a<=r;a+=s)n.push(`${a}`);e=n.map((a,o)=>[a,t[o]])}return e}function E0(t){return lo[t===0?0:t%lo.length]}function s6(t,e){const i=C0(e);Ht.plots.push({type:"line",strokeFill:E0(Ms),strokeWidth:2,data:i}),Ms++}function n6(t,e){const i=C0(e);Ht.plots.push({type:"bar",fill:E0(Ms),data:i}),Ms++}function a6(){if(Ht.plots.length===0)throw Error("No Plot to render, please provide a plot with some data");return Ht.title=Ge(),Kk.build(Vs,Ht,zs,x0)}function o6(){return zs}function l6(){return Vs}const c6=function(){Oe(),Ms=0,Vs=k0(),Ht=_0(),zs=b0(),lo=zs.plotColorPalette.split(",").map(t=>t.trim()),ya=!1,ml=!1},h6={getDrawableElem:a6,clear:c6,setAccTitle:Pe,getAccTitle:Ye,setDiagramTitle:ri,getDiagramTitle:Ge,getAccDescription:He,setAccDescription:Ue,setOrientation:Zk,setXAxisTitle:Jk,setXAxisRangeData:T0,setXAxisBand:t6,setYAxisTitle:e6,setYAxisRangeData:i6,setLineData:s6,setBarData:n6,setTmpSVGG:Qk,getChartThemeConfig:o6,getChartConfig:l6},u6=(t,e,i,r)=>{const s=r.db,n=s.getChartThemeConfig(),a=s.getChartConfig();function o(_){return _==="top"?"text-before-edge":"middle"}function l(_){return _==="left"?"start":_==="right"?"end":"middle"}function h(_){return`translate(${_.x}, ${_.y}) rotate(${_.rotation||0})`}B.debug(`Rendering xychart chart
`+t);const u=Zs(e),p=u.append("g").attr("class","main"),d=p.append("rect").attr("width",a.width).attr("height",a.height).attr("class","background");Ne(u,a.height,a.width,!0),u.attr("viewBox",`0 0 ${a.width} ${a.height}`),d.attr("fill",n.backgroundColor),s.setTmpSVGG(u.append("g").attr("class","mermaid-tmp-group"));const g=s.getDrawableElem(),y={};function x(_){let w=p,E="";for(const[R]of _.entries()){let v=p;R>0&&y[E]&&(v=y[E]),E+=_[R],w=y[E],w||(w=y[E]=v.append("g").attr("class",_[R]))}return w}for(const _ of g){if(_.data.length===0)continue;const w=x(_.groupTexts);switch(_.type){case"rect":w.selectAll("rect").data(_.data).enter().append("rect").attr("x",E=>E.x).attr("y",E=>E.y).attr("width",E=>E.width).attr("height",E=>E.height).attr("fill",E=>E.fill).attr("stroke",E=>E.strokeFill).attr("stroke-width",E=>E.strokeWidth);break;case"text":w.selectAll("text").data(_.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",E=>E.fill).attr("font-size",E=>E.fontSize).attr("dominant-baseline",E=>o(E.verticalPos)).attr("text-anchor",E=>l(E.horizontalPos)).attr("transform",E=>h(E)).text(E=>E.text);break;case"path":w.selectAll("path").data(_.data).enter().append("path").attr("d",E=>E.path).attr("fill",E=>E.fill?E.fill:"none").attr("stroke",E=>E.strokeFill).attr("stroke-width",E=>E.strokeWidth);break}}},d6={draw:u6},f6={parser:zk,db:h6,renderer:d6},p6=Object.freeze(Object.defineProperty({__proto__:null,diagram:f6},Symbol.toStringTag,{value:"Module"}));var co=(function(){var t=function(K,G,tt,nt){for(tt=tt||{},nt=K.length;nt--;tt[K[nt]]=G);return tt},e=[1,3],i=[1,4],r=[1,5],s=[1,6],n=[5,6,8,9,11,13,31,32,33,34,35,36,44,62,63],a=[1,18],o=[2,7],l=[1,22],h=[1,23],u=[1,24],p=[1,25],d=[1,26],g=[1,27],y=[1,20],x=[1,28],_=[1,29],w=[62,63],E=[5,8,9,11,13,31,32,33,34,35,36,44,51,53,62,63],R=[1,47],v=[1,48],T=[1,49],k=[1,50],A=[1,51],S=[1,52],m=[1,53],C=[53,54],f=[1,64],L=[1,60],b=[1,61],P=[1,62],U=[1,63],N=[1,65],D=[1,69],F=[1,70],I=[1,67],M=[1,68],z=[5,8,9,11,13,31,32,33,34,35,36,44,62,63],st={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,requirementType:17,requirementName:18,STRUCT_START:19,requirementBody:20,ID:21,COLONSEP:22,id:23,TEXT:24,text:25,RISK:26,riskLevel:27,VERIFYMTHD:28,verifyType:29,STRUCT_STOP:30,REQUIREMENT:31,FUNCTIONAL_REQUIREMENT:32,INTERFACE_REQUIREMENT:33,PERFORMANCE_REQUIREMENT:34,PHYSICAL_REQUIREMENT:35,DESIGN_CONSTRAINT:36,LOW_RISK:37,MED_RISK:38,HIGH_RISK:39,VERIFY_ANALYSIS:40,VERIFY_DEMONSTRATION:41,VERIFY_INSPECTION:42,VERIFY_TEST:43,ELEMENT:44,elementName:45,elementBody:46,TYPE:47,type:48,DOCREF:49,ref:50,END_ARROW_L:51,relationship:52,LINE:53,END_ARROW_R:54,CONTAINS:55,COPIES:56,DERIVES:57,SATISFIES:58,VERIFIES:59,REFINES:60,TRACES:61,unqString:62,qString:63,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",19:"STRUCT_START",21:"ID",22:"COLONSEP",24:"TEXT",26:"RISK",28:"VERIFYMTHD",30:"STRUCT_STOP",31:"REQUIREMENT",32:"FUNCTIONAL_REQUIREMENT",33:"INTERFACE_REQUIREMENT",34:"PERFORMANCE_REQUIREMENT",35:"PHYSICAL_REQUIREMENT",36:"DESIGN_CONSTRAINT",37:"LOW_RISK",38:"MED_RISK",39:"HIGH_RISK",40:"VERIFY_ANALYSIS",41:"VERIFY_DEMONSTRATION",42:"VERIFY_INSPECTION",43:"VERIFY_TEST",44:"ELEMENT",47:"TYPE",49:"DOCREF",51:"END_ARROW_L",53:"LINE",54:"END_ARROW_R",55:"CONTAINS",56:"COPIES",57:"DERIVES",58:"SATISFIES",59:"VERIFIES",60:"REFINES",61:"TRACES",62:"unqString",63:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[14,5],[20,5],[20,5],[20,5],[20,5],[20,2],[20,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[27,1],[27,1],[27,1],[29,1],[29,1],[29,1],[29,1],[15,5],[46,5],[46,5],[46,2],[46,1],[16,5],[16,5],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[18,1],[18,1],[23,1],[23,1],[25,1],[25,1],[45,1],[45,1],[48,1],[48,1],[50,1],[50,1]],performAction:function(G,tt,nt,Q,J,O,at){var W=O.length-1;switch(J){case 4:this.$=O[W].trim(),Q.setAccTitle(this.$);break;case 5:case 6:this.$=O[W].trim(),Q.setAccDescription(this.$);break;case 7:this.$=[];break;case 13:Q.addRequirement(O[W-3],O[W-4]);break;case 14:Q.setNewReqId(O[W-2]);break;case 15:Q.setNewReqText(O[W-2]);break;case 16:Q.setNewReqRisk(O[W-2]);break;case 17:Q.setNewReqVerifyMethod(O[W-2]);break;case 20:this.$=Q.RequirementType.REQUIREMENT;break;case 21:this.$=Q.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 22:this.$=Q.RequirementType.INTERFACE_REQUIREMENT;break;case 23:this.$=Q.RequirementType.PERFORMANCE_REQUIREMENT;break;case 24:this.$=Q.RequirementType.PHYSICAL_REQUIREMENT;break;case 25:this.$=Q.RequirementType.DESIGN_CONSTRAINT;break;case 26:this.$=Q.RiskLevel.LOW_RISK;break;case 27:this.$=Q.RiskLevel.MED_RISK;break;case 28:this.$=Q.RiskLevel.HIGH_RISK;break;case 29:this.$=Q.VerifyType.VERIFY_ANALYSIS;break;case 30:this.$=Q.VerifyType.VERIFY_DEMONSTRATION;break;case 31:this.$=Q.VerifyType.VERIFY_INSPECTION;break;case 32:this.$=Q.VerifyType.VERIFY_TEST;break;case 33:Q.addElement(O[W-3]);break;case 34:Q.setNewElementType(O[W-2]);break;case 35:Q.setNewElementDocRef(O[W-2]);break;case 38:Q.addRelationship(O[W-2],O[W],O[W-4]);break;case 39:Q.addRelationship(O[W-2],O[W-4],O[W]);break;case 40:this.$=Q.Relationships.CONTAINS;break;case 41:this.$=Q.Relationships.COPIES;break;case 42:this.$=Q.Relationships.DERIVES;break;case 43:this.$=Q.Relationships.SATISFIES;break;case 44:this.$=Q.Relationships.VERIFIES;break;case 45:this.$=Q.Relationships.REFINES;break;case 46:this.$=Q.Relationships.TRACES;break}},table:[{3:1,4:2,6:e,9:i,11:r,13:s},{1:[3]},{3:8,4:2,5:[1,7],6:e,9:i,11:r,13:s},{5:[1,9]},{10:[1,10]},{12:[1,11]},t(n,[2,6]),{3:12,4:2,6:e,9:i,11:r,13:s},{1:[2,2]},{4:17,5:a,7:13,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},t(n,[2,4]),t(n,[2,5]),{1:[2,1]},{8:[1,30]},{4:17,5:a,7:31,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{4:17,5:a,7:32,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{4:17,5:a,7:33,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{4:17,5:a,7:34,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{4:17,5:a,7:35,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{18:36,62:[1,37],63:[1,38]},{45:39,62:[1,40],63:[1,41]},{51:[1,42],53:[1,43]},t(w,[2,20]),t(w,[2,21]),t(w,[2,22]),t(w,[2,23]),t(w,[2,24]),t(w,[2,25]),t(E,[2,49]),t(E,[2,50]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{19:[1,44]},{19:[2,47]},{19:[2,48]},{19:[1,45]},{19:[2,53]},{19:[2,54]},{52:46,55:R,56:v,57:T,58:k,59:A,60:S,61:m},{52:54,55:R,56:v,57:T,58:k,59:A,60:S,61:m},{5:[1,55]},{5:[1,56]},{53:[1,57]},t(C,[2,40]),t(C,[2,41]),t(C,[2,42]),t(C,[2,43]),t(C,[2,44]),t(C,[2,45]),t(C,[2,46]),{54:[1,58]},{5:f,20:59,21:L,24:b,26:P,28:U,30:N},{5:D,30:F,46:66,47:I,49:M},{23:71,62:x,63:_},{23:72,62:x,63:_},t(z,[2,13]),{22:[1,73]},{22:[1,74]},{22:[1,75]},{22:[1,76]},{5:f,20:77,21:L,24:b,26:P,28:U,30:N},t(z,[2,19]),t(z,[2,33]),{22:[1,78]},{22:[1,79]},{5:D,30:F,46:80,47:I,49:M},t(z,[2,37]),t(z,[2,38]),t(z,[2,39]),{23:81,62:x,63:_},{25:82,62:[1,83],63:[1,84]},{27:85,37:[1,86],38:[1,87],39:[1,88]},{29:89,40:[1,90],41:[1,91],42:[1,92],43:[1,93]},t(z,[2,18]),{48:94,62:[1,95],63:[1,96]},{50:97,62:[1,98],63:[1,99]},t(z,[2,36]),{5:[1,100]},{5:[1,101]},{5:[2,51]},{5:[2,52]},{5:[1,102]},{5:[2,26]},{5:[2,27]},{5:[2,28]},{5:[1,103]},{5:[2,29]},{5:[2,30]},{5:[2,31]},{5:[2,32]},{5:[1,104]},{5:[2,55]},{5:[2,56]},{5:[1,105]},{5:[2,57]},{5:[2,58]},{5:f,20:106,21:L,24:b,26:P,28:U,30:N},{5:f,20:107,21:L,24:b,26:P,28:U,30:N},{5:f,20:108,21:L,24:b,26:P,28:U,30:N},{5:f,20:109,21:L,24:b,26:P,28:U,30:N},{5:D,30:F,46:110,47:I,49:M},{5:D,30:F,46:111,47:I,49:M},t(z,[2,14]),t(z,[2,15]),t(z,[2,16]),t(z,[2,17]),t(z,[2,34]),t(z,[2,35])],defaultActions:{8:[2,2],12:[2,1],30:[2,3],31:[2,8],32:[2,9],33:[2,10],34:[2,11],35:[2,12],37:[2,47],38:[2,48],40:[2,53],41:[2,54],83:[2,51],84:[2,52],86:[2,26],87:[2,27],88:[2,28],90:[2,29],91:[2,30],92:[2,31],93:[2,32],95:[2,55],96:[2,56],98:[2,57],99:[2,58]},parseError:function(G,tt){if(tt.recoverable)this.trace(G);else{var nt=new Error(G);throw nt.hash=tt,nt}},parse:function(G){var tt=this,nt=[0],Q=[],J=[null],O=[],at=this.table,W="",ft=0,V=0,vt=2,X=1,St=O.slice.call(arguments,1),bt=Object.create(this.lexer),Vt={yy:{}};for(var Bt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Bt)&&(Vt.yy[Bt]=this.yy[Bt]);bt.setInput(G,Vt.yy),Vt.yy.lexer=bt,Vt.yy.parser=this,typeof bt.yylloc>"u"&&(bt.yylloc={});var Wt=bt.yylloc;O.push(Wt);var pt=bt.options&&bt.options.ranges;typeof Vt.yy.parseError=="function"?this.parseError=Vt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ut(){var zt;return zt=Q.pop()||bt.lex()||X,typeof zt!="number"&&(zt instanceof Array&&(Q=zt,zt=Q.pop()),zt=tt.symbols_[zt]||zt),zt}for(var ot,lt,ht,$,rt={},it,ct,re,Qt;;){if(lt=nt[nt.length-1],this.defaultActions[lt]?ht=this.defaultActions[lt]:((ot===null||typeof ot>"u")&&(ot=ut()),ht=at[lt]&&at[lt][ot]),typeof ht>"u"||!ht.length||!ht[0]){var de="";Qt=[];for(it in at[lt])this.terminals_[it]&&it>vt&&Qt.push("'"+this.terminals_[it]+"'");bt.showPosition?de="Parse error on line "+(ft+1)+`:
`+bt.showPosition()+`
Expecting `+Qt.join(", ")+", got '"+(this.terminals_[ot]||ot)+"'":de="Parse error on line "+(ft+1)+": Unexpected "+(ot==X?"end of input":"'"+(this.terminals_[ot]||ot)+"'"),this.parseError(de,{text:bt.match,token:this.terminals_[ot]||ot,line:bt.yylineno,loc:Wt,expected:Qt})}if(ht[0]instanceof Array&&ht.length>1)throw new Error("Parse Error: multiple actions possible at state: "+lt+", token: "+ot);switch(ht[0]){case 1:nt.push(ot),J.push(bt.yytext),O.push(bt.yylloc),nt.push(ht[1]),ot=null,V=bt.yyleng,W=bt.yytext,ft=bt.yylineno,Wt=bt.yylloc;break;case 2:if(ct=this.productions_[ht[1]][1],rt.$=J[J.length-ct],rt._$={first_line:O[O.length-(ct||1)].first_line,last_line:O[O.length-1].last_line,first_column:O[O.length-(ct||1)].first_column,last_column:O[O.length-1].last_column},pt&&(rt._$.range=[O[O.length-(ct||1)].range[0],O[O.length-1].range[1]]),$=this.performAction.apply(rt,[W,V,ft,Vt.yy,ht[1],J,O].concat(St)),typeof $<"u")return $;ct&&(nt=nt.slice(0,-1*ct*2),J=J.slice(0,-1*ct),O=O.slice(0,-1*ct)),nt.push(this.productions_[ht[1]][0]),J.push(rt.$),O.push(rt._$),re=at[nt[nt.length-2]][nt[nt.length-1]],nt.push(re);break;case 3:return!0}}return!0}},j=(function(){var K={EOF:1,parseError:function(tt,nt){if(this.yy.parser)this.yy.parser.parseError(tt,nt);else throw new Error(tt)},setInput:function(G,tt){return this.yy=tt||this.yy||{},this._input=G,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var G=this._input[0];this.yytext+=G,this.yyleng++,this.offset++,this.match+=G,this.matched+=G;var tt=G.match(/(?:\r\n?|\n).*/g);return tt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),G},unput:function(G){var tt=G.length,nt=G.split(/(?:\r\n?|\n)/g);this._input=G+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-tt),this.offset-=tt;var Q=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),nt.length-1&&(this.yylineno-=nt.length-1);var J=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:nt?(nt.length===Q.length?this.yylloc.first_column:0)+Q[Q.length-nt.length].length-nt[0].length:this.yylloc.first_column-tt},this.options.ranges&&(this.yylloc.range=[J[0],J[0]+this.yyleng-tt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(G){this.unput(this.match.slice(G))},pastInput:function(){var G=this.matched.substr(0,this.matched.length-this.match.length);return(G.length>20?"...":"")+G.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var G=this.match;return G.length<20&&(G+=this._input.substr(0,20-G.length)),(G.substr(0,20)+(G.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var G=this.pastInput(),tt=new Array(G.length+1).join("-");return G+this.upcomingInput()+`
`+tt+"^"},test_match:function(G,tt){var nt,Q,J;if(this.options.backtrack_lexer&&(J={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(J.yylloc.range=this.yylloc.range.slice(0))),Q=G[0].match(/(?:\r\n?|\n).*/g),Q&&(this.yylineno+=Q.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Q?Q[Q.length-1].length-Q[Q.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+G[0].length},this.yytext+=G[0],this.match+=G[0],this.matches=G,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(G[0].length),this.matched+=G[0],nt=this.performAction.call(this,this.yy,this,tt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),nt)return nt;if(this._backtrack){for(var O in J)this[O]=J[O];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var G,tt,nt,Q;this._more||(this.yytext="",this.match="");for(var J=this._currentRules(),O=0;O<J.length;O++)if(nt=this._input.match(this.rules[J[O]]),nt&&(!tt||nt[0].length>tt[0].length)){if(tt=nt,Q=O,this.options.backtrack_lexer){if(G=this.test_match(nt,J[O]),G!==!1)return G;if(this._backtrack){tt=!1;continue}else return!1}else if(!this.options.flex)break}return tt?(G=this.test_match(tt,J[Q]),G!==!1?G:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var tt=this.next();return tt||this.lex()},begin:function(tt){this.conditionStack.push(tt)},popState:function(){var tt=this.conditionStack.length-1;return tt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(tt){return tt=this.conditionStack.length-1-Math.abs(tt||0),tt>=0?this.conditionStack[tt]:"INITIAL"},pushState:function(tt){this.begin(tt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(tt,nt,Q,J){switch(Q){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 5;case 9:break;case 10:break;case 11:break;case 12:return 8;case 13:return 6;case 14:return 19;case 15:return 30;case 16:return 22;case 17:return 21;case 18:return 24;case 19:return 26;case 20:return 28;case 21:return 31;case 22:return 32;case 23:return 33;case 24:return 34;case 25:return 35;case 26:return 36;case 27:return 37;case 28:return 38;case 29:return 39;case 30:return 40;case 31:return 41;case 32:return 42;case 33:return 43;case 34:return 44;case 35:return 55;case 36:return 56;case 37:return 57;case 38:return 58;case 39:return 59;case 40:return 60;case 41:return 61;case 42:return 47;case 43:return 49;case 44:return 51;case 45:return 54;case 46:return 53;case 47:this.begin("string");break;case 48:this.popState();break;case 49:return"qString";case 50:return nt.yytext=nt.yytext.trim(),62}},rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[48,49],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,50],inclusive:!0}}};return K})();st.lexer=j;function dt(){this.yy={}}return dt.prototype=st,st.Parser=dt,new dt})();co.parser=co;const g6=co;let bl=[],Qe={},Ss={},dr={},ws={};const y6={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},m6={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},x6={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},b6={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},k6=(t,e)=>(Ss[t]===void 0&&(Ss[t]={name:t,type:e,id:Qe.id,text:Qe.text,risk:Qe.risk,verifyMethod:Qe.verifyMethod}),Qe={},Ss[t]),_6=()=>Ss,T6=t=>{Qe!==void 0&&(Qe.id=t)},C6=t=>{Qe!==void 0&&(Qe.text=t)},E6=t=>{Qe!==void 0&&(Qe.risk=t)},S6=t=>{Qe!==void 0&&(Qe.verifyMethod=t)},w6=t=>(ws[t]===void 0&&(ws[t]={name:t,type:dr.type,docRef:dr.docRef},B.info("Added new requirement: ",t)),dr={},ws[t]),v6=()=>ws,A6=t=>{dr!==void 0&&(dr.type=t)},L6=t=>{dr!==void 0&&(dr.docRef=t)},B6=(t,e,i)=>{bl.push({type:t,src:e,dst:i})},I6=()=>bl,D6=()=>{bl=[],Qe={},Ss={},dr={},ws={},Oe()},F6={RequirementType:y6,RiskLevel:m6,VerifyType:x6,Relationships:b6,getConfig:()=>Y().req,addRequirement:k6,getRequirements:_6,setNewReqId:T6,setNewReqText:C6,setNewReqRisk:E6,setNewReqVerifyMethod:S6,setAccTitle:Pe,getAccTitle:Ye,setAccDescription:Ue,getAccDescription:He,addElement:w6,getElements:v6,setNewElementType:A6,setNewElementDocRef:L6,addRelationship:B6,getRelationships:I6,clear:D6},R6=t=>`

  marker {
    fill: ${t.relationColor};
    stroke: ${t.relationColor};
  }

  marker.cross {
    stroke: ${t.lineColor};
  }

  svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }

  .reqBox {
    fill: ${t.requirementBackground};
    fill-opacity: 1.0;
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${t.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${t.relationLabelBackground};
    fill-opacity: 1.0;
  }

  .req-title-line {
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${t.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${t.relationLabelColor};
  }

`,N6=R6,ho={CONTAINS:"contains",ARROW:"arrow"},O6=(t,e)=>{let i=t.append("defs").append("marker").attr("id",ho.CONTAINS+"_line_ending").attr("refX",0).attr("refY",e.line_height/2).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("g");i.append("circle").attr("cx",e.line_height/2).attr("cy",e.line_height/2).attr("r",e.line_height/2).attr("fill","none"),i.append("line").attr("x1",0).attr("x2",e.line_height).attr("y1",e.line_height/2).attr("y2",e.line_height/2).attr("stroke-width",1),i.append("line").attr("y1",0).attr("y2",e.line_height).attr("x1",e.line_height/2).attr("x2",e.line_height/2).attr("stroke-width",1),t.append("defs").append("marker").attr("id",ho.ARROW+"_line_ending").attr("refX",e.line_height).attr("refY",.5*e.line_height).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${e.line_height},${e.line_height/2}
      M${e.line_height},${e.line_height/2}
      L0,${e.line_height}`).attr("stroke-width",1)},S0={ReqMarkers:ho,insertLineEndings:O6};let le={},Oc=0;const w0=(t,e)=>t.insert("rect","#"+e).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",le.rect_min_width+"px").attr("height",le.rect_min_height+"px"),v0=(t,e,i)=>{let r=le.rect_min_width/2,s=t.append("text").attr("class","req reqLabel reqTitle").attr("id",e).attr("x",r).attr("y",le.rect_padding).attr("dominant-baseline","hanging"),n=0;i.forEach(h=>{n==0?s.append("tspan").attr("text-anchor","middle").attr("x",le.rect_min_width/2).attr("dy",0).text(h):s.append("tspan").attr("text-anchor","middle").attr("x",le.rect_min_width/2).attr("dy",le.line_height*.75).text(h),n++});let a=1.5*le.rect_padding,o=n*le.line_height*.75,l=a+o;return t.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",le.rect_min_width).attr("y1",l).attr("y2",l),{titleNode:s,y:l}},A0=(t,e,i,r)=>{let s=t.append("text").attr("class","req reqLabel").attr("id",e).attr("x",le.rect_padding).attr("y",r).attr("dominant-baseline","hanging"),n=0;const a=30;let o=[];return i.forEach(l=>{let h=l.length;for(;h>a&&n<3;){let u=l.substring(0,a);l=l.substring(a,l.length),h=l.length,o[o.length]=u,n++}if(n==3){let u=o[o.length-1];o[o.length-1]=u.substring(0,u.length-4)+"..."}else o[o.length]=l;n=0}),o.forEach(l=>{s.append("tspan").attr("x",le.rect_padding).attr("dy",le.line_height).text(l)}),s},P6=(t,e,i,r)=>{const s=e.node().getTotalLength(),n=e.node().getPointAtLength(s*.5),a="rel"+Oc;Oc++;const l=t.append("text").attr("class","req relationshipLabel").attr("id",a).attr("x",n.x).attr("y",n.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(r).node().getBBox();t.insert("rect","#"+a).attr("class","req reqLabelBox").attr("x",n.x-l.width/2).attr("y",n.y-l.height/2).attr("width",l.width).attr("height",l.height).attr("fill","white").attr("fill-opacity","85%")},M6=function(t,e,i,r,s){const n=i.edge(as(e.src),as(e.dst)),a=fr().x(function(l){return l.x}).y(function(l){return l.y}),o=t.insert("path","#"+r).attr("class","er relationshipLine").attr("d",a(n.points)).attr("fill","none");e.type==s.db.Relationships.CONTAINS?o.attr("marker-start","url("+mt.getUrl(le.arrowMarkerAbsolute)+"#"+e.type+"_line_ending)"):(o.attr("stroke-dasharray","10,7"),o.attr("marker-end","url("+mt.getUrl(le.arrowMarkerAbsolute)+"#"+S0.ReqMarkers.ARROW+"_line_ending)")),P6(t,o,le,`<<${e.type}>>`)},V6=(t,e,i)=>{Object.keys(t).forEach(r=>{let s=t[r];r=as(r),B.info("Added new requirement: ",r);const n=i.append("g").attr("id",r),a="req-"+r,o=w0(n,a);let l=v0(n,r+"_title",[`<<${s.type}>>`,`${s.name}`]);A0(n,r+"_body",[`Id: ${s.id}`,`Text: ${s.text}`,`Risk: ${s.risk}`,`Verification: ${s.verifyMethod}`],l.y);const h=o.node().getBBox();e.setNode(r,{width:h.width,height:h.height,shape:"rect",id:r})})},z6=(t,e,i)=>{Object.keys(t).forEach(r=>{let s=t[r];const n=as(r),a=i.append("g").attr("id",n),o="element-"+n,l=w0(a,o);let h=v0(a,o+"_title",["<<Element>>",`${r}`]);A0(a,o+"_body",[`Type: ${s.type||"Not Specified"}`,`Doc Ref: ${s.docRef||"None"}`],h.y);const u=l.node().getBBox();e.setNode(n,{width:u.width,height:u.height,shape:"rect",id:n})})},q6=(t,e)=>(t.forEach(function(i){let r=as(i.src),s=as(i.dst);e.setEdge(r,s,{relationship:i})}),t),W6=function(t,e){e.nodes().forEach(function(i){i!==void 0&&e.node(i)!==void 0&&(t.select("#"+i),t.select("#"+i).attr("transform","translate("+(e.node(i).x-e.node(i).width/2)+","+(e.node(i).y-e.node(i).height/2)+" )"))})},as=t=>t.replace(/\s/g,"").replace(/\./g,"_"),Y6=(t,e,i,r)=>{le=Y().requirement;const s=le.securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const o=(s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body")).select(`[id='${e}']`);S0.insertLineEndings(o,le);const l=new Ii({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:le.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let h=r.db.getRequirements(),u=r.db.getElements(),p=r.db.getRelationships();V6(h,l,o),z6(u,l,o),q6(p,l),Xs(l),W6(o,l),p.forEach(function(_){M6(o,_,l,e,r)});const d=le.rect_padding,g=o.node().getBBox(),y=g.width+d*2,x=g.height+d*2;Ne(o,x,y,le.useMaxWidth),o.attr("viewBox",`${g.x-d} ${g.y-d} ${y} ${x}`)},U6={draw:Y6},H6={parser:g6,db:F6,renderer:U6,styles:N6},G6=Object.freeze(Object.defineProperty({__proto__:null,diagram:H6},Symbol.toStringTag,{value:"Module"}));var uo=(function(){var t=function(Q,J,O,at){for(O=O||{},at=Q.length;at--;O[Q[at]]=J);return O},e=[1,2],i=[1,3],r=[1,4],s=[2,4],n=[1,9],a=[1,11],o=[1,13],l=[1,14],h=[1,16],u=[1,17],p=[1,18],d=[1,24],g=[1,25],y=[1,26],x=[1,27],_=[1,28],w=[1,29],E=[1,30],R=[1,31],v=[1,32],T=[1,33],k=[1,34],A=[1,35],S=[1,36],m=[1,37],C=[1,38],f=[1,39],L=[1,41],b=[1,42],P=[1,43],U=[1,44],N=[1,45],D=[1,46],F=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,54,59,60,61,62,70],I=[4,5,16,50,52,53],M=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],z=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,54,59,60,61,62,70],st=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,54,59,60,61,62,70],j=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,54,59,60,61,62,70],dt=[68,69,70],K=[1,120],G={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,note:54,placement:55,text2:56,over:57,actor_pair:58,links:59,link:60,properties:61,details:62,spaceList:63,",":64,left_of:65,right_of:66,signaltype:67,"+":68,"-":69,ACTOR:70,SOLID_OPEN_ARROW:71,DOTTED_OPEN_ARROW:72,SOLID_ARROW:73,DOTTED_ARROW:74,SOLID_CROSS:75,DOTTED_CROSS:76,SOLID_POINT:77,DOTTED_POINT:78,TXT:79,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",54:"note",57:"over",59:"links",60:"link",61:"properties",62:"details",64:",",65:"left_of",66:"right_of",68:"+",69:"-",70:"ACTOR",71:"SOLID_OPEN_ARROW",72:"DOTTED_OPEN_ARROW",73:"SOLID_ARROW",74:"DOTTED_ARROW",75:"SOLID_CROSS",76:"DOTTED_CROSS",77:"SOLID_POINT",78:"DOTTED_POINT",79:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[63,2],[63,1],[58,3],[58,1],[55,1],[55,1],[17,5],[17,5],[17,4],[22,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[56,1]],performAction:function(J,O,at,W,ft,V,vt){var X=V.length-1;switch(ft){case 3:return W.apply(V[X]),V[X];case 4:case 9:this.$=[];break;case 5:case 10:V[X-1].push(V[X]),this.$=V[X-1];break;case 6:case 7:case 11:case 12:this.$=V[X];break;case 8:case 13:this.$=[];break;case 15:V[X].type="createParticipant",this.$=V[X];break;case 16:V[X-1].unshift({type:"boxStart",boxData:W.parseBoxData(V[X-2])}),V[X-1].push({type:"boxEnd",boxText:V[X-2]}),this.$=V[X-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(V[X-2]),sequenceIndexStep:Number(V[X-1]),sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(V[X-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:W.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:W.LINETYPE.ACTIVE_START,actor:V[X-1]};break;case 23:this.$={type:"activeEnd",signalType:W.LINETYPE.ACTIVE_END,actor:V[X-1]};break;case 29:W.setDiagramTitle(V[X].substring(6)),this.$=V[X].substring(6);break;case 30:W.setDiagramTitle(V[X].substring(7)),this.$=V[X].substring(7);break;case 31:this.$=V[X].trim(),W.setAccTitle(this.$);break;case 32:case 33:this.$=V[X].trim(),W.setAccDescription(this.$);break;case 34:V[X-1].unshift({type:"loopStart",loopText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.LOOP_START}),V[X-1].push({type:"loopEnd",loopText:V[X-2],signalType:W.LINETYPE.LOOP_END}),this.$=V[X-1];break;case 35:V[X-1].unshift({type:"rectStart",color:W.parseMessage(V[X-2]),signalType:W.LINETYPE.RECT_START}),V[X-1].push({type:"rectEnd",color:W.parseMessage(V[X-2]),signalType:W.LINETYPE.RECT_END}),this.$=V[X-1];break;case 36:V[X-1].unshift({type:"optStart",optText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.OPT_START}),V[X-1].push({type:"optEnd",optText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.OPT_END}),this.$=V[X-1];break;case 37:V[X-1].unshift({type:"altStart",altText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.ALT_START}),V[X-1].push({type:"altEnd",signalType:W.LINETYPE.ALT_END}),this.$=V[X-1];break;case 38:V[X-1].unshift({type:"parStart",parText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.PAR_START}),V[X-1].push({type:"parEnd",signalType:W.LINETYPE.PAR_END}),this.$=V[X-1];break;case 39:V[X-1].unshift({type:"parStart",parText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.PAR_OVER_START}),V[X-1].push({type:"parEnd",signalType:W.LINETYPE.PAR_END}),this.$=V[X-1];break;case 40:V[X-1].unshift({type:"criticalStart",criticalText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.CRITICAL_START}),V[X-1].push({type:"criticalEnd",signalType:W.LINETYPE.CRITICAL_END}),this.$=V[X-1];break;case 41:V[X-1].unshift({type:"breakStart",breakText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.BREAK_START}),V[X-1].push({type:"breakEnd",optText:W.parseMessage(V[X-2]),signalType:W.LINETYPE.BREAK_END}),this.$=V[X-1];break;case 43:this.$=V[X-3].concat([{type:"option",optionText:W.parseMessage(V[X-1]),signalType:W.LINETYPE.CRITICAL_OPTION},V[X]]);break;case 45:this.$=V[X-3].concat([{type:"and",parText:W.parseMessage(V[X-1]),signalType:W.LINETYPE.PAR_AND},V[X]]);break;case 47:this.$=V[X-3].concat([{type:"else",altText:W.parseMessage(V[X-1]),signalType:W.LINETYPE.ALT_ELSE},V[X]]);break;case 48:V[X-3].draw="participant",V[X-3].type="addParticipant",V[X-3].description=W.parseMessage(V[X-1]),this.$=V[X-3];break;case 49:V[X-1].draw="participant",V[X-1].type="addParticipant",this.$=V[X-1];break;case 50:V[X-3].draw="actor",V[X-3].type="addParticipant",V[X-3].description=W.parseMessage(V[X-1]),this.$=V[X-3];break;case 51:V[X-1].draw="actor",V[X-1].type="addParticipant",this.$=V[X-1];break;case 52:V[X-1].type="destroyParticipant",this.$=V[X-1];break;case 53:this.$=[V[X-1],{type:"addNote",placement:V[X-2],actor:V[X-1].actor,text:V[X]}];break;case 54:V[X-2]=[].concat(V[X-1],V[X-1]).slice(0,2),V[X-2][0]=V[X-2][0].actor,V[X-2][1]=V[X-2][1].actor,this.$=[V[X-1],{type:"addNote",placement:W.PLACEMENT.OVER,actor:V[X-2].slice(0,2),text:V[X]}];break;case 55:this.$=[V[X-1],{type:"addLinks",actor:V[X-1].actor,text:V[X]}];break;case 56:this.$=[V[X-1],{type:"addALink",actor:V[X-1].actor,text:V[X]}];break;case 57:this.$=[V[X-1],{type:"addProperties",actor:V[X-1].actor,text:V[X]}];break;case 58:this.$=[V[X-1],{type:"addDetails",actor:V[X-1].actor,text:V[X]}];break;case 61:this.$=[V[X-2],V[X]];break;case 62:this.$=V[X];break;case 63:this.$=W.PLACEMENT.LEFTOF;break;case 64:this.$=W.PLACEMENT.RIGHTOF;break;case 65:this.$=[V[X-4],V[X-1],{type:"addMessage",from:V[X-4].actor,to:V[X-1].actor,signalType:V[X-3],msg:V[X],activate:!0},{type:"activeStart",signalType:W.LINETYPE.ACTIVE_START,actor:V[X-1]}];break;case 66:this.$=[V[X-4],V[X-1],{type:"addMessage",from:V[X-4].actor,to:V[X-1].actor,signalType:V[X-3],msg:V[X]},{type:"activeEnd",signalType:W.LINETYPE.ACTIVE_END,actor:V[X-4]}];break;case 67:this.$=[V[X-3],V[X-1],{type:"addMessage",from:V[X-3].actor,to:V[X-1].actor,signalType:V[X-2],msg:V[X]}];break;case 68:this.$={type:"addParticipant",actor:V[X]};break;case 69:this.$=W.LINETYPE.SOLID_OPEN;break;case 70:this.$=W.LINETYPE.DOTTED_OPEN;break;case 71:this.$=W.LINETYPE.SOLID;break;case 72:this.$=W.LINETYPE.DOTTED;break;case 73:this.$=W.LINETYPE.SOLID_CROSS;break;case 74:this.$=W.LINETYPE.DOTTED_CROSS;break;case 75:this.$=W.LINETYPE.SOLID_POINT;break;case 76:this.$=W.LINETYPE.DOTTED_POINT;break;case 77:this.$=W.parseMessage(V[X].trim().substring(1));break}},table:[{3:1,4:e,5:i,6:r},{1:[3]},{3:5,4:e,5:i,6:r},{3:6,4:e,5:i,6:r},t([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],s,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:n,5:a,8:8,9:10,12:12,13:o,14:l,17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:w,37:E,38:R,39:v,41:T,43:k,44:A,46:S,50:m,52:C,53:f,54:L,59:b,60:P,61:U,62:N,70:D},t(F,[2,5]),{9:47,12:12,13:o,14:l,17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:w,37:E,38:R,39:v,41:T,43:k,44:A,46:S,50:m,52:C,53:f,54:L,59:b,60:P,61:U,62:N,70:D},t(F,[2,7]),t(F,[2,8]),t(F,[2,14]),{12:48,50:m,52:C,53:f},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,70:D},{22:55,70:D},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},t(F,[2,29]),t(F,[2,30]),{32:[1,61]},{34:[1,62]},t(F,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,70:D},{22:72,70:D},{22:73,70:D},{67:74,71:[1,75],72:[1,76],73:[1,77],74:[1,78],75:[1,79],76:[1,80],77:[1,81],78:[1,82]},{55:83,57:[1,84],65:[1,85],66:[1,86]},{22:87,70:D},{22:88,70:D},{22:89,70:D},{22:90,70:D},t([5,51,64,71,72,73,74,75,76,77,78,79],[2,68]),t(F,[2,6]),t(F,[2,15]),t(I,[2,9],{10:91}),t(F,[2,17]),{5:[1,93],19:[1,92]},{5:[1,94]},t(F,[2,21]),{5:[1,95]},{5:[1,96]},t(F,[2,24]),t(F,[2,25]),t(F,[2,26]),t(F,[2,27]),t(F,[2,28]),t(F,[2,31]),t(F,[2,32]),t(M,s,{7:97}),t(M,s,{7:98}),t(M,s,{7:99}),t(z,s,{40:100,7:101}),t(st,s,{42:102,7:103}),t(st,s,{7:103,42:104}),t(j,s,{45:105,7:106}),t(M,s,{7:107}),{5:[1,109],51:[1,108]},{5:[1,111],51:[1,110]},{5:[1,112]},{22:115,68:[1,113],69:[1,114],70:D},t(dt,[2,69]),t(dt,[2,70]),t(dt,[2,71]),t(dt,[2,72]),t(dt,[2,73]),t(dt,[2,74]),t(dt,[2,75]),t(dt,[2,76]),{22:116,70:D},{22:118,58:117,70:D},{70:[2,63]},{70:[2,64]},{56:119,79:K},{56:121,79:K},{56:122,79:K},{56:123,79:K},{4:[1,126],5:[1,128],11:125,12:127,16:[1,124],50:m,52:C,53:f},{5:[1,129]},t(F,[2,19]),t(F,[2,20]),t(F,[2,22]),t(F,[2,23]),{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,130],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:w,37:E,38:R,39:v,41:T,43:k,44:A,46:S,50:m,52:C,53:f,54:L,59:b,60:P,61:U,62:N,70:D},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,131],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:w,37:E,38:R,39:v,41:T,43:k,44:A,46:S,50:m,52:C,53:f,54:L,59:b,60:P,61:U,62:N,70:D},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,132],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:w,37:E,38:R,39:v,41:T,43:k,44:A,46:S,50:m,52:C,53:f,54:L,59:b,60:P,61:U,62:N,70:D},{16:[1,133]},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,46],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:w,37:E,38:R,39:v,41:T,43:k,44:A,46:S,49:[1,134],50:m,52:C,53:f,54:L,59:b,60:P,61:U,62:N,70:D},{16:[1,135]},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,44],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:w,37:E,38:R,39:v,41:T,43:k,44:A,46:S,48:[1,136],50:m,52:C,53:f,54:L,59:b,60:P,61:U,62:N,70:D},{16:[1,137]},{16:[1,138]},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,42],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:w,37:E,38:R,39:v,41:T,43:k,44:A,46:S,47:[1,139],50:m,52:C,53:f,54:L,59:b,60:P,61:U,62:N,70:D},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,140],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:w,37:E,38:R,39:v,41:T,43:k,44:A,46:S,50:m,52:C,53:f,54:L,59:b,60:P,61:U,62:N,70:D},{15:[1,141]},t(F,[2,49]),{15:[1,142]},t(F,[2,51]),t(F,[2,52]),{22:143,70:D},{22:144,70:D},{56:145,79:K},{56:146,79:K},{56:147,79:K},{64:[1,148],79:[2,62]},{5:[2,55]},{5:[2,77]},{5:[2,56]},{5:[2,57]},{5:[2,58]},t(F,[2,16]),t(I,[2,10]),{12:149,50:m,52:C,53:f},t(I,[2,12]),t(I,[2,13]),t(F,[2,18]),t(F,[2,34]),t(F,[2,35]),t(F,[2,36]),t(F,[2,37]),{15:[1,150]},t(F,[2,38]),{15:[1,151]},t(F,[2,39]),t(F,[2,40]),{15:[1,152]},t(F,[2,41]),{5:[1,153]},{5:[1,154]},{56:155,79:K},{56:156,79:K},{5:[2,67]},{5:[2,53]},{5:[2,54]},{22:157,70:D},t(I,[2,11]),t(z,s,{7:101,40:158}),t(st,s,{7:103,42:159}),t(j,s,{7:106,45:160}),t(F,[2,48]),t(F,[2,50]),{5:[2,65]},{5:[2,66]},{79:[2,61]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],85:[2,63],86:[2,64],119:[2,55],120:[2,77],121:[2,56],122:[2,57],123:[2,58],145:[2,67],146:[2,53],147:[2,54],155:[2,65],156:[2,66],157:[2,61],158:[2,47],159:[2,45],160:[2,43]},parseError:function(J,O){if(O.recoverable)this.trace(J);else{var at=new Error(J);throw at.hash=O,at}},parse:function(J){var O=this,at=[0],W=[],ft=[null],V=[],vt=this.table,X="",St=0,bt=0,Vt=2,Bt=1,Wt=V.slice.call(arguments,1),pt=Object.create(this.lexer),ut={yy:{}};for(var ot in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ot)&&(ut.yy[ot]=this.yy[ot]);pt.setInput(J,ut.yy),ut.yy.lexer=pt,ut.yy.parser=this,typeof pt.yylloc>"u"&&(pt.yylloc={});var lt=pt.yylloc;V.push(lt);var ht=pt.options&&pt.options.ranges;typeof ut.yy.parseError=="function"?this.parseError=ut.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function $(){var fe;return fe=W.pop()||pt.lex()||Bt,typeof fe!="number"&&(fe instanceof Array&&(W=fe,fe=W.pop()),fe=O.symbols_[fe]||fe),fe}for(var rt,it,ct,re,Qt={},de,zt,Gt,qt;;){if(it=at[at.length-1],this.defaultActions[it]?ct=this.defaultActions[it]:((rt===null||typeof rt>"u")&&(rt=$()),ct=vt[it]&&vt[it][rt]),typeof ct>"u"||!ct.length||!ct[0]){var Ee="";qt=[];for(de in vt[it])this.terminals_[de]&&de>Vt&&qt.push("'"+this.terminals_[de]+"'");pt.showPosition?Ee="Parse error on line "+(St+1)+`:
`+pt.showPosition()+`
Expecting `+qt.join(", ")+", got '"+(this.terminals_[rt]||rt)+"'":Ee="Parse error on line "+(St+1)+": Unexpected "+(rt==Bt?"end of input":"'"+(this.terminals_[rt]||rt)+"'"),this.parseError(Ee,{text:pt.match,token:this.terminals_[rt]||rt,line:pt.yylineno,loc:lt,expected:qt})}if(ct[0]instanceof Array&&ct.length>1)throw new Error("Parse Error: multiple actions possible at state: "+it+", token: "+rt);switch(ct[0]){case 1:at.push(rt),ft.push(pt.yytext),V.push(pt.yylloc),at.push(ct[1]),rt=null,bt=pt.yyleng,X=pt.yytext,St=pt.yylineno,lt=pt.yylloc;break;case 2:if(zt=this.productions_[ct[1]][1],Qt.$=ft[ft.length-zt],Qt._$={first_line:V[V.length-(zt||1)].first_line,last_line:V[V.length-1].last_line,first_column:V[V.length-(zt||1)].first_column,last_column:V[V.length-1].last_column},ht&&(Qt._$.range=[V[V.length-(zt||1)].range[0],V[V.length-1].range[1]]),re=this.performAction.apply(Qt,[X,bt,St,ut.yy,ct[1],ft,V].concat(Wt)),typeof re<"u")return re;zt&&(at=at.slice(0,-1*zt*2),ft=ft.slice(0,-1*zt),V=V.slice(0,-1*zt)),at.push(this.productions_[ct[1]][0]),ft.push(Qt.$),V.push(Qt._$),Gt=vt[at[at.length-2]][at[at.length-1]],at.push(Gt);break;case 3:return!0}}return!0}},tt=(function(){var Q={EOF:1,parseError:function(O,at){if(this.yy.parser)this.yy.parser.parseError(O,at);else throw new Error(O)},setInput:function(J,O){return this.yy=O||this.yy||{},this._input=J,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var J=this._input[0];this.yytext+=J,this.yyleng++,this.offset++,this.match+=J,this.matched+=J;var O=J.match(/(?:\r\n?|\n).*/g);return O?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),J},unput:function(J){var O=J.length,at=J.split(/(?:\r\n?|\n)/g);this._input=J+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-O),this.offset-=O;var W=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),at.length-1&&(this.yylineno-=at.length-1);var ft=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:at?(at.length===W.length?this.yylloc.first_column:0)+W[W.length-at.length].length-at[0].length:this.yylloc.first_column-O},this.options.ranges&&(this.yylloc.range=[ft[0],ft[0]+this.yyleng-O]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(J){this.unput(this.match.slice(J))},pastInput:function(){var J=this.matched.substr(0,this.matched.length-this.match.length);return(J.length>20?"...":"")+J.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var J=this.match;return J.length<20&&(J+=this._input.substr(0,20-J.length)),(J.substr(0,20)+(J.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var J=this.pastInput(),O=new Array(J.length+1).join("-");return J+this.upcomingInput()+`
`+O+"^"},test_match:function(J,O){var at,W,ft;if(this.options.backtrack_lexer&&(ft={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ft.yylloc.range=this.yylloc.range.slice(0))),W=J[0].match(/(?:\r\n?|\n).*/g),W&&(this.yylineno+=W.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:W?W[W.length-1].length-W[W.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+J[0].length},this.yytext+=J[0],this.match+=J[0],this.matches=J,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(J[0].length),this.matched+=J[0],at=this.performAction.call(this,this.yy,this,O,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),at)return at;if(this._backtrack){for(var V in ft)this[V]=ft[V];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var J,O,at,W;this._more||(this.yytext="",this.match="");for(var ft=this._currentRules(),V=0;V<ft.length;V++)if(at=this._input.match(this.rules[ft[V]]),at&&(!O||at[0].length>O[0].length)){if(O=at,W=V,this.options.backtrack_lexer){if(J=this.test_match(at,ft[V]),J!==!1)return J;if(this._backtrack){O=!1;continue}else return!1}else if(!this.options.flex)break}return O?(J=this.test_match(O,ft[W]),J!==!1?J:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var O=this.next();return O||this.lex()},begin:function(O){this.conditionStack.push(O)},popState:function(){var O=this.conditionStack.length-1;return O>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(O){return O=this.conditionStack.length-1-Math.abs(O||0),O>=0?this.conditionStack[O]:"INITIAL"},pushState:function(O){this.begin(O)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(O,at,W,ft){switch(W){case 0:return 5;case 1:break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:return 19;case 7:return this.begin("LINE"),14;case 8:return this.begin("ID"),50;case 9:return this.begin("ID"),52;case 10:return 13;case 11:return this.begin("ID"),53;case 12:return at.yytext=at.yytext.trim(),this.begin("ALIAS"),70;case 13:return this.popState(),this.popState(),this.begin("LINE"),51;case 14:return this.popState(),this.popState(),5;case 15:return this.begin("LINE"),36;case 16:return this.begin("LINE"),37;case 17:return this.begin("LINE"),38;case 18:return this.begin("LINE"),39;case 19:return this.begin("LINE"),49;case 20:return this.begin("LINE"),41;case 21:return this.begin("LINE"),43;case 22:return this.begin("LINE"),48;case 23:return this.begin("LINE"),44;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),46;case 26:return this.popState(),15;case 27:return 16;case 28:return 65;case 29:return 66;case 30:return 59;case 31:return 60;case 32:return 61;case 33:return 62;case 34:return 57;case 35:return 54;case 36:return this.begin("ID"),21;case 37:return this.begin("ID"),23;case 38:return 29;case 39:return 30;case 40:return this.begin("acc_title"),31;case 41:return this.popState(),"acc_title_value";case 42:return this.begin("acc_descr"),33;case 43:return this.popState(),"acc_descr_value";case 44:this.begin("acc_descr_multiline");break;case 45:this.popState();break;case 46:return"acc_descr_multiline_value";case 47:return 6;case 48:return 18;case 49:return 20;case 50:return 64;case 51:return 5;case 52:return at.yytext=at.yytext.trim(),70;case 53:return 73;case 54:return 74;case 55:return 71;case 56:return 72;case 57:return 75;case 58:return 76;case 59:return 77;case 60:return 78;case 61:return 79;case 62:return 68;case 63:return 69;case 64:return 5;case 65:return"INVALID"}},rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[45,46],inclusive:!1},acc_descr:{rules:[43],inclusive:!1},acc_title:{rules:[41],inclusive:!1},ID:{rules:[2,3,12],inclusive:!1},ALIAS:{rules:[2,3,13,14],inclusive:!1},LINE:{rules:[2,3,26],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,36,37,38,39,40,42,44,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65],inclusive:!0}}};return Q})();G.lexer=tt;function nt(){this.yy={}}return nt.prototype=G,G.Parser=nt,new nt})();uo.parser=uo;const j6=uo;class X6{constructor(e){this.init=e,this.records=this.init()}reset(){this.records=this.init()}}const _t=new X6(()=>({prevActor:void 0,actors:{},createdActors:{},destroyedActors:{},boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0})),$6=function(t){_t.records.boxes.push({name:t.text,wrap:t.wrap===void 0&&Ar()||!!t.wrap,fill:t.color,actorKeys:[]}),_t.records.currentBox=_t.records.boxes.slice(-1)[0]},fo=function(t,e,i,r){let s=_t.records.currentBox;const n=_t.records.actors[t];if(n){if(_t.records.currentBox&&n.box&&_t.records.currentBox!==n.box)throw new Error("A same participant should only be defined in one Box: "+n.name+" can't be in '"+n.box.name+"' and in '"+_t.records.currentBox.name+"' at the same time.");if(s=n.box?n.box:_t.records.currentBox,n.box=s,n&&e===n.name&&i==null)return}(i==null||i.text==null)&&(i={text:e,wrap:null,type:r}),(r==null||i.text==null)&&(i={text:e,wrap:null,type:r}),_t.records.actors[t]={box:s,name:e,description:i.text,wrap:i.wrap===void 0&&Ar()||!!i.wrap,prevActor:_t.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:r||"participant"},_t.records.prevActor&&_t.records.actors[_t.records.prevActor]&&(_t.records.actors[_t.records.prevActor].nextActor=t),_t.records.currentBox&&_t.records.currentBox.actorKeys.push(t),_t.records.prevActor=t},K6=t=>{let e,i=0;for(e=0;e<_t.records.messages.length;e++)_t.records.messages[e].type===qs.ACTIVE_START&&_t.records.messages[e].from.actor===t&&i++,_t.records.messages[e].type===qs.ACTIVE_END&&_t.records.messages[e].from.actor===t&&i--;return i},Q6=function(t,e,i,r){_t.records.messages.push({from:t,to:e,message:i.text,wrap:i.wrap===void 0&&Ar()||!!i.wrap,answer:r})},ce=function(t,e,i={text:void 0,wrap:void 0},r,s=!1){if(r===qs.ACTIVE_END&&K6(t.actor)<1){let a=new Error("Trying to inactivate an inactive participant ("+t.actor+")");throw a.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},a}return _t.records.messages.push({from:t,to:e,message:i.text,wrap:i.wrap===void 0&&Ar()||!!i.wrap,type:r,activate:s}),!0},Z6=function(){return _t.records.boxes.length>0},J6=function(){return _t.records.boxes.some(t=>t.name)},t_=function(){return _t.records.messages},e_=function(){return _t.records.boxes},i_=function(){return _t.records.actors},r_=function(){return _t.records.createdActors},s_=function(){return _t.records.destroyedActors},nn=function(t){return _t.records.actors[t]},n_=function(){return Object.keys(_t.records.actors)},a_=function(){_t.records.sequenceNumbersEnabled=!0},o_=function(){_t.records.sequenceNumbersEnabled=!1},l_=()=>_t.records.sequenceNumbersEnabled,c_=function(t){_t.records.wrapEnabled=t},Ar=()=>_t.records.wrapEnabled!==void 0?_t.records.wrapEnabled:Y().sequence.wrap,h_=function(){_t.reset(),Oe()},u_=function(t){const e=t.trim(),i={text:e.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:e.match(/^:?wrap:/)!==null?!0:e.match(/^:?nowrap:/)!==null?!1:void 0};return B.debug("parseMessage:",i),i},d_=function(t){const e=t.match(/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/);let i=e!=null&&e[1]?e[1].trim():"transparent",r=e!=null&&e[2]?e[2].trim():void 0;if(window&&window.CSS)window.CSS.supports("color",i)||(i="transparent",r=t.trim());else{const s=new Option().style;s.color=i,s.color!==i&&(i="transparent",r=t.trim())}return{color:i,text:r!==void 0?te(r.replace(/^:?(?:no)?wrap:/,""),Y()):void 0,wrap:r!==void 0?r.match(/^:?wrap:/)!==null?!0:r.match(/^:?nowrap:/)!==null?!1:void 0:void 0}},qs={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32},f_={FILLED:0,OPEN:1},p_={LEFTOF:0,RIGHTOF:1,OVER:2},L0=function(t,e,i){const r={actor:t,placement:e,message:i.text,wrap:i.wrap===void 0&&Ar()||!!i.wrap},s=[].concat(t,t);_t.records.notes.push(r),_t.records.messages.push({from:s[0],to:s[1],message:i.text,wrap:i.wrap===void 0&&Ar()||!!i.wrap,type:qs.NOTE,placement:e})},B0=function(t,e){const i=nn(t);try{let r=te(e.text,Y());r=r.replace(/&amp;/g,"&"),r=r.replace(/&equals;/g,"=");const s=JSON.parse(r);kl(i,s)}catch(r){B.error("error while parsing actor link text",r)}},g_=function(t,e){const i=nn(t);try{const a={};let o=te(e.text,Y());var r=o.indexOf("@");o=o.replace(/&amp;/g,"&"),o=o.replace(/&equals;/g,"=");var s=o.slice(0,r-1).trim(),n=o.slice(r+1).trim();a[s]=n,kl(i,a)}catch(a){B.error("error while parsing actor link text",a)}};function kl(t,e){if(t.links==null)t.links=e;else for(let i in e)t.links[i]=e[i]}const I0=function(t,e){const i=nn(t);try{let r=te(e.text,Y());const s=JSON.parse(r);D0(i,s)}catch(r){B.error("error while parsing actor properties text",r)}};function D0(t,e){if(t.properties==null)t.properties=e;else for(let i in e)t.properties[i]=e[i]}function y_(){_t.records.currentBox=void 0}const F0=function(t,e){const i=nn(t),r=document.getElementById(e.text);try{const s=r.innerHTML,n=JSON.parse(s);n.properties&&D0(i,n.properties),n.links&&kl(i,n.links)}catch(s){B.error("error while parsing actor details text",s)}},m_=function(t,e){if(t!==void 0&&t.properties!==void 0)return t.properties[e]},R0=function(t){if(Array.isArray(t))t.forEach(function(e){R0(e)});else switch(t.type){case"sequenceIndex":_t.records.messages.push({from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":fo(t.actor,t.actor,t.description,t.draw);break;case"createParticipant":if(_t.records.actors[t.actor])throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");_t.records.lastCreated=t.actor,fo(t.actor,t.actor,t.description,t.draw),_t.records.createdActors[t.actor]=_t.records.messages.length;break;case"destroyParticipant":_t.records.lastDestroyed=t.actor,_t.records.destroyedActors[t.actor]=_t.records.messages.length;break;case"activeStart":ce(t.actor,void 0,void 0,t.signalType);break;case"activeEnd":ce(t.actor,void 0,void 0,t.signalType);break;case"addNote":L0(t.actor,t.placement,t.text);break;case"addLinks":B0(t.actor,t.text);break;case"addALink":g_(t.actor,t.text);break;case"addProperties":I0(t.actor,t.text);break;case"addDetails":F0(t.actor,t.text);break;case"addMessage":if(_t.records.lastCreated){if(t.to!==_t.records.lastCreated)throw new Error("The created participant "+_t.records.lastCreated+" does not have an associated creating message after its declaration. Please check the sequence diagram.");_t.records.lastCreated=void 0}else if(_t.records.lastDestroyed){if(t.to!==_t.records.lastDestroyed&&t.from!==_t.records.lastDestroyed)throw new Error("The destroyed participant "+_t.records.lastDestroyed+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");_t.records.lastDestroyed=void 0}ce(t.from,t.to,t.msg,t.signalType,t.activate);break;case"boxStart":$6(t.boxData);break;case"boxEnd":y_();break;case"loopStart":ce(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":ce(void 0,void 0,void 0,t.signalType);break;case"rectStart":ce(void 0,void 0,t.color,t.signalType);break;case"rectEnd":ce(void 0,void 0,void 0,t.signalType);break;case"optStart":ce(void 0,void 0,t.optText,t.signalType);break;case"optEnd":ce(void 0,void 0,void 0,t.signalType);break;case"altStart":ce(void 0,void 0,t.altText,t.signalType);break;case"else":ce(void 0,void 0,t.altText,t.signalType);break;case"altEnd":ce(void 0,void 0,void 0,t.signalType);break;case"setAccTitle":Pe(t.text);break;case"parStart":ce(void 0,void 0,t.parText,t.signalType);break;case"and":ce(void 0,void 0,t.parText,t.signalType);break;case"parEnd":ce(void 0,void 0,void 0,t.signalType);break;case"criticalStart":ce(void 0,void 0,t.criticalText,t.signalType);break;case"option":ce(void 0,void 0,t.optionText,t.signalType);break;case"criticalEnd":ce(void 0,void 0,void 0,t.signalType);break;case"breakStart":ce(void 0,void 0,t.breakText,t.signalType);break;case"breakEnd":ce(void 0,void 0,void 0,t.signalType);break}},Pc={addActor:fo,addMessage:Q6,addSignal:ce,addLinks:B0,addDetails:F0,addProperties:I0,autoWrap:Ar,setWrap:c_,enableSequenceNumbers:a_,disableSequenceNumbers:o_,showSequenceNumbers:l_,getMessages:t_,getActors:i_,getCreatedActors:r_,getDestroyedActors:s_,getActor:nn,getActorKeys:n_,getActorProperty:m_,getAccTitle:Ye,getBoxes:e_,getDiagramTitle:Ge,setDiagramTitle:ri,getConfig:()=>Y().sequence,clear:h_,parseMessage:u_,parseBoxData:d_,LINETYPE:qs,ARROWTYPE:f_,PLACEMENT:p_,addNote:L0,setAccTitle:Pe,apply:R0,setAccDescription:Ue,getAccDescription:He,hasAtLeastOneBox:Z6,hasAtLeastOneBoxWithTitle:J6},x_=t=>`.actor {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }

  text.actor > tspan {
    fill: ${t.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${t.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${t.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${t.signalColor};
  }

  #arrowhead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .sequenceNumber {
    fill: ${t.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${t.signalColor};
  }

  #crosshead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .messageText {
    fill: ${t.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${t.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${t.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${t.noteBorderColor};
    fill: ${t.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${t.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation1 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation2 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${t.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
    stroke-width: 2px;
  }
`,b_=x_,Cr=36,N0="actor-top",O0="actor-bottom",_l=function(t,e){return la(t,e)},k_=function(t,e,i,r,s){if(e.links===void 0||e.links===null||Object.keys(e.links).length===0)return{height:0,width:0};const n=e.links,a=e.actorCnt,o=e.rectData;var l="none";s&&(l="block !important");const h=t.append("g");h.attr("id","actor"+a+"_popup"),h.attr("class","actorPopupMenu"),h.attr("display",l);var u="";o.class!==void 0&&(u=" "+o.class);let p=o.width>i?o.width:i;const d=h.append("rect");if(d.attr("class","actorPopupMenuPanel"+u),d.attr("x",o.x),d.attr("y",o.height),d.attr("fill",o.fill),d.attr("stroke",o.stroke),d.attr("width",p),d.attr("height",o.height),d.attr("rx",o.rx),d.attr("ry",o.ry),n!=null){var g=20;for(let _ in n){var y=h.append("a"),x=Fr.sanitizeUrl(n[_]);y.attr("xlink:href",x),y.attr("target","_blank"),P_(r)(_,y,o.x+10,o.height+g,p,20,{class:"actor"},r),g+=30}}return d.attr("height",g),{height:o.height+g,width:p}},__=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }"},Xn=async function(t,e,i=null){let r=t.append("foreignObject");const s=await Nr(e.text,ee()),a=r.append("xhtml:div").attr("style","width: fit-content;").attr("xmlns","http://www.w3.org/1999/xhtml").html(s).node().getBoundingClientRect();if(r.attr("height",Math.round(a.height)).attr("width",Math.round(a.width)),e.class==="noteText"){const o=t.node().firstChild;o.setAttribute("height",a.height+2*e.textMargin);const l=o.getBBox();r.attr("x",Math.round(l.x+l.width/2-a.width/2)).attr("y",Math.round(l.y+l.height/2-a.height/2))}else if(i){let{startx:o,stopx:l,starty:h}=i;if(o>l){const u=o;o=l,l=u}r.attr("x",Math.round(o+Math.abs(o-l)/2-a.width/2)),e.class==="loopText"?r.attr("y",Math.round(h)):r.attr("y",Math.round(h-a.height))}return[r]},os=function(t,e){let i=0,r=0;const s=e.text.split(mt.lineBreakRegex),[n,a]=Or(e.fontSize);let o=[],l=0,h=()=>e.y;if(e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0)switch(e.valign){case"top":case"start":h=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":h=()=>Math.round(e.y+(i+r+e.textMargin)/2);break;case"bottom":case"end":h=()=>Math.round(e.y+(i+r+2*e.textMargin)-e.textMargin);break}if(e.anchor!==void 0&&e.textMargin!==void 0&&e.width!==void 0)switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle";break}for(let[u,p]of s.entries()){e.textMargin!==void 0&&e.textMargin===0&&n!==void 0&&(l=u*n);const d=t.append("text");d.attr("x",e.x),d.attr("y",h()),e.anchor!==void 0&&d.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),e.fontFamily!==void 0&&d.style("font-family",e.fontFamily),a!==void 0&&d.style("font-size",a),e.fontWeight!==void 0&&d.style("font-weight",e.fontWeight),e.fill!==void 0&&d.attr("fill",e.fill),e.class!==void 0&&d.attr("class",e.class),e.dy!==void 0?d.attr("dy",e.dy):l!==0&&d.attr("dy",l);const g=p||Bh;if(e.tspan){const y=d.append("tspan");y.attr("x",e.x),e.fill!==void 0&&y.attr("fill",e.fill),y.text(g)}else d.text(g);e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0&&(r+=(d._groups||d)[0][0].getBBox().height,i=r),o.push(d)}return o},P0=function(t,e){function i(s,n,a,o,l){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-l)+" "+(s+a-l*1.2)+","+(n+o)+" "+s+","+(n+o)}const r=t.append("polygon");return r.attr("points",i(e.x,e.y,e.width,e.height,7)),r.attr("class","labelBox"),e.y=e.y+e.height/2,os(t,e),r};let Si=-1;const M0=(t,e,i,r)=>{t.select&&i.forEach(s=>{const n=e[s],a=t.select("#actor"+n.actorCnt);!r.mirrorActors&&n.stopy?a.attr("y2",n.stopy+n.height/2):r.mirrorActors&&a.attr("y2",n.stopy)})},T_=async function(t,e,i,r){const s=r?e.stopy:e.starty,n=e.x+e.width/2,a=s+5,o=t.append("g").lower();var l=o;r||(Si++,Object.keys(e.links||{}).length&&!i.forceMenus&&l.attr("onclick",__(`actor${Si}_popup`)).attr("cursor","pointer"),l.append("line").attr("id","actor"+Si).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line").attr("class","200").attr("stroke-width","0.5px").attr("stroke","#999"),l=o.append("g"),e.actorCnt=Si,e.links!=null&&l.attr("id","root-"+Si));const h=Pr();var u="actor";e.properties!=null&&e.properties.class?u=e.properties.class:h.fill="#eaeaea",r?u+=` ${O0}`:u+=` ${N0}`,h.x=e.x,h.y=s,h.width=e.width,h.height=e.height,h.class=u,h.rx=3,h.ry=3,h.name=e.name;const p=_l(l,h);if(e.rectData=h,e.properties!=null&&e.properties.icon){const g=e.properties.icon.trim();g.charAt(0)==="@"?ym(l,h.x+h.width-20,h.y+10,g.substr(1)):gm(l,h.x+h.width-20,h.y+10,g)}await Tl(i,fi(e.description))(e.description,l,h.x,h.y,h.width,h.height,{class:"actor"},i);let d=e.height;if(p.node){const g=p.node().getBBox();e.height=g.height,d=g.height}return d},C_=async function(t,e,i,r){const s=r?e.stopy:e.starty,n=e.x+e.width/2,a=s+80;t.lower(),r||(Si++,t.append("line").attr("id","actor"+Si).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line").attr("class","200").attr("stroke-width","0.5px").attr("stroke","#999"),e.actorCnt=Si);const o=t.append("g");let l="actor-man";r?l+=` ${O0}`:l+=` ${N0}`,o.attr("class",l),o.attr("name",e.name);const h=Pr();h.x=e.x,h.y=s,h.fill="#eaeaea",h.width=e.width,h.height=e.height,h.class="actor",h.rx=3,h.ry=3,o.append("line").attr("id","actor-man-torso"+Si).attr("x1",n).attr("y1",s+25).attr("x2",n).attr("y2",s+45),o.append("line").attr("id","actor-man-arms"+Si).attr("x1",n-Cr/2).attr("y1",s+33).attr("x2",n+Cr/2).attr("y2",s+33),o.append("line").attr("x1",n-Cr/2).attr("y1",s+60).attr("x2",n).attr("y2",s+45),o.append("line").attr("x1",n).attr("y1",s+45).attr("x2",n+Cr/2-2).attr("y2",s+60);const u=o.append("circle");u.attr("cx",e.x+e.width/2),u.attr("cy",s+10),u.attr("r",15),u.attr("width",e.width),u.attr("height",e.height);const p=o.node().getBBox();return e.height=p.height,await Tl(i,fi(e.description))(e.description,o,h.x,h.y+35,h.width,h.height,{class:"actor"},i),e.height},E_=async function(t,e,i,r){switch(e.type){case"actor":return await C_(t,e,i,r);case"participant":return await T_(t,e,i,r)}},S_=async function(t,e,i){const s=t.append("g");V0(s,e),e.name&&await Tl(i)(e.name,s,e.x,e.y+(e.textMaxHeight||0)/2,e.width,0,{class:"text"},i),s.lower()},w_=function(t){return t.append("g")},v_=function(t,e,i,r,s){const n=Pr(),a=e.anchored;n.x=e.startx,n.y=e.starty,n.class="activation"+s%3,n.width=e.stopx-e.startx,n.height=i-e.starty,_l(a,n)},A_=async function(t,e,i,r){const{boxMargin:s,boxTextMargin:n,labelBoxHeight:a,labelBoxWidth:o,messageFontFamily:l,messageFontSize:h,messageFontWeight:u}=r,p=t.append("g"),d=function(x,_,w,E){return p.append("line").attr("x1",x).attr("y1",_).attr("x2",w).attr("y2",E).attr("class","loopLine")};d(e.startx,e.starty,e.stopx,e.starty),d(e.stopx,e.starty,e.stopx,e.stopy),d(e.startx,e.stopy,e.stopx,e.stopy),d(e.startx,e.starty,e.startx,e.stopy),e.sections!==void 0&&e.sections.forEach(function(x){d(e.startx,x.y,e.stopx,x.y).style("stroke-dasharray","3, 3")});let g=jo();g.text=i,g.x=e.startx,g.y=e.starty,g.fontFamily=l,g.fontSize=h,g.fontWeight=u,g.anchor="middle",g.valign="middle",g.tspan=!1,g.width=o||50,g.height=a||20,g.textMargin=n,g.class="labelText",P0(p,g),g=z0(),g.text=e.title,g.x=e.startx+o/2+(e.stopx-e.startx)/2,g.y=e.starty+s+n,g.anchor="middle",g.valign="middle",g.textMargin=n,g.class="loopText",g.fontFamily=l,g.fontSize=h,g.fontWeight=u,g.wrap=!0;let y=fi(g.text)?await Xn(p,g,e):os(p,g);if(e.sectionTitles!==void 0){for(const[x,_]of Object.entries(e.sectionTitles))if(_.message){g.text=_.message,g.x=e.startx+(e.stopx-e.startx)/2,g.y=e.sections[x].y+s+n,g.class="loopText",g.anchor="middle",g.valign="middle",g.tspan=!1,g.fontFamily=l,g.fontSize=h,g.fontWeight=u,g.wrap=e.wrap,fi(g.text)?(e.starty=e.sections[x].y,await Xn(p,g,e)):os(p,g);let w=Math.round(y.map(E=>(E._groups||E)[0][0].getBBox().height).reduce((E,R)=>E+R));e.sections[x].height+=w-(s+n)}}return e.height=Math.round(e.stopy-e.starty),p},V0=function(t,e){R1(t,e)},L_=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},B_=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},I_=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},D_=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},F_=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},R_=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},N_=function(t){t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},z0=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},O_=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},Tl=(function(){function t(n,a,o,l,h,u,p){const d=a.append("text").attr("x",o+h/2).attr("y",l+u/2+5).style("text-anchor","middle").text(n);s(d,p)}function e(n,a,o,l,h,u,p,d){const{actorFontSize:g,actorFontFamily:y,actorFontWeight:x}=d,[_,w]=Or(g),E=n.split(mt.lineBreakRegex);for(let R=0;R<E.length;R++){const v=R*_-_*(E.length-1)/2,T=a.append("text").attr("x",o+h/2).attr("y",l).style("text-anchor","middle").style("font-size",w).style("font-weight",x).style("font-family",y);T.append("tspan").attr("x",o+h/2).attr("dy",v).text(E[R]),T.attr("y",l+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),s(T,p)}}function i(n,a,o,l,h,u,p,d){const g=a.append("switch"),x=g.append("foreignObject").attr("x",o).attr("y",l).attr("width",h).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");x.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),e(n,g,o,l,h,u,p,d),s(x,p)}async function r(n,a,o,l,h,u,p,d){const g=await Ks(n,ee()),y=a.append("switch"),_=y.append("foreignObject").attr("x",o+h/2-g.width/2).attr("y",l+u/2-g.height/2).attr("width",g.width).attr("height",g.height).append("xhtml:div").style("height","100%").style("width","100%");_.append("div").style("text-align","center").style("vertical-align","middle").html(await Nr(n,ee())),e(n,y,o,l,h,u,p,d),s(_,p)}function s(n,a){for(const o in a)a.hasOwnProperty(o)&&n.attr(o,a[o])}return function(n,a=!1){return a?r:n.textPlacement==="fo"?i:n.textPlacement==="old"?t:e}})(),P_=(function(){function t(s,n,a,o,l,h,u){const p=n.append("text").attr("x",a).attr("y",o).style("text-anchor","start").text(s);r(p,u)}function e(s,n,a,o,l,h,u,p){const{actorFontSize:d,actorFontFamily:g,actorFontWeight:y}=p,x=s.split(mt.lineBreakRegex);for(let _=0;_<x.length;_++){const w=_*d-d*(x.length-1)/2,E=n.append("text").attr("x",a).attr("y",o).style("text-anchor","start").style("font-size",d).style("font-weight",y).style("font-family",g);E.append("tspan").attr("x",a).attr("dy",w).text(x[_]),E.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(E,u)}}function i(s,n,a,o,l,h,u,p){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,p),r(y,u)}function r(s,n){for(const a in n)n.hasOwnProperty(a)&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}})(),he={drawRect:_l,drawText:os,drawLabel:P0,drawActor:E_,drawBox:S_,drawPopup:k_,anchorElement:w_,drawActivation:v_,drawLoop:A_,drawBackgroundRect:V0,insertArrowHead:D_,insertArrowFilledHead:F_,insertSequenceNumber:R_,insertArrowCrossHead:N_,insertDatabaseIcon:L_,insertComputerIcon:B_,insertClockIcon:I_,getTextObj:z0,getNoteRect:O_,fixLifeLineHeights:M0,sanitizeUrl:Fr.sanitizeUrl};let Z={};const gt={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(t=>t.height||0))+(this.loops.length===0?0:this.loops.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.messages.length===0?0:this.messages.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.notes.length===0?0:this.notes.map(t=>t.height||0).reduce((t,e)=>t+e))},clear:function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},addBox:function(t){this.boxes.push(t)},addActor:function(t){this.actors.push(t)},addLoop:function(t){this.loops.push(t)},addMessage:function(t){this.messages.push(t)},addNote:function(t){this.notes.push(t)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],boxes:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,W0(Y())},updateVal:function(t,e,i,r){t[e]===void 0?t[e]=i:t[e]=r(i,t[e])},updateBounds:function(t,e,i,r){const s=this;let n=0;function a(o){return function(h){n++;const u=s.sequenceItems.length-n+1;s.updateVal(h,"starty",e-u*Z.boxMargin,Math.min),s.updateVal(h,"stopy",r+u*Z.boxMargin,Math.max),s.updateVal(gt.data,"startx",t-u*Z.boxMargin,Math.min),s.updateVal(gt.data,"stopx",i+u*Z.boxMargin,Math.max),o!=="activation"&&(s.updateVal(h,"startx",t-u*Z.boxMargin,Math.min),s.updateVal(h,"stopx",i+u*Z.boxMargin,Math.max),s.updateVal(gt.data,"starty",e-u*Z.boxMargin,Math.min),s.updateVal(gt.data,"stopy",r+u*Z.boxMargin,Math.max))}}this.sequenceItems.forEach(a()),this.activations.forEach(a("activation"))},insert:function(t,e,i,r){const s=mt.getMin(t,i),n=mt.getMax(t,i),a=mt.getMin(e,r),o=mt.getMax(e,r);this.updateVal(gt.data,"startx",s,Math.min),this.updateVal(gt.data,"starty",a,Math.min),this.updateVal(gt.data,"stopx",n,Math.max),this.updateVal(gt.data,"stopy",o,Math.max),this.updateBounds(s,a,n,o)},newActivation:function(t,e,i){const r=i[t.from.actor],s=ma(t.from.actor).length||0,n=r.x+r.width/2+(s-1)*Z.activationWidth/2;this.activations.push({startx:n,starty:this.verticalPos+2,stopx:n+Z.activationWidth,stopy:void 0,actor:t.from.actor,anchored:he.anchorElement(e)})},endActivation:function(t){const e=this.activations.map(function(i){return i.actor}).lastIndexOf(t.from.actor);return this.activations.splice(e,1)[0]},createLoop:function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}},newLoop:function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))},endLoop:function(){return this.sequenceItems.pop()},isLoopOverlap:function(){return this.sequenceItems.length?this.sequenceItems[this.sequenceItems.length-1].overlap:!1},addSectionToLoop:function(t){const e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:gt.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)},saveVerticalPos:function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)},resetVerticalPos:function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=mt.getMax(this.data.stopy,this.verticalPos)},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},M_=async function(t,e){gt.bumpVerticalPos(Z.boxMargin),e.height=Z.boxMargin,e.starty=gt.getVerticalPos();const i=Pr();i.x=e.startx,i.y=e.starty,i.width=e.width||Z.width,i.class="note";const r=t.append("g"),s=he.drawRect(r,i),n=jo();n.x=e.startx,n.y=e.starty,n.width=i.width,n.dy="1em",n.text=e.message,n.class="noteText",n.fontFamily=Z.noteFontFamily,n.fontSize=Z.noteFontSize,n.fontWeight=Z.noteFontWeight,n.anchor=Z.noteAlign,n.textMargin=Z.noteMargin,n.valign="center";const a=fi(n.text)?await Xn(r,n):os(r,n),o=Math.round(a.map(l=>(l._groups||l)[0][0].getBBox().height).reduce((l,h)=>l+h));s.attr("height",o+2*Z.noteMargin),e.height+=o+2*Z.noteMargin,gt.bumpVerticalPos(o+2*Z.noteMargin),e.stopy=e.starty+o+2*Z.noteMargin,e.stopx=e.startx+i.width,gt.insert(e.startx,e.starty,e.stopx,e.stopy),gt.models.addNote(e)},Lr=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),Yr=t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight}),po=t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight});async function V_(t,e){gt.bumpVerticalPos(10);const{startx:i,stopx:r,message:s}=e,n=mt.splitBreaks(s).length,a=fi(s),o=a?await Ks(s,Y()):Rt.calculateTextDimensions(s,Lr(Z));if(!a){const p=o.height/n;e.height+=p,gt.bumpVerticalPos(p)}let l,h=o.height-10;const u=o.width;if(i===r){l=gt.getVerticalPos()+h,Z.rightAngles||(h+=Z.boxMargin,l=gt.getVerticalPos()+h),h+=30;const p=mt.getMax(u/2,Z.width/2);gt.insert(i-p,gt.getVerticalPos()-10+h,r+p,gt.getVerticalPos()+30+h)}else h+=Z.boxMargin,l=gt.getVerticalPos()+h,gt.insert(i,l-10,r,l);return gt.bumpVerticalPos(h),e.height+=h,e.stopy=e.starty+e.height,gt.insert(e.fromBounds,e.starty,e.toBounds,e.stopy),l}const z_=async function(t,e,i,r){const{startx:s,stopx:n,starty:a,message:o,type:l,sequenceIndex:h,sequenceVisible:u}=e,p=Rt.calculateTextDimensions(o,Lr(Z)),d=jo();d.x=s,d.y=a+10,d.width=n-s,d.class="messageText",d.dy="1em",d.text=o,d.fontFamily=Z.messageFontFamily,d.fontSize=Z.messageFontSize,d.fontWeight=Z.messageFontWeight,d.anchor=Z.messageAlign,d.valign="center",d.textMargin=Z.wrapPadding,d.tspan=!1,fi(d.text)?await Xn(t,d,{startx:s,stopx:n,starty:i}):os(t,d);const g=p.width;let y;s===n?Z.rightAngles?y=t.append("path").attr("d",`M  ${s},${i} H ${s+mt.getMax(Z.width/2,g/2)} V ${i+25} H ${s}`):y=t.append("path").attr("d","M "+s+","+i+" C "+(s+60)+","+(i-10)+" "+(s+60)+","+(i+30)+" "+s+","+(i+20)):(y=t.append("line"),y.attr("x1",s),y.attr("y1",i),y.attr("x2",n),y.attr("y2",i)),l===r.db.LINETYPE.DOTTED||l===r.db.LINETYPE.DOTTED_CROSS||l===r.db.LINETYPE.DOTTED_POINT||l===r.db.LINETYPE.DOTTED_OPEN?(y.style("stroke-dasharray","3, 3"),y.attr("class","messageLine1")):y.attr("class","messageLine0");let x="";Z.arrowMarkerAbsolute&&(x=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,x=x.replace(/\(/g,"\\("),x=x.replace(/\)/g,"\\)")),y.attr("stroke-width",2),y.attr("stroke","none"),y.style("fill","none"),(l===r.db.LINETYPE.SOLID||l===r.db.LINETYPE.DOTTED)&&y.attr("marker-end","url("+x+"#arrowhead)"),(l===r.db.LINETYPE.SOLID_POINT||l===r.db.LINETYPE.DOTTED_POINT)&&y.attr("marker-end","url("+x+"#filled-head)"),(l===r.db.LINETYPE.SOLID_CROSS||l===r.db.LINETYPE.DOTTED_CROSS)&&y.attr("marker-end","url("+x+"#crosshead)"),(u||Z.showSequenceNumbers)&&(y.attr("marker-start","url("+x+"#sequencenumber)"),t.append("text").attr("x",s).attr("y",i+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(h))},q_=async function(t,e,i,r,s,n,a){let o=0,l=0,h,u=0;for(const p of r){const d=e[p],g=d.box;h&&h!=g&&(gt.models.addBox(h),l+=Z.boxMargin+h.margin),g&&g!=h&&(g.x=o+l,g.y=s,l+=g.margin),d.width=d.width||Z.width,d.height=mt.getMax(d.height||Z.height,Z.height),d.margin=d.margin||Z.actorMargin,u=mt.getMax(u,d.height),i[d.name]&&(l+=d.width/2),d.x=o+l,d.starty=gt.getVerticalPos(),gt.insert(d.x,s,d.x+d.width,d.height),o+=d.width+l,d.box&&(d.box.width=o+g.margin-d.box.x),l=d.margin,h=d.box,gt.models.addActor(d)}h&&gt.models.addBox(h),gt.bumpVerticalPos(u)},go=async function(t,e,i,r){if(r){let s=0;gt.bumpVerticalPos(Z.boxMargin*2);for(const n of i){const a=e[n];a.stopy||(a.stopy=gt.getVerticalPos());const o=await he.drawActor(t,a,Z,!0);s=mt.getMax(s,o)}gt.bumpVerticalPos(s+Z.boxMargin)}else for(const s of i){const n=e[s];await he.drawActor(t,n,Z,!1)}},q0=function(t,e,i,r){let s=0,n=0;for(const a of i){const o=e[a],l=H_(o),h=he.drawPopup(t,o,l,Z,Z.forceMenus,r);h.height>s&&(s=h.height),h.width+o.x>n&&(n=h.width+o.x)}return{maxHeight:s,maxWidth:n}},W0=function(t){Ae(Z,t),t.fontFamily&&(Z.actorFontFamily=Z.noteFontFamily=Z.messageFontFamily=t.fontFamily),t.fontSize&&(Z.actorFontSize=Z.noteFontSize=Z.messageFontSize=t.fontSize),t.fontWeight&&(Z.actorFontWeight=Z.noteFontWeight=Z.messageFontWeight=t.fontWeight)},ma=function(t){return gt.activations.filter(function(e){return e.actor===t})},Mc=function(t,e){const i=e[t],r=ma(t),s=r.reduce(function(a,o){return mt.getMin(a,o.startx)},i.x+i.width/2-1),n=r.reduce(function(a,o){return mt.getMax(a,o.stopx)},i.x+i.width/2+1);return[s,n]};function Ci(t,e,i,r,s){gt.bumpVerticalPos(i);let n=r;if(e.id&&e.message&&t[e.id]){const a=t[e.id].width,o=Lr(Z);e.message=Rt.wrapLabel(`[${e.message}]`,a-2*Z.wrapPadding,o),e.width=a,e.wrap=!0;const l=Rt.calculateTextDimensions(e.message,o),h=mt.getMax(l.height,Z.labelBoxHeight);n=r+h,B.debug(`${h} - ${e.message}`)}s(e),gt.bumpVerticalPos(n)}function W_(t,e,i,r,s,n,a){function o(h,u){h.x<s[t.from].x?(gt.insert(e.stopx-u,e.starty,e.startx,e.stopy+h.height/2+Z.noteMargin),e.stopx=e.stopx+u):(gt.insert(e.startx,e.starty,e.stopx+u,e.stopy+h.height/2+Z.noteMargin),e.stopx=e.stopx-u)}function l(h,u){h.x<s[t.to].x?(gt.insert(e.startx-u,e.starty,e.stopx,e.stopy+h.height/2+Z.noteMargin),e.startx=e.startx+u):(gt.insert(e.stopx,e.starty,e.startx+u,e.stopy+h.height/2+Z.noteMargin),e.startx=e.startx-u)}if(n[t.to]==r){const h=s[t.to],u=h.type=="actor"?Cr/2+3:h.width/2+3;o(h,u),h.starty=i-h.height/2,gt.bumpVerticalPos(h.height/2)}else if(a[t.from]==r){const h=s[t.from];if(Z.mirrorActors){const u=h.type=="actor"?Cr/2:h.width/2;l(h,u)}h.stopy=i-h.height/2,gt.bumpVerticalPos(h.height/2)}else if(a[t.to]==r){const h=s[t.to];if(Z.mirrorActors){const u=h.type=="actor"?Cr/2+3:h.width/2+3;o(h,u)}h.stopy=i-h.height/2,gt.bumpVerticalPos(h.height/2)}}const Y_=async function(t,e,i,r){const{securityLevel:s,sequence:n}=Y();Z=n;let a;s==="sandbox"&&(a=yt("#i"+e));const o=s==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=s==="sandbox"?a.nodes()[0].contentDocument:document;gt.init(),B.debug(r.db);const h=s==="sandbox"?o.select(`[id="${e}"]`):yt(`[id="${e}"]`),u=r.db.getActors(),p=r.db.getCreatedActors(),d=r.db.getDestroyedActors(),g=r.db.getBoxes();let y=r.db.getActorKeys();const x=r.db.getMessages(),_=r.db.getDiagramTitle(),w=r.db.hasAtLeastOneBox(),E=r.db.hasAtLeastOneBoxWithTitle(),R=await U_(u,x,r);if(Z.height=await G_(u,R,g),he.insertComputerIcon(h),he.insertDatabaseIcon(h),he.insertClockIcon(h),w&&(gt.bumpVerticalPos(Z.boxMargin),E&&gt.bumpVerticalPos(g[0].textMaxHeight)),Z.hideUnusedParticipants===!0){const F=new Set;x.forEach(I=>{F.add(I.from),F.add(I.to)}),y=y.filter(I=>F.has(I))}await q_(h,u,p,y,0);const v=await $_(x,u,R,r);he.insertArrowHead(h),he.insertArrowCrossHead(h),he.insertArrowFilledHead(h),he.insertSequenceNumber(h);function T(F,I){const M=gt.endActivation(F);M.starty+18>I&&(M.starty=I-6,I+=12),he.drawActivation(h,M,I,Z,ma(F.from.actor).length),gt.insert(M.startx,I-10,M.stopx,I)}let k=1,A=1;const S=[],m=[];let C=0;for(const F of x){let I,M,z;switch(F.type){case r.db.LINETYPE.NOTE:gt.resetVerticalPos(),M=F.noteModel,await M_(h,M);break;case r.db.LINETYPE.ACTIVE_START:gt.newActivation(F,h,u);break;case r.db.LINETYPE.ACTIVE_END:T(F,gt.getVerticalPos());break;case r.db.LINETYPE.LOOP_START:Ci(v,F,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.LOOP_END:I=gt.endLoop(),await he.drawLoop(h,I,"loop",Z),gt.bumpVerticalPos(I.stopy-gt.getVerticalPos()),gt.models.addLoop(I);break;case r.db.LINETYPE.RECT_START:Ci(v,F,Z.boxMargin,Z.boxMargin,st=>gt.newLoop(void 0,st.message));break;case r.db.LINETYPE.RECT_END:I=gt.endLoop(),m.push(I),gt.models.addLoop(I),gt.bumpVerticalPos(I.stopy-gt.getVerticalPos());break;case r.db.LINETYPE.OPT_START:Ci(v,F,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.OPT_END:I=gt.endLoop(),await he.drawLoop(h,I,"opt",Z),gt.bumpVerticalPos(I.stopy-gt.getVerticalPos()),gt.models.addLoop(I);break;case r.db.LINETYPE.ALT_START:Ci(v,F,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.ALT_ELSE:Ci(v,F,Z.boxMargin+Z.boxTextMargin,Z.boxMargin,st=>gt.addSectionToLoop(st));break;case r.db.LINETYPE.ALT_END:I=gt.endLoop(),await he.drawLoop(h,I,"alt",Z),gt.bumpVerticalPos(I.stopy-gt.getVerticalPos()),gt.models.addLoop(I);break;case r.db.LINETYPE.PAR_START:case r.db.LINETYPE.PAR_OVER_START:Ci(v,F,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st)),gt.saveVerticalPos();break;case r.db.LINETYPE.PAR_AND:Ci(v,F,Z.boxMargin+Z.boxTextMargin,Z.boxMargin,st=>gt.addSectionToLoop(st));break;case r.db.LINETYPE.PAR_END:I=gt.endLoop(),await he.drawLoop(h,I,"par",Z),gt.bumpVerticalPos(I.stopy-gt.getVerticalPos()),gt.models.addLoop(I);break;case r.db.LINETYPE.AUTONUMBER:k=F.message.start||k,A=F.message.step||A,F.message.visible?r.db.enableSequenceNumbers():r.db.disableSequenceNumbers();break;case r.db.LINETYPE.CRITICAL_START:Ci(v,F,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.CRITICAL_OPTION:Ci(v,F,Z.boxMargin+Z.boxTextMargin,Z.boxMargin,st=>gt.addSectionToLoop(st));break;case r.db.LINETYPE.CRITICAL_END:I=gt.endLoop(),await he.drawLoop(h,I,"critical",Z),gt.bumpVerticalPos(I.stopy-gt.getVerticalPos()),gt.models.addLoop(I);break;case r.db.LINETYPE.BREAK_START:Ci(v,F,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.BREAK_END:I=gt.endLoop(),await he.drawLoop(h,I,"break",Z),gt.bumpVerticalPos(I.stopy-gt.getVerticalPos()),gt.models.addLoop(I);break;default:try{z=F.msgModel,z.starty=gt.getVerticalPos(),z.sequenceIndex=k,z.sequenceVisible=r.db.showSequenceNumbers();const st=await V_(h,z);W_(F,z,st,C,u,p,d),S.push({messageModel:z,lineStartY:st}),gt.models.addMessage(z)}catch(st){B.error("error while drawing message",st)}}[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT].includes(F.type)&&(k=k+A),C++}B.debug("createdActors",p),B.debug("destroyedActors",d),await go(h,u,y,!1);for(const F of S)await z_(h,F.messageModel,F.lineStartY,r);Z.mirrorActors&&await go(h,u,y,!0),m.forEach(F=>he.drawBackgroundRect(h,F)),M0(h,u,y,Z);for(const F of gt.models.boxes)F.height=gt.getVerticalPos()-F.y,gt.insert(F.x,F.y,F.x+F.width,F.height),F.startx=F.x,F.starty=F.y,F.stopx=F.startx+F.width,F.stopy=F.starty+F.height,F.stroke="rgb(0,0,0, 0.5)",await he.drawBox(h,F,Z);w&&gt.bumpVerticalPos(Z.boxMargin);const f=q0(h,u,y,l),{bounds:L}=gt.getBounds();let b=L.stopy-L.starty;b<f.maxHeight&&(b=f.maxHeight);let P=b+2*Z.diagramMarginY;Z.mirrorActors&&(P=P-Z.boxMargin+Z.bottomMarginAdj);let U=L.stopx-L.startx;U<f.maxWidth&&(U=f.maxWidth);const N=U+2*Z.diagramMarginX;_&&h.append("text").text(_).attr("x",(L.stopx-L.startx)/2-2*Z.diagramMarginX).attr("y",-25),Ne(h,P,N,Z.useMaxWidth);const D=_?40:0;h.attr("viewBox",L.startx-Z.diagramMarginX+" -"+(Z.diagramMarginY+D)+" "+N+" "+(P+D)),B.debug("models:",gt.models)};async function U_(t,e,i){const r={};for(const s of e)if(t[s.to]&&t[s.from]){const n=t[s.to];if(s.placement===i.db.PLACEMENT.LEFTOF&&!n.prevActor||s.placement===i.db.PLACEMENT.RIGHTOF&&!n.nextActor)continue;const a=s.placement!==void 0,o=!a,l=a?Yr(Z):Lr(Z),h=s.wrap?Rt.wrapLabel(s.message,Z.width-2*Z.wrapPadding,l):s.message,p=(fi(h)?await Ks(s.message,Y()):Rt.calculateTextDimensions(h,l)).width+2*Z.wrapPadding;o&&s.from===n.nextActor?r[s.to]=mt.getMax(r[s.to]||0,p):o&&s.from===n.prevActor?r[s.from]=mt.getMax(r[s.from]||0,p):o&&s.from===s.to?(r[s.from]=mt.getMax(r[s.from]||0,p/2),r[s.to]=mt.getMax(r[s.to]||0,p/2)):s.placement===i.db.PLACEMENT.RIGHTOF?r[s.from]=mt.getMax(r[s.from]||0,p):s.placement===i.db.PLACEMENT.LEFTOF?r[n.prevActor]=mt.getMax(r[n.prevActor]||0,p):s.placement===i.db.PLACEMENT.OVER&&(n.prevActor&&(r[n.prevActor]=mt.getMax(r[n.prevActor]||0,p/2)),n.nextActor&&(r[s.from]=mt.getMax(r[s.from]||0,p/2)))}return B.debug("maxMessageWidthPerActor:",r),r}const H_=function(t){let e=0;const i=po(Z);for(const r in t.links){const n=Rt.calculateTextDimensions(r,i).width+2*Z.wrapPadding+2*Z.boxMargin;e<n&&(e=n)}return e};async function G_(t,e,i){let r=0;for(const n of Object.keys(t)){const a=t[n];a.wrap&&(a.description=Rt.wrapLabel(a.description,Z.width-2*Z.wrapPadding,po(Z)));const o=fi(a.description)?await Ks(a.description,Y()):Rt.calculateTextDimensions(a.description,po(Z));a.width=a.wrap?Z.width:mt.getMax(Z.width,o.width+2*Z.wrapPadding),a.height=a.wrap?mt.getMax(o.height,Z.height):Z.height,r=mt.getMax(r,a.height)}for(const n in e){const a=t[n];if(!a)continue;const o=t[a.nextActor];if(!o){const p=e[n]+Z.actorMargin-a.width/2;a.margin=mt.getMax(p,Z.actorMargin);continue}const h=e[n]+Z.actorMargin-a.width/2-o.width/2;a.margin=mt.getMax(h,Z.actorMargin)}let s=0;return i.forEach(n=>{const a=Lr(Z);let o=n.actorKeys.reduce((u,p)=>u+=t[p].width+(t[p].margin||0),0);o-=2*Z.boxTextMargin,n.wrap&&(n.name=Rt.wrapLabel(n.name,o-2*Z.wrapPadding,a));const l=Rt.calculateTextDimensions(n.name,a);s=mt.getMax(l.height,s);const h=mt.getMax(o,l.width+2*Z.wrapPadding);if(n.margin=Z.boxTextMargin,o<h){const u=(h-o)/2;n.margin+=u}}),i.forEach(n=>n.textMaxHeight=s),mt.getMax(r,Z.height)}const j_=async function(t,e,i){const r=e[t.from].x,s=e[t.to].x,n=t.wrap&&t.message;let a=fi(t.message)?await Ks(t.message,Y()):Rt.calculateTextDimensions(n?Rt.wrapLabel(t.message,Z.width,Yr(Z)):t.message,Yr(Z));const o={width:n?Z.width:mt.getMax(Z.width,a.width+2*Z.noteMargin),height:0,startx:e[t.from].x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===i.db.PLACEMENT.RIGHTOF?(o.width=n?mt.getMax(Z.width,a.width):mt.getMax(e[t.from].width/2+e[t.to].width/2,a.width+2*Z.noteMargin),o.startx=r+(e[t.from].width+Z.actorMargin)/2):t.placement===i.db.PLACEMENT.LEFTOF?(o.width=n?mt.getMax(Z.width,a.width+2*Z.noteMargin):mt.getMax(e[t.from].width/2+e[t.to].width/2,a.width+2*Z.noteMargin),o.startx=r-o.width+(e[t.from].width-Z.actorMargin)/2):t.to===t.from?(a=Rt.calculateTextDimensions(n?Rt.wrapLabel(t.message,mt.getMax(Z.width,e[t.from].width),Yr(Z)):t.message,Yr(Z)),o.width=n?mt.getMax(Z.width,e[t.from].width):mt.getMax(e[t.from].width,Z.width,a.width+2*Z.noteMargin),o.startx=r+(e[t.from].width-o.width)/2):(o.width=Math.abs(r+e[t.from].width/2-(s+e[t.to].width/2))+Z.actorMargin,o.startx=r<s?r+e[t.from].width/2-Z.actorMargin/2:s+e[t.to].width/2-Z.actorMargin/2),n&&(o.message=Rt.wrapLabel(t.message,o.width-2*Z.wrapPadding,Yr(Z))),B.debug(`NM:[${o.startx},${o.stopx},${o.starty},${o.stopy}:${o.width},${o.height}=${t.message}]`),o},X_=function(t,e,i){if(![i.db.LINETYPE.SOLID_OPEN,i.db.LINETYPE.DOTTED_OPEN,i.db.LINETYPE.SOLID,i.db.LINETYPE.DOTTED,i.db.LINETYPE.SOLID_CROSS,i.db.LINETYPE.DOTTED_CROSS,i.db.LINETYPE.SOLID_POINT,i.db.LINETYPE.DOTTED_POINT].includes(t.type))return{};const[r,s]=Mc(t.from,e),[n,a]=Mc(t.to,e),o=r<=n,l=o?s:r;let h=o?n:a;const u=Math.abs(n-a)>2,p=x=>o?-x:x;t.from===t.to?h=l:(t.activate&&!u&&(h+=p(Z.activationWidth/2-1)),[i.db.LINETYPE.SOLID_OPEN,i.db.LINETYPE.DOTTED_OPEN].includes(t.type)||(h+=p(3)));const d=[r,s,n,a],g=Math.abs(l-h);t.wrap&&t.message&&(t.message=Rt.wrapLabel(t.message,mt.getMax(g+2*Z.wrapPadding,Z.width),Lr(Z)));const y=Rt.calculateTextDimensions(t.message,Lr(Z));return{width:mt.getMax(t.wrap?0:y.width+2*Z.wrapPadding,g+2*Z.wrapPadding,Z.width),height:0,startx:l,stopx:h,starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,d),toBounds:Math.max.apply(null,d)}},$_=async function(t,e,i,r){const s={},n=[];let a,o,l;for(const h of t){switch(h.id=Rt.random({length:10}),h.type){case r.db.LINETYPE.LOOP_START:case r.db.LINETYPE.ALT_START:case r.db.LINETYPE.OPT_START:case r.db.LINETYPE.PAR_START:case r.db.LINETYPE.PAR_OVER_START:case r.db.LINETYPE.CRITICAL_START:case r.db.LINETYPE.BREAK_START:n.push({id:h.id,msg:h.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case r.db.LINETYPE.ALT_ELSE:case r.db.LINETYPE.PAR_AND:case r.db.LINETYPE.CRITICAL_OPTION:h.message&&(a=n.pop(),s[a.id]=a,s[h.id]=a,n.push(a));break;case r.db.LINETYPE.LOOP_END:case r.db.LINETYPE.ALT_END:case r.db.LINETYPE.OPT_END:case r.db.LINETYPE.PAR_END:case r.db.LINETYPE.CRITICAL_END:case r.db.LINETYPE.BREAK_END:a=n.pop(),s[a.id]=a;break;case r.db.LINETYPE.ACTIVE_START:{const p=e[h.from?h.from.actor:h.to.actor],d=ma(h.from?h.from.actor:h.to.actor).length,g=p.x+p.width/2+(d-1)*Z.activationWidth/2,y={startx:g,stopx:g+Z.activationWidth,actor:h.from.actor,enabled:!0};gt.activations.push(y)}break;case r.db.LINETYPE.ACTIVE_END:{const p=gt.activations.map(d=>d.actor).lastIndexOf(h.from.actor);delete gt.activations.splice(p,1)[0]}break}h.placement!==void 0?(o=await j_(h,e,r),h.noteModel=o,n.forEach(p=>{a=p,a.from=mt.getMin(a.from,o.startx),a.to=mt.getMax(a.to,o.startx+o.width),a.width=mt.getMax(a.width,Math.abs(a.from-a.to))-Z.labelBoxWidth})):(l=X_(h,e,r),h.msgModel=l,l.startx&&l.stopx&&n.length>0&&n.forEach(p=>{if(a=p,l.startx===l.stopx){const d=e[h.from],g=e[h.to];a.from=mt.getMin(d.x-l.width/2,d.x-d.width/2,a.from),a.to=mt.getMax(g.x+l.width/2,g.x+d.width/2,a.to),a.width=mt.getMax(a.width,Math.abs(a.to-a.from))-Z.labelBoxWidth}else a.from=mt.getMin(l.startx,a.from),a.to=mt.getMax(l.stopx,a.to),a.width=mt.getMax(a.width,l.width)-Z.labelBoxWidth}))}return gt.activations=[],B.debug("Loop type widths:",s),s},K_={bounds:gt,drawActors:go,drawActorsPopup:q0,setConf:W0,draw:Y_},Q_={parser:j6,db:Pc,renderer:K_,styles:b_,init:({wrap:t})=>{Pc.setWrap(t)}},Z_=Object.freeze(Object.defineProperty({__proto__:null,diagram:Q_},Symbol.toStringTag,{value:"Module"}));var yo=(function(){var t=function(Wt,pt,ut,ot){for(ut=ut||{},ot=Wt.length;ot--;ut[Wt[ot]]=pt);return ut},e=[1,17],i=[1,18],r=[1,19],s=[1,39],n=[1,40],a=[1,25],o=[1,23],l=[1,24],h=[1,31],u=[1,32],p=[1,33],d=[1,34],g=[1,35],y=[1,36],x=[1,26],_=[1,27],w=[1,28],E=[1,29],R=[1,43],v=[1,30],T=[1,42],k=[1,44],A=[1,41],S=[1,45],m=[1,9],C=[1,8,9],f=[1,56],L=[1,57],b=[1,58],P=[1,59],U=[1,60],N=[1,61],D=[1,62],F=[1,8,9,39],I=[1,74],M=[1,8,9,12,13,21,37,39,42,59,60,61,62,63,64,65,70,72],z=[1,8,9,12,13,19,21,37,39,42,46,59,60,61,62,63,64,65,70,72,74,80,95,97,98],st=[13,74,80,95,97,98],j=[13,64,65,74,80,95,97,98],dt=[13,59,60,61,62,63,74,80,95,97,98],K=[1,93],G=[1,110],tt=[1,108],nt=[1,102],Q=[1,103],J=[1,104],O=[1,105],at=[1,106],W=[1,107],ft=[1,109],V=[1,8,9,37,39,42],vt=[1,8,9,21],X=[1,8,9,78],St=[1,8,9,21,73,74,78,80,81,82,83,84,85],bt={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,className:17,classLiteralName:18,GENERICTYPE:19,relationStatement:20,LABEL:21,namespaceStatement:22,classStatement:23,memberStatement:24,annotationStatement:25,clickStatement:26,styleStatement:27,cssClassStatement:28,noteStatement:29,direction:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,namespaceIdentifier:36,STRUCT_START:37,classStatements:38,STRUCT_STOP:39,NAMESPACE:40,classIdentifier:41,STYLE_SEPARATOR:42,members:43,CLASS:44,ANNOTATION_START:45,ANNOTATION_END:46,MEMBER:47,SEPARATOR:48,relation:49,NOTE_FOR:50,noteText:51,NOTE:52,direction_tb:53,direction_bt:54,direction_rl:55,direction_lr:56,relationType:57,lineType:58,AGGREGATION:59,EXTENSION:60,COMPOSITION:61,DEPENDENCY:62,LOLLIPOP:63,LINE:64,DOTTED_LINE:65,CALLBACK:66,LINK:67,LINK_TARGET:68,CLICK:69,CALLBACK_NAME:70,CALLBACK_ARGS:71,HREF:72,STYLE:73,ALPHA:74,stylesOpt:75,CSSCLASS:76,style:77,COMMA:78,styleComponent:79,NUM:80,COLON:81,UNIT:82,SPACE:83,BRKT:84,PCT:85,commentToken:86,textToken:87,graphCodeTokens:88,textNoTagsToken:89,TAGSTART:90,TAGEND:91,"==":92,"--":93,DEFAULT:94,MINUS:95,keywords:96,UNICODE_TEXT:97,BQUOTE_STR:98,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",19:"GENERICTYPE",21:"LABEL",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",37:"STRUCT_START",39:"STRUCT_STOP",40:"NAMESPACE",42:"STYLE_SEPARATOR",44:"CLASS",45:"ANNOTATION_START",46:"ANNOTATION_END",47:"MEMBER",48:"SEPARATOR",50:"NOTE_FOR",52:"NOTE",53:"direction_tb",54:"direction_bt",55:"direction_rl",56:"direction_lr",59:"AGGREGATION",60:"EXTENSION",61:"COMPOSITION",62:"DEPENDENCY",63:"LOLLIPOP",64:"LINE",65:"DOTTED_LINE",66:"CALLBACK",67:"LINK",68:"LINK_TARGET",69:"CLICK",70:"CALLBACK_NAME",71:"CALLBACK_ARGS",72:"HREF",73:"STYLE",74:"ALPHA",76:"CSSCLASS",78:"COMMA",80:"NUM",81:"COLON",82:"UNIT",83:"SPACE",84:"BRKT",85:"PCT",88:"graphCodeTokens",90:"TAGSTART",91:"TAGEND",92:"==",93:"--",94:"DEFAULT",95:"MINUS",96:"keywords",97:"UNICODE_TEXT",98:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,2],[17,1],[17,1],[17,2],[17,2],[17,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[22,4],[22,5],[36,2],[38,1],[38,2],[38,3],[23,1],[23,3],[23,4],[23,6],[41,2],[41,3],[25,4],[43,1],[43,2],[24,1],[24,2],[24,1],[24,1],[20,3],[20,4],[20,4],[20,5],[29,3],[29,2],[30,1],[30,1],[30,1],[30,1],[49,3],[49,2],[49,2],[49,1],[57,1],[57,1],[57,1],[57,1],[57,1],[58,1],[58,1],[26,3],[26,4],[26,3],[26,4],[26,4],[26,5],[26,3],[26,4],[26,4],[26,5],[26,4],[26,5],[26,5],[26,6],[27,3],[28,3],[75,1],[75,3],[77,1],[77,2],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[86,1],[86,1],[87,1],[87,1],[87,1],[87,1],[87,1],[87,1],[87,1],[89,1],[89,1],[89,1],[89,1],[16,1],[16,1],[16,1],[16,1],[18,1],[51,1]],performAction:function(pt,ut,ot,lt,ht,$,rt){var it=$.length-1;switch(ht){case 8:this.$=$[it-1];break;case 9:case 11:case 12:this.$=$[it];break;case 10:case 13:this.$=$[it-1]+$[it];break;case 14:case 15:this.$=$[it-1]+"~"+$[it]+"~";break;case 16:lt.addRelation($[it]);break;case 17:$[it-1].title=lt.cleanupLabel($[it]),lt.addRelation($[it-1]);break;case 27:this.$=$[it].trim(),lt.setAccTitle(this.$);break;case 28:case 29:this.$=$[it].trim(),lt.setAccDescription(this.$);break;case 30:lt.addClassesToNamespace($[it-3],$[it-1]);break;case 31:lt.addClassesToNamespace($[it-4],$[it-1]);break;case 32:this.$=$[it],lt.addNamespace($[it]);break;case 33:this.$=[$[it]];break;case 34:this.$=[$[it-1]];break;case 35:$[it].unshift($[it-2]),this.$=$[it];break;case 37:lt.setCssClass($[it-2],$[it]);break;case 38:lt.addMembers($[it-3],$[it-1]);break;case 39:lt.setCssClass($[it-5],$[it-3]),lt.addMembers($[it-5],$[it-1]);break;case 40:this.$=$[it],lt.addClass($[it]);break;case 41:this.$=$[it-1],lt.addClass($[it-1]),lt.setClassLabel($[it-1],$[it]);break;case 42:lt.addAnnotation($[it],$[it-2]);break;case 43:this.$=[$[it]];break;case 44:$[it].push($[it-1]),this.$=$[it];break;case 45:break;case 46:lt.addMember($[it-1],lt.cleanupLabel($[it]));break;case 47:break;case 48:break;case 49:this.$={id1:$[it-2],id2:$[it],relation:$[it-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:$[it-3],id2:$[it],relation:$[it-1],relationTitle1:$[it-2],relationTitle2:"none"};break;case 51:this.$={id1:$[it-3],id2:$[it],relation:$[it-2],relationTitle1:"none",relationTitle2:$[it-1]};break;case 52:this.$={id1:$[it-4],id2:$[it],relation:$[it-2],relationTitle1:$[it-3],relationTitle2:$[it-1]};break;case 53:lt.addNote($[it],$[it-1]);break;case 54:lt.addNote($[it]);break;case 55:lt.setDirection("TB");break;case 56:lt.setDirection("BT");break;case 57:lt.setDirection("RL");break;case 58:lt.setDirection("LR");break;case 59:this.$={type1:$[it-2],type2:$[it],lineType:$[it-1]};break;case 60:this.$={type1:"none",type2:$[it],lineType:$[it-1]};break;case 61:this.$={type1:$[it-1],type2:"none",lineType:$[it]};break;case 62:this.$={type1:"none",type2:"none",lineType:$[it]};break;case 63:this.$=lt.relationType.AGGREGATION;break;case 64:this.$=lt.relationType.EXTENSION;break;case 65:this.$=lt.relationType.COMPOSITION;break;case 66:this.$=lt.relationType.DEPENDENCY;break;case 67:this.$=lt.relationType.LOLLIPOP;break;case 68:this.$=lt.lineType.LINE;break;case 69:this.$=lt.lineType.DOTTED_LINE;break;case 70:case 76:this.$=$[it-2],lt.setClickEvent($[it-1],$[it]);break;case 71:case 77:this.$=$[it-3],lt.setClickEvent($[it-2],$[it-1]),lt.setTooltip($[it-2],$[it]);break;case 72:this.$=$[it-2],lt.setLink($[it-1],$[it]);break;case 73:this.$=$[it-3],lt.setLink($[it-2],$[it-1],$[it]);break;case 74:this.$=$[it-3],lt.setLink($[it-2],$[it-1]),lt.setTooltip($[it-2],$[it]);break;case 75:this.$=$[it-4],lt.setLink($[it-3],$[it-2],$[it]),lt.setTooltip($[it-3],$[it-1]);break;case 78:this.$=$[it-3],lt.setClickEvent($[it-2],$[it-1],$[it]);break;case 79:this.$=$[it-4],lt.setClickEvent($[it-3],$[it-2],$[it-1]),lt.setTooltip($[it-3],$[it]);break;case 80:this.$=$[it-3],lt.setLink($[it-2],$[it]);break;case 81:this.$=$[it-4],lt.setLink($[it-3],$[it-1],$[it]);break;case 82:this.$=$[it-4],lt.setLink($[it-3],$[it-1]),lt.setTooltip($[it-3],$[it]);break;case 83:this.$=$[it-5],lt.setLink($[it-4],$[it-2],$[it]),lt.setTooltip($[it-4],$[it-1]);break;case 84:this.$=$[it-2],lt.setCssStyle($[it-1],$[it]);break;case 85:lt.setCssClass($[it-1],$[it]);break;case 86:this.$=[$[it]];break;case 87:$[it-2].push($[it]),this.$=$[it-2];break;case 89:this.$=$[it-1]+$[it];break}},table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:37,17:20,18:38,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,30:16,31:e,33:i,35:r,36:21,40:s,41:22,44:n,45:a,47:o,48:l,50:h,52:u,53:p,54:d,55:g,56:y,66:x,67:_,69:w,73:E,74:R,76:v,80:T,95:k,97:A,98:S},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},t(m,[2,5],{8:[1,46]}),{8:[1,47]},t(C,[2,16],{21:[1,48]}),t(C,[2,18]),t(C,[2,19]),t(C,[2,20]),t(C,[2,21]),t(C,[2,22]),t(C,[2,23]),t(C,[2,24]),t(C,[2,25]),t(C,[2,26]),{32:[1,49]},{34:[1,50]},t(C,[2,29]),t(C,[2,45],{49:51,57:54,58:55,13:[1,52],21:[1,53],59:f,60:L,61:b,62:P,63:U,64:N,65:D}),{37:[1,63]},t(F,[2,36],{37:[1,65],42:[1,64]}),t(C,[2,47]),t(C,[2,48]),{16:66,74:R,80:T,95:k,97:A},{16:37,17:67,18:38,74:R,80:T,95:k,97:A,98:S},{16:37,17:68,18:38,74:R,80:T,95:k,97:A,98:S},{16:37,17:69,18:38,74:R,80:T,95:k,97:A,98:S},{74:[1,70]},{13:[1,71]},{16:37,17:72,18:38,74:R,80:T,95:k,97:A,98:S},{13:I,51:73},t(C,[2,55]),t(C,[2,56]),t(C,[2,57]),t(C,[2,58]),t(M,[2,11],{16:37,18:38,17:75,19:[1,76],74:R,80:T,95:k,97:A,98:S}),t(M,[2,12],{19:[1,77]}),{15:78,16:79,74:R,80:T,95:k,97:A},{16:37,17:80,18:38,74:R,80:T,95:k,97:A,98:S},t(z,[2,112]),t(z,[2,113]),t(z,[2,114]),t(z,[2,115]),t([1,8,9,12,13,19,21,37,39,42,59,60,61,62,63,64,65,70,72],[2,116]),t(m,[2,6],{10:5,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,30:16,17:20,36:21,41:22,16:37,18:38,5:81,31:e,33:i,35:r,40:s,44:n,45:a,47:o,48:l,50:h,52:u,53:p,54:d,55:g,56:y,66:x,67:_,69:w,73:E,74:R,76:v,80:T,95:k,97:A,98:S}),{5:82,10:5,16:37,17:20,18:38,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,30:16,31:e,33:i,35:r,36:21,40:s,41:22,44:n,45:a,47:o,48:l,50:h,52:u,53:p,54:d,55:g,56:y,66:x,67:_,69:w,73:E,74:R,76:v,80:T,95:k,97:A,98:S},t(C,[2,17]),t(C,[2,27]),t(C,[2,28]),{13:[1,84],16:37,17:83,18:38,74:R,80:T,95:k,97:A,98:S},{49:85,57:54,58:55,59:f,60:L,61:b,62:P,63:U,64:N,65:D},t(C,[2,46]),{58:86,64:N,65:D},t(st,[2,62],{57:87,59:f,60:L,61:b,62:P,63:U}),t(j,[2,63]),t(j,[2,64]),t(j,[2,65]),t(j,[2,66]),t(j,[2,67]),t(dt,[2,68]),t(dt,[2,69]),{8:[1,89],23:90,38:88,41:22,44:n},{16:91,74:R,80:T,95:k,97:A},{43:92,47:K},{46:[1,94]},{13:[1,95]},{13:[1,96]},{70:[1,97],72:[1,98]},{21:G,73:tt,74:nt,75:99,77:100,79:101,80:Q,81:J,82:O,83:at,84:W,85:ft},{74:[1,111]},{13:I,51:112},t(C,[2,54]),t(C,[2,117]),t(M,[2,13]),t(M,[2,14]),t(M,[2,15]),{37:[2,32]},{15:113,16:79,37:[2,9],74:R,80:T,95:k,97:A},t(V,[2,40],{11:114,12:[1,115]}),t(m,[2,7]),{9:[1,116]},t(vt,[2,49]),{16:37,17:117,18:38,74:R,80:T,95:k,97:A,98:S},{13:[1,119],16:37,17:118,18:38,74:R,80:T,95:k,97:A,98:S},t(st,[2,61],{57:120,59:f,60:L,61:b,62:P,63:U}),t(st,[2,60]),{39:[1,121]},{23:90,38:122,41:22,44:n},{8:[1,123],39:[2,33]},t(F,[2,37],{37:[1,124]}),{39:[1,125]},{39:[2,43],43:126,47:K},{16:37,17:127,18:38,74:R,80:T,95:k,97:A,98:S},t(C,[2,70],{13:[1,128]}),t(C,[2,72],{13:[1,130],68:[1,129]}),t(C,[2,76],{13:[1,131],71:[1,132]}),{13:[1,133]},t(C,[2,84],{78:[1,134]}),t(X,[2,86],{79:135,21:G,73:tt,74:nt,80:Q,81:J,82:O,83:at,84:W,85:ft}),t(St,[2,88]),t(St,[2,90]),t(St,[2,91]),t(St,[2,92]),t(St,[2,93]),t(St,[2,94]),t(St,[2,95]),t(St,[2,96]),t(St,[2,97]),t(St,[2,98]),t(C,[2,85]),t(C,[2,53]),{37:[2,10]},t(V,[2,41]),{13:[1,136]},{1:[2,4]},t(vt,[2,51]),t(vt,[2,50]),{16:37,17:137,18:38,74:R,80:T,95:k,97:A,98:S},t(st,[2,59]),t(C,[2,30]),{39:[1,138]},{23:90,38:139,39:[2,34],41:22,44:n},{43:140,47:K},t(F,[2,38]),{39:[2,44]},t(C,[2,42]),t(C,[2,71]),t(C,[2,73]),t(C,[2,74],{68:[1,141]}),t(C,[2,77]),t(C,[2,78],{13:[1,142]}),t(C,[2,80],{13:[1,144],68:[1,143]}),{21:G,73:tt,74:nt,77:145,79:101,80:Q,81:J,82:O,83:at,84:W,85:ft},t(St,[2,89]),{14:[1,146]},t(vt,[2,52]),t(C,[2,31]),{39:[2,35]},{39:[1,147]},t(C,[2,75]),t(C,[2,79]),t(C,[2,81]),t(C,[2,82],{68:[1,148]}),t(X,[2,87],{79:135,21:G,73:tt,74:nt,80:Q,81:J,82:O,83:at,84:W,85:ft}),t(V,[2,8]),t(F,[2,39]),t(C,[2,83])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],78:[2,32],113:[2,10],116:[2,4],126:[2,44],139:[2,35]},parseError:function(pt,ut){if(ut.recoverable)this.trace(pt);else{var ot=new Error(pt);throw ot.hash=ut,ot}},parse:function(pt){var ut=this,ot=[0],lt=[],ht=[null],$=[],rt=this.table,it="",ct=0,re=0,Qt=2,de=1,zt=$.slice.call(arguments,1),Gt=Object.create(this.lexer),qt={yy:{}};for(var Ee in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ee)&&(qt.yy[Ee]=this.yy[Ee]);Gt.setInput(pt,qt.yy),qt.yy.lexer=Gt,qt.yy.parser=this,typeof Gt.yylloc>"u"&&(Gt.yylloc={});var fe=Gt.yylloc;$.push(fe);var sr=Gt.options&&Gt.options.ranges;typeof qt.yy.parseError=="function"?this.parseError=qt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Vr(){var It;return It=lt.pop()||Gt.lex()||de,typeof It!="number"&&(It instanceof Array&&(lt=It,It=lt.pop()),It=ut.symbols_[It]||It),It}for(var me,jt,se,Ot,Zt={},Dt,Yt,Ut,Pt;;){if(jt=ot[ot.length-1],this.defaultActions[jt]?se=this.defaultActions[jt]:((me===null||typeof me>"u")&&(me=Vr()),se=rt[jt]&&rt[jt][me]),typeof se>"u"||!se.length||!se[0]){var Nt="";Pt=[];for(Dt in rt[jt])this.terminals_[Dt]&&Dt>Qt&&Pt.push("'"+this.terminals_[Dt]+"'");Gt.showPosition?Nt="Parse error on line "+(ct+1)+`:
`+Gt.showPosition()+`
Expecting `+Pt.join(", ")+", got '"+(this.terminals_[me]||me)+"'":Nt="Parse error on line "+(ct+1)+": Unexpected "+(me==de?"end of input":"'"+(this.terminals_[me]||me)+"'"),this.parseError(Nt,{text:Gt.match,token:this.terminals_[me]||me,line:Gt.yylineno,loc:fe,expected:Pt})}if(se[0]instanceof Array&&se.length>1)throw new Error("Parse Error: multiple actions possible at state: "+jt+", token: "+me);switch(se[0]){case 1:ot.push(me),ht.push(Gt.yytext),$.push(Gt.yylloc),ot.push(se[1]),me=null,re=Gt.yyleng,it=Gt.yytext,ct=Gt.yylineno,fe=Gt.yylloc;break;case 2:if(Yt=this.productions_[se[1]][1],Zt.$=ht[ht.length-Yt],Zt._$={first_line:$[$.length-(Yt||1)].first_line,last_line:$[$.length-1].last_line,first_column:$[$.length-(Yt||1)].first_column,last_column:$[$.length-1].last_column},sr&&(Zt._$.range=[$[$.length-(Yt||1)].range[0],$[$.length-1].range[1]]),Ot=this.performAction.apply(Zt,[it,re,ct,qt.yy,se[1],ht,$].concat(zt)),typeof Ot<"u")return Ot;Yt&&(ot=ot.slice(0,-1*Yt*2),ht=ht.slice(0,-1*Yt),$=$.slice(0,-1*Yt)),ot.push(this.productions_[se[1]][0]),ht.push(Zt.$),$.push(Zt._$),Ut=rt[ot[ot.length-2]][ot[ot.length-1]],ot.push(Ut);break;case 3:return!0}}return!0}},Vt=(function(){var Wt={EOF:1,parseError:function(ut,ot){if(this.yy.parser)this.yy.parser.parseError(ut,ot);else throw new Error(ut)},setInput:function(pt,ut){return this.yy=ut||this.yy||{},this._input=pt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var pt=this._input[0];this.yytext+=pt,this.yyleng++,this.offset++,this.match+=pt,this.matched+=pt;var ut=pt.match(/(?:\r\n?|\n).*/g);return ut?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),pt},unput:function(pt){var ut=pt.length,ot=pt.split(/(?:\r\n?|\n)/g);this._input=pt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ut),this.offset-=ut;var lt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ot.length-1&&(this.yylineno-=ot.length-1);var ht=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ot?(ot.length===lt.length?this.yylloc.first_column:0)+lt[lt.length-ot.length].length-ot[0].length:this.yylloc.first_column-ut},this.options.ranges&&(this.yylloc.range=[ht[0],ht[0]+this.yyleng-ut]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(pt){this.unput(this.match.slice(pt))},pastInput:function(){var pt=this.matched.substr(0,this.matched.length-this.match.length);return(pt.length>20?"...":"")+pt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var pt=this.match;return pt.length<20&&(pt+=this._input.substr(0,20-pt.length)),(pt.substr(0,20)+(pt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pt=this.pastInput(),ut=new Array(pt.length+1).join("-");return pt+this.upcomingInput()+`
`+ut+"^"},test_match:function(pt,ut){var ot,lt,ht;if(this.options.backtrack_lexer&&(ht={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ht.yylloc.range=this.yylloc.range.slice(0))),lt=pt[0].match(/(?:\r\n?|\n).*/g),lt&&(this.yylineno+=lt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lt?lt[lt.length-1].length-lt[lt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+pt[0].length},this.yytext+=pt[0],this.match+=pt[0],this.matches=pt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(pt[0].length),this.matched+=pt[0],ot=this.performAction.call(this,this.yy,this,ut,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ot)return ot;if(this._backtrack){for(var $ in ht)this[$]=ht[$];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var pt,ut,ot,lt;this._more||(this.yytext="",this.match="");for(var ht=this._currentRules(),$=0;$<ht.length;$++)if(ot=this._input.match(this.rules[ht[$]]),ot&&(!ut||ot[0].length>ut[0].length)){if(ut=ot,lt=$,this.options.backtrack_lexer){if(pt=this.test_match(ot,ht[$]),pt!==!1)return pt;if(this._backtrack){ut=!1;continue}else return!1}else if(!this.options.flex)break}return ut?(pt=this.test_match(ut,ht[lt]),pt!==!1?pt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ut=this.next();return ut||this.lex()},begin:function(ut){this.conditionStack.push(ut)},popState:function(){var ut=this.conditionStack.length-1;return ut>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ut){return ut=this.conditionStack.length-1-Math.abs(ut||0),ut>=0?this.conditionStack[ut]:"INITIAL"},pushState:function(ut){this.begin(ut)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(ut,ot,lt,ht){switch(lt){case 0:return 53;case 1:return 54;case 2:return 55;case 3:return 56;case 4:break;case 5:break;case 6:return this.begin("acc_title"),31;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),33;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 8;case 14:break;case 15:return 7;case 16:return 7;case 17:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 19:this.popState();break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 70;case 22:this.popState();break;case 23:return 71;case 24:this.popState();break;case 25:return"STR";case 26:this.begin("string");break;case 27:return 73;case 28:return this.begin("namespace"),40;case 29:return this.popState(),8;case 30:break;case 31:return this.begin("namespace-body"),37;case 32:return this.popState(),39;case 33:return"EOF_IN_STRUCT";case 34:return 8;case 35:break;case 36:return"EDGE_STATE";case 37:return this.begin("class"),44;case 38:return this.popState(),8;case 39:break;case 40:return this.popState(),this.popState(),39;case 41:return this.begin("class-body"),37;case 42:return this.popState(),39;case 43:return"EOF_IN_STRUCT";case 44:return"EDGE_STATE";case 45:return"OPEN_IN_STRUCT";case 46:break;case 47:return"MEMBER";case 48:return 76;case 49:return 66;case 50:return 67;case 51:return 69;case 52:return 50;case 53:return 52;case 54:return 45;case 55:return 46;case 56:return 72;case 57:this.popState();break;case 58:return"GENERICTYPE";case 59:this.begin("generic");break;case 60:this.popState();break;case 61:return"BQUOTE_STR";case 62:this.begin("bqstring");break;case 63:return 68;case 64:return 68;case 65:return 68;case 66:return 68;case 67:return 60;case 68:return 60;case 69:return 62;case 70:return 62;case 71:return 61;case 72:return 59;case 73:return 63;case 74:return 64;case 75:return 65;case 76:return 21;case 77:return 42;case 78:return 95;case 79:return"DOT";case 80:return"PLUS";case 81:return 81;case 82:return 78;case 83:return 84;case 84:return 84;case 85:return 85;case 86:return"EQUALS";case 87:return"EQUALS";case 88:return 74;case 89:return 12;case 90:return 14;case 91:return"PUNCTUATION";case 92:return 80;case 93:return 97;case 94:return 83;case 95:return 83;case 96:return 9}},rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,32,33,34,35,36,37,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},namespace:{rules:[26,28,29,30,31,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},"class-body":{rules:[26,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},class:{rules:[26,38,39,40,41,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},acc_descr:{rules:[9,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},acc_title:{rules:[7,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},callback_args:{rules:[22,23,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},callback_name:{rules:[19,20,21,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},href:{rules:[26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},struct:{rules:[26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},generic:{rules:[26,48,49,50,51,52,53,54,55,56,57,58,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},bqstring:{rules:[26,48,49,50,51,52,53,54,55,56,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},string:{rules:[24,25,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,37,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96],inclusive:!0}}};return Wt})();bt.lexer=Vt;function Bt(){this.yy={}}return Bt.prototype=bt,bt.Parser=Bt,new Bt})();yo.parser=yo;const Y0=yo,Vc=["#","+","~","-",""];class zc{constructor(e,i){this.memberType=i,this.visibility="",this.classifier="";const r=te(e,Y());this.parseMember(r)}getDisplayDetails(){let e=this.visibility+_s(this.id);this.memberType==="method"&&(e+=`(${_s(this.parameters.trim())})`,this.returnType&&(e+=" : "+_s(this.returnType))),e=e.trim();const i=this.parseClassifier();return{displayText:e,cssStyle:i}}parseMember(e){let i="";if(this.memberType==="method"){const r=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/,s=e.match(r);if(s){const n=s[1]?s[1].trim():"";if(Vc.includes(n)&&(this.visibility=n),this.id=s[2].trim(),this.parameters=s[3]?s[3].trim():"",i=s[4]?s[4].trim():"",this.returnType=s[5]?s[5].trim():"",i===""){const a=this.returnType.substring(this.returnType.length-1);a.match(/[$*]/)&&(i=a,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{const r=e.length,s=e.substring(0,1),n=e.substring(r-1);Vc.includes(s)&&(this.visibility=s),n.match(/[$*]/)&&(i=n),this.id=e.substring(this.visibility===""?0:1,i===""?r:r-1)}this.classifier=i}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}}const xa="classId-";let Cl=[],Jt={},$n=[],qc=0,gr={},mo=0,Ws=[];const Br=t=>mt.sanitizeText(t,Y()),Ir=function(t){const e=mt.sanitizeText(t,Y());let i="",r=e;if(e.indexOf("~")>0){const s=e.split("~");r=Br(s[0]),i=Br(s[1])}return{className:r,type:i}},J_=function(t,e){const i=mt.sanitizeText(t,Y());e&&(e=Br(e));const{className:r}=Ir(i);Jt[r].label=e},Kn=function(t){const e=mt.sanitizeText(t,Y()),{className:i,type:r}=Ir(e);if(Object.hasOwn(Jt,i))return;const s=mt.sanitizeText(i,Y());Jt[s]={id:s,type:r,label:s,cssClasses:[],methods:[],members:[],annotations:[],styles:[],domId:xa+s+"-"+qc},qc++},U0=function(t){const e=mt.sanitizeText(t,Y());if(e in Jt)return Jt[e].domId;throw new Error("Class not found: "+e)},t7=function(){Cl=[],Jt={},$n=[],Ws=[],Ws.push(G0),gr={},mo=0,Oe()},e7=function(t){return Jt[t]},i7=function(){return Jt},r7=function(){return Cl},s7=function(){return $n},n7=function(t){B.debug("Adding relation: "+JSON.stringify(t)),Kn(t.id1),Kn(t.id2),t.id1=Ir(t.id1).className,t.id2=Ir(t.id2).className,t.relationTitle1=mt.sanitizeText(t.relationTitle1.trim(),Y()),t.relationTitle2=mt.sanitizeText(t.relationTitle2.trim(),Y()),Cl.push(t)},a7=function(t,e){const i=Ir(t).className;Jt[i].annotations.push(e)},H0=function(t,e){Kn(t);const i=Ir(t).className,r=Jt[i];if(typeof e=="string"){const s=e.trim();s.startsWith("<<")&&s.endsWith(">>")?r.annotations.push(Br(s.substring(2,s.length-2))):s.indexOf(")")>0?r.methods.push(new zc(s,"method")):s&&r.members.push(new zc(s,"attribute"))}},o7=function(t,e){Array.isArray(e)&&(e.reverse(),e.forEach(i=>H0(t,i)))},l7=function(t,e){const i={id:`note${$n.length}`,class:e,text:t};$n.push(i)},c7=function(t){return t.startsWith(":")&&(t=t.substring(1)),Br(t.trim())},El=function(t,e){t.split(",").forEach(function(i){let r=i;i[0].match(/\d/)&&(r=xa+r),Jt[r]!==void 0&&Jt[r].cssClasses.push(e)})},h7=function(t,e){t.split(",").forEach(function(i){e!==void 0&&(Jt[i].tooltip=Br(e))})},u7=function(t,e){return e?gr[e].classes[t].tooltip:Jt[t].tooltip},d7=function(t,e,i){const r=Y();t.split(",").forEach(function(s){let n=s;s[0].match(/\d/)&&(n=xa+n),Jt[n]!==void 0&&(Jt[n].link=Rt.formatUrl(e,r),r.securityLevel==="sandbox"?Jt[n].linkTarget="_top":typeof i=="string"?Jt[n].linkTarget=Br(i):Jt[n].linkTarget="_blank")}),El(t,"clickable")},f7=function(t,e,i){t.split(",").forEach(function(r){p7(r,e,i),Jt[r].haveCallback=!0}),El(t,"clickable")},p7=function(t,e,i){const r=mt.sanitizeText(t,Y());if(Y().securityLevel!=="loose"||e===void 0)return;const n=r;if(Jt[n]!==void 0){const a=U0(n);let o=[];if(typeof i=="string"){o=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let l=0;l<o.length;l++){let h=o[l].trim();h.charAt(0)==='"'&&h.charAt(h.length-1)==='"'&&(h=h.substr(1,h.length-2)),o[l]=h}}o.length===0&&o.push(a),Ws.push(function(){const l=document.querySelector(`[id="${a}"]`);l!==null&&l.addEventListener("click",function(){Rt.runFunc(e,...o)},!1)})}},g7=function(t){Ws.forEach(function(e){e(t)})},y7={LINE:0,DOTTED_LINE:1},m7={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},G0=function(t){let e=yt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=yt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),yt(t).select("svg").selectAll("g.node").on("mouseover",function(){const s=yt(this);if(s.attr("title")===null)return;const a=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(s.attr("title")).style("left",window.scrollX+a.left+(a.right-a.left)/2+"px").style("top",window.scrollY+a.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),s.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),yt(this).classed("hover",!1)})};Ws.push(G0);let j0="TB";const x7=()=>j0,b7=t=>{j0=t},k7=function(t){gr[t]===void 0&&(gr[t]={id:t,classes:{},children:{},domId:xa+t+"-"+mo},mo++)},_7=function(t){return gr[t]},T7=function(){return gr},C7=function(t,e){if(gr[t]!==void 0)for(const i of e){const{className:r}=Ir(i);Jt[r].parent=t,gr[t].classes[r]=Jt[r]}},E7=function(t,e){const i=Jt[t];if(!(!e||!i))for(const r of e)r.includes(",")?i.styles.push(...r.split(",")):i.styles.push(r)},Qn={setAccTitle:Pe,getAccTitle:Ye,getAccDescription:He,setAccDescription:Ue,getConfig:()=>Y().class,addClass:Kn,bindFunctions:g7,clear:t7,getClass:e7,getClasses:i7,getNotes:s7,addAnnotation:a7,addNote:l7,getRelations:r7,addRelation:n7,getDirection:x7,setDirection:b7,addMember:H0,addMembers:o7,cleanupLabel:c7,lineType:y7,relationType:m7,setClickEvent:f7,setCssClass:El,setLink:d7,getTooltip:u7,setTooltip:h7,lookUpDomId:U0,setDiagramTitle:ri,getDiagramTitle:Ge,setClassLabel:J_,addNamespace:k7,addClassesToNamespace:C7,getNamespace:_7,getNamespaces:T7,setCssStyle:E7},S7=t=>`g.classGroup text {
  fill: ${t.nodeBorder||t.classText};
  stroke: none;
  font-family: ${t.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${t.classText};
}
.edgeLabel .label rect {
  fill: ${t.mainBkg};
}
.label text {
  fill: ${t.classText};
}
.edgeLabel .label span {
  background: ${t.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.classGroup line {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${t.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${t.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
  line-height: initial;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,X0=S7;let Wc=0;const w7=function(t,e,i,r,s){const n=function(E){switch(E){case s.db.relationType.AGGREGATION:return"aggregation";case s.db.relationType.EXTENSION:return"extension";case s.db.relationType.COMPOSITION:return"composition";case s.db.relationType.DEPENDENCY:return"dependency";case s.db.relationType.LOLLIPOP:return"lollipop"}};e.points=e.points.filter(E=>!Number.isNaN(E.y));const a=e.points,o=fr().x(function(E){return E.x}).y(function(E){return E.y}).curve($s),l=t.append("path").attr("d",o(a)).attr("id","edge"+Wc).attr("class","relation");let h="";r.arrowMarkerAbsolute&&(h=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,h=h.replace(/\(/g,"\\("),h=h.replace(/\)/g,"\\)")),i.relation.lineType==1&&l.attr("class","relation dashed-line"),i.relation.lineType==10&&l.attr("class","relation dotted-line"),i.relation.type1!=="none"&&l.attr("marker-start","url("+h+"#"+n(i.relation.type1)+"Start)"),i.relation.type2!=="none"&&l.attr("marker-end","url("+h+"#"+n(i.relation.type2)+"End)");let u,p;const d=e.points.length;let g=Rt.calcLabelPosition(e.points);u=g.x,p=g.y;let y,x,_,w;if(d%2!==0&&d>1){let E=Rt.calcCardinalityPosition(i.relation.type1!=="none",e.points,e.points[0]),R=Rt.calcCardinalityPosition(i.relation.type2!=="none",e.points,e.points[d-1]);B.debug("cardinality_1_point "+JSON.stringify(E)),B.debug("cardinality_2_point "+JSON.stringify(R)),y=E.x,x=E.y,_=R.x,w=R.y}if(i.title!==void 0){const E=t.append("g").attr("class","classLabel"),R=E.append("text").attr("class","label").attr("x",u).attr("y",p).attr("fill","red").attr("text-anchor","middle").text(i.title);window.label=R;const v=R.node().getBBox();E.insert("rect",":first-child").attr("class","box").attr("x",v.x-r.padding/2).attr("y",v.y-r.padding/2).attr("width",v.width+r.padding).attr("height",v.height+r.padding)}B.info("Rendering relation "+JSON.stringify(i)),i.relationTitle1!==void 0&&i.relationTitle1!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",y).attr("y",x).attr("fill","black").attr("font-size","6").text(i.relationTitle1),i.relationTitle2!==void 0&&i.relationTitle2!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",_).attr("y",w).attr("fill","black").attr("font-size","6").text(i.relationTitle2),Wc++},v7=function(t,e,i,r){B.debug("Rendering class ",e,i);const s=e.id,n={id:s,label:e.id,width:0,height:0},a=t.append("g").attr("id",r.db.lookUpDomId(s)).attr("class","classGroup");let o;e.link?o=a.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",i.textHeight+i.padding).attr("x",0):o=a.append("text").attr("y",i.textHeight+i.padding).attr("x",0);let l=!0;e.annotations.forEach(function(R){const v=o.append("tspan").text("Â«"+R+"Â»");l||v.attr("dy",i.textHeight),l=!1});let h=$0(e);const u=o.append("tspan").text(h).attr("class","title");l||u.attr("dy",i.textHeight);const p=o.node().getBBox().height;let d,g,y;if(e.members.length>0){d=a.append("line").attr("x1",0).attr("y1",i.padding+p+i.dividerMargin/2).attr("y2",i.padding+p+i.dividerMargin/2);const R=a.append("text").attr("x",i.padding).attr("y",p+i.dividerMargin+i.textHeight).attr("fill","white").attr("class","classText");l=!0,e.members.forEach(function(v){Yc(R,v,l,i),l=!1}),g=R.node().getBBox()}if(e.methods.length>0){y=a.append("line").attr("x1",0).attr("y1",i.padding+p+i.dividerMargin+g.height).attr("y2",i.padding+p+i.dividerMargin+g.height);const R=a.append("text").attr("x",i.padding).attr("y",p+2*i.dividerMargin+g.height+i.textHeight).attr("fill","white").attr("class","classText");l=!0,e.methods.forEach(function(v){Yc(R,v,l,i),l=!1})}const x=a.node().getBBox();var _=" ";e.cssClasses.length>0&&(_=_+e.cssClasses.join(" "));const E=a.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",x.width+2*i.padding).attr("height",x.height+i.padding+.5*i.dividerMargin).attr("class",_).node().getBBox().width;return o.node().childNodes.forEach(function(R){R.setAttribute("x",(E-R.getBBox().width)/2)}),e.tooltip&&o.insert("title").text(e.tooltip),d&&d.attr("x2",E),y&&y.attr("x2",E),n.width=E,n.height=x.height+i.padding+.5*i.dividerMargin,n},$0=function(t){let e=t.id;return t.type&&(e+="<"+_s(t.type)+">"),e},A7=function(t,e,i,r){B.debug("Rendering note ",e,i);const s=e.id,n={id:s,text:e.text,width:0,height:0},a=t.append("g").attr("id",s).attr("class","classGroup");let o=a.append("text").attr("y",i.textHeight+i.padding).attr("x",0);const l=JSON.parse(`"${e.text}"`).split(`
`);l.forEach(function(d){B.debug(`Adding line: ${d}`),o.append("tspan").text(d).attr("class","title").attr("dy",i.textHeight)});const h=a.node().getBBox(),p=a.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",h.width+2*i.padding).attr("height",h.height+l.length*i.textHeight+i.padding+.5*i.dividerMargin).node().getBBox().width;return o.node().childNodes.forEach(function(d){d.setAttribute("x",(p-d.getBBox().width)/2)}),n.width=p,n.height=h.height+l.length*i.textHeight+i.padding+.5*i.dividerMargin,n},Yc=function(t,e,i,r){const{displayText:s,cssStyle:n}=e.getDisplayDetails(),a=t.append("tspan").attr("x",r.padding).text(s);n!==""&&a.attr("style",e.cssStyle),i||a.attr("dy",r.textHeight)},Ra={getClassTitleString:$0,drawClass:v7,drawEdge:w7,drawNote:A7};let _n={};const fn=20,gs=function(t){const e=Object.entries(_n).find(i=>i[1].label===t);if(e)return e[0]},L7=function(t){t.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},B7=function(t,e,i,r){const s=Y().class;_n={},B.info("Rendering diagram "+t);const n=Y().securityLevel;let a;n==="sandbox"&&(a=yt("#i"+e));const o=n==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=o.select(`[id='${e}']`);L7(l);const h=new Ii({multigraph:!0});h.setGraph({isMultiGraph:!0}),h.setDefaultEdgeLabel(function(){return{}});const u=r.db.getClasses(),p=Object.keys(u);for(const E of p){const R=u[E],v=Ra.drawClass(l,R,s,r);_n[v.id]=v,h.setNode(v.id,v),B.info("Org height: "+v.height)}r.db.getRelations().forEach(function(E){B.info("tjoho"+gs(E.id1)+gs(E.id2)+JSON.stringify(E)),h.setEdge(gs(E.id1),gs(E.id2),{relation:E},E.title||"DEFAULT")}),r.db.getNotes().forEach(function(E){B.debug(`Adding note: ${JSON.stringify(E)}`);const R=Ra.drawNote(l,E,s,r);_n[R.id]=R,h.setNode(R.id,R),E.class&&E.class in u&&h.setEdge(E.id,gs(E.class),{relation:{id1:E.id,id2:E.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),Xs(h),h.nodes().forEach(function(E){E!==void 0&&h.node(E)!==void 0&&(B.debug("Node "+E+": "+JSON.stringify(h.node(E))),o.select("#"+(r.db.lookUpDomId(E)||E)).attr("transform","translate("+(h.node(E).x-h.node(E).width/2)+","+(h.node(E).y-h.node(E).height/2)+" )"))}),h.edges().forEach(function(E){E!==void 0&&h.edge(E)!==void 0&&(B.debug("Edge "+E.v+" -> "+E.w+": "+JSON.stringify(h.edge(E))),Ra.drawEdge(l,h.edge(E),h.edge(E).relation,s,r))});const y=l.node().getBBox(),x=y.width+fn*2,_=y.height+fn*2;Ne(l,_,x,s.useMaxWidth);const w=`${y.x-fn} ${y.y-fn} ${x} ${_}`;B.debug(`viewBox ${w}`),l.attr("viewBox",w)},I7={draw:B7},D7={parser:Y0,db:Qn,renderer:I7,styles:X0,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Qn.clear()}},F7=Object.freeze(Object.defineProperty({__proto__:null,diagram:D7},Symbol.toStringTag,{value:"Module"})),Sl=t=>mt.sanitizeText(t,Y());let xo={dividerMargin:10,padding:5,textHeight:10,curve:void 0};const R7=function(t,e,i,r){const s=Object.keys(t);B.info("keys:",s),B.info(t),s.forEach(function(n){var a,o;const l=t[n],u={shape:"rect",id:l.id,domId:l.domId,labelText:Sl(l.id),labelStyle:"",style:"fill: none; stroke: black",padding:((a=Y().flowchart)==null?void 0:a.padding)??((o=Y().class)==null?void 0:o.padding)};e.setNode(l.id,u),K0(l.classes,e,i,r,l.id),B.info("setNode",u)})},K0=function(t,e,i,r,s){const n=Object.keys(t);B.info("keys:",n),B.info(t),n.filter(a=>t[a].parent==s).forEach(function(a){var o,l;const h=t[a],u=h.cssClasses.join(" "),p=ii(h.styles),d=h.label??h.id,g=0,x={labelStyle:p.labelStyle,shape:"class_box",labelText:Sl(d),classData:h,rx:g,ry:g,class:u,style:p.style,id:h.id,domId:h.domId,tooltip:r.db.getTooltip(h.id,s)||"",haveCallback:h.haveCallback,link:h.link,width:h.type==="group"?500:void 0,type:h.type,padding:((o=Y().flowchart)==null?void 0:o.padding)??((l=Y().class)==null?void 0:l.padding)};e.setNode(h.id,x),s&&e.setParent(h.id,s),B.info("setNode",x)})},N7=function(t,e,i,r){B.info(t),t.forEach(function(s,n){var a,o;const l=s,h="",u={labelStyle:"",style:""},p=l.text,d=0,y={labelStyle:u.labelStyle,shape:"note",labelText:Sl(p),noteData:l,rx:d,ry:d,class:h,style:u.style,id:l.id,domId:l.id,tooltip:"",type:"note",padding:((a=Y().flowchart)==null?void 0:a.padding)??((o=Y().class)==null?void 0:o.padding)};if(e.setNode(l.id,y),B.info("setNode",y),!l.class||!(l.class in r))return;const x=i+n,_={id:`edgeNote${x}`,classes:"relation",pattern:"dotted",arrowhead:"none",startLabelRight:"",endLabelLeft:"",arrowTypeStart:"none",arrowTypeEnd:"none",style:"fill:none",labelStyle:"",curve:di(xo.curve,ei)};e.setEdge(l.id,l.class,_,x)})},O7=function(t,e){const i=Y().flowchart;let r=0;t.forEach(function(s){var n;r++;const a={classes:"relation",pattern:s.relation.lineType==1?"dashed":"solid",id:`id_${s.id1}_${s.id2}_${r}`,arrowhead:s.type==="arrow_open"?"none":"normal",startLabelRight:s.relationTitle1==="none"?"":s.relationTitle1,endLabelLeft:s.relationTitle2==="none"?"":s.relationTitle2,arrowTypeStart:Uc(s.relation.type1),arrowTypeEnd:Uc(s.relation.type2),style:"fill:none",labelStyle:"",curve:di(i?.curve,ei)};if(B.info(a,s),s.style!==void 0){const o=ii(s.style);a.style=o.style,a.labelStyle=o.labelStyle}s.text=s.title,s.text===void 0?s.style!==void 0&&(a.arrowheadStyle="fill: #333"):(a.arrowheadStyle="fill: #333",a.labelpos="c",((n=Y().flowchart)==null?void 0:n.htmlLabels)??Y().htmlLabels?(a.labelType="html",a.label='<span class="edgeLabel">'+s.text+"</span>"):(a.labelType="text",a.label=s.text.replace(mt.lineBreakRegex,`
`),s.style===void 0&&(a.style=a.style||"stroke: #333; stroke-width: 1.5px;fill:none"),a.labelStyle=a.labelStyle.replace("color:","fill:"))),e.setEdge(s.id1,s.id2,a,r)})},P7=function(t){xo={...xo,...t}},M7=async function(t,e,i,r){B.info("Drawing class - ",e);const s=Y().flowchart??Y().class,n=Y().securityLevel;B.info("config:",s);const a=s?.nodeSpacing??50,o=s?.rankSpacing??50,l=new Ii({multigraph:!0,compound:!0}).setGraph({rankdir:r.db.getDirection(),nodesep:a,ranksep:o,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),h=r.db.getNamespaces(),u=r.db.getClasses(),p=r.db.getRelations(),d=r.db.getNotes();B.info(p),R7(h,l,e,r),K0(u,l,e,r),O7(p,l),N7(d,l,p.length+1,u);let g;n==="sandbox"&&(g=yt("#i"+e));const y=n==="sandbox"?yt(g.nodes()[0].contentDocument.body):yt("body"),x=y.select(`[id="${e}"]`),_=y.select("#"+e+" g");if(await rl(_,l,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",e),Rt.insertTitle(x,"classTitleText",s?.titleTopMargin??5,r.db.getDiagramTitle()),yr(l,x,s?.diagramPadding,s?.useMaxWidth),!s?.htmlLabels){const w=n==="sandbox"?g.nodes()[0].contentDocument:document,E=w.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const R of E){const v=R.getBBox(),T=w.createElementNS("http://www.w3.org/2000/svg","rect");T.setAttribute("rx",0),T.setAttribute("ry",0),T.setAttribute("width",v.width),T.setAttribute("height",v.height),R.insertBefore(T,R.firstChild)}}};function Uc(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}const V7={setConf:P7,draw:M7},z7={parser:Y0,db:Qn,renderer:V7,styles:X0,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Qn.clear()}},q7=Object.freeze(Object.defineProperty({__proto__:null,diagram:z7},Symbol.toStringTag,{value:"Module"}));var bo=(function(){var t=function(D,F,I,M){for(I=I||{},M=D.length;M--;I[D[M]]=F);return I},e=[1,2],i=[1,3],r=[1,4],s=[2,4],n=[1,9],a=[1,11],o=[1,15],l=[1,16],h=[1,17],u=[1,18],p=[1,30],d=[1,19],g=[1,20],y=[1,21],x=[1,22],_=[1,23],w=[1,25],E=[1,26],R=[1,27],v=[1,28],T=[1,29],k=[1,32],A=[1,33],S=[1,34],m=[1,35],C=[1,31],f=[1,4,5,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],L=[1,4,5,13,14,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],b=[4,5,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],P={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,cssClassStatement:11,idStatement:12,DESCR:13,"-->":14,HIDE_EMPTY:15,scale:16,WIDTH:17,COMPOSIT_STATE:18,STRUCT_START:19,STRUCT_STOP:20,STATE_DESCR:21,AS:22,ID:23,FORK:24,JOIN:25,CHOICE:26,CONCURRENT:27,note:28,notePosition:29,NOTE_TEXT:30,direction:31,acc_title:32,acc_title_value:33,acc_descr:34,acc_descr_value:35,acc_descr_multiline_value:36,classDef:37,CLASSDEF_ID:38,CLASSDEF_STYLEOPTS:39,DEFAULT:40,class:41,CLASSENTITY_IDS:42,STYLECLASS:43,direction_tb:44,direction_bt:45,direction_rl:46,direction_lr:47,eol:48,";":49,EDGE_STATE:50,STYLE_SEPARATOR:51,left_of:52,right_of:53,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",13:"DESCR",14:"-->",15:"HIDE_EMPTY",16:"scale",17:"WIDTH",18:"COMPOSIT_STATE",19:"STRUCT_START",20:"STRUCT_STOP",21:"STATE_DESCR",22:"AS",23:"ID",24:"FORK",25:"JOIN",26:"CHOICE",27:"CONCURRENT",28:"note",30:"NOTE_TEXT",32:"acc_title",33:"acc_title_value",34:"acc_descr",35:"acc_descr_value",36:"acc_descr_multiline_value",37:"classDef",38:"CLASSDEF_ID",39:"CLASSDEF_STYLEOPTS",40:"DEFAULT",41:"class",42:"CLASSENTITY_IDS",43:"STYLECLASS",44:"direction_tb",45:"direction_bt",46:"direction_rl",47:"direction_lr",49:";",50:"EDGE_STATE",51:"STYLE_SEPARATOR",52:"left_of",53:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[10,3],[10,3],[11,3],[31,1],[31,1],[31,1],[31,1],[48,1],[48,1],[12,1],[12,1],[12,3],[12,3],[29,1],[29,1]],performAction:function(F,I,M,z,st,j,dt){var K=j.length-1;switch(st){case 3:return z.setRootDoc(j[K]),j[K];case 4:this.$=[];break;case 5:j[K]!="nl"&&(j[K-1].push(j[K]),this.$=j[K-1]);break;case 6:case 7:this.$=j[K];break;case 8:this.$="nl";break;case 11:this.$=j[K];break;case 12:const Q=j[K-1];Q.description=z.trimColon(j[K]),this.$=Q;break;case 13:this.$={stmt:"relation",state1:j[K-2],state2:j[K]};break;case 14:const J=z.trimColon(j[K]);this.$={stmt:"relation",state1:j[K-3],state2:j[K-1],description:J};break;case 18:this.$={stmt:"state",id:j[K-3],type:"default",description:"",doc:j[K-1]};break;case 19:var G=j[K],tt=j[K-2].trim();if(j[K].match(":")){var nt=j[K].split(":");G=nt[0],tt=[tt,nt[1]]}this.$={stmt:"state",id:G,type:"default",description:tt};break;case 20:this.$={stmt:"state",id:j[K-3],type:"default",description:j[K-5],doc:j[K-1]};break;case 21:this.$={stmt:"state",id:j[K],type:"fork"};break;case 22:this.$={stmt:"state",id:j[K],type:"join"};break;case 23:this.$={stmt:"state",id:j[K],type:"choice"};break;case 24:this.$={stmt:"state",id:z.getDividerId(),type:"divider"};break;case 25:this.$={stmt:"state",id:j[K-1].trim(),note:{position:j[K-2].trim(),text:j[K].trim()}};break;case 28:this.$=j[K].trim(),z.setAccTitle(this.$);break;case 29:case 30:this.$=j[K].trim(),z.setAccDescription(this.$);break;case 31:case 32:this.$={stmt:"classDef",id:j[K-1].trim(),classes:j[K].trim()};break;case 33:this.$={stmt:"applyClass",id:j[K-1].trim(),styleClass:j[K].trim()};break;case 34:z.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 35:z.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 36:z.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 37:z.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 40:case 41:this.$={stmt:"state",id:j[K].trim(),type:"default",description:""};break;case 42:this.$={stmt:"state",id:j[K-2].trim(),classes:[j[K].trim()],type:"default",description:""};break;case 43:this.$={stmt:"state",id:j[K-2].trim(),classes:[j[K].trim()],type:"default",description:""};break}},table:[{3:1,4:e,5:i,6:r},{1:[3]},{3:5,4:e,5:i,6:r},{3:6,4:e,5:i,6:r},t([1,4,5,15,16,18,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],s,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:n,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,21:u,23:p,24:d,25:g,26:y,27:x,28:_,31:24,32:w,34:E,36:R,37:v,41:T,44:k,45:A,46:S,47:m,50:C},t(f,[2,5]),{9:36,10:12,11:13,12:14,15:o,16:l,18:h,21:u,23:p,24:d,25:g,26:y,27:x,28:_,31:24,32:w,34:E,36:R,37:v,41:T,44:k,45:A,46:S,47:m,50:C},t(f,[2,7]),t(f,[2,8]),t(f,[2,9]),t(f,[2,10]),t(f,[2,11],{13:[1,37],14:[1,38]}),t(f,[2,15]),{17:[1,39]},t(f,[2,17],{19:[1,40]}),{22:[1,41]},t(f,[2,21]),t(f,[2,22]),t(f,[2,23]),t(f,[2,24]),{29:42,30:[1,43],52:[1,44],53:[1,45]},t(f,[2,27]),{33:[1,46]},{35:[1,47]},t(f,[2,30]),{38:[1,48],40:[1,49]},{42:[1,50]},t(L,[2,40],{51:[1,51]}),t(L,[2,41],{51:[1,52]}),t(f,[2,34]),t(f,[2,35]),t(f,[2,36]),t(f,[2,37]),t(f,[2,6]),t(f,[2,12]),{12:53,23:p,50:C},t(f,[2,16]),t(b,s,{7:54}),{23:[1,55]},{23:[1,56]},{22:[1,57]},{23:[2,44]},{23:[2,45]},t(f,[2,28]),t(f,[2,29]),{39:[1,58]},{39:[1,59]},{43:[1,60]},{23:[1,61]},{23:[1,62]},t(f,[2,13],{13:[1,63]}),{4:n,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,20:[1,64],21:u,23:p,24:d,25:g,26:y,27:x,28:_,31:24,32:w,34:E,36:R,37:v,41:T,44:k,45:A,46:S,47:m,50:C},t(f,[2,19],{19:[1,65]}),{30:[1,66]},{23:[1,67]},t(f,[2,31]),t(f,[2,32]),t(f,[2,33]),t(L,[2,42]),t(L,[2,43]),t(f,[2,14]),t(f,[2,18]),t(b,s,{7:68}),t(f,[2,25]),t(f,[2,26]),{4:n,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,20:[1,69],21:u,23:p,24:d,25:g,26:y,27:x,28:_,31:24,32:w,34:E,36:R,37:v,41:T,44:k,45:A,46:S,47:m,50:C},t(f,[2,20])],defaultActions:{5:[2,1],6:[2,2],44:[2,44],45:[2,45]},parseError:function(F,I){if(I.recoverable)this.trace(F);else{var M=new Error(F);throw M.hash=I,M}},parse:function(F){var I=this,M=[0],z=[],st=[null],j=[],dt=this.table,K="",G=0,tt=0,nt=2,Q=1,J=j.slice.call(arguments,1),O=Object.create(this.lexer),at={yy:{}};for(var W in this.yy)Object.prototype.hasOwnProperty.call(this.yy,W)&&(at.yy[W]=this.yy[W]);O.setInput(F,at.yy),at.yy.lexer=O,at.yy.parser=this,typeof O.yylloc>"u"&&(O.yylloc={});var ft=O.yylloc;j.push(ft);var V=O.options&&O.options.ranges;typeof at.yy.parseError=="function"?this.parseError=at.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function vt(){var ht;return ht=z.pop()||O.lex()||Q,typeof ht!="number"&&(ht instanceof Array&&(z=ht,ht=z.pop()),ht=I.symbols_[ht]||ht),ht}for(var X,St,bt,Vt,Bt={},Wt,pt,ut,ot;;){if(St=M[M.length-1],this.defaultActions[St]?bt=this.defaultActions[St]:((X===null||typeof X>"u")&&(X=vt()),bt=dt[St]&&dt[St][X]),typeof bt>"u"||!bt.length||!bt[0]){var lt="";ot=[];for(Wt in dt[St])this.terminals_[Wt]&&Wt>nt&&ot.push("'"+this.terminals_[Wt]+"'");O.showPosition?lt="Parse error on line "+(G+1)+`:
`+O.showPosition()+`
Expecting `+ot.join(", ")+", got '"+(this.terminals_[X]||X)+"'":lt="Parse error on line "+(G+1)+": Unexpected "+(X==Q?"end of input":"'"+(this.terminals_[X]||X)+"'"),this.parseError(lt,{text:O.match,token:this.terminals_[X]||X,line:O.yylineno,loc:ft,expected:ot})}if(bt[0]instanceof Array&&bt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+St+", token: "+X);switch(bt[0]){case 1:M.push(X),st.push(O.yytext),j.push(O.yylloc),M.push(bt[1]),X=null,tt=O.yyleng,K=O.yytext,G=O.yylineno,ft=O.yylloc;break;case 2:if(pt=this.productions_[bt[1]][1],Bt.$=st[st.length-pt],Bt._$={first_line:j[j.length-(pt||1)].first_line,last_line:j[j.length-1].last_line,first_column:j[j.length-(pt||1)].first_column,last_column:j[j.length-1].last_column},V&&(Bt._$.range=[j[j.length-(pt||1)].range[0],j[j.length-1].range[1]]),Vt=this.performAction.apply(Bt,[K,tt,G,at.yy,bt[1],st,j].concat(J)),typeof Vt<"u")return Vt;pt&&(M=M.slice(0,-1*pt*2),st=st.slice(0,-1*pt),j=j.slice(0,-1*pt)),M.push(this.productions_[bt[1]][0]),st.push(Bt.$),j.push(Bt._$),ut=dt[M[M.length-2]][M[M.length-1]],M.push(ut);break;case 3:return!0}}return!0}},U=(function(){var D={EOF:1,parseError:function(I,M){if(this.yy.parser)this.yy.parser.parseError(I,M);else throw new Error(I)},setInput:function(F,I){return this.yy=I||this.yy||{},this._input=F,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var F=this._input[0];this.yytext+=F,this.yyleng++,this.offset++,this.match+=F,this.matched+=F;var I=F.match(/(?:\r\n?|\n).*/g);return I?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),F},unput:function(F){var I=F.length,M=F.split(/(?:\r\n?|\n)/g);this._input=F+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-I),this.offset-=I;var z=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),M.length-1&&(this.yylineno-=M.length-1);var st=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:M?(M.length===z.length?this.yylloc.first_column:0)+z[z.length-M.length].length-M[0].length:this.yylloc.first_column-I},this.options.ranges&&(this.yylloc.range=[st[0],st[0]+this.yyleng-I]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(F){this.unput(this.match.slice(F))},pastInput:function(){var F=this.matched.substr(0,this.matched.length-this.match.length);return(F.length>20?"...":"")+F.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var F=this.match;return F.length<20&&(F+=this._input.substr(0,20-F.length)),(F.substr(0,20)+(F.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var F=this.pastInput(),I=new Array(F.length+1).join("-");return F+this.upcomingInput()+`
`+I+"^"},test_match:function(F,I){var M,z,st;if(this.options.backtrack_lexer&&(st={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(st.yylloc.range=this.yylloc.range.slice(0))),z=F[0].match(/(?:\r\n?|\n).*/g),z&&(this.yylineno+=z.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:z?z[z.length-1].length-z[z.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+F[0].length},this.yytext+=F[0],this.match+=F[0],this.matches=F,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(F[0].length),this.matched+=F[0],M=this.performAction.call(this,this.yy,this,I,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),M)return M;if(this._backtrack){for(var j in st)this[j]=st[j];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var F,I,M,z;this._more||(this.yytext="",this.match="");for(var st=this._currentRules(),j=0;j<st.length;j++)if(M=this._input.match(this.rules[st[j]]),M&&(!I||M[0].length>I[0].length)){if(I=M,z=j,this.options.backtrack_lexer){if(F=this.test_match(M,st[j]),F!==!1)return F;if(this._backtrack){I=!1;continue}else return!1}else if(!this.options.flex)break}return I?(F=this.test_match(I,st[z]),F!==!1?F:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var I=this.next();return I||this.lex()},begin:function(I){this.conditionStack.push(I)},popState:function(){var I=this.conditionStack.length-1;return I>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(I){return I=this.conditionStack.length-1-Math.abs(I||0),I>=0?this.conditionStack[I]:"INITIAL"},pushState:function(I){this.begin(I)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(I,M,z,st){switch(z){case 0:return 40;case 1:return 44;case 2:return 45;case 3:return 46;case 4:return 47;case 5:break;case 6:break;case 7:return 5;case 8:break;case 9:break;case 10:break;case 11:break;case 12:return this.pushState("SCALE"),16;case 13:return 17;case 14:this.popState();break;case 15:return this.begin("acc_title"),32;case 16:return this.popState(),"acc_title_value";case 17:return this.begin("acc_descr"),34;case 18:return this.popState(),"acc_descr_value";case 19:this.begin("acc_descr_multiline");break;case 20:this.popState();break;case 21:return"acc_descr_multiline_value";case 22:return this.pushState("CLASSDEF"),37;case 23:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 24:return this.popState(),this.pushState("CLASSDEFID"),38;case 25:return this.popState(),39;case 26:return this.pushState("CLASS"),41;case 27:return this.popState(),this.pushState("CLASS_STYLE"),42;case 28:return this.popState(),43;case 29:return this.pushState("SCALE"),16;case 30:return 17;case 31:this.popState();break;case 32:this.pushState("STATE");break;case 33:return this.popState(),M.yytext=M.yytext.slice(0,-8).trim(),24;case 34:return this.popState(),M.yytext=M.yytext.slice(0,-8).trim(),25;case 35:return this.popState(),M.yytext=M.yytext.slice(0,-10).trim(),26;case 36:return this.popState(),M.yytext=M.yytext.slice(0,-8).trim(),24;case 37:return this.popState(),M.yytext=M.yytext.slice(0,-8).trim(),25;case 38:return this.popState(),M.yytext=M.yytext.slice(0,-10).trim(),26;case 39:return 44;case 40:return 45;case 41:return 46;case 42:return 47;case 43:this.pushState("STATE_STRING");break;case 44:return this.pushState("STATE_ID"),"AS";case 45:return this.popState(),"ID";case 46:this.popState();break;case 47:return"STATE_DESCR";case 48:return 18;case 49:this.popState();break;case 50:return this.popState(),this.pushState("struct"),19;case 51:break;case 52:return this.popState(),20;case 53:break;case 54:return this.begin("NOTE"),28;case 55:return this.popState(),this.pushState("NOTE_ID"),52;case 56:return this.popState(),this.pushState("NOTE_ID"),53;case 57:this.popState(),this.pushState("FLOATING_NOTE");break;case 58:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 59:break;case 60:return"NOTE_TEXT";case 61:return this.popState(),"ID";case 62:return this.popState(),this.pushState("NOTE_TEXT"),23;case 63:return this.popState(),M.yytext=M.yytext.substr(2).trim(),30;case 64:return this.popState(),M.yytext=M.yytext.slice(0,-8).trim(),30;case 65:return 6;case 66:return 6;case 67:return 15;case 68:return 50;case 69:return 23;case 70:return M.yytext=M.yytext.trim(),13;case 71:return 14;case 72:return 27;case 73:return 51;case 74:return 5;case 75:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[9,10],inclusive:!1},struct:{rules:[9,10,22,26,32,39,40,41,42,51,52,53,54,68,69,70,71,72],inclusive:!1},FLOATING_NOTE_ID:{rules:[61],inclusive:!1},FLOATING_NOTE:{rules:[58,59,60],inclusive:!1},NOTE_TEXT:{rules:[63,64],inclusive:!1},NOTE_ID:{rules:[62],inclusive:!1},NOTE:{rules:[55,56,57],inclusive:!1},CLASS_STYLE:{rules:[28],inclusive:!1},CLASS:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[25],inclusive:!1},CLASSDEF:{rules:[23,24],inclusive:!1},acc_descr_multiline:{rules:[20,21],inclusive:!1},acc_descr:{rules:[18],inclusive:!1},acc_title:{rules:[16],inclusive:!1},SCALE:{rules:[13,14,30,31],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[45],inclusive:!1},STATE_STRING:{rules:[46,47],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[9,10,33,34,35,36,37,38,43,44,48,49,50],inclusive:!1},ID:{rules:[9,10],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,10,11,12,15,17,19,22,26,29,32,50,54,65,66,67,68,69,70,71,73,74,75],inclusive:!0}}};return D})();P.lexer=U;function N(){this.yy={}}return N.prototype=P,P.Parser=N,new N})();bo.parser=bo;const Q0=bo,W7="LR",Y7="TB",Zn="state",wl="relation",U7="classDef",H7="applyClass",an="default",Z0="divider",vl="[*]",J0="start",td=vl,ed="end",Hc="color",Gc="fill",G7="bgFill",j7=",";function id(){return{}}let rd=W7,Jn=[],vs=id();const sd=()=>({relations:[],states:{},documents:{}});let ta={root:sd()},Ie=ta.root,Ys=0,jc=0;const X7={LINE:0,DOTTED_LINE:1},$7={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},pn=t=>JSON.parse(JSON.stringify(t)),K7=t=>{B.info("Setting root doc",t),Jn=t},Q7=()=>Jn,Tn=(t,e,i)=>{if(e.stmt===wl)Tn(t,e.state1,!0),Tn(t,e.state2,!1);else if(e.stmt===Zn&&(e.id==="[*]"?(e.id=i?t.id+"_start":t.id+"_end",e.start=i):e.id=e.id.trim()),e.doc){const r=[];let s=[],n;for(n=0;n<e.doc.length;n++)if(e.doc[n].type===Z0){const a=pn(e.doc[n]);a.doc=pn(s),r.push(a),s=[]}else s.push(e.doc[n]);if(r.length>0&&s.length>0){const a={stmt:Zn,id:Fh(),type:"divider",doc:pn(s)};r.push(pn(a)),e.doc=r}e.doc.forEach(a=>Tn(e,a,!0))}},Z7=()=>(Tn({id:"root"},{id:"root",doc:Jn},!0),{id:"root",doc:Jn}),J7=t=>{let e;t.doc?e=t.doc:e=t,B.info(e),nd(!0),B.info("Extract",e),e.forEach(i=>{switch(i.stmt){case Zn:Dr(i.id.trim(),i.type,i.doc,i.description,i.note,i.classes,i.styles,i.textStyles);break;case wl:ad(i.state1,i.state2,i.description);break;case U7:od(i.id.trim(),i.classes);break;case H7:Al(i.id.trim(),i.styleClass);break}})},Dr=function(t,e=an,i=null,r=null,s=null,n=null,a=null,o=null){const l=t?.trim();Ie.states[l]===void 0?(B.info("Adding state ",l,r),Ie.states[l]={id:l,descriptions:[],type:e,doc:i,note:s,classes:[],styles:[],textStyles:[]}):(Ie.states[l].doc||(Ie.states[l].doc=i),Ie.states[l].type||(Ie.states[l].type=e)),r&&(B.info("Setting state description",l,r),typeof r=="string"&&To(l,r.trim()),typeof r=="object"&&r.forEach(h=>To(l,h.trim()))),s&&(Ie.states[l].note=s,Ie.states[l].note.text=mt.sanitizeText(Ie.states[l].note.text,Y())),n&&(B.info("Setting state classes",l,n),(typeof n=="string"?[n]:n).forEach(u=>Al(l,u.trim()))),a&&(B.info("Setting state styles",l,a),(typeof a=="string"?[a]:a).forEach(u=>cT(l,u.trim()))),o&&(B.info("Setting state styles",l,a),(typeof o=="string"?[o]:o).forEach(u=>hT(l,u.trim())))},nd=function(t){ta={root:sd()},Ie=ta.root,Ys=0,vs=id(),t||Oe()},Us=function(t){return Ie.states[t]},tT=function(){return Ie.states},eT=function(){B.info("Documents = ",ta)},iT=function(){return Ie.relations};function ko(t=""){let e=t;return t===vl&&(Ys++,e=`${J0}${Ys}`),e}function _o(t="",e=an){return t===vl?J0:e}function rT(t=""){let e=t;return t===td&&(Ys++,e=`${ed}${Ys}`),e}function sT(t="",e=an){return t===td?ed:e}function nT(t,e,i){let r=ko(t.id.trim()),s=_o(t.id.trim(),t.type),n=ko(e.id.trim()),a=_o(e.id.trim(),e.type);Dr(r,s,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles),Dr(n,a,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles),Ie.relations.push({id1:r,id2:n,relationTitle:mt.sanitizeText(i,Y())})}const ad=function(t,e,i){if(typeof t=="object")nT(t,e,i);else{const r=ko(t.trim()),s=_o(t),n=rT(e.trim()),a=sT(e);Dr(r,s),Dr(n,a),Ie.relations.push({id1:r,id2:n,title:mt.sanitizeText(i,Y())})}},To=function(t,e){const i=Ie.states[t],r=e.startsWith(":")?e.replace(":","").trim():e;i.descriptions.push(mt.sanitizeText(r,Y()))},aT=function(t){return t.substring(0,1)===":"?t.substr(2).trim():t.trim()},oT=()=>(jc++,"divider-id-"+jc),od=function(t,e=""){vs[t]===void 0&&(vs[t]={id:t,styles:[],textStyles:[]});const i=vs[t];e?.split(j7).forEach(r=>{const s=r.replace(/([^;]*);/,"$1").trim();if(r.match(Hc)){const a=s.replace(Gc,G7).replace(Hc,Gc);i.textStyles.push(a)}i.styles.push(s)})},lT=function(){return vs},Al=function(t,e){t.split(",").forEach(function(i){let r=Us(i);if(r===void 0){const s=i.trim();Dr(s),r=Us(s)}r.classes.push(e)})},cT=function(t,e){const i=Us(t);i!==void 0&&i.textStyles.push(e)},hT=function(t,e){const i=Us(t);i!==void 0&&i.textStyles.push(e)},uT=()=>rd,dT=t=>{rd=t},fT=t=>t&&t[0]===":"?t.substr(1).trim():t.trim(),ji={getConfig:()=>Y().state,addState:Dr,clear:nd,getState:Us,getStates:tT,getRelations:iT,getClasses:lT,getDirection:uT,addRelation:ad,getDividerId:oT,setDirection:dT,cleanupLabel:aT,lineType:X7,relationType:$7,logDocuments:eT,getRootDoc:Q7,setRootDoc:K7,getRootDocV2:Z7,extract:J7,trimColon:fT,getAccTitle:Ye,setAccTitle:Pe,getAccDescription:He,setAccDescription:Ue,addStyleClass:od,setCssClass:Al,addDescription:To,setDiagramTitle:ri,getDiagramTitle:Ge},pT=t=>`
defs #statediagram-barbEnd {
    fill: ${t.transitionColor};
    stroke: ${t.transitionColor};
  }
g.stateGroup text {
  fill: ${t.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${t.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${t.stateLabelColor};
}

g.stateGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.stateGroup line {
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${t.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${t.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${t.noteBorderColor};
  fill: ${t.noteBkgColor};

  text {
    fill: ${t.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${t.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${t.transitionLabelColor||t.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${t.transitionLabelColor||t.tertiaryTextColor};
}

.stateLabel text {
  fill: ${t.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node .fork-join {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node circle.state-end {
  fill: ${t.innerEndBackground};
  stroke: ${t.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${t.compositeBackground||t.background};
  // stroke: ${t.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${t.stateBkg||t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${t.lineColor};
}

.statediagram-cluster rect {
  fill: ${t.compositeTitleBackground};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${t.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${t.stateBorder||t.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${t.compositeBackground||t.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${t.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${t.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${t.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${t.lineColor};
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,ld=pT,gT=t=>t.append("circle").attr("class","start-state").attr("r",Y().state.sizeUnit).attr("cx",Y().state.padding+Y().state.sizeUnit).attr("cy",Y().state.padding+Y().state.sizeUnit),yT=t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",Y().state.textHeight).attr("class","divider").attr("x2",Y().state.textHeight*2).attr("y1",0).attr("y2",0),mT=(t,e)=>{const i=t.append("text").attr("x",2*Y().state.padding).attr("y",Y().state.textHeight+2*Y().state.padding).attr("font-size",Y().state.fontSize).attr("class","state-title").text(e.id),r=i.node().getBBox();return t.insert("rect",":first-child").attr("x",Y().state.padding).attr("y",Y().state.padding).attr("width",r.width+2*Y().state.padding).attr("height",r.height+2*Y().state.padding).attr("rx",Y().state.radius),i},xT=(t,e)=>{const i=function(d,g,y){const x=d.append("tspan").attr("x",2*Y().state.padding).text(g);y||x.attr("dy",Y().state.textHeight)},s=t.append("text").attr("x",2*Y().state.padding).attr("y",Y().state.textHeight+1.3*Y().state.padding).attr("font-size",Y().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),n=s.height,a=t.append("text").attr("x",Y().state.padding).attr("y",n+Y().state.padding*.4+Y().state.dividerMargin+Y().state.textHeight).attr("class","state-description");let o=!0,l=!0;e.descriptions.forEach(function(d){o||(i(a,d,l),l=!1),o=!1});const h=t.append("line").attr("x1",Y().state.padding).attr("y1",Y().state.padding+n+Y().state.dividerMargin/2).attr("y2",Y().state.padding+n+Y().state.dividerMargin/2).attr("class","descr-divider"),u=a.node().getBBox(),p=Math.max(u.width,s.width);return h.attr("x2",p+3*Y().state.padding),t.insert("rect",":first-child").attr("x",Y().state.padding).attr("y",Y().state.padding).attr("width",p+2*Y().state.padding).attr("height",u.height+n+2*Y().state.padding).attr("rx",Y().state.radius),t},bT=(t,e,i)=>{const r=Y().state.padding,s=2*Y().state.padding,n=t.node().getBBox(),a=n.width,o=n.x,l=t.append("text").attr("x",0).attr("y",Y().state.titleShift).attr("font-size",Y().state.fontSize).attr("class","state-title").text(e.id),u=l.node().getBBox().width+s;let p=Math.max(u,a);p===a&&(p=p+s);let d;const g=t.node().getBBox();e.doc,d=o-r,u>a&&(d=(a-p)/2+r),Math.abs(o-g.x)<r&&u>a&&(d=o-(u-a)/2);const y=1-Y().state.textHeight;return t.insert("rect",":first-child").attr("x",d).attr("y",y).attr("class",i?"alt-composit":"composit").attr("width",p).attr("height",g.height+Y().state.textHeight+Y().state.titleShift+1).attr("rx","0"),l.attr("x",d+r),u<=a&&l.attr("x",o+(p-s)/2-u/2+r),t.insert("rect",":first-child").attr("x",d).attr("y",Y().state.titleShift-Y().state.textHeight-Y().state.padding).attr("width",p).attr("height",Y().state.textHeight*3).attr("rx",Y().state.radius),t.insert("rect",":first-child").attr("x",d).attr("y",Y().state.titleShift-Y().state.textHeight-Y().state.padding).attr("width",p).attr("height",g.height+3+2*Y().state.textHeight).attr("rx",Y().state.radius),t},kT=t=>(t.append("circle").attr("class","end-state-outer").attr("r",Y().state.sizeUnit+Y().state.miniPadding).attr("cx",Y().state.padding+Y().state.sizeUnit+Y().state.miniPadding).attr("cy",Y().state.padding+Y().state.sizeUnit+Y().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",Y().state.sizeUnit).attr("cx",Y().state.padding+Y().state.sizeUnit+2).attr("cy",Y().state.padding+Y().state.sizeUnit+2)),_T=(t,e)=>{let i=Y().state.forkWidth,r=Y().state.forkHeight;if(e.parentId){let s=i;i=r,r=s}return t.append("rect").style("stroke","black").style("fill","black").attr("width",i).attr("height",r).attr("x",Y().state.padding).attr("y",Y().state.padding)},TT=(t,e,i,r)=>{let s=0;const n=r.append("text");n.style("text-anchor","start"),n.attr("class","noteText");let a=t.replace(/\r\n/g,"<br/>");a=a.replace(/\n/g,"<br/>");const o=a.split(mt.lineBreakRegex);let l=1.25*Y().state.noteMargin;for(const h of o){const u=h.trim();if(u.length>0){const p=n.append("tspan");if(p.text(u),l===0){const d=p.node().getBBox();l+=d.height}s+=l,p.attr("x",e+Y().state.noteMargin),p.attr("y",i+s+1.25*Y().state.noteMargin)}}return{textWidth:n.node().getBBox().width,textHeight:s}},CT=(t,e)=>{e.attr("class","state-note");const i=e.append("rect").attr("x",0).attr("y",Y().state.padding),r=e.append("g"),{textWidth:s,textHeight:n}=TT(t,0,0,r);return i.attr("height",n+2*Y().state.noteMargin),i.attr("width",s+Y().state.noteMargin*2),i},Xc=function(t,e){const i=e.id,r={id:i,label:e.id,width:0,height:0},s=t.append("g").attr("id",i).attr("class","stateGroup");e.type==="start"&&gT(s),e.type==="end"&&kT(s),(e.type==="fork"||e.type==="join")&&_T(s,e),e.type==="note"&&CT(e.note.text,s),e.type==="divider"&&yT(s),e.type==="default"&&e.descriptions.length===0&&mT(s,e),e.type==="default"&&e.descriptions.length>0&&xT(s,e);const n=s.node().getBBox();return r.width=n.width+2*Y().state.padding,r.height=n.height+2*Y().state.padding,r};let $c=0;const ET=function(t,e,i){const r=function(l){switch(l){case ji.relationType.AGGREGATION:return"aggregation";case ji.relationType.EXTENSION:return"extension";case ji.relationType.COMPOSITION:return"composition";case ji.relationType.DEPENDENCY:return"dependency"}};e.points=e.points.filter(l=>!Number.isNaN(l.y));const s=e.points,n=fr().x(function(l){return l.x}).y(function(l){return l.y}).curve($s),a=t.append("path").attr("d",n(s)).attr("id","edge"+$c).attr("class","transition");let o="";if(Y().state.arrowMarkerAbsolute&&(o=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,o=o.replace(/\(/g,"\\("),o=o.replace(/\)/g,"\\)")),a.attr("marker-end","url("+o+"#"+r(ji.relationType.DEPENDENCY)+"End)"),i.title!==void 0){const l=t.append("g").attr("class","stateLabel"),{x:h,y:u}=Rt.calcLabelPosition(e.points),p=mt.getRows(i.title);let d=0;const g=[];let y=0,x=0;for(let E=0;E<=p.length;E++){const R=l.append("text").attr("text-anchor","middle").text(p[E]).attr("x",h).attr("y",u+d),v=R.node().getBBox();y=Math.max(y,v.width),x=Math.min(x,v.x),B.info(v.x,h,u+d),d===0&&(d=R.node().getBBox().height,B.info("Title height",d,u)),g.push(R)}let _=d*p.length;if(p.length>1){const E=(p.length-1)*d*.5;g.forEach((R,v)=>R.attr("y",u+v*d-E)),_=d*p.length}const w=l.node().getBBox();l.insert("rect",":first-child").attr("class","box").attr("x",h-y/2-Y().state.padding/2).attr("y",u-_/2-Y().state.padding/2-3.5).attr("width",y+Y().state.padding).attr("height",_+Y().state.padding),B.info(w)}$c++};let ti;const Na={},ST=function(){},wT=function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},vT=function(t,e,i,r){ti=Y().state;const s=Y().securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const a=s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body"),o=s==="sandbox"?n.nodes()[0].contentDocument:document;B.debug("Rendering diagram "+t);const l=a.select(`[id='${e}']`);wT(l);const h=r.db.getRootDoc();cd(h,l,void 0,!1,a,o,r);const u=ti.padding,p=l.node().getBBox(),d=p.width+u*2,g=p.height+u*2,y=d*1.75;Ne(l,g,y,ti.useMaxWidth),l.attr("viewBox",`${p.x-ti.padding}  ${p.y-ti.padding} `+d+" "+g)},AT=t=>t?t.length*ti.fontSizeFactor:1,cd=(t,e,i,r,s,n,a)=>{const o=new Ii({compound:!0,multigraph:!0});let l,h=!0;for(l=0;l<t.length;l++)if(t[l].stmt==="relation"){h=!1;break}i?o.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:h?1:ti.edgeLengthFactor,nodeSep:h?1:50,isMultiGraph:!0}):o.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:h?1:ti.edgeLengthFactor,nodeSep:h?1:50,ranker:"tight-tree",isMultiGraph:!0}),o.setDefaultEdgeLabel(function(){return{}}),a.db.extract(t);const u=a.db.getStates(),p=a.db.getRelations(),d=Object.keys(u);for(const w of d){const E=u[w];i&&(E.parentId=i);let R;if(E.doc){let v=e.append("g").attr("id",E.id).attr("class","stateGroup");R=cd(E.doc,v,E.id,!r,s,n,a);{v=bT(v,E,r);let T=v.node().getBBox();R.width=T.width,R.height=T.height+ti.padding/2,Na[E.id]={y:ti.compositTitleSize}}}else R=Xc(e,E);if(E.note){const v={descriptions:[],id:E.id+"-note",note:E.note,type:"note"},T=Xc(e,v);E.note.position==="left of"?(o.setNode(R.id+"-note",T),o.setNode(R.id,R)):(o.setNode(R.id,R),o.setNode(R.id+"-note",T)),o.setParent(R.id,R.id+"-group"),o.setParent(R.id+"-note",R.id+"-group")}else o.setNode(R.id,R)}B.debug("Count=",o.nodeCount(),o);let g=0;p.forEach(function(w){g++,B.debug("Setting edge",w),o.setEdge(w.id1,w.id2,{relation:w,width:AT(w.title),height:ti.labelHeight*mt.getRows(w.title).length,labelpos:"c"},"id"+g)}),Xs(o),B.debug("Graph after layout",o.nodes());const y=e.node();o.nodes().forEach(function(w){w!==void 0&&o.node(w)!==void 0?(B.warn("Node "+w+": "+JSON.stringify(o.node(w))),s.select("#"+y.id+" #"+w).attr("transform","translate("+(o.node(w).x-o.node(w).width/2)+","+(o.node(w).y+(Na[w]?Na[w].y:0)-o.node(w).height/2)+" )"),s.select("#"+y.id+" #"+w).attr("data-x-shift",o.node(w).x-o.node(w).width/2),n.querySelectorAll("#"+y.id+" #"+w+" .divider").forEach(R=>{const v=R.parentElement;let T=0,k=0;v&&(v.parentElement&&(T=v.parentElement.getBBox().width),k=parseInt(v.getAttribute("data-x-shift"),10),Number.isNaN(k)&&(k=0)),R.setAttribute("x1",0-k+8),R.setAttribute("x2",T-k-8)})):B.debug("No Node "+w+": "+JSON.stringify(o.node(w)))});let x=y.getBBox();o.edges().forEach(function(w){w!==void 0&&o.edge(w)!==void 0&&(B.debug("Edge "+w.v+" -> "+w.w+": "+JSON.stringify(o.edge(w))),ET(e,o.edge(w),o.edge(w).relation))}),x=y.getBBox();const _={id:i||"root",label:i||"root",width:0,height:0};return _.width=x.width+2*ti.padding,_.height=x.height+2*ti.padding,B.debug("Doc rendered",_,o),_},LT={setConf:ST,draw:vT},BT={parser:Q0,db:ji,renderer:LT,styles:ld,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,ji.clear()}},IT=Object.freeze(Object.defineProperty({__proto__:null,diagram:BT},Symbol.toStringTag,{value:"Module"})),Cn="rect",Oa="rectWithTitle",DT="start",FT="end",RT="divider",NT="roundedWithTitle",OT="note",PT="noteGroup",ls="statediagram",MT="state",VT=`${ls}-${MT}`,hd="transition",zT="note",qT="note-edge",WT=`${hd} ${qT}`,YT=`${ls}-${zT}`,UT="cluster",HT=`${ls}-${UT}`,GT="cluster-alt",jT=`${ls}-${GT}`,ud="parent",dd="note",XT="state",Ll="----",$T=`${Ll}${dd}`,Kc=`${Ll}${ud}`,fd="fill:none",pd="fill: #333",gd="c",yd="text",md="normal";let En={},cr=0;const KT=function(t){const e=Object.keys(t);for(const i of e)t[i]},QT=function(t,e){return e.db.extract(e.db.getRootDocV2()),e.db.getClasses()};function ZT(t){return t==null?"":t.classes?t.classes.join(" "):""}function Pa(t="",e=0,i="",r=Ll){const s=i!==null&&i.length>0?`${r}${i}`:"";return`${XT}-${t}${s}-${e}`}const bs=(t,e,i,r,s,n)=>{const a=i.id,o=ZT(r[a]);if(a!=="root"){let l=Cn;i.start===!0&&(l=DT),i.start===!1&&(l=FT),i.type!==an&&(l=i.type),En[a]||(En[a]={id:a,shape:l,description:mt.sanitizeText(a,Y()),classes:`${o} ${VT}`});const h=En[a];i.description&&(Array.isArray(h.description)?(h.shape=Oa,h.description.push(i.description)):h.description.length>0?(h.shape=Oa,h.description===a?h.description=[i.description]:h.description=[h.description,i.description]):(h.shape=Cn,h.description=i.description),h.description=mt.sanitizeTextOrArray(h.description,Y())),h.description.length===1&&h.shape===Oa&&(h.shape=Cn),!h.type&&i.doc&&(B.info("Setting cluster for ",a,Co(i)),h.type="group",h.dir=Co(i),h.shape=i.type===Z0?RT:NT,h.classes=h.classes+" "+HT+" "+(n?jT:""));const u={labelStyle:"",shape:h.shape,labelText:h.description,classes:h.classes,style:"",id:a,dir:h.dir,domId:Pa(a,cr),type:h.type,padding:15};if(u.centerLabel=!0,i.note){const p={labelStyle:"",shape:OT,labelText:i.note.text,classes:YT,style:"",id:a+$T+"-"+cr,domId:Pa(a,cr,dd),type:h.type,padding:15},d={labelStyle:"",shape:PT,labelText:i.note.text,classes:h.classes,style:"",id:a+Kc,domId:Pa(a,cr,ud),type:"group",padding:0};cr++;const g=a+Kc;t.setNode(g,d),t.setNode(p.id,p),t.setNode(a,u),t.setParent(a,g),t.setParent(p.id,g);let y=a,x=p.id;i.note.position==="left of"&&(y=p.id,x=a),t.setEdge(y,x,{arrowhead:"none",arrowType:"",style:fd,labelStyle:"",classes:WT,arrowheadStyle:pd,labelpos:gd,labelType:yd,thickness:md})}else t.setNode(a,u)}e&&e.id!=="root"&&(B.trace("Setting node ",a," to be child of its parent ",e.id),t.setParent(a,e.id)),i.doc&&(B.trace("Adding nodes children "),JT(t,i,i.doc,r,s,!n))},JT=(t,e,i,r,s,n)=>{B.trace("items",i),i.forEach(a=>{switch(a.stmt){case Zn:bs(t,e,a,r,s,n);break;case an:bs(t,e,a,r,s,n);break;case wl:{bs(t,e,a.state1,r,s,n),bs(t,e,a.state2,r,s,n);const o={id:"edge"+cr,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:fd,labelStyle:"",label:mt.sanitizeText(a.description,Y()),arrowheadStyle:pd,labelpos:gd,labelType:yd,thickness:md,classes:hd};t.setEdge(a.state1.id,a.state2.id,o,cr),cr++}break}})},Co=(t,e=Y7)=>{let i=e;if(t.doc)for(let r=0;r<t.doc.length;r++){const s=t.doc[r];s.stmt==="dir"&&(i=s.value)}return i},t8=async function(t,e,i,r){B.info("Drawing state diagram (v2)",e),En={},r.db.getDirection();const{securityLevel:s,state:n}=Y(),a=n.nodeSpacing||50,o=n.rankSpacing||50;B.info(r.db.getRootDocV2()),r.db.extract(r.db.getRootDocV2()),B.info(r.db.getRootDocV2());const l=r.db.getStates(),h=new Ii({multigraph:!0,compound:!0}).setGraph({rankdir:Co(r.db.getRootDocV2()),nodesep:a,ranksep:o,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});bs(h,void 0,r.db.getRootDocV2(),l,r.db,!0);let u;s==="sandbox"&&(u=yt("#i"+e));const p=s==="sandbox"?yt(u.nodes()[0].contentDocument.body):yt("body"),d=p.select(`[id="${e}"]`),g=p.select("#"+e+" g");await rl(g,h,["barb"],ls,e);const y=8;Rt.insertTitle(d,"statediagramTitleText",n.titleTopMargin,r.db.getDiagramTitle());const x=d.node().getBBox(),_=x.width+y*2,w=x.height+y*2;d.attr("class",ls);const E=d.node().getBBox();Ne(d,w,_,n.useMaxWidth);const R=`${E.x-y} ${E.y-y} ${_} ${w}`;B.debug(`viewBox ${R}`),d.attr("viewBox",R);const v=document.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const T of v){const k=T.getBBox(),A=document.createElementNS("http://www.w3.org/2000/svg",Cn);A.setAttribute("rx",0),A.setAttribute("ry",0),A.setAttribute("width",k.width),A.setAttribute("height",k.height),T.insertBefore(A,T.firstChild)}},e8={setConf:KT,getClasses:QT,draw:t8},i8={parser:Q0,db:ji,renderer:e8,styles:ld,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,ji.clear()}},r8=Object.freeze(Object.defineProperty({__proto__:null,diagram:i8},Symbol.toStringTag,{value:"Module"}));var Eo=(function(){var t=function(p,d,g,y){for(g=g||{},y=p.length;y--;g[p[y]]=d);return g},e=[6,8,10,11,12,14,16,17,18],i=[1,9],r=[1,10],s=[1,11],n=[1,12],a=[1,13],o=[1,14],l={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:function(d,g,y,x,_,w,E){var R=w.length-1;switch(_){case 1:return w[R-1];case 2:this.$=[];break;case 3:w[R-1].push(w[R]),this.$=w[R-1];break;case 4:case 5:this.$=w[R];break;case 6:case 7:this.$=[];break;case 8:x.setDiagramTitle(w[R].substr(6)),this.$=w[R].substr(6);break;case 9:this.$=w[R].trim(),x.setAccTitle(this.$);break;case 10:case 11:this.$=w[R].trim(),x.setAccDescription(this.$);break;case 12:x.addSection(w[R].substr(8)),this.$=w[R].substr(8);break;case 13:x.addTask(w[R-1],w[R]),this.$="task";break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:i,12:r,14:s,16:n,17:a,18:o},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:15,11:i,12:r,14:s,16:n,17:a,18:o},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,16]},{15:[1,17]},t(e,[2,11]),t(e,[2,12]),{19:[1,18]},t(e,[2,4]),t(e,[2,9]),t(e,[2,10]),t(e,[2,13])],defaultActions:{},parseError:function(d,g){if(g.recoverable)this.trace(d);else{var y=new Error(d);throw y.hash=g,y}},parse:function(d){var g=this,y=[0],x=[],_=[null],w=[],E=this.table,R="",v=0,T=0,k=2,A=1,S=w.slice.call(arguments,1),m=Object.create(this.lexer),C={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(C.yy[f]=this.yy[f]);m.setInput(d,C.yy),C.yy.lexer=m,C.yy.parser=this,typeof m.yylloc>"u"&&(m.yylloc={});var L=m.yylloc;w.push(L);var b=m.options&&m.options.ranges;typeof C.yy.parseError=="function"?this.parseError=C.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function P(){var K;return K=x.pop()||m.lex()||A,typeof K!="number"&&(K instanceof Array&&(x=K,K=x.pop()),K=g.symbols_[K]||K),K}for(var U,N,D,F,I={},M,z,st,j;;){if(N=y[y.length-1],this.defaultActions[N]?D=this.defaultActions[N]:((U===null||typeof U>"u")&&(U=P()),D=E[N]&&E[N][U]),typeof D>"u"||!D.length||!D[0]){var dt="";j=[];for(M in E[N])this.terminals_[M]&&M>k&&j.push("'"+this.terminals_[M]+"'");m.showPosition?dt="Parse error on line "+(v+1)+`:
`+m.showPosition()+`
Expecting `+j.join(", ")+", got '"+(this.terminals_[U]||U)+"'":dt="Parse error on line "+(v+1)+": Unexpected "+(U==A?"end of input":"'"+(this.terminals_[U]||U)+"'"),this.parseError(dt,{text:m.match,token:this.terminals_[U]||U,line:m.yylineno,loc:L,expected:j})}if(D[0]instanceof Array&&D.length>1)throw new Error("Parse Error: multiple actions possible at state: "+N+", token: "+U);switch(D[0]){case 1:y.push(U),_.push(m.yytext),w.push(m.yylloc),y.push(D[1]),U=null,T=m.yyleng,R=m.yytext,v=m.yylineno,L=m.yylloc;break;case 2:if(z=this.productions_[D[1]][1],I.$=_[_.length-z],I._$={first_line:w[w.length-(z||1)].first_line,last_line:w[w.length-1].last_line,first_column:w[w.length-(z||1)].first_column,last_column:w[w.length-1].last_column},b&&(I._$.range=[w[w.length-(z||1)].range[0],w[w.length-1].range[1]]),F=this.performAction.apply(I,[R,T,v,C.yy,D[1],_,w].concat(S)),typeof F<"u")return F;z&&(y=y.slice(0,-1*z*2),_=_.slice(0,-1*z),w=w.slice(0,-1*z)),y.push(this.productions_[D[1]][0]),_.push(I.$),w.push(I._$),st=E[y[y.length-2]][y[y.length-1]],y.push(st);break;case 3:return!0}}return!0}},h=(function(){var p={EOF:1,parseError:function(g,y){if(this.yy.parser)this.yy.parser.parseError(g,y);else throw new Error(g)},setInput:function(d,g){return this.yy=g||this.yy||{},this._input=d,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var d=this._input[0];this.yytext+=d,this.yyleng++,this.offset++,this.match+=d,this.matched+=d;var g=d.match(/(?:\r\n?|\n).*/g);return g?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),d},unput:function(d){var g=d.length,y=d.split(/(?:\r\n?|\n)/g);this._input=d+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-g),this.offset-=g;var x=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),y.length-1&&(this.yylineno-=y.length-1);var _=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:y?(y.length===x.length?this.yylloc.first_column:0)+x[x.length-y.length].length-y[0].length:this.yylloc.first_column-g},this.options.ranges&&(this.yylloc.range=[_[0],_[0]+this.yyleng-g]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(d){this.unput(this.match.slice(d))},pastInput:function(){var d=this.matched.substr(0,this.matched.length-this.match.length);return(d.length>20?"...":"")+d.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var d=this.match;return d.length<20&&(d+=this._input.substr(0,20-d.length)),(d.substr(0,20)+(d.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var d=this.pastInput(),g=new Array(d.length+1).join("-");return d+this.upcomingInput()+`
`+g+"^"},test_match:function(d,g){var y,x,_;if(this.options.backtrack_lexer&&(_={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(_.yylloc.range=this.yylloc.range.slice(0))),x=d[0].match(/(?:\r\n?|\n).*/g),x&&(this.yylineno+=x.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:x?x[x.length-1].length-x[x.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+d[0].length},this.yytext+=d[0],this.match+=d[0],this.matches=d,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(d[0].length),this.matched+=d[0],y=this.performAction.call(this,this.yy,this,g,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),y)return y;if(this._backtrack){for(var w in _)this[w]=_[w];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var d,g,y,x;this._more||(this.yytext="",this.match="");for(var _=this._currentRules(),w=0;w<_.length;w++)if(y=this._input.match(this.rules[_[w]]),y&&(!g||y[0].length>g[0].length)){if(g=y,x=w,this.options.backtrack_lexer){if(d=this.test_match(y,_[w]),d!==!1)return d;if(this._backtrack){g=!1;continue}else return!1}else if(!this.options.flex)break}return g?(d=this.test_match(g,_[x]),d!==!1?d:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var g=this.next();return g||this.lex()},begin:function(g){this.conditionStack.push(g)},popState:function(){var g=this.conditionStack.length-1;return g>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(g){return g=this.conditionStack.length-1-Math.abs(g||0),g>=0?this.conditionStack[g]:"INITIAL"},pushState:function(g){this.begin(g)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(g,y,x,_){switch(x){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}},rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}};return p})();l.lexer=h;function u(){this.yy={}}return u.prototype=l,l.Parser=u,new u})();Eo.parser=Eo;const s8=Eo;let cs="";const Bl=[],Hs=[],Gs=[],n8=function(){Bl.length=0,Hs.length=0,cs="",Gs.length=0,Oe()},a8=function(t){cs=t,Bl.push(t)},o8=function(){return Bl},l8=function(){let t=Qc();const e=100;let i=0;for(;!t&&i<e;)t=Qc(),i++;return Hs.push(...Gs),Hs},c8=function(){const t=[];return Hs.forEach(i=>{i.people&&t.push(...i.people)}),[...new Set(t)].sort()},h8=function(t,e){const i=e.substr(1).split(":");let r=0,s=[];i.length===1?(r=Number(i[0]),s=[]):(r=Number(i[0]),s=i[1].split(","));const n=s.map(o=>o.trim()),a={section:cs,type:cs,people:n,task:t,score:r};Gs.push(a)},u8=function(t){const e={section:cs,type:cs,description:t,task:t,classes:[]};Hs.push(e)},Qc=function(){const t=function(i){return Gs[i].processed};let e=!0;for(const[i,r]of Gs.entries())t(i),e=e&&r.processed;return e},d8=function(){return c8()},Zc={getConfig:()=>Y().journey,clear:n8,setDiagramTitle:ri,getDiagramTitle:Ge,setAccTitle:Pe,getAccTitle:Ye,setAccDescription:Ue,getAccDescription:He,addSection:a8,getSections:o8,getTasks:l8,addTask:h8,addTaskOrg:u8,getActors:d8},f8=t=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${t.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${t.textColor}
  }

  .legend {
    fill: ${t.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${t.textColor}
  }

  .face {
    ${t.faceColor?`fill: ${t.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${t.fillType0?`fill: ${t.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${t.fillType0?`fill: ${t.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${t.fillType0?`fill: ${t.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${t.fillType0?`fill: ${t.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${t.fillType0?`fill: ${t.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${t.fillType0?`fill: ${t.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${t.fillType0?`fill: ${t.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${t.fillType0?`fill: ${t.fillType7}`:""};
  }

  .actor-0 {
    ${t.actor0?`fill: ${t.actor0}`:""};
  }
  .actor-1 {
    ${t.actor1?`fill: ${t.actor1}`:""};
  }
  .actor-2 {
    ${t.actor2?`fill: ${t.actor2}`:""};
  }
  .actor-3 {
    ${t.actor3?`fill: ${t.actor3}`:""};
  }
  .actor-4 {
    ${t.actor4?`fill: ${t.actor4}`:""};
  }
  .actor-5 {
    ${t.actor5?`fill: ${t.actor5}`:""};
  }
`,p8=f8,Il=function(t,e){return la(t,e)},g8=function(t,e){const r=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),s=t.append("g");s.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),s.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function n(l){const h=Jr().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(l){const h=Jr().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function o(l){l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return e.score>3?n(s):e.score<3?a(s):o(s),r},xd=function(t,e){const i=t.append("circle");return i.attr("cx",e.cx),i.attr("cy",e.cy),i.attr("class","actor-"+e.pos),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("r",e.r),i.class!==void 0&&i.attr("class",i.class),e.title!==void 0&&i.append("title").text(e.title),i},bd=function(t,e){return pm(t,e)},y8=function(t,e){function i(s,n,a,o,l){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-l)+" "+(s+a-l*1.2)+","+(n+o)+" "+s+","+(n+o)}const r=t.append("polygon");r.attr("points",i(e.x,e.y,50,20,7)),r.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,bd(t,e)},m8=function(t,e,i){const r=t.append("g"),s=Pr();s.x=e.x,s.y=e.y,s.fill=e.fill,s.width=i.width*e.taskCount+i.diagramMarginX*(e.taskCount-1),s.height=i.height,s.class="journey-section section-type-"+e.num,s.rx=3,s.ry=3,Il(r,s),kd(i)(e.text,r,s.x,s.y,s.width,s.height,{class:"journey-section section-type-"+e.num},i,e.colour)};let Jc=-1;const x8=function(t,e,i){const r=e.x+i.width/2,s=t.append("g");Jc++,s.append("line").attr("id","task"+Jc).attr("x1",r).attr("y1",e.y).attr("x2",r).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),g8(s,{cx:r,cy:300+(5-e.score)*30,score:e.score});const a=Pr();a.x=e.x,a.y=e.y,a.fill=e.fill,a.width=i.width,a.height=i.height,a.class="task task-type-"+e.num,a.rx=3,a.ry=3,Il(s,a);let o=e.x+14;e.people.forEach(l=>{const h=e.actors[l].color,u={cx:o,cy:e.y,r:7,fill:h,stroke:"#000",title:l,pos:e.actors[l].position};xd(s,u),o+=10}),kd(i)(e.task,s,a.x,a.y,a.width,a.height,{class:"task"},i,e.colour)},b8=function(t,e){R1(t,e)},kd=(function(){function t(s,n,a,o,l,h,u,p){const d=n.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("font-color",p).style("text-anchor","middle").text(s);r(d,u)}function e(s,n,a,o,l,h,u,p,d){const{taskFontSize:g,taskFontFamily:y}=p,x=s.split(/<br\s*\/?>/gi);for(let _=0;_<x.length;_++){const w=_*g-g*(x.length-1)/2,E=n.append("text").attr("x",a+l/2).attr("y",o).attr("fill",d).style("text-anchor","middle").style("font-size",g).style("font-family",y);E.append("tspan").attr("x",a+l/2).attr("dy",w).text(x[_]),E.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(E,u)}}function i(s,n,a,o,l,h,u,p){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,p),r(y,u)}function r(s,n){for(const a in n)a in n&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}})(),k8=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},js={drawRect:Il,drawCircle:xd,drawSection:m8,drawText:bd,drawLabel:y8,drawTask:x8,drawBackgroundRect:b8,initGraphics:k8},_8=function(t){Object.keys(t).forEach(function(i){ba[i]=t[i]})},Qi={};function T8(t){const e=Y().journey;let i=60;Object.keys(Qi).forEach(r=>{const s=Qi[r].color,n={cx:20,cy:i,r:7,fill:s,stroke:"#000",pos:Qi[r].position};js.drawCircle(t,n);const a={x:40,y:i+7,fill:"#666",text:r,textMargin:e.boxTextMargin|5};js.drawText(t,a),i+=20})}const ba=Y().journey,_r=ba.leftMargin,C8=function(t,e,i,r){const s=Y().journey,n=Y().securityLevel;let a;n==="sandbox"&&(a=yt("#i"+e));const o=n==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body");ui.init();const l=o.select("#"+e);js.initGraphics(l);const h=r.db.getTasks(),u=r.db.getDiagramTitle(),p=r.db.getActors();for(const w in Qi)delete Qi[w];let d=0;p.forEach(w=>{Qi[w]={color:s.actorColours[d%s.actorColours.length],position:d},d++}),T8(l),ui.insert(0,0,_r,Object.keys(Qi).length*50),E8(l,h,0);const g=ui.getBounds();u&&l.append("text").text(u).attr("x",_r).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const y=g.stopy-g.starty+2*s.diagramMarginY,x=_r+g.stopx+2*s.diagramMarginX;Ne(l,y,x,s.useMaxWidth),l.append("line").attr("x1",_r).attr("y1",s.height*4).attr("x2",x-_r-4).attr("y2",s.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const _=u?70:0;l.attr("viewBox",`${g.startx} -25 ${x} ${y+_}`),l.attr("preserveAspectRatio","xMinYMin meet"),l.attr("height",y+_+25)},ui={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(t,e,i,r){t[e]===void 0?t[e]=i:t[e]=r(i,t[e])},updateBounds:function(t,e,i,r){const s=Y().journey,n=this;let a=0;function o(l){return function(u){a++;const p=n.sequenceItems.length-a+1;n.updateVal(u,"starty",e-p*s.boxMargin,Math.min),n.updateVal(u,"stopy",r+p*s.boxMargin,Math.max),n.updateVal(ui.data,"startx",t-p*s.boxMargin,Math.min),n.updateVal(ui.data,"stopx",i+p*s.boxMargin,Math.max),n.updateVal(u,"startx",t-p*s.boxMargin,Math.min),n.updateVal(u,"stopx",i+p*s.boxMargin,Math.max),n.updateVal(ui.data,"starty",e-p*s.boxMargin,Math.min),n.updateVal(ui.data,"stopy",r+p*s.boxMargin,Math.max)}}this.sequenceItems.forEach(o())},insert:function(t,e,i,r){const s=Math.min(t,i),n=Math.max(t,i),a=Math.min(e,r),o=Math.max(e,r);this.updateVal(ui.data,"startx",s,Math.min),this.updateVal(ui.data,"starty",a,Math.min),this.updateVal(ui.data,"stopx",n,Math.max),this.updateVal(ui.data,"stopy",o,Math.max),this.updateBounds(s,a,n,o)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},Ma=ba.sectionFills,th=ba.sectionColours,E8=function(t,e,i){const r=Y().journey;let s="";const n=r.height*2+r.diagramMarginY,a=i+n;let o=0,l="#CCC",h="black",u=0;for(const[p,d]of e.entries()){if(s!==d.section){l=Ma[o%Ma.length],u=o%Ma.length,h=th[o%th.length];let y=0;const x=d.section;for(let w=p;w<e.length&&e[w].section==x;w++)y=y+1;const _={x:p*r.taskMargin+p*r.width+_r,y:50,text:d.section,fill:l,num:u,colour:h,taskCount:y};js.drawSection(t,_,r),s=d.section,o++}const g=d.people.reduce((y,x)=>(Qi[x]&&(y[x]=Qi[x]),y),{});d.x=p*r.taskMargin+p*r.width+_r,d.y=a,d.width=r.diagramMarginX,d.height=r.diagramMarginY,d.colour=h,d.fill=l,d.num=u,d.actors=g,js.drawTask(t,d,r),ui.insert(d.x,d.y,d.x+d.width+r.taskMargin,450)}},eh={setConf:_8,draw:C8},S8={parser:s8,db:Zc,renderer:eh,styles:p8,init:t=>{eh.setConf(t.journey),Zc.clear()}},w8=Object.freeze(Object.defineProperty({__proto__:null,diagram:S8},Symbol.toStringTag,{value:"Module"})),v8=(t,e,i)=>{const{parentById:r}=i,s=new Set;let n=t;for(;n;){if(s.add(n),n===e)return n;n=r[n]}for(n=e;n;){if(s.has(n))return n;n=r[n]}return"root"},ih=new Rf;let hi={};const A8={};let Ji={};const L8=async function(t,e,i,r,s,n,a){const l=i.select(`[id="${e}"]`).insert("g").attr("class","nodes"),h=Object.keys(t);return await Promise.all(h.map(async function(u){const p=t[u];let d="default";p.classes.length>0&&(d=p.classes.join(" ")),d=d+" flowchart-label";const g=ii(p.styles);let y=p.text!==void 0?p.text:p.id;const x={width:0,height:0},_=[{id:p.id+"-west",layoutOptions:{"port.side":"WEST"}},{id:p.id+"-east",layoutOptions:{"port.side":"EAST"}},{id:p.id+"-south",layoutOptions:{"port.side":"SOUTH"}},{id:p.id+"-north",layoutOptions:{"port.side":"NORTH"}}];let w=0,E="",R={};switch(p.type){case"round":w=5,E="rect";break;case"square":E="rect";break;case"diamond":E="question",R={portConstraints:"FIXED_SIDE"};break;case"hexagon":E="hexagon";break;case"odd":E="rect_left_inv_arrow";break;case"lean_right":E="lean_right";break;case"lean_left":E="lean_left";break;case"trapezoid":E="trapezoid";break;case"inv_trapezoid":E="inv_trapezoid";break;case"odd_right":E="rect_left_inv_arrow";break;case"circle":E="circle";break;case"ellipse":E="ellipse";break;case"stadium":E="stadium";break;case"subroutine":E="subroutine";break;case"cylinder":E="cylinder";break;case"group":E="rect";break;case"doublecircle":E="doublecircle";break;default:E="rect"}const v={labelStyle:g.labelStyle,shape:E,labelText:y,labelType:p.labelType,rx:w,ry:w,class:d,style:g.style,id:p.id,link:p.link,linkTarget:p.linkTarget,tooltip:s.db.getTooltip(p.id)||"",domId:s.db.lookUpDomId(p.id),haveCallback:p.haveCallback,width:p.type==="group"?500:void 0,dir:p.dir,type:p.type,props:p.props,padding:ee().flowchart.padding};let T,k;if(v.type!=="group")k=await pa(l,v,p.dir),T=k.node().getBBox();else{r.createElementNS("http://www.w3.org/2000/svg","text");const{shapeSvg:S,bbox:m}=await Ce(l,v,void 0,!0);x.width=m.width,x.wrappingWidth=ee().flowchart.wrappingWidth,x.height=m.height,x.labelNode=S.node(),v.labelData=x}const A={id:p.id,ports:p.type==="diamond"?_:[],layoutOptions:R,labelText:y,labelData:x,domId:s.db.lookUpDomId(p.id),width:T?.width,height:T?.height,type:p.type,el:k,parent:n.parentById[p.id]};Ji[v.id]=A})),a},rh=(t,e,i)=>{const r={TB:{in:{north:"north"},out:{south:"west",west:"east",east:"south"}},LR:{in:{west:"west"},out:{east:"south",south:"north",north:"east"}},RL:{in:{east:"east"},out:{west:"north",north:"south",south:"west"}},BT:{in:{south:"south"},out:{north:"east",east:"west",west:"north"}}};return r.TD=r.TB,r[i][e][t]},sh=(t,e,i)=>{if(B.info("getNextPort",{node:t,edgeDirection:e,graphDirection:i}),!hi[t])switch(i){case"TB":case"TD":hi[t]={inPosition:"north",outPosition:"south"};break;case"BT":hi[t]={inPosition:"south",outPosition:"north"};break;case"RL":hi[t]={inPosition:"east",outPosition:"west"};break;case"LR":hi[t]={inPosition:"west",outPosition:"east"};break}const r=e==="in"?hi[t].inPosition:hi[t].outPosition;return e==="in"?hi[t].inPosition=rh(hi[t].inPosition,e,i):hi[t].outPosition=rh(hi[t].outPosition,e,i),r},B8=(t,e)=>{let i=t.start,r=t.end;const s=i,n=r,a=Ji[i],o=Ji[r];return!a||!o?{source:i,target:r}:(a.type==="diamond"&&(i=`${i}-${sh(i,"out",e)}`),o.type==="diamond"&&(r=`${r}-${sh(r,"in",e)}`),{source:i,target:r,sourceId:s,targetId:n})},I8=function(t,e,i,r){B.info("abc78 edges = ",t);const s=r.insert("g").attr("class","edgeLabels");let n={},a=e.db.getDirection(),o,l;if(t.defaultStyle!==void 0){const h=ii(t.defaultStyle);o=h.style,l=h.labelStyle}return t.forEach(function(h){const u="L-"+h.start+"-"+h.end;n[u]===void 0?(n[u]=0,B.info("abc78 new entry",u,n[u])):(n[u]++,B.info("abc78 new entry",u,n[u]));let p=u+"-"+n[u];B.info("abc78 new link id to be used is",u,p,n[u]);const d="LS-"+h.start,g="LE-"+h.end,y={style:"",labelStyle:""};switch(y.minlen=h.length||1,h.type==="arrow_open"?y.arrowhead="none":y.arrowhead="normal",y.arrowTypeStart="arrow_open",y.arrowTypeEnd="arrow_open",h.type){case"double_arrow_cross":y.arrowTypeStart="arrow_cross";case"arrow_cross":y.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":y.arrowTypeStart="arrow_point";case"arrow_point":y.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":y.arrowTypeStart="arrow_circle";case"arrow_circle":y.arrowTypeEnd="arrow_circle";break}let x="",_="";switch(h.stroke){case"normal":x="fill:none;",o!==void 0&&(x=o),l!==void 0&&(_=l),y.thickness="normal",y.pattern="solid";break;case"dotted":y.thickness="normal",y.pattern="dotted",y.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":y.thickness="thick",y.pattern="solid",y.style="stroke-width: 3.5px;fill:none;";break}if(h.style!==void 0){const k=ii(h.style);x=k.style,_=k.labelStyle}y.style=y.style+=x,y.labelStyle=y.labelStyle+=_,h.interpolate!==void 0?y.curve=di(h.interpolate,ei):t.defaultInterpolate!==void 0?y.curve=di(t.defaultInterpolate,ei):y.curve=di(A8.curve,ei),h.text===void 0?h.style!==void 0&&(y.arrowheadStyle="fill: #333"):(y.arrowheadStyle="fill: #333",y.labelpos="c"),y.labelType=h.labelType,y.label=h.text.replace(mt.lineBreakRegex,`
`),h.style===void 0&&(y.style=y.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),y.labelStyle=y.labelStyle.replace("color:","fill:"),y.id=p,y.classes="flowchart-link "+d+" "+g;const w=il(s,y),{source:E,target:R,sourceId:v,targetId:T}=B8(h,a);B.debug("abc78 source and target",E,R),i.edges.push({id:"e"+h.start+h.end,sources:[E],targets:[R],sourceId:v,targetId:T,labelEl:w,labels:[{width:y.width,height:y.height,orgWidth:y.width,orgHeight:y.height,text:y.label,layoutOptions:{"edgeLabels.inline":"true","edgeLabels.placement":"CENTER"}}],edgeData:y})}),i},D8=function(t,e,i,r,s){let n="";r&&(n=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,n=n.replace(/\(/g,"\\("),n=n.replace(/\)/g,"\\)")),Cu(t,e,n,s,i)},F8=function(t,e){return B.info("Extracting classes"),e.db.getClasses()},R8=function(t){const e={parentById:{},childrenById:{}},i=t.getSubGraphs();return B.info("Subgraphs - ",i),i.forEach(function(r){r.nodes.forEach(function(s){e.parentById[s]=r.id,e.childrenById[r.id]===void 0&&(e.childrenById[r.id]=[]),e.childrenById[r.id].push(s)})}),i.forEach(function(r){r.id,e.parentById[r.id]!==void 0&&e.parentById[r.id]}),e},N8=function(t,e,i){const r=v8(t,e,i);if(r===void 0||r==="root")return{x:0,y:0};const s=Ji[r].offset;return{x:s.posX,y:s.posY}},O8=function(t,e,i,r,s,n){const a=N8(e.sourceId,e.targetId,s),o=e.sections[0].startPoint,l=e.sections[0].endPoint,u=(e.sections[0].bendPoints?e.sections[0].bendPoints:[]).map(R=>[R.x+a.x,R.y+a.y]),p=[[o.x+a.x,o.y+a.y],...u,[l.x+a.x,l.y+a.y]],{x:d,y:g}=Tu(e.edgeData),y=fr().x(d).y(g).curve(ei),x=t.insert("path").attr("d",y(p)).attr("class","path "+i.classes).attr("fill","none"),_=t.insert("g").attr("class","edgeLabel"),w=yt(_.node().appendChild(e.labelEl)),E=w.node().firstChild.getBoundingClientRect();w.attr("width",E.width),w.attr("height",E.height),_.attr("transform",`translate(${e.labels[0].x+a.x}, ${e.labels[0].y+a.y})`),D8(x,i,r.type,r.arrowMarkerAbsolute,n)},_d=(t,e)=>{t.forEach(i=>{i.children||(i.children=[]);const r=e.childrenById[i.id];r&&r.forEach(s=>{i.children.push(Ji[s])}),_d(i.children,e)})},P8=async function(t,e,i,r){var s;r.db.clear(),Ji={},hi={},r.db.setGen("gen-2"),r.parser.parse(t);const n=yt("body").append("div").attr("style","height:400px").attr("id","cy");let a={id:"root",layoutOptions:{"elk.hierarchyHandling":"INCLUDE_CHILDREN","org.eclipse.elk.padding":"[top=100, left=100, bottom=110, right=110]","elk.layered.spacing.edgeNodeBetweenLayers":"30","elk.direction":"DOWN"},children:[],edges:[]};switch(B.info("Drawing flowchart using v3 renderer",ih),r.db.getDirection()){case"BT":a.layoutOptions["elk.direction"]="UP";break;case"TB":a.layoutOptions["elk.direction"]="DOWN";break;case"LR":a.layoutOptions["elk.direction"]="RIGHT";break;case"RL":a.layoutOptions["elk.direction"]="LEFT";break}const{securityLevel:l,flowchart:h}=ee();let u;l==="sandbox"&&(u=yt("#i"+e));const p=l==="sandbox"?yt(u.nodes()[0].contentDocument.body):yt("body"),d=l==="sandbox"?u.nodes()[0].contentDocument:document,g=p.select(`[id="${e}"]`);tl(g,["point","circle","cross"],r.type,e);const x=r.db.getVertices();let _;const w=r.db.getSubGraphs();B.info("Subgraphs - ",w);for(let S=w.length-1;S>=0;S--)_=w[S],r.db.addVertex(_.id,{text:_.title,type:_.labelType},"group",void 0,_.classes,_.dir);const E=g.insert("g").attr("class","subgraphs"),R=R8(r.db);a=await L8(x,e,p,d,r,R,a);const v=g.insert("g").attr("class","edges edgePath"),T=r.db.getEdges();a=I8(T,r,a,g),Object.keys(Ji).forEach(S=>{const m=Ji[S];m.parent||a.children.push(m),R.childrenById[S]!==void 0&&(m.labels=[{text:m.labelText,layoutOptions:{"nodeLabels.placement":"[H_CENTER, V_TOP, INSIDE]"},width:m.labelData.width,height:m.labelData.height}],delete m.x,delete m.y,delete m.width,delete m.height)}),_d(a.children,R),B.info("after layout",JSON.stringify(a,null,2));const A=await ih.layout(a);Td(0,0,A.children,g,E,r,0),B.info("after layout",A),(s=A.edges)==null||s.map(S=>{O8(v,S,S.edgeData,r,R,e)}),yr({},g,h.diagramPadding,h.useMaxWidth),n.remove()},Td=(t,e,i,r,s,n,a)=>{i.forEach(function(o){if(o)if(Ji[o.id].offset={posX:o.x+t,posY:o.y+e,x:t,y:e,depth:a,width:o.width,height:o.height},o.type==="group"){const l=s.insert("g").attr("class","subgraph");l.insert("rect").attr("class","subgraph subgraph-lvl-"+a%5+" node").attr("x",o.x+t).attr("y",o.y+e).attr("width",o.width).attr("height",o.height);const h=l.insert("g").attr("class","label"),u=ee().flowchart.htmlLabels?o.labelData.width/2:0;h.attr("transform",`translate(${o.labels[0].x+t+o.x+u}, ${o.labels[0].y+e+o.y+3})`),h.node().appendChild(o.labelData.labelNode),B.info("Id (UGH)= ",o.type,o.labels)}else B.info("Id (UGH)= ",o.id),o.el.attr("transform",`translate(${o.x+t+o.width/2}, ${o.y+e+o.height/2})`)}),i.forEach(function(o){o&&o.type==="group"&&Td(t+o.x,e+o.y,o.children,r,s,n,a+1)})},M8={getClasses:F8,draw:P8},V8=t=>{let e="";for(let i=0;i<5;i++)e+=`
      .subgraph-lvl-${i} {
        fill: ${t[`surface${i}`]};
        stroke: ${t[`surfacePeer${i}`]};
      }
    `;return e},z8=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span {
    color: ${t.titleColor};
  }

  .label text,span {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.85;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
  .subgraph {
    stroke-width:2;
    rx:3;
  }
  // .subgraph-lvl-1 {
  //   fill:#ccc;
  //   // stroke:black;
  // }

  .flowchart-label text {
    text-anchor: middle;
  }

  ${V8(t)}
`,q8=z8,W8={db:bx,renderer:M8,parser:Qo,styles:q8},Y8=Object.freeze(Object.defineProperty({__proto__:null,diagram:W8},Symbol.toStringTag,{value:"Module"}));var So=(function(){var t=function(d,g,y,x){for(y=y||{},x=d.length;x--;y[d[x]]=g);return y},e=[6,8,10,11,12,14,16,17,20,21],i=[1,9],r=[1,10],s=[1,11],n=[1,12],a=[1,13],o=[1,16],l=[1,17],h={trace:function(){},yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:function(g,y,x,_,w,E,R){var v=E.length-1;switch(w){case 1:return E[v-1];case 2:this.$=[];break;case 3:E[v-1].push(E[v]),this.$=E[v-1];break;case 4:case 5:this.$=E[v];break;case 6:case 7:this.$=[];break;case 8:_.getCommonDb().setDiagramTitle(E[v].substr(6)),this.$=E[v].substr(6);break;case 9:this.$=E[v].trim(),_.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=E[v].trim(),_.getCommonDb().setAccDescription(this.$);break;case 12:_.addSection(E[v].substr(8)),this.$=E[v].substr(8);break;case 15:_.addTask(E[v],0,""),this.$=E[v];break;case 16:_.addEvent(E[v].substr(2)),this.$=E[v];break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:i,12:r,14:s,16:n,17:a,18:14,19:15,20:o,21:l},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:18,11:i,12:r,14:s,16:n,17:a,18:14,19:15,20:o,21:l},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,19]},{15:[1,20]},t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),t(e,[2,15]),t(e,[2,16]),t(e,[2,4]),t(e,[2,9]),t(e,[2,10])],defaultActions:{},parseError:function(g,y){if(y.recoverable)this.trace(g);else{var x=new Error(g);throw x.hash=y,x}},parse:function(g){var y=this,x=[0],_=[],w=[null],E=[],R=this.table,v="",T=0,k=0,A=2,S=1,m=E.slice.call(arguments,1),C=Object.create(this.lexer),f={yy:{}};for(var L in this.yy)Object.prototype.hasOwnProperty.call(this.yy,L)&&(f.yy[L]=this.yy[L]);C.setInput(g,f.yy),f.yy.lexer=C,f.yy.parser=this,typeof C.yylloc>"u"&&(C.yylloc={});var b=C.yylloc;E.push(b);var P=C.options&&C.options.ranges;typeof f.yy.parseError=="function"?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function U(){var G;return G=_.pop()||C.lex()||S,typeof G!="number"&&(G instanceof Array&&(_=G,G=_.pop()),G=y.symbols_[G]||G),G}for(var N,D,F,I,M={},z,st,j,dt;;){if(D=x[x.length-1],this.defaultActions[D]?F=this.defaultActions[D]:((N===null||typeof N>"u")&&(N=U()),F=R[D]&&R[D][N]),typeof F>"u"||!F.length||!F[0]){var K="";dt=[];for(z in R[D])this.terminals_[z]&&z>A&&dt.push("'"+this.terminals_[z]+"'");C.showPosition?K="Parse error on line "+(T+1)+`:
`+C.showPosition()+`
Expecting `+dt.join(", ")+", got '"+(this.terminals_[N]||N)+"'":K="Parse error on line "+(T+1)+": Unexpected "+(N==S?"end of input":"'"+(this.terminals_[N]||N)+"'"),this.parseError(K,{text:C.match,token:this.terminals_[N]||N,line:C.yylineno,loc:b,expected:dt})}if(F[0]instanceof Array&&F.length>1)throw new Error("Parse Error: multiple actions possible at state: "+D+", token: "+N);switch(F[0]){case 1:x.push(N),w.push(C.yytext),E.push(C.yylloc),x.push(F[1]),N=null,k=C.yyleng,v=C.yytext,T=C.yylineno,b=C.yylloc;break;case 2:if(st=this.productions_[F[1]][1],M.$=w[w.length-st],M._$={first_line:E[E.length-(st||1)].first_line,last_line:E[E.length-1].last_line,first_column:E[E.length-(st||1)].first_column,last_column:E[E.length-1].last_column},P&&(M._$.range=[E[E.length-(st||1)].range[0],E[E.length-1].range[1]]),I=this.performAction.apply(M,[v,k,T,f.yy,F[1],w,E].concat(m)),typeof I<"u")return I;st&&(x=x.slice(0,-1*st*2),w=w.slice(0,-1*st),E=E.slice(0,-1*st)),x.push(this.productions_[F[1]][0]),w.push(M.$),E.push(M._$),j=R[x[x.length-2]][x[x.length-1]],x.push(j);break;case 3:return!0}}return!0}},u=(function(){var d={EOF:1,parseError:function(y,x){if(this.yy.parser)this.yy.parser.parseError(y,x);else throw new Error(y)},setInput:function(g,y){return this.yy=y||this.yy||{},this._input=g,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var g=this._input[0];this.yytext+=g,this.yyleng++,this.offset++,this.match+=g,this.matched+=g;var y=g.match(/(?:\r\n?|\n).*/g);return y?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),g},unput:function(g){var y=g.length,x=g.split(/(?:\r\n?|\n)/g);this._input=g+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-y),this.offset-=y;var _=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),x.length-1&&(this.yylineno-=x.length-1);var w=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:x?(x.length===_.length?this.yylloc.first_column:0)+_[_.length-x.length].length-x[0].length:this.yylloc.first_column-y},this.options.ranges&&(this.yylloc.range=[w[0],w[0]+this.yyleng-y]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(g){this.unput(this.match.slice(g))},pastInput:function(){var g=this.matched.substr(0,this.matched.length-this.match.length);return(g.length>20?"...":"")+g.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var g=this.match;return g.length<20&&(g+=this._input.substr(0,20-g.length)),(g.substr(0,20)+(g.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var g=this.pastInput(),y=new Array(g.length+1).join("-");return g+this.upcomingInput()+`
`+y+"^"},test_match:function(g,y){var x,_,w;if(this.options.backtrack_lexer&&(w={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(w.yylloc.range=this.yylloc.range.slice(0))),_=g[0].match(/(?:\r\n?|\n).*/g),_&&(this.yylineno+=_.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:_?_[_.length-1].length-_[_.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+g[0].length},this.yytext+=g[0],this.match+=g[0],this.matches=g,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(g[0].length),this.matched+=g[0],x=this.performAction.call(this,this.yy,this,y,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),x)return x;if(this._backtrack){for(var E in w)this[E]=w[E];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var g,y,x,_;this._more||(this.yytext="",this.match="");for(var w=this._currentRules(),E=0;E<w.length;E++)if(x=this._input.match(this.rules[w[E]]),x&&(!y||x[0].length>y[0].length)){if(y=x,_=E,this.options.backtrack_lexer){if(g=this.test_match(x,w[E]),g!==!1)return g;if(this._backtrack){y=!1;continue}else return!1}else if(!this.options.flex)break}return y?(g=this.test_match(y,w[_]),g!==!1?g:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var y=this.next();return y||this.lex()},begin:function(y){this.conditionStack.push(y)},popState:function(){var y=this.conditionStack.length-1;return y>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(y){return y=this.conditionStack.length-1-Math.abs(y||0),y>=0?this.conditionStack[y]:"INITIAL"},pushState:function(y){this.begin(y)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(y,x,_,w){switch(_){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}},rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?::\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}};return d})();h.lexer=u;function p(){this.yy={}}return p.prototype=h,h.Parser=p,new p})();So.parser=So;const U8=So;let hs="",Cd=0;const Dl=[],ea=[],us=[],Ed=()=>n1,Sd=function(){Dl.length=0,ea.length=0,hs="",us.length=0,Oe()},wd=function(t){hs=t,Dl.push(t)},vd=function(){return Dl},Ad=function(){let t=nh();const e=100;let i=0;for(;!t&&i<e;)t=nh(),i++;return ea.push(...us),ea},Ld=function(t,e,i){const r={id:Cd++,section:hs,type:hs,task:t,score:e||0,events:i?[i]:[]};us.push(r)},Bd=function(t){us.find(i=>i.id===Cd-1).events.push(t)},Id=function(t){const e={section:hs,type:hs,description:t,task:t,classes:[]};ea.push(e)},nh=function(){const t=function(i){return us[i].processed};let e=!0;for(const[i,r]of us.entries())t(i),e=e&&r.processed;return e},H8={clear:Sd,getCommonDb:Ed,addSection:wd,getSections:vd,getTasks:Ad,addTask:Ld,addTaskOrg:Id,addEvent:Bd},G8=Object.freeze(Object.defineProperty({__proto__:null,addEvent:Bd,addSection:wd,addTask:Ld,addTaskOrg:Id,clear:Sd,default:H8,getCommonDb:Ed,getSections:vd,getTasks:Ad},Symbol.toStringTag,{value:"Module"})),j8=12,ka=function(t,e){const i=t.append("rect");return i.attr("x",e.x),i.attr("y",e.y),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("width",e.width),i.attr("height",e.height),i.attr("rx",e.rx),i.attr("ry",e.ry),e.class!==void 0&&i.attr("class",e.class),i},X8=function(t,e){const r=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),s=t.append("g");s.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),s.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function n(l){const h=Jr().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(l){const h=Jr().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function o(l){l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return e.score>3?n(s):e.score<3?a(s):o(s),r},$8=function(t,e){const i=t.append("circle");return i.attr("cx",e.cx),i.attr("cy",e.cy),i.attr("class","actor-"+e.pos),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("r",e.r),i.class!==void 0&&i.attr("class",i.class),e.title!==void 0&&i.append("title").text(e.title),i},Dd=function(t,e){const i=e.text.replace(/<br\s*\/?>/gi," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.attr("class","legend"),r.style("text-anchor",e.anchor),e.class!==void 0&&r.attr("class",e.class);const s=r.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.text(i),r},K8=function(t,e){function i(s,n,a,o,l){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-l)+" "+(s+a-l*1.2)+","+(n+o)+" "+s+","+(n+o)}const r=t.append("polygon");r.attr("points",i(e.x,e.y,50,20,7)),r.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,Dd(t,e)},Q8=function(t,e,i){const r=t.append("g"),s=Fl();s.x=e.x,s.y=e.y,s.fill=e.fill,s.width=i.width,s.height=i.height,s.class="journey-section section-type-"+e.num,s.rx=3,s.ry=3,ka(r,s),Fd(i)(e.text,r,s.x,s.y,s.width,s.height,{class:"journey-section section-type-"+e.num},i,e.colour)};let ah=-1;const Z8=function(t,e,i){const r=e.x+i.width/2,s=t.append("g");ah++,s.append("line").attr("id","task"+ah).attr("x1",r).attr("y1",e.y).attr("x2",r).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),X8(s,{cx:r,cy:300+(5-e.score)*30,score:e.score});const a=Fl();a.x=e.x,a.y=e.y,a.fill=e.fill,a.width=i.width,a.height=i.height,a.class="task task-type-"+e.num,a.rx=3,a.ry=3,ka(s,a),e.x+14,Fd(i)(e.task,s,a.x,a.y,a.width,a.height,{class:"task"},i,e.colour)},J8=function(t,e){ka(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},tC=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},Fl=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},Fd=(function(){function t(s,n,a,o,l,h,u,p){const d=n.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("font-color",p).style("text-anchor","middle").text(s);r(d,u)}function e(s,n,a,o,l,h,u,p,d){const{taskFontSize:g,taskFontFamily:y}=p,x=s.split(/<br\s*\/?>/gi);for(let _=0;_<x.length;_++){const w=_*g-g*(x.length-1)/2,E=n.append("text").attr("x",a+l/2).attr("y",o).attr("fill",d).style("text-anchor","middle").style("font-size",g).style("font-family",y);E.append("tspan").attr("x",a+l/2).attr("dy",w).text(x[_]),E.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(E,u)}}function i(s,n,a,o,l,h,u,p){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,p),r(y,u)}function r(s,n){for(const a in n)a in n&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}})(),eC=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")};function Rd(t,e){t.each(function(){var i=yt(this),r=i.text().split(/(\s+|<br>)/).reverse(),s,n=[],a=1.1,o=i.attr("y"),l=parseFloat(i.attr("dy")),h=i.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",l+"em");for(let u=0;u<r.length;u++)s=r[r.length-1-u],n.push(s),h.text(n.join(" ").trim()),(h.node().getComputedTextLength()>e||s==="<br>")&&(n.pop(),h.text(n.join(" ").trim()),s==="<br>"?n=[""]:n=[s],h=i.append("tspan").attr("x",0).attr("y",o).attr("dy",a+"em").text(s))})}const iC=function(t,e,i,r){const s=i%j8-1,n=t.append("g");e.section=s,n.attr("class",(e.class?e.class+" ":"")+"timeline-node "+("section-"+s));const a=n.append("g"),o=n.append("g"),h=o.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(Rd,e.width).node().getBBox(),u=r.fontSize&&r.fontSize.replace?r.fontSize.replace("px",""):r.fontSize;return e.height=h.height+u*1.1*.5+e.padding,e.height=Math.max(e.height,e.maxHeight),e.width=e.width+2*e.padding,o.attr("transform","translate("+e.width/2+", "+e.padding/2+")"),sC(a,e,s),e},rC=function(t,e,i){const r=t.append("g"),n=r.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(Rd,e.width).node().getBBox(),a=i.fontSize&&i.fontSize.replace?i.fontSize.replace("px",""):i.fontSize;return r.remove(),n.height+a*1.1*.5+e.padding},sC=function(t,e,i){t.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("d",`M0 ${e.height-5} v${-e.height+10} q0,-5 5,-5 h${e.width-10} q5,0 5,5 v${e.height-5} H0 Z`),t.append("line").attr("class","node-line-"+i).attr("x1",0).attr("y1",e.height).attr("x2",e.width).attr("y2",e.height)},Tr={drawRect:ka,drawCircle:$8,drawSection:Q8,drawText:Dd,drawLabel:K8,drawTask:Z8,drawBackgroundRect:J8,getTextObj:tC,getNoteRect:Fl,initGraphics:eC,drawNode:iC,getVirtualNodeHeight:rC},nC=function(t,e,i,r){var s,n;const a=Y(),o=a.leftMargin??50;B.debug("timeline",r.db);const l=a.securityLevel;let h;l==="sandbox"&&(h=yt("#i"+e));const p=(l==="sandbox"?yt(h.nodes()[0].contentDocument.body):yt("body")).select("#"+e);p.append("g");const d=r.db.getTasks(),g=r.db.getCommonDb().getDiagramTitle();B.debug("task",d),Tr.initGraphics(p);const y=r.db.getSections();B.debug("sections",y);let x=0,_=0,w=0,E=0,R=50+o,v=50;E=50;let T=0,k=!0;y.forEach(function(f){const L={number:T,descr:f,section:T,width:150,padding:20,maxHeight:x},b=Tr.getVirtualNodeHeight(p,L,a);B.debug("sectionHeight before draw",b),x=Math.max(x,b+20)});let A=0,S=0;B.debug("tasks.length",d.length);for(const[f,L]of d.entries()){const b={number:f,descr:L,section:L.section,width:150,padding:20,maxHeight:_},P=Tr.getVirtualNodeHeight(p,b,a);B.debug("taskHeight before draw",P),_=Math.max(_,P+20),A=Math.max(A,L.events.length);let U=0;for(let N=0;N<L.events.length;N++){const F={descr:L.events[N],section:L.section,number:L.section,width:150,padding:20,maxHeight:50};U+=Tr.getVirtualNodeHeight(p,F,a)}S=Math.max(S,U)}B.debug("maxSectionHeight before draw",x),B.debug("maxTaskHeight before draw",_),y&&y.length>0?y.forEach(f=>{const L=d.filter(N=>N.section===f),b={number:T,descr:f,section:T,width:200*Math.max(L.length,1)-50,padding:20,maxHeight:x};B.debug("sectionNode",b);const P=p.append("g"),U=Tr.drawNode(P,b,T,a);B.debug("sectionNode output",U),P.attr("transform",`translate(${R}, ${E})`),v+=x+50,L.length>0&&oh(p,L,T,R,v,_,a,A,S,x,!1),R+=200*Math.max(L.length,1),v=E,T++}):(k=!1,oh(p,d,T,R,v,_,a,A,S,x,!0));const m=p.node().getBBox();B.debug("bounds",m),g&&p.append("text").text(g).attr("x",m.width/2-o).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),w=k?x+_+150:_+100,p.append("g").attr("class","lineWrapper").append("line").attr("x1",o).attr("y1",w).attr("x2",m.width+3*o).attr("y2",w).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),yr(void 0,p,((s=a.timeline)==null?void 0:s.padding)??50,((n=a.timeline)==null?void 0:n.useMaxWidth)??!1)},oh=function(t,e,i,r,s,n,a,o,l,h,u){var p;for(const d of e){const g={descr:d.task,section:i,number:i,width:150,padding:20,maxHeight:n};B.debug("taskNode",g);const y=t.append("g").attr("class","taskWrapper"),_=Tr.drawNode(y,g,i,a).height;if(B.debug("taskHeight after draw",_),y.attr("transform",`translate(${r}, ${s})`),n=Math.max(n,_),d.events){const w=t.append("g").attr("class","lineWrapper");let E=n;s+=100,E=E+aC(t,d.events,i,r,s,a),s-=100,w.append("line").attr("x1",r+190/2).attr("y1",s+n).attr("x2",r+190/2).attr("y2",s+n+(u?n:h)+l+120).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}r=r+200,u&&!((p=a.timeline)!=null&&p.disableMulticolor)&&i++}s=s-10},aC=function(t,e,i,r,s,n){let a=0;const o=s;s=s+100;for(const l of e){const h={descr:l,section:i,number:i,width:150,padding:20,maxHeight:50};B.debug("eventNode",h);const u=t.append("g").attr("class","eventWrapper"),d=Tr.drawNode(u,h,i,n).height;a=a+d,u.attr("transform",`translate(${r}, ${s})`),s=s+10+d}return s=o,a},oC={setConf:()=>{},draw:nC},lC=t=>{let e="";for(let i=0;i<t.THEME_COLOR_LIMIT;i++)t["lineColor"+i]=t["lineColor"+i]||t["cScaleInv"+i],Rr(t["lineColor"+i])?t["lineColor"+i]=Ct(t["lineColor"+i],20):t["lineColor"+i]=At(t["lineColor"+i],20);for(let i=0;i<t.THEME_COLOR_LIMIT;i++){const r=""+(17-3*i);e+=`
    .section-${i-1} rect, .section-${i-1} path, .section-${i-1} circle, .section-${i-1} path  {
      fill: ${t["cScale"+i]};
    }
    .section-${i-1} text {
     fill: ${t["cScaleLabel"+i]};
    }
    .node-icon-${i-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+i]};
    }
    .section-edge-${i-1}{
      stroke: ${t["cScale"+i]};
    }
    .edge-depth-${i-1}{
      stroke-width: ${r};
    }
    .section-${i-1} line {
      stroke: ${t["cScaleInv"+i]} ;
      stroke-width: 3;
    }

    .lineWrapper line{
      stroke: ${t["cScaleLabel"+i]} ;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return e},cC=t=>`
  .edge {
    stroke-width: 3;
  }
  ${lC(t)}
  .section-root rect, .section-root path, .section-root circle  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .eventWrapper  {
   filter: brightness(120%);
  }
`,hC=cC,uC={db:G8,renderer:oC,parser:U8,styles:hC},dC=Object.freeze(Object.defineProperty({__proto__:null,diagram:uC},Symbol.toStringTag,{value:"Module"}));var wo=(function(){var t=function(v,T,k,A){for(k=k||{},A=v.length;A--;k[v[A]]=T);return k},e=[1,4],i=[1,13],r=[1,12],s=[1,15],n=[1,16],a=[1,20],o=[1,19],l=[6,7,8],h=[1,26],u=[1,24],p=[1,25],d=[6,7,11],g=[1,6,13,15,16,19,22],y=[1,33],x=[1,34],_=[1,6,7,11,13,15,16,19,22],w={trace:function(){},yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:function(T,k,A,S,m,C,f){var L=C.length-1;switch(m){case 6:case 7:return S;case 8:S.getLogger().trace("Stop NL ");break;case 9:S.getLogger().trace("Stop EOF ");break;case 11:S.getLogger().trace("Stop NL2 ");break;case 12:S.getLogger().trace("Stop EOF2 ");break;case 15:S.getLogger().info("Node: ",C[L].id),S.addNode(C[L-1].length,C[L].id,C[L].descr,C[L].type);break;case 16:S.getLogger().trace("Icon: ",C[L]),S.decorateNode({icon:C[L]});break;case 17:case 21:S.decorateNode({class:C[L]});break;case 18:S.getLogger().trace("SPACELIST");break;case 19:S.getLogger().trace("Node: ",C[L].id),S.addNode(0,C[L].id,C[L].descr,C[L].type);break;case 20:S.decorateNode({icon:C[L]});break;case 25:S.getLogger().trace("node found ..",C[L-2]),this.$={id:C[L-1],descr:C[L-1],type:S.getType(C[L-2],C[L])};break;case 26:this.$={id:C[L],descr:C[L],type:S.nodeType.DEFAULT};break;case 27:S.getLogger().trace("node found ..",C[L-3]),this.$={id:C[L-3],descr:C[L-1],type:S.getType(C[L-2],C[L])};break}},table:[{3:1,4:2,5:3,6:[1,5],8:e},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:e},{6:i,7:[1,10],9:9,12:11,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},t(l,[2,3]),{1:[2,2]},t(l,[2,4]),t(l,[2,5]),{1:[2,6],6:i,12:21,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},{6:i,9:22,12:11,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},{6:h,7:u,10:23,11:p},t(d,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:a,22:o}),t(d,[2,18]),t(d,[2,19]),t(d,[2,20]),t(d,[2,21]),t(d,[2,23]),t(d,[2,24]),t(d,[2,26],{19:[1,30]}),{20:[1,31]},{6:h,7:u,10:32,11:p},{1:[2,7],6:i,12:21,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},t(g,[2,14],{7:y,11:x}),t(_,[2,8]),t(_,[2,9]),t(_,[2,10]),t(d,[2,15]),t(d,[2,16]),t(d,[2,17]),{20:[1,35]},{21:[1,36]},t(g,[2,13],{7:y,11:x}),t(_,[2,11]),t(_,[2,12]),{21:[1,37]},t(d,[2,25]),t(d,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:function(T,k){if(k.recoverable)this.trace(T);else{var A=new Error(T);throw A.hash=k,A}},parse:function(T){var k=this,A=[0],S=[],m=[null],C=[],f=this.table,L="",b=0,P=0,U=2,N=1,D=C.slice.call(arguments,1),F=Object.create(this.lexer),I={yy:{}};for(var M in this.yy)Object.prototype.hasOwnProperty.call(this.yy,M)&&(I.yy[M]=this.yy[M]);F.setInput(T,I.yy),I.yy.lexer=F,I.yy.parser=this,typeof F.yylloc>"u"&&(F.yylloc={});var z=F.yylloc;C.push(z);var st=F.options&&F.options.ranges;typeof I.yy.parseError=="function"?this.parseError=I.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function j(){var ft;return ft=S.pop()||F.lex()||N,typeof ft!="number"&&(ft instanceof Array&&(S=ft,ft=S.pop()),ft=k.symbols_[ft]||ft),ft}for(var dt,K,G,tt,nt={},Q,J,O,at;;){if(K=A[A.length-1],this.defaultActions[K]?G=this.defaultActions[K]:((dt===null||typeof dt>"u")&&(dt=j()),G=f[K]&&f[K][dt]),typeof G>"u"||!G.length||!G[0]){var W="";at=[];for(Q in f[K])this.terminals_[Q]&&Q>U&&at.push("'"+this.terminals_[Q]+"'");F.showPosition?W="Parse error on line "+(b+1)+`:
`+F.showPosition()+`
Expecting `+at.join(", ")+", got '"+(this.terminals_[dt]||dt)+"'":W="Parse error on line "+(b+1)+": Unexpected "+(dt==N?"end of input":"'"+(this.terminals_[dt]||dt)+"'"),this.parseError(W,{text:F.match,token:this.terminals_[dt]||dt,line:F.yylineno,loc:z,expected:at})}if(G[0]instanceof Array&&G.length>1)throw new Error("Parse Error: multiple actions possible at state: "+K+", token: "+dt);switch(G[0]){case 1:A.push(dt),m.push(F.yytext),C.push(F.yylloc),A.push(G[1]),dt=null,P=F.yyleng,L=F.yytext,b=F.yylineno,z=F.yylloc;break;case 2:if(J=this.productions_[G[1]][1],nt.$=m[m.length-J],nt._$={first_line:C[C.length-(J||1)].first_line,last_line:C[C.length-1].last_line,first_column:C[C.length-(J||1)].first_column,last_column:C[C.length-1].last_column},st&&(nt._$.range=[C[C.length-(J||1)].range[0],C[C.length-1].range[1]]),tt=this.performAction.apply(nt,[L,P,b,I.yy,G[1],m,C].concat(D)),typeof tt<"u")return tt;J&&(A=A.slice(0,-1*J*2),m=m.slice(0,-1*J),C=C.slice(0,-1*J)),A.push(this.productions_[G[1]][0]),m.push(nt.$),C.push(nt._$),O=f[A[A.length-2]][A[A.length-1]],A.push(O);break;case 3:return!0}}return!0}},E=(function(){var v={EOF:1,parseError:function(k,A){if(this.yy.parser)this.yy.parser.parseError(k,A);else throw new Error(k)},setInput:function(T,k){return this.yy=k||this.yy||{},this._input=T,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var T=this._input[0];this.yytext+=T,this.yyleng++,this.offset++,this.match+=T,this.matched+=T;var k=T.match(/(?:\r\n?|\n).*/g);return k?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),T},unput:function(T){var k=T.length,A=T.split(/(?:\r\n?|\n)/g);this._input=T+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-k),this.offset-=k;var S=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),A.length-1&&(this.yylineno-=A.length-1);var m=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:A?(A.length===S.length?this.yylloc.first_column:0)+S[S.length-A.length].length-A[0].length:this.yylloc.first_column-k},this.options.ranges&&(this.yylloc.range=[m[0],m[0]+this.yyleng-k]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(T){this.unput(this.match.slice(T))},pastInput:function(){var T=this.matched.substr(0,this.matched.length-this.match.length);return(T.length>20?"...":"")+T.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var T=this.match;return T.length<20&&(T+=this._input.substr(0,20-T.length)),(T.substr(0,20)+(T.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var T=this.pastInput(),k=new Array(T.length+1).join("-");return T+this.upcomingInput()+`
`+k+"^"},test_match:function(T,k){var A,S,m;if(this.options.backtrack_lexer&&(m={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(m.yylloc.range=this.yylloc.range.slice(0))),S=T[0].match(/(?:\r\n?|\n).*/g),S&&(this.yylineno+=S.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:S?S[S.length-1].length-S[S.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+T[0].length},this.yytext+=T[0],this.match+=T[0],this.matches=T,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(T[0].length),this.matched+=T[0],A=this.performAction.call(this,this.yy,this,k,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),A)return A;if(this._backtrack){for(var C in m)this[C]=m[C];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var T,k,A,S;this._more||(this.yytext="",this.match="");for(var m=this._currentRules(),C=0;C<m.length;C++)if(A=this._input.match(this.rules[m[C]]),A&&(!k||A[0].length>k[0].length)){if(k=A,S=C,this.options.backtrack_lexer){if(T=this.test_match(A,m[C]),T!==!1)return T;if(this._backtrack){k=!1;continue}else return!1}else if(!this.options.flex)break}return k?(T=this.test_match(k,m[S]),T!==!1?T:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var k=this.next();return k||this.lex()},begin:function(k){this.conditionStack.push(k)},popState:function(){var k=this.conditionStack.length-1;return k>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(k){return k=this.conditionStack.length-1-Math.abs(k||0),k>=0?this.conditionStack[k]:"INITIAL"},pushState:function(k){this.begin(k)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(k,A,S,m){switch(S){case 0:return k.getLogger().trace("Found comment",A.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:this.popState();break;case 5:k.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return k.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:k.getLogger().trace("end icon"),this.popState();break;case 10:return k.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return k.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return k.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return k.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:return this.begin("NODE"),19;case 15:return this.begin("NODE"),19;case 16:return this.begin("NODE"),19;case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 23:this.popState();break;case 24:k.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return k.getLogger().trace("description:",A.yytext),"NODE_DESCR";case 26:this.popState();break;case 27:return this.popState(),k.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),k.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),k.getLogger().trace("node end ...",A.yytext),"NODE_DEND";case 30:return this.popState(),k.getLogger().trace("node end (("),"NODE_DEND";case 31:return this.popState(),k.getLogger().trace("node end (-"),"NODE_DEND";case 32:return this.popState(),k.getLogger().trace("node end (-"),"NODE_DEND";case 33:return this.popState(),k.getLogger().trace("node end (("),"NODE_DEND";case 34:return this.popState(),k.getLogger().trace("node end (("),"NODE_DEND";case 35:return k.getLogger().trace("Long description:",A.yytext),20;case 36:return k.getLogger().trace("Long description:",A.yytext),20}},rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return v})();w.lexer=E;function R(){this.yy={}}return R.prototype=w,w.Parser=R,new R})();wo.parser=wo;const fC=wo;let ki=[],Nd=0,Rl={};const pC=()=>{ki=[],Nd=0,Rl={}},gC=function(t){for(let e=ki.length-1;e>=0;e--)if(ki[e].level<t)return ki[e];return null},yC=()=>ki.length>0?ki[0]:null,mC=(t,e,i,r)=>{var s,n;B.info("addNode",t,e,i,r);const a=Y();let o=((s=a.mindmap)==null?void 0:s.padding)??$t.mindmap.padding;switch(r){case ke.ROUNDED_RECT:case ke.RECT:case ke.HEXAGON:o*=2}const l={id:Nd++,nodeId:te(e,a),level:t,descr:te(i,a),type:r,children:[],width:((n=a.mindmap)==null?void 0:n.maxNodeWidth)??$t.mindmap.maxNodeWidth,padding:o},h=gC(t);if(h)h.children.push(l),ki.push(l);else if(ki.length===0)ki.push(l);else throw new Error('There can be only one root. No parent could be found for ("'+l.descr+'")')},ke={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},xC=(t,e)=>{switch(B.debug("In get type",t,e),t){case"[":return ke.RECT;case"(":return e===")"?ke.ROUNDED_RECT:ke.CLOUD;case"((":return ke.CIRCLE;case")":return ke.CLOUD;case"))":return ke.BANG;case"{{":return ke.HEXAGON;default:return ke.DEFAULT}},bC=(t,e)=>{Rl[t]=e},kC=t=>{if(!t)return;const e=Y(),i=ki[ki.length-1];t.icon&&(i.icon=te(t.icon,e)),t.class&&(i.class=te(t.class,e))},_C=t=>{switch(t){case ke.DEFAULT:return"no-border";case ke.RECT:return"rect";case ke.ROUNDED_RECT:return"rounded-rect";case ke.CIRCLE:return"circle";case ke.CLOUD:return"cloud";case ke.BANG:return"bang";case ke.HEXAGON:return"hexgon";default:return"no-border"}},TC=()=>B,CC=t=>Rl[t],EC={clear:pC,addNode:mC,getMindmap:yC,nodeType:ke,getType:xC,setElementForId:bC,decorateNode:kC,type2Str:_C,getLogger:TC,getElementById:CC},SC=EC,wC=12,vC=function(t,e,i,r){e.append("path").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("d",`M0 ${i.height-5} v${-i.height+10} q0,-5 5,-5 h${i.width-10} q5,0 5,5 v${i.height-5} H0 Z`),e.append("line").attr("class","node-line-"+r).attr("x1",0).attr("y1",i.height).attr("x2",i.width).attr("y2",i.height)},AC=function(t,e,i){e.append("rect").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("height",i.height).attr("width",i.width)},LC=function(t,e,i){const r=i.width,s=i.height,n=.15*r,a=.25*r,o=.35*r,l=.2*r;e.append("path").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("d",`M0 0 a${n},${n} 0 0,1 ${r*.25},${-1*r*.1}
      a${o},${o} 1 0,1 ${r*.4},${-1*r*.1}
      a${a},${a} 1 0,1 ${r*.35},${1*r*.2}

      a${n},${n} 1 0,1 ${r*.15},${1*s*.35}
      a${l},${l} 1 0,1 ${-1*r*.15},${1*s*.65}

      a${a},${n} 1 0,1 ${-1*r*.25},${r*.15}
      a${o},${o} 1 0,1 ${-1*r*.5},0
      a${n},${n} 1 0,1 ${-1*r*.25},${-1*r*.15}

      a${n},${n} 1 0,1 ${-1*r*.1},${-1*s*.35}
      a${l},${l} 1 0,1 ${r*.1},${-1*s*.65}

    H0 V0 Z`)},BC=function(t,e,i){const r=i.width,s=i.height,n=.15*r;e.append("path").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("d",`M0 0 a${n},${n} 1 0,0 ${r*.25},${-1*s*.1}
      a${n},${n} 1 0,0 ${r*.25},0
      a${n},${n} 1 0,0 ${r*.25},0
      a${n},${n} 1 0,0 ${r*.25},${1*s*.1}

      a${n},${n} 1 0,0 ${r*.15},${1*s*.33}
      a${n*.8},${n*.8} 1 0,0 0,${1*s*.34}
      a${n},${n} 1 0,0 ${-1*r*.15},${1*s*.33}

      a${n},${n} 1 0,0 ${-1*r*.25},${s*.15}
      a${n},${n} 1 0,0 ${-1*r*.25},0
      a${n},${n} 1 0,0 ${-1*r*.25},0
      a${n},${n} 1 0,0 ${-1*r*.25},${-1*s*.15}

      a${n},${n} 1 0,0 ${-1*r*.1},${-1*s*.33}
      a${n*.8},${n*.8} 1 0,0 0,${-1*s*.34}
      a${n},${n} 1 0,0 ${r*.1},${-1*s*.33}

    H0 V0 Z`)},IC=function(t,e,i){e.append("circle").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("r",i.width/2)};function DC(t,e,i,r,s){return t.insert("polygon",":first-child").attr("points",r.map(function(n){return n.x+","+n.y}).join(" ")).attr("transform","translate("+(s.width-e)/2+", "+i+")")}const FC=function(t,e,i){const r=i.height,n=r/4,a=i.width-i.padding+2*n,o=[{x:n,y:0},{x:a-n,y:0},{x:a,y:-r/2},{x:a-n,y:-r},{x:n,y:-r},{x:0,y:-r/2}];DC(e,a,r,o,i)},RC=function(t,e,i){e.append("rect").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("height",i.height).attr("rx",i.padding).attr("ry",i.padding).attr("width",i.width)},NC=function(t,e,i,r,s){const n=s.htmlLabels,a=r%(wC-1),o=e.append("g");i.section=a;let l="section-"+a;a<0&&(l+=" section-root"),o.attr("class",(i.class?i.class+" ":"")+"mindmap-node "+l);const h=o.append("g"),u=o.append("g"),p=i.descr.replace(/(<br\/*>)/g,`
`);fa(u,p,{useHtmlLabels:n,width:i.width,classes:"mindmap-node-label"}),n||u.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const d=u.node().getBBox(),[g]=Or(s.fontSize);if(i.height=d.height+g*1.1*.5+i.padding,i.width=d.width+2*i.padding,i.icon)if(i.type===t.nodeType.CIRCLE)i.height+=50,i.width+=50,o.append("foreignObject").attr("height","50px").attr("width",i.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+a+" "+i.icon),u.attr("transform","translate("+i.width/2+", "+(i.height/2-1.5*i.padding)+")");else{i.width+=50;const y=i.height;i.height=Math.max(y,60);const x=Math.abs(i.height-y);o.append("foreignObject").attr("width","60px").attr("height",i.height).attr("style","text-align: center;margin-top:"+x/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+a+" "+i.icon),u.attr("transform","translate("+(25+i.width/2)+", "+(x/2+i.padding/2)+")")}else if(n){const y=(i.width-d.width)/2,x=(i.height-d.height)/2;u.attr("transform","translate("+y+", "+x+")")}else{const y=i.width/2,x=i.padding/2;u.attr("transform","translate("+y+", "+x+")")}switch(i.type){case t.nodeType.DEFAULT:vC(t,h,i,a);break;case t.nodeType.ROUNDED_RECT:RC(t,h,i);break;case t.nodeType.RECT:AC(t,h,i);break;case t.nodeType.CIRCLE:h.attr("transform","translate("+i.width/2+", "+ +i.height/2+")"),IC(t,h,i);break;case t.nodeType.CLOUD:LC(t,h,i);break;case t.nodeType.BANG:BC(t,h,i);break;case t.nodeType.HEXAGON:FC(t,h,i);break}return t.setElementForId(i.id,o),i.height},OC=function(t,e){const i=t.getElementById(e.id),r=e.x||0,s=e.y||0;i.attr("transform","translate("+r+","+s+")")};xh.use(Nf);function Od(t,e,i,r,s){NC(t,e,i,r,s),i.children&&i.children.forEach((n,a)=>{Od(t,e,n,r<0?a:r,s)})}function PC(t,e){e.edges().map((i,r)=>{const s=i.data();if(i[0]._private.bodyBounds){const n=i[0]._private.rscratch;B.trace("Edge: ",r,s),t.insert("path").attr("d",`M ${n.startX},${n.startY} L ${n.midX},${n.midY} L${n.endX},${n.endY} `).attr("class","edge section-edge-"+s.section+" edge-depth-"+s.depth)}})}function Pd(t,e,i,r){e.add({group:"nodes",data:{id:t.id.toString(),labelText:t.descr,height:t.height,width:t.width,level:r,nodeId:t.id,padding:t.padding,type:t.type},position:{x:t.x,y:t.y}}),t.children&&t.children.forEach(s=>{Pd(s,e,i,r+1),e.add({group:"edges",data:{id:`${t.id}_${s.id}`,source:t.id,target:s.id,depth:r,section:s.section}})})}function MC(t,e){return new Promise(i=>{const r=yt("body").append("div").attr("id","cy").attr("style","display:none"),s=xh({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});r.remove(),Pd(t,s,e,0),s.nodes().forEach(function(n){n.layoutDimensions=()=>{const a=n.data();return{w:a.width,h:a.height}}}),s.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),s.ready(n=>{B.info("Ready",n),i(s)})})}function VC(t,e){e.nodes().map((i,r)=>{const s=i.data();s.x=i.position().x,s.y=i.position().y,OC(t,s);const n=t.getElementById(s.nodeId);B.info("Id:",r,"Position: (",i.position().x,", ",i.position().y,")",s),n.attr("transform",`translate(${i.position().x-s.width/2}, ${i.position().y-s.height/2})`),n.attr("attr",`apa-${r})`)})}const zC=async(t,e,i,r)=>{var s,n;B.debug(`Rendering mindmap diagram
`+t);const a=r.db,o=a.getMindmap();if(!o)return;const l=Y();l.htmlLabels=!1;const h=Zs(e),u=h.append("g");u.attr("class","mindmap-edges");const p=h.append("g");p.attr("class","mindmap-nodes"),Od(a,p,o,-1,l);const d=await MC(o,l);PC(u,d),VC(a,d),yr(void 0,h,((s=l.mindmap)==null?void 0:s.padding)??$t.mindmap.padding,((n=l.mindmap)==null?void 0:n.useMaxWidth)??$t.mindmap.useMaxWidth)},qC={draw:zC},WC=t=>{let e="";for(let i=0;i<t.THEME_COLOR_LIMIT;i++)t["lineColor"+i]=t["lineColor"+i]||t["cScaleInv"+i],Rr(t["lineColor"+i])?t["lineColor"+i]=Ct(t["lineColor"+i],20):t["lineColor"+i]=At(t["lineColor"+i],20);for(let i=0;i<t.THEME_COLOR_LIMIT;i++){const r=""+(17-3*i);e+=`
    .section-${i-1} rect, .section-${i-1} path, .section-${i-1} circle, .section-${i-1} polygon, .section-${i-1} path  {
      fill: ${t["cScale"+i]};
    }
    .section-${i-1} text {
     fill: ${t["cScaleLabel"+i]};
    }
    .node-icon-${i-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+i]};
    }
    .section-edge-${i-1}{
      stroke: ${t["cScale"+i]};
    }
    .edge-depth-${i-1}{
      stroke-width: ${r};
    }
    .section-${i-1} line {
      stroke: ${t["cScaleInv"+i]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return e},YC=t=>`
  .edge {
    stroke-width: 3;
  }
  ${WC(t)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .mindmap-node-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,UC=YC,HC={db:SC,renderer:qC,parser:fC,styles:UC},GC=Object.freeze(Object.defineProperty({__proto__:null,diagram:HC},Symbol.toStringTag,{value:"Module"}));var vo=(function(){var t=function(o,l,h,u){for(h=h||{},u=o.length;u--;h[o[u]]=l);return h},e=[1,9],i=[1,10],r=[1,5,10,12],s={trace:function(){},yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:function(l,h,u,p,d,g,y){var x=g.length-1;switch(d){case 7:const _=p.findOrCreateNode(g[x-4].trim().replaceAll('""','"')),w=p.findOrCreateNode(g[x-2].trim().replaceAll('""','"')),E=parseFloat(g[x].trim());p.addLink(_,w,E);break;case 8:case 9:case 11:this.$=g[x];break;case 10:this.$=g[x-1];break}},table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:e,20:i},{1:[2,6],7:11,10:[1,12]},t(i,[2,4],{9:13,5:[1,14]}),{12:[1,15]},t(r,[2,8]),t(r,[2,9]),{19:[1,16]},t(r,[2,11]),{1:[2,1]},{1:[2,5]},t(i,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:e,20:i},{15:18,16:7,17:8,18:e,20:i},{18:[1,19]},t(i,[2,3]),{12:[1,20]},t(r,[2,10]),{15:21,16:7,17:8,18:e,20:i},t([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:function(l,h){if(h.recoverable)this.trace(l);else{var u=new Error(l);throw u.hash=h,u}},parse:function(l){var h=this,u=[0],p=[],d=[null],g=[],y=this.table,x="",_=0,w=0,E=2,R=1,v=g.slice.call(arguments,1),T=Object.create(this.lexer),k={yy:{}};for(var A in this.yy)Object.prototype.hasOwnProperty.call(this.yy,A)&&(k.yy[A]=this.yy[A]);T.setInput(l,k.yy),k.yy.lexer=T,k.yy.parser=this,typeof T.yylloc>"u"&&(T.yylloc={});var S=T.yylloc;g.push(S);var m=T.options&&T.options.ranges;typeof k.yy.parseError=="function"?this.parseError=k.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(){var z;return z=p.pop()||T.lex()||R,typeof z!="number"&&(z instanceof Array&&(p=z,z=p.pop()),z=h.symbols_[z]||z),z}for(var f,L,b,P,U={},N,D,F,I;;){if(L=u[u.length-1],this.defaultActions[L]?b=this.defaultActions[L]:((f===null||typeof f>"u")&&(f=C()),b=y[L]&&y[L][f]),typeof b>"u"||!b.length||!b[0]){var M="";I=[];for(N in y[L])this.terminals_[N]&&N>E&&I.push("'"+this.terminals_[N]+"'");T.showPosition?M="Parse error on line "+(_+1)+`:
`+T.showPosition()+`
Expecting `+I.join(", ")+", got '"+(this.terminals_[f]||f)+"'":M="Parse error on line "+(_+1)+": Unexpected "+(f==R?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(M,{text:T.match,token:this.terminals_[f]||f,line:T.yylineno,loc:S,expected:I})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+L+", token: "+f);switch(b[0]){case 1:u.push(f),d.push(T.yytext),g.push(T.yylloc),u.push(b[1]),f=null,w=T.yyleng,x=T.yytext,_=T.yylineno,S=T.yylloc;break;case 2:if(D=this.productions_[b[1]][1],U.$=d[d.length-D],U._$={first_line:g[g.length-(D||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(D||1)].first_column,last_column:g[g.length-1].last_column},m&&(U._$.range=[g[g.length-(D||1)].range[0],g[g.length-1].range[1]]),P=this.performAction.apply(U,[x,w,_,k.yy,b[1],d,g].concat(v)),typeof P<"u")return P;D&&(u=u.slice(0,-1*D*2),d=d.slice(0,-1*D),g=g.slice(0,-1*D)),u.push(this.productions_[b[1]][0]),d.push(U.$),g.push(U._$),F=y[u[u.length-2]][u[u.length-1]],u.push(F);break;case 3:return!0}}return!0}},n=(function(){var o={EOF:1,parseError:function(h,u){if(this.yy.parser)this.yy.parser.parseError(h,u);else throw new Error(h)},setInput:function(l,h){return this.yy=h||this.yy||{},this._input=l,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var l=this._input[0];this.yytext+=l,this.yyleng++,this.offset++,this.match+=l,this.matched+=l;var h=l.match(/(?:\r\n?|\n).*/g);return h?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),l},unput:function(l){var h=l.length,u=l.split(/(?:\r\n?|\n)/g);this._input=l+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-h),this.offset-=h;var p=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),u.length-1&&(this.yylineno-=u.length-1);var d=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:u?(u.length===p.length?this.yylloc.first_column:0)+p[p.length-u.length].length-u[0].length:this.yylloc.first_column-h},this.options.ranges&&(this.yylloc.range=[d[0],d[0]+this.yyleng-h]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(l){this.unput(this.match.slice(l))},pastInput:function(){var l=this.matched.substr(0,this.matched.length-this.match.length);return(l.length>20?"...":"")+l.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var l=this.match;return l.length<20&&(l+=this._input.substr(0,20-l.length)),(l.substr(0,20)+(l.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var l=this.pastInput(),h=new Array(l.length+1).join("-");return l+this.upcomingInput()+`
`+h+"^"},test_match:function(l,h){var u,p,d;if(this.options.backtrack_lexer&&(d={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(d.yylloc.range=this.yylloc.range.slice(0))),p=l[0].match(/(?:\r\n?|\n).*/g),p&&(this.yylineno+=p.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:p?p[p.length-1].length-p[p.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+l[0].length},this.yytext+=l[0],this.match+=l[0],this.matches=l,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(l[0].length),this.matched+=l[0],u=this.performAction.call(this,this.yy,this,h,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),u)return u;if(this._backtrack){for(var g in d)this[g]=d[g];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var l,h,u,p;this._more||(this.yytext="",this.match="");for(var d=this._currentRules(),g=0;g<d.length;g++)if(u=this._input.match(this.rules[d[g]]),u&&(!h||u[0].length>h[0].length)){if(h=u,p=g,this.options.backtrack_lexer){if(l=this.test_match(u,d[g]),l!==!1)return l;if(this._backtrack){h=!1;continue}else return!1}else if(!this.options.flex)break}return h?(l=this.test_match(h,d[p]),l!==!1?l:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var h=this.next();return h||this.lex()},begin:function(h){this.conditionStack.push(h)},popState:function(){var h=this.conditionStack.length-1;return h>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(h){return h=this.conditionStack.length-1-Math.abs(h||0),h>=0?this.conditionStack[h]:"INITIAL"},pushState:function(h){this.begin(h)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(h,u,p,d){switch(p){case 0:return this.pushState("csv"),4;case 1:return 10;case 2:return 5;case 3:return 12;case 4:return this.pushState("escaped_text"),18;case 5:return 20;case 6:return this.popState("escaped_text"),18;case 7:return 19}},rules:[/^(?:sankey-beta\b)/i,/^(?:$)/i,/^(?:((\u000D\u000A)|(\u000A)))/i,/^(?:(\u002C))/i,/^(?:(\u0022))/i,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/i,/^(?:(\u0022)(?!(\u0022)))/i,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/i],conditions:{csv:{rules:[1,2,3,4,5,6,7],inclusive:!1},escaped_text:{rules:[6,7],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7],inclusive:!0}}};return o})();s.lexer=n;function a(){this.yy={}}return a.prototype=s,s.Parser=a,new a})();vo.parser=vo;const ia=vo;let _a=[],Ta=[],jr={};const jC=()=>{_a=[],Ta=[],jr={},Oe()};class XC{constructor(e,i,r=0){this.source=e,this.target=i,this.value=r}}const $C=(t,e,i)=>{_a.push(new XC(t,e,i))};class KC{constructor(e){this.ID=e}}const QC=t=>(t=mt.sanitizeText(t,Y()),jr[t]||(jr[t]=new KC(t),Ta.push(jr[t])),jr[t]),ZC=()=>Ta,JC=()=>_a,tE=()=>({nodes:Ta.map(t=>({id:t.ID})),links:_a.map(t=>({source:t.source.ID,target:t.target.ID,value:t.value}))}),eE={nodesMap:jr,getConfig:()=>Y().sankey,getNodes:ZC,getLinks:JC,getGraph:tE,addLink:$C,findOrCreateNode:QC,getAccTitle:Ye,setAccTitle:Pe,getAccDescription:He,setAccDescription:Ue,getDiagramTitle:Ge,setDiagramTitle:ri,clear:jC},Md=class Ao{static next(e){return new Ao(e+ ++Ao.count)}constructor(e){this.id=e,this.href=`#${e}`}toString(){return"url("+this.href+")"}};Md.count=0;let lh=Md;const iE={left:zf,right:Vf,center:Mf,justify:Pf},rE=function(t,e,i,r){const{securityLevel:s,sankey:n}=Y(),a=a1.sankey;let o;s==="sandbox"&&(o=yt("#i"+e));const l=s==="sandbox"?yt(o.nodes()[0].contentDocument.body):yt("body"),h=s==="sandbox"?l.select(`[id="${e}"]`):yt(`[id="${e}"]`),u=n?.width??a.width,p=n?.height??a.width,d=n?.useMaxWidth??a.useMaxWidth,g=n?.nodeAlignment??a.nodeAlignment,y=n?.prefix??a.prefix,x=n?.suffix??a.suffix,_=n?.showValues??a.showValues,w=r.db.getGraph(),E=iE[g];Of().nodeId(C=>C.id).nodeWidth(10).nodePadding(10+(_?15:0)).nodeAlign(E).extent([[0,0],[u,p]])(w);const T=Io(bh);h.append("g").attr("class","nodes").selectAll(".node").data(w.nodes).join("g").attr("class","node").attr("id",C=>(C.uid=lh.next("node-")).id).attr("transform",function(C){return"translate("+C.x0+","+C.y0+")"}).attr("x",C=>C.x0).attr("y",C=>C.y0).append("rect").attr("height",C=>C.y1-C.y0).attr("width",C=>C.x1-C.x0).attr("fill",C=>T(C.id));const k=({id:C,value:f})=>_?`${C}
${y}${Math.round(f*100)/100}${x}`:C;h.append("g").attr("class","node-labels").attr("font-family","sans-serif").attr("font-size",14).selectAll("text").data(w.nodes).join("text").attr("x",C=>C.x0<u/2?C.x1+6:C.x0-6).attr("y",C=>(C.y1+C.y0)/2).attr("dy",`${_?"0":"0.35"}em`).attr("text-anchor",C=>C.x0<u/2?"start":"end").text(k);const A=h.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(w.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),S=n?.linkColor||"gradient";if(S==="gradient"){const C=A.append("linearGradient").attr("id",f=>(f.uid=lh.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",f=>f.source.x1).attr("x2",f=>f.target.x0);C.append("stop").attr("offset","0%").attr("stop-color",f=>T(f.source.id)),C.append("stop").attr("offset","100%").attr("stop-color",f=>T(f.target.id))}let m;switch(S){case"gradient":m=C=>C.uid;break;case"source":m=C=>T(C.source.id);break;case"target":m=C=>T(C.target.id);break;default:m=S}A.append("path").attr("d",qf()).attr("stroke",m).attr("stroke-width",C=>Math.max(1,C.width)),yr(void 0,h,0,d)},sE={draw:rE},nE=t=>t.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,`
`).trim(),aE=ia.parse.bind(ia);ia.parse=t=>aE(nE(t));const oE={parser:ia,db:eE,renderer:sE},lE=Object.freeze(Object.defineProperty({__proto__:null,diagram:oE},Symbol.toStringTag,{value:"Module"}));var ch,hh,Lo=(function(){var t=function(R,v,T,k){for(T=T||{},k=R.length;k--;T[R[k]]=v);return T},e=[1,7],i=[1,13],r=[1,14],s=[1,15],n=[1,19],a=[1,16],o=[1,17],l=[1,18],h=[8,30],u=[8,21,28,29,30,31,32,40,44,47],p=[1,23],d=[1,24],g=[8,15,16,21,28,29,30,31,32,40,44,47],y=[8,15,16,21,27,28,29,30,31,32,40,44,47],x=[1,49],_={trace:function(){},yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,block:31,NODE_ID:32,nodeShapeNLabel:33,dirList:34,DIR:35,NODE_DSTART:36,NODE_DEND:37,BLOCK_ARROW_START:38,BLOCK_ARROW_END:39,classDef:40,CLASSDEF_ID:41,CLASSDEF_STYLEOPTS:42,DEFAULT:43,class:44,CLASSENTITY_IDS:45,STYLECLASS:46,style:47,STYLE_ENTITY_IDS:48,STYLE_DEFINITION_DATA:49,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"block",32:"NODE_ID",35:"DIR",36:"NODE_DSTART",37:"NODE_DEND",38:"BLOCK_ARROW_START",39:"BLOCK_ARROW_END",40:"classDef",41:"CLASSDEF_ID",42:"CLASSDEF_STYLEOPTS",43:"DEFAULT",44:"class",45:"CLASSENTITY_IDS",46:"STYLECLASS",47:"style",48:"STYLE_ENTITY_IDS",49:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[34,1],[34,2],[33,3],[33,4],[23,3],[23,3],[24,3],[25,3]],performAction:function(v,T,k,A,S,m,C){var f=m.length-1;switch(S){case 4:A.getLogger().debug("Rule: separator (NL) ");break;case 5:A.getLogger().debug("Rule: separator (Space) ");break;case 6:A.getLogger().debug("Rule: separator (EOF) ");break;case 7:A.getLogger().debug("Rule: hierarchy: ",m[f-1]),A.setHierarchy(m[f-1]);break;case 8:A.getLogger().debug("Stop NL ");break;case 9:A.getLogger().debug("Stop EOF ");break;case 10:A.getLogger().debug("Stop NL2 ");break;case 11:A.getLogger().debug("Stop EOF2 ");break;case 12:A.getLogger().debug("Rule: statement: ",m[f]),typeof m[f].length=="number"?this.$=m[f]:this.$=[m[f]];break;case 13:A.getLogger().debug("Rule: statement #2: ",m[f-1]),this.$=[m[f-1]].concat(m[f]);break;case 14:A.getLogger().debug("Rule: link: ",m[f],v),this.$={edgeTypeStr:m[f],label:""};break;case 15:A.getLogger().debug("Rule: LABEL link: ",m[f-3],m[f-1],m[f]),this.$={edgeTypeStr:m[f],label:m[f-1]};break;case 18:const L=parseInt(m[f]),b=A.generateId();this.$={id:b,type:"space",label:"",width:L,children:[]};break;case 23:A.getLogger().debug("Rule: (nodeStatement link node) ",m[f-2],m[f-1],m[f]," typestr: ",m[f-1].edgeTypeStr);const P=A.edgeStrToEdgeData(m[f-1].edgeTypeStr);this.$=[{id:m[f-2].id,label:m[f-2].label,type:m[f-2].type,directions:m[f-2].directions},{id:m[f-2].id+"-"+m[f].id,start:m[f-2].id,end:m[f].id,label:m[f-1].label,type:"edge",directions:m[f].directions,arrowTypeEnd:P,arrowTypeStart:"arrow_open"},{id:m[f].id,label:m[f].label,type:A.typeStr2Type(m[f].typeStr),directions:m[f].directions}];break;case 24:A.getLogger().debug("Rule: nodeStatement (abc88 node size) ",m[f-1],m[f]),this.$={id:m[f-1].id,label:m[f-1].label,type:A.typeStr2Type(m[f-1].typeStr),directions:m[f-1].directions,widthInColumns:parseInt(m[f],10)};break;case 25:A.getLogger().debug("Rule: nodeStatement (node) ",m[f]),this.$={id:m[f].id,label:m[f].label,type:A.typeStr2Type(m[f].typeStr),directions:m[f].directions,widthInColumns:1};break;case 26:A.getLogger().debug("APA123",this?this:"na"),A.getLogger().debug("COLUMNS: ",m[f]),this.$={type:"column-setting",columns:m[f]==="auto"?-1:parseInt(m[f])};break;case 27:A.getLogger().debug("Rule: id-block statement : ",m[f-2],m[f-1]),A.generateId(),this.$={...m[f-2],type:"composite",children:m[f-1]};break;case 28:A.getLogger().debug("Rule: blockStatement : ",m[f-2],m[f-1],m[f]);const U=A.generateId();this.$={id:U,type:"composite",label:"",children:m[f-1]};break;case 29:A.getLogger().debug("Rule: node (NODE_ID separator): ",m[f]),this.$={id:m[f]};break;case 30:A.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",m[f-1],m[f]),this.$={id:m[f-1],label:m[f].label,typeStr:m[f].typeStr,directions:m[f].directions};break;case 31:A.getLogger().debug("Rule: dirList: ",m[f]),this.$=[m[f]];break;case 32:A.getLogger().debug("Rule: dirList: ",m[f-1],m[f]),this.$=[m[f-1]].concat(m[f]);break;case 33:A.getLogger().debug("Rule: nodeShapeNLabel: ",m[f-2],m[f-1],m[f]),this.$={typeStr:m[f-2]+m[f],label:m[f-1]};break;case 34:A.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",m[f-3],m[f-2]," #3:",m[f-1],m[f]),this.$={typeStr:m[f-3]+m[f],label:m[f-2],directions:m[f-1]};break;case 35:case 36:this.$={type:"classDef",id:m[f-1].trim(),css:m[f].trim()};break;case 37:this.$={type:"applyClass",id:m[f-1].trim(),styleClass:m[f].trim()};break;case 38:this.$={type:"applyStyles",id:m[f-1].trim(),stylesStr:m[f].trim()};break}},table:[{9:1,10:[1,2]},{1:[3]},{11:3,13:4,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:i,29:r,31:s,32:n,40:a,44:o,47:l},{8:[1,20]},t(h,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,21:e,28:i,29:r,31:s,32:n,40:a,44:o,47:l}),t(u,[2,16],{14:22,15:p,16:d}),t(u,[2,17]),t(u,[2,18]),t(u,[2,19]),t(u,[2,20]),t(u,[2,21]),t(u,[2,22]),t(g,[2,25],{27:[1,25]}),t(u,[2,26]),{19:26,26:12,32:n},{11:27,13:4,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:i,29:r,31:s,32:n,40:a,44:o,47:l},{41:[1,28],43:[1,29]},{45:[1,30]},{48:[1,31]},t(y,[2,29],{33:32,36:[1,33],38:[1,34]}),{1:[2,7]},t(h,[2,13]),{26:35,32:n},{32:[2,14]},{17:[1,36]},t(g,[2,24]),{11:37,13:4,14:22,15:p,16:d,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:i,29:r,31:s,32:n,40:a,44:o,47:l},{30:[1,38]},{42:[1,39]},{42:[1,40]},{46:[1,41]},{49:[1,42]},t(y,[2,30]),{18:[1,43]},{18:[1,44]},t(g,[2,23]),{18:[1,45]},{30:[1,46]},t(u,[2,28]),t(u,[2,35]),t(u,[2,36]),t(u,[2,37]),t(u,[2,38]),{37:[1,47]},{34:48,35:x},{15:[1,50]},t(u,[2,27]),t(y,[2,33]),{39:[1,51]},{34:52,35:x,39:[2,31]},{32:[2,15]},t(y,[2,34]),{39:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:function(v,T){if(T.recoverable)this.trace(v);else{var k=new Error(v);throw k.hash=T,k}},parse:function(v){var T=this,k=[0],A=[],S=[null],m=[],C=this.table,f="",L=0,b=0,P=2,U=1,N=m.slice.call(arguments,1),D=Object.create(this.lexer),F={yy:{}};for(var I in this.yy)Object.prototype.hasOwnProperty.call(this.yy,I)&&(F.yy[I]=this.yy[I]);D.setInput(v,F.yy),F.yy.lexer=D,F.yy.parser=this,typeof D.yylloc>"u"&&(D.yylloc={});var M=D.yylloc;m.push(M);var z=D.options&&D.options.ranges;typeof F.yy.parseError=="function"?this.parseError=F.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function st(){var W;return W=A.pop()||D.lex()||U,typeof W!="number"&&(W instanceof Array&&(A=W,W=A.pop()),W=T.symbols_[W]||W),W}for(var j,dt,K,G,tt={},nt,Q,J,O;;){if(dt=k[k.length-1],this.defaultActions[dt]?K=this.defaultActions[dt]:((j===null||typeof j>"u")&&(j=st()),K=C[dt]&&C[dt][j]),typeof K>"u"||!K.length||!K[0]){var at="";O=[];for(nt in C[dt])this.terminals_[nt]&&nt>P&&O.push("'"+this.terminals_[nt]+"'");D.showPosition?at="Parse error on line "+(L+1)+`:
`+D.showPosition()+`
Expecting `+O.join(", ")+", got '"+(this.terminals_[j]||j)+"'":at="Parse error on line "+(L+1)+": Unexpected "+(j==U?"end of input":"'"+(this.terminals_[j]||j)+"'"),this.parseError(at,{text:D.match,token:this.terminals_[j]||j,line:D.yylineno,loc:M,expected:O})}if(K[0]instanceof Array&&K.length>1)throw new Error("Parse Error: multiple actions possible at state: "+dt+", token: "+j);switch(K[0]){case 1:k.push(j),S.push(D.yytext),m.push(D.yylloc),k.push(K[1]),j=null,b=D.yyleng,f=D.yytext,L=D.yylineno,M=D.yylloc;break;case 2:if(Q=this.productions_[K[1]][1],tt.$=S[S.length-Q],tt._$={first_line:m[m.length-(Q||1)].first_line,last_line:m[m.length-1].last_line,first_column:m[m.length-(Q||1)].first_column,last_column:m[m.length-1].last_column},z&&(tt._$.range=[m[m.length-(Q||1)].range[0],m[m.length-1].range[1]]),G=this.performAction.apply(tt,[f,b,L,F.yy,K[1],S,m].concat(N)),typeof G<"u")return G;Q&&(k=k.slice(0,-1*Q*2),S=S.slice(0,-1*Q),m=m.slice(0,-1*Q)),k.push(this.productions_[K[1]][0]),S.push(tt.$),m.push(tt._$),J=C[k[k.length-2]][k[k.length-1]],k.push(J);break;case 3:return!0}}return!0}},w=(function(){var R={EOF:1,parseError:function(T,k){if(this.yy.parser)this.yy.parser.parseError(T,k);else throw new Error(T)},setInput:function(v,T){return this.yy=T||this.yy||{},this._input=v,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var v=this._input[0];this.yytext+=v,this.yyleng++,this.offset++,this.match+=v,this.matched+=v;var T=v.match(/(?:\r\n?|\n).*/g);return T?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),v},unput:function(v){var T=v.length,k=v.split(/(?:\r\n?|\n)/g);this._input=v+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-T),this.offset-=T;var A=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),k.length-1&&(this.yylineno-=k.length-1);var S=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:k?(k.length===A.length?this.yylloc.first_column:0)+A[A.length-k.length].length-k[0].length:this.yylloc.first_column-T},this.options.ranges&&(this.yylloc.range=[S[0],S[0]+this.yyleng-T]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(v){this.unput(this.match.slice(v))},pastInput:function(){var v=this.matched.substr(0,this.matched.length-this.match.length);return(v.length>20?"...":"")+v.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var v=this.match;return v.length<20&&(v+=this._input.substr(0,20-v.length)),(v.substr(0,20)+(v.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var v=this.pastInput(),T=new Array(v.length+1).join("-");return v+this.upcomingInput()+`
`+T+"^"},test_match:function(v,T){var k,A,S;if(this.options.backtrack_lexer&&(S={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(S.yylloc.range=this.yylloc.range.slice(0))),A=v[0].match(/(?:\r\n?|\n).*/g),A&&(this.yylineno+=A.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:A?A[A.length-1].length-A[A.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+v[0].length},this.yytext+=v[0],this.match+=v[0],this.matches=v,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(v[0].length),this.matched+=v[0],k=this.performAction.call(this,this.yy,this,T,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),k)return k;if(this._backtrack){for(var m in S)this[m]=S[m];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var v,T,k,A;this._more||(this.yytext="",this.match="");for(var S=this._currentRules(),m=0;m<S.length;m++)if(k=this._input.match(this.rules[S[m]]),k&&(!T||k[0].length>T[0].length)){if(T=k,A=m,this.options.backtrack_lexer){if(v=this.test_match(k,S[m]),v!==!1)return v;if(this._backtrack){T=!1;continue}else return!1}else if(!this.options.flex)break}return T?(v=this.test_match(T,S[A]),v!==!1?v:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var T=this.next();return T||this.lex()},begin:function(T){this.conditionStack.push(T)},popState:function(){var T=this.conditionStack.length-1;return T>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(T){return T=this.conditionStack.length-1-Math.abs(T||0),T>=0?this.conditionStack[T]:"INITIAL"},pushState:function(T){this.begin(T)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(T,k,A,S){switch(A){case 0:return 10;case 1:return T.getLogger().debug("Found space-block"),31;case 2:return T.getLogger().debug("Found nl-block"),31;case 3:return T.getLogger().debug("Found space-block"),29;case 4:T.getLogger().debug(".",k.yytext);break;case 5:T.getLogger().debug("_",k.yytext);break;case 6:return 5;case 7:return k.yytext=-1,28;case 8:return k.yytext=k.yytext.replace(/columns\s+/,""),T.getLogger().debug("COLUMNS (LEX)",k.yytext),28;case 9:this.pushState("md_string");break;case 10:return"MD_STR";case 11:this.popState();break;case 12:this.pushState("string");break;case 13:T.getLogger().debug("LEX: POPPING STR:",k.yytext),this.popState();break;case 14:return T.getLogger().debug("LEX: STR end:",k.yytext),"STR";case 15:return k.yytext=k.yytext.replace(/space\:/,""),T.getLogger().debug("SPACE NUM (LEX)",k.yytext),21;case 16:return k.yytext="1",T.getLogger().debug("COLUMNS (LEX)",k.yytext),21;case 17:return 43;case 18:return"LINKSTYLE";case 19:return"INTERPOLATE";case 20:return this.pushState("CLASSDEF"),40;case 21:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 22:return this.popState(),this.pushState("CLASSDEFID"),41;case 23:return this.popState(),42;case 24:return this.pushState("CLASS"),44;case 25:return this.popState(),this.pushState("CLASS_STYLE"),45;case 26:return this.popState(),46;case 27:return this.pushState("STYLE_STMNT"),47;case 28:return this.popState(),this.pushState("STYLE_DEFINITION"),48;case 29:return this.popState(),49;case 30:return this.pushState("acc_title"),"acc_title";case 31:return this.popState(),"acc_title_value";case 32:return this.pushState("acc_descr"),"acc_descr";case 33:return this.popState(),"acc_descr_value";case 34:this.pushState("acc_descr_multiline");break;case 35:this.popState();break;case 36:return"acc_descr_multiline_value";case 37:return 30;case 38:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 39:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 40:return this.popState(),T.getLogger().debug("Lex: ))"),"NODE_DEND";case 41:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 42:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 43:return this.popState(),T.getLogger().debug("Lex: (-"),"NODE_DEND";case 44:return this.popState(),T.getLogger().debug("Lex: -)"),"NODE_DEND";case 45:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 46:return this.popState(),T.getLogger().debug("Lex: ]]"),"NODE_DEND";case 47:return this.popState(),T.getLogger().debug("Lex: ("),"NODE_DEND";case 48:return this.popState(),T.getLogger().debug("Lex: ])"),"NODE_DEND";case 49:return this.popState(),T.getLogger().debug("Lex: /]"),"NODE_DEND";case 50:return this.popState(),T.getLogger().debug("Lex: /]"),"NODE_DEND";case 51:return this.popState(),T.getLogger().debug("Lex: )]"),"NODE_DEND";case 52:return this.popState(),T.getLogger().debug("Lex: )"),"NODE_DEND";case 53:return this.popState(),T.getLogger().debug("Lex: ]>"),"NODE_DEND";case 54:return this.popState(),T.getLogger().debug("Lex: ]"),"NODE_DEND";case 55:return T.getLogger().debug("Lexa: -)"),this.pushState("NODE"),36;case 56:return T.getLogger().debug("Lexa: (-"),this.pushState("NODE"),36;case 57:return T.getLogger().debug("Lexa: ))"),this.pushState("NODE"),36;case 58:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 59:return T.getLogger().debug("Lex: ((("),this.pushState("NODE"),36;case 60:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 61:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 62:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 63:return T.getLogger().debug("Lexc: >"),this.pushState("NODE"),36;case 64:return T.getLogger().debug("Lexa: (["),this.pushState("NODE"),36;case 65:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 66:return this.pushState("NODE"),36;case 67:return this.pushState("NODE"),36;case 68:return this.pushState("NODE"),36;case 69:return this.pushState("NODE"),36;case 70:return this.pushState("NODE"),36;case 71:return this.pushState("NODE"),36;case 72:return this.pushState("NODE"),36;case 73:return T.getLogger().debug("Lexa: ["),this.pushState("NODE"),36;case 74:return this.pushState("BLOCK_ARROW"),T.getLogger().debug("LEX ARR START"),38;case 75:return T.getLogger().debug("Lex: NODE_ID",k.yytext),32;case 76:return T.getLogger().debug("Lex: EOF",k.yytext),8;case 77:this.pushState("md_string");break;case 78:this.pushState("md_string");break;case 79:return"NODE_DESCR";case 80:this.popState();break;case 81:T.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 82:T.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 83:return T.getLogger().debug("LEX: NODE_DESCR:",k.yytext),"NODE_DESCR";case 84:T.getLogger().debug("LEX POPPING"),this.popState();break;case 85:T.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 86:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (right): dir:",k.yytext),"DIR";case 87:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (left):",k.yytext),"DIR";case 88:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (x):",k.yytext),"DIR";case 89:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (y):",k.yytext),"DIR";case 90:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (up):",k.yytext),"DIR";case 91:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (down):",k.yytext),"DIR";case 92:return k.yytext="]>",T.getLogger().debug("Lex (ARROW_DIR end):",k.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 93:return T.getLogger().debug("Lex: LINK","#"+k.yytext+"#"),15;case 94:return T.getLogger().debug("Lex: LINK",k.yytext),15;case 95:return T.getLogger().debug("Lex: LINK",k.yytext),15;case 96:return T.getLogger().debug("Lex: LINK",k.yytext),15;case 97:return T.getLogger().debug("Lex: START_LINK",k.yytext),this.pushState("LLABEL"),16;case 98:return T.getLogger().debug("Lex: START_LINK",k.yytext),this.pushState("LLABEL"),16;case 99:return T.getLogger().debug("Lex: START_LINK",k.yytext),this.pushState("LLABEL"),16;case 100:this.pushState("md_string");break;case 101:return T.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 102:return this.popState(),T.getLogger().debug("Lex: LINK","#"+k.yytext+"#"),15;case 103:return this.popState(),T.getLogger().debug("Lex: LINK",k.yytext),15;case 104:return this.popState(),T.getLogger().debug("Lex: LINK",k.yytext),15;case 105:return T.getLogger().debug("Lex: COLON",k.yytext),k.yytext=k.yytext.slice(1),27}},rules:[/^(?:block-beta\b)/,/^(?:block\s+)/,/^(?:block\n+)/,/^(?:block:)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[29],inclusive:!1},STYLE_STMNT:{rules:[28],inclusive:!1},CLASSDEFID:{rules:[23],inclusive:!1},CLASSDEF:{rules:[21,22],inclusive:!1},CLASS_STYLE:{rules:[26],inclusive:!1},CLASS:{rules:[25],inclusive:!1},LLABEL:{rules:[100,101,102,103,104],inclusive:!1},ARROW_DIR:{rules:[86,87,88,89,90,91,92],inclusive:!1},BLOCK_ARROW:{rules:[77,82,85],inclusive:!1},NODE:{rules:[38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,78,81],inclusive:!1},md_string:{rules:[10,11,79,80],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[13,14,83,84],inclusive:!1},acc_descr_multiline:{rules:[35,36],inclusive:!1},acc_descr:{rules:[33],inclusive:!1},acc_title:{rules:[31],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,12,15,16,17,18,19,20,24,27,30,32,34,37,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,93,94,95,96,97,98,99,105],inclusive:!0}}};return R})();_.lexer=w;function E(){this.yy={}}return E.prototype=_,_.Parser=E,new E})();Lo.parser=Lo;const cE=Lo;let Ze={},Nl=[],ks={};const uh="color",dh="fill",hE="bgFill",Vd=",",uE=Y();let As={};const dE=t=>mt.sanitizeText(t,uE),fE=function(t,e=""){As[t]===void 0&&(As[t]={id:t,styles:[],textStyles:[]});const i=As[t];e?.split(Vd).forEach(r=>{const s=r.replace(/([^;]*);/,"$1").trim();if(r.match(uh)){const a=s.replace(dh,hE).replace(uh,dh);i.textStyles.push(a)}i.styles.push(s)})},pE=function(t,e=""){const i=Ze[t];e!=null&&(i.styles=e.split(Vd))},gE=function(t,e){t.split(",").forEach(function(i){let r=Ze[i];if(r===void 0){const s=i.trim();Ze[s]={id:s,type:"na",children:[]},r=Ze[s]}r.classes||(r.classes=[]),r.classes.push(e)})},zd=(t,e)=>{const i=t.flat(),r=[];for(const s of i){if(s.label&&(s.label=dE(s.label)),s.type==="classDef"){fE(s.id,s.css);continue}if(s.type==="applyClass"){gE(s.id,s?.styleClass||"");continue}if(s.type==="applyStyles"){s?.stylesStr&&pE(s.id,s?.stylesStr);continue}if(s.type==="column-setting")e.columns=s.columns||-1;else if(s.type==="edge")ks[s.id]?ks[s.id]++:ks[s.id]=1,s.id=ks[s.id]+"-"+s.id,Nl.push(s);else{s.label||(s.type==="composite"?s.label="":s.label=s.id);const n=!Ze[s.id];if(n?Ze[s.id]=s:(s.type!=="na"&&(Ze[s.id].type=s.type),s.label!==s.id&&(Ze[s.id].label=s.label)),s.children&&zd(s.children,s),s.type==="space"){const a=s.width||1;for(let o=0;o<a;o++){const l=Yf(s);l.id=l.id+"-"+o,Ze[l.id]=l,r.push(l)}}else n&&r.push(s)}}e.children=r};let Ol=[],Ls={id:"root",type:"composite",children:[],columns:-1};const yE=()=>{B.debug("Clear called"),Oe(),Ls={id:"root",type:"composite",children:[],columns:-1},Ze={root:Ls},Ol=[],As={},Nl=[],ks={}};function mE(t){switch(B.debug("typeStr2Type",t),t){case"[]":return"square";case"()":return B.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}function xE(t){switch(B.debug("typeStr2Type",t),t){case"==":return"thick";default:return"normal"}}function bE(t){switch(t.trim()){case"--x":return"arrow_cross";case"--o":return"arrow_circle";default:return"arrow_point"}}let fh=0;const kE=()=>(fh++,"id-"+Math.random().toString(36).substr(2,12)+"-"+fh),_E=t=>{Ls.children=t,zd(t,Ls),Ol=Ls.children},TE=t=>{const e=Ze[t];return e?e.columns?e.columns:e.children?e.children.length:-1:-1},CE=()=>[...Object.values(Ze)],EE=()=>Ol||[],SE=()=>Nl,wE=t=>Ze[t],vE=t=>{Ze[t.id]=t},AE=()=>console,LE=function(){return As},BE={getConfig:()=>ee().block,typeStr2Type:mE,edgeTypeStr2Type:xE,edgeStrToEdgeData:bE,getLogger:AE,getBlocksFlat:CE,getBlocks:EE,getEdges:SE,setHierarchy:_E,getBlock:wE,setBlock:vE,getColumns:TE,getClasses:LE,clear:yE,generateId:kE},IE=BE,gn=(t,e)=>{const i=mh,r=i(t,"r"),s=i(t,"g"),n=i(t,"b");return Xr(r,s,n,e)},DE=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span,p {
    color: ${t.titleColor};
  }



  .label text,span,p {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${gn(t.edgeLabelBackground,.5)};
    // background-color:
  }

  .node .cluster {
    // fill: ${gn(t.mainBkg,.5)};
    fill: ${gn(t.clusterBkg,.5)};
    stroke: ${gn(t.clusterBorder,.2)};
    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span,p {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,FE=DE;function qd(t,e,i=!1){var r,s,n;const a=t;let o="default";(((r=a?.classes)==null?void 0:r.length)||0)>0&&(o=(a?.classes||[]).join(" ")),o=o+" flowchart-label";let l=0,h="",u;switch(a.type){case"round":l=5,h="rect";break;case"composite":l=0,h="composite",u=0;break;case"square":h="rect";break;case"diamond":h="question";break;case"hexagon":h="hexagon";break;case"block_arrow":h="block_arrow";break;case"odd":h="rect_left_inv_arrow";break;case"lean_right":h="lean_right";break;case"lean_left":h="lean_left";break;case"trapezoid":h="trapezoid";break;case"inv_trapezoid":h="inv_trapezoid";break;case"rect_left_inv_arrow":h="rect_left_inv_arrow";break;case"circle":h="circle";break;case"ellipse":h="ellipse";break;case"stadium":h="stadium";break;case"subroutine":h="subroutine";break;case"cylinder":h="cylinder";break;case"group":h="rect";break;case"doublecircle":h="doublecircle";break;default:h="rect"}const p=ii(a?.styles||[]),d=a.label,g=a.size||{width:0,height:0,x:0,y:0};return{labelStyle:p.labelStyle,shape:h,labelText:d,rx:l,ry:l,class:o,style:p.style,id:a.id,directions:a.directions,width:g.width,height:g.height,x:g.x,y:g.y,positioned:i,intersect:void 0,type:a.type,padding:u??(((n=(s=ee())==null?void 0:s.block)==null?void 0:n.padding)||0)}}async function RE(t,e,i){const r=qd(e,i,!1);if(r.type==="group")return;const s=await pa(t,r),n=s.node().getBBox(),a=i.getBlock(r.id);a.size={width:n.width,height:n.height,x:0,y:0,node:s},i.setBlock(a),s.remove()}async function NE(t,e,i){const r=qd(e,i,!0);i.getBlock(r.id).type!=="space"&&(await pa(t,r),e.intersect=r?.intersect,Ka(r))}async function Pl(t,e,i,r){for(const s of e)await r(t,s,i),s.children&&await Pl(t,s.children,i,r)}async function OE(t,e,i){await Pl(t,e,i,RE)}async function PE(t,e,i){await Pl(t,e,i,NE)}async function ME(t,e,i,r,s){const n=new Ii({multigraph:!0,compound:!0});n.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(const a of i)a.size&&n.setNode(a.id,{width:a.size.width,height:a.size.height,intersect:a.intersect});for(const a of e)if(a.start&&a.end){const o=r.getBlock(a.start),l=r.getBlock(a.end);if(o?.size&&l?.size){const h=o.size,u=l.size,p=[{x:h.x,y:h.y},{x:h.x+(u.x-h.x)/2,y:h.y+(u.y-h.y)/2},{x:u.x,y:u.y}];await Su(t,{v:a.start,w:a.end,name:a.id},{...a,arrowTypeEnd:a.arrowTypeEnd,arrowTypeStart:a.arrowTypeStart,points:p,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",n,s),a.label&&(await il(t,{...a,label:a.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:a.arrowTypeEnd,arrowTypeStart:a.arrowTypeStart}),await Eu({...a,x:p[1].x,y:p[1].y},{originalPath:p}))}}}const ue=((hh=(ch=Y())==null?void 0:ch.block)==null?void 0:hh.padding)||8;function VE(t,e){if(t===0||!Number.isInteger(t))throw new Error("Columns must be an integer !== 0.");if(e<0||!Number.isInteger(e))throw new Error("Position must be a non-negative integer."+e);if(t<0)return{px:e,py:0};if(t===1)return{px:0,py:e};const i=e%t,r=Math.floor(e/t);return{px:i,py:r}}const zE=t=>{let e=0,i=0;for(const r of t.children){const{width:s,height:n,x:a,y:o}=r.size||{width:0,height:0,x:0,y:0};B.debug("getMaxChildSize abc95 child:",r.id,"width:",s,"height:",n,"x:",a,"y:",o,r.type),r.type!=="space"&&(s>e&&(e=s/(t.widthInColumns||1)),n>i&&(i=n))}return{width:e,height:i}};function Bo(t,e,i=0,r=0){var s,n,a,o,l,h,u,p,d,g,y;B.debug("setBlockSizes abc95 (start)",t.id,(s=t?.size)==null?void 0:s.x,"block width =",t?.size,"sieblingWidth",i),(n=t?.size)!=null&&n.width||(t.size={width:i,height:r,x:0,y:0});let x=0,_=0;if(((a=t.children)==null?void 0:a.length)>0){for(const S of t.children)Bo(S,e);const w=zE(t);x=w.width,_=w.height,B.debug("setBlockSizes abc95 maxWidth of",t.id,":s children is ",x,_);for(const S of t.children)S.size&&(B.debug(`abc95 Setting size of children of ${t.id} id=${S.id} ${x} ${_} ${S.size}`),S.size.width=x*(S.widthInColumns||1)+ue*((S.widthInColumns||1)-1),S.size.height=_,S.size.x=0,S.size.y=0,B.debug(`abc95 updating size of ${t.id} children child:${S.id} maxWidth:${x} maxHeight:${_}`));for(const S of t.children)Bo(S,e,x,_);const E=t.columns||-1;let R=0;for(const S of t.children)R+=S.widthInColumns||1;let v=t.children.length;E>0&&E<R&&(v=E),t.widthInColumns;const T=Math.ceil(R/v);let k=v*(x+ue)+ue,A=T*(_+ue)+ue;if(k<i){B.debug(`Detected to small siebling: abc95 ${t.id} sieblingWidth ${i} sieblingHeight ${r} width ${k}`),k=i,A=r;const S=(i-v*ue-ue)/v,m=(r-T*ue-ue)/T;B.debug("Size indata abc88",t.id,"childWidth",S,"maxWidth",x),B.debug("Size indata abc88",t.id,"childHeight",m,"maxHeight",_),B.debug("Size indata abc88 xSize",v,"padding",ue);for(const C of t.children)C.size&&(C.size.width=S,C.size.height=m,C.size.x=0,C.size.y=0)}if(B.debug(`abc95 (finale calc) ${t.id} xSize ${v} ySize ${T} columns ${E}${t.children.length} width=${Math.max(k,((o=t.size)==null?void 0:o.width)||0)}`),k<(((l=t?.size)==null?void 0:l.width)||0)){k=((h=t?.size)==null?void 0:h.width)||0;const S=E>0?Math.min(t.children.length,E):t.children.length;if(S>0){const m=(k-S*ue-ue)/S;B.debug("abc95 (growing to fit) width",t.id,k,(u=t.size)==null?void 0:u.width,m);for(const C of t.children)C.size&&(C.size.width=m)}}t.size={width:k,height:A,x:0,y:0}}B.debug("setBlockSizes abc94 (done)",t.id,(p=t?.size)==null?void 0:p.x,(d=t?.size)==null?void 0:d.width,(g=t?.size)==null?void 0:g.y,(y=t?.size)==null?void 0:y.height)}function Wd(t,e){var i,r,s,n,a,o,l,h,u,p,d,g,y,x,_,w,E;B.debug(`abc85 layout blocks (=>layoutBlocks) ${t.id} x: ${(i=t?.size)==null?void 0:i.x} y: ${(r=t?.size)==null?void 0:r.y} width: ${(s=t?.size)==null?void 0:s.width}`);const R=t.columns||-1;if(B.debug("layoutBlocks columns abc95",t.id,"=>",R,t),t.children&&t.children.length>0){const v=((a=(n=t?.children[0])==null?void 0:n.size)==null?void 0:a.width)||0,T=t.children.length*v+(t.children.length-1)*ue;B.debug("widthOfChildren 88",T,"posX");let k=0;B.debug("abc91 block?.size?.x",t.id,(o=t?.size)==null?void 0:o.x);let A=(l=t?.size)!=null&&l.x?((h=t?.size)==null?void 0:h.x)+(-((u=t?.size)==null?void 0:u.width)/2||0):-ue,S=0;for(const m of t.children){const C=t;if(!m.size)continue;const{width:f,height:L}=m.size,{px:b,py:P}=VE(R,k);if(P!=S&&(S=P,A=(p=t?.size)!=null&&p.x?((d=t?.size)==null?void 0:d.x)+(-((g=t?.size)==null?void 0:g.width)/2||0):-ue,B.debug("New row in layout for block",t.id," and child ",m.id,S)),B.debug(`abc89 layout blocks (child) id: ${m.id} Pos: ${k} (px, py) ${b},${P} (${(y=C?.size)==null?void 0:y.x},${(x=C?.size)==null?void 0:x.y}) parent: ${C.id} width: ${f}${ue}`),C.size){const U=f/2;m.size.x=A+ue+U,B.debug(`abc91 layout blocks (calc) px, pyid:${m.id} startingPos=X${A} new startingPosX${m.size.x} ${U} padding=${ue} width=${f} halfWidth=${U} => x:${m.size.x} y:${m.size.y} ${m.widthInColumns} (width * (child?.w || 1)) / 2 ${f*(m?.widthInColumns||1)/2}`),A=m.size.x+U,m.size.y=C.size.y-C.size.height/2+P*(L+ue)+L/2+ue,B.debug(`abc88 layout blocks (calc) px, pyid:${m.id}startingPosX${A}${ue}${U}=>x:${m.size.x}y:${m.size.y}${m.widthInColumns}(width * (child?.w || 1)) / 2${f*(m?.widthInColumns||1)/2}`)}m.children&&Wd(m),k+=m?.widthInColumns||1,B.debug("abc88 columnsPos",m,k)}}B.debug(`layout blocks (<==layoutBlocks) ${t.id} x: ${(_=t?.size)==null?void 0:_.x} y: ${(w=t?.size)==null?void 0:w.y} width: ${(E=t?.size)==null?void 0:E.width}`)}function Yd(t,{minX:e,minY:i,maxX:r,maxY:s}={minX:0,minY:0,maxX:0,maxY:0}){if(t.size&&t.id!=="root"){const{x:n,y:a,width:o,height:l}=t.size;n-o/2<e&&(e=n-o/2),a-l/2<i&&(i=a-l/2),n+o/2>r&&(r=n+o/2),a+l/2>s&&(s=a+l/2)}if(t.children)for(const n of t.children)({minX:e,minY:i,maxX:r,maxY:s}=Yd(n,{minX:e,minY:i,maxX:r,maxY:s}));return{minX:e,minY:i,maxX:r,maxY:s}}function qE(t){const e=t.getBlock("root");if(!e)return;Bo(e,t,0,0),Wd(e),B.debug("getBlocks",JSON.stringify(e,null,2));const{minX:i,minY:r,maxX:s,maxY:n}=Yd(e),a=n-r,o=s-i;return{x:i,y:r,width:o,height:a}}const WE=function(t,e){return e.db.getClasses()},YE=async function(t,e,i,r){const{securityLevel:s,block:n}=ee(),a=r.db;let o;s==="sandbox"&&(o=yt("#i"+e));const l=s==="sandbox"?yt(o.nodes()[0].contentDocument.body):yt("body"),h=s==="sandbox"?l.select(`[id="${e}"]`):yt(`[id="${e}"]`);tl(h,["point","circle","cross"],r.type,e);const p=a.getBlocks(),d=a.getBlocksFlat(),g=a.getEdges(),y=h.insert("g").attr("class","block");await OE(y,p,a);const x=qE(a);if(await PE(y,p,a),await ME(y,g,d,a,e),x){const _=x,w=Math.max(1,Math.round(.125*(_.width/_.height))),E=_.height+w+10,R=_.width+10,{useMaxWidth:v}=n;Ne(h,E,R,!!v),B.debug("Here Bounds",x,_),h.attr("viewBox",`${_.x-5} ${_.y-5} ${_.width+10} ${_.height+10}`)}Io(bh)},UE={draw:YE,getClasses:WE},HE={parser:cE,db:IE,renderer:UE,styles:FE},GE=Object.freeze(Object.defineProperty({__proto__:null,diagram:HE},Symbol.toStringTag,{value:"Module"}));export{ae as _,Li as m};
//# sourceMappingURL=mermaid-BKUgZdUC.js.map

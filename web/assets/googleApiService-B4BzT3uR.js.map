// Copyright James Burvel Oâ€™Callaghan III
// President Citibank Demo Business Inc.

{"version":3,"file":"googleApiService-B4BzT3uR.js","sources":["../../services/googleApiService.ts"],"sourcesContent":["// services/googleApiService.ts\nconst API_KEY = process.env.GEMINI_API_KEY;\nconst CLIENT_ID = \"555179712981-36hlicm802genhfo9iq1ufnp1n8cikt9.apps.googleusercontent.com\";\n\ndeclare global { interface Window { gapi: any; } }\n\nlet gapiInitialized = false;\n\nconst loadGapiScript = () => new Promise<void>((resolve, reject) => {\n    if (window.gapi) {\n        window.gapi.load('client', resolve);\n        return;\n    };\n    const script = document.createElement('script');\n    script.src = 'https://apis.google.com/js/api.js';\n    script.onload = () => window.gapi.load('client', resolve);\n    script.onerror = reject;\n    document.body.appendChild(script);\n});\n\nexport const ensureGapiClient = async (): Promise<boolean> => {\n    if (gapiInitialized) return true;\n    \n    try {\n        await loadGapiScript();\n\n        await window.gapi.client.init({\n            apiKey: API_KEY,\n            clientId: CLIENT_ID,\n            discoveryDocs: [\n                \"https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest\",\n                \"https://docs.googleapis.com/$discovery/rest?version=v1\",\n                \"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\",\n                \"https://iam.googleapis.com/$discovery/rest?version=v1\"\n            ],\n        });\n\n        const accessToken = sessionStorage.getItem('google_access_token');\n        if (!accessToken) {\n            console.error(\"GAPI: Access token not found. User may need to sign in again.\");\n            return false;\n        }\n        \n        window.gapi.client.setToken({ access_token: accessToken });\n        gapiInitialized = true;\n        return true;\n    } catch (error) {\n        console.error(\"GAPI client initialization failed:\", error);\n        gapiInitialized = false;\n        return false;\n    }\n};"],"names":["CLIENT_ID","gapiInitialized","loadGapiScript","resolve","reject","script","ensureGapiClient","accessToken","error"],"mappings":"AAEA,MAAMA,EAAY,2EAIlB,IAAIC,EAAkB,GAEtB,MAAMC,EAAiB,IAAM,IAAI,QAAc,CAACC,EAASC,IAAW,CAChE,GAAI,OAAO,KAAM,CACb,OAAO,KAAK,KAAK,SAAUD,CAAO,EAClC,MACJ,CACA,MAAME,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,IAAM,oCACbA,EAAO,OAAS,IAAM,OAAO,KAAK,KAAK,SAAUF,CAAO,EACxDE,EAAO,QAAUD,EACjB,SAAS,KAAK,YAAYC,CAAM,CACpC,CAAC,EAEYC,EAAmB,SAA8B,CAC1D,GAAIL,EAAiB,MAAO,GAE5B,GAAI,CACA,MAAMC,EAAA,EAEN,MAAM,OAAO,KAAK,OAAO,KAAK,CAC1B,OAAQ,OACR,SAAUF,EACV,cAAe,CACX,6DACA,yDACA,6DACA,uDAAA,CACJ,CACH,EAED,MAAMO,EAAc,eAAe,QAAQ,qBAAqB,EAChE,OAAKA,GAKL,OAAO,KAAK,OAAO,SAAS,CAAE,aAAcA,EAAa,EACzDN,EAAkB,GACX,KANH,QAAQ,MAAM,+DAA+D,EACtE,GAMf,OAASO,EAAO,CACZ,eAAQ,MAAM,qCAAsCA,CAAK,EACzDP,EAAkB,GACX,EACX,CACJ"}
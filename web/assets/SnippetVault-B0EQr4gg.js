import{r as i,j as t}from"./react-CIdJ77ke.js";import{E as k,a as T,H as I,I as A,T as E,S as g,J as D,K as L,N as F}from"./index-CIRHoGv6.js";import{d as V}from"./fileUtils-DLahR3l0.js";import"./@braintree-DzxiOROe.js";import"./react-dom-R9L8nDNe.js";import"./scheduler-CoSDG3-6.js";import"./@google-dIZ1hAme.js";import"./idb-Dob3nYDb.js";import"./marked-BrGMJkBT.js";import"./mermaid-BKUgZdUC.js";import"./dayjs-CeEF-NGT.js";import"./d3-transition-CiCB8KJE.js";import"./d3-timer-DdKHrDhs.js";import"./d3-dispatch-kxCwF96_.js";import"./d3-interpolate-CtIaNujU.js";import"./d3-color-amxIadob.js";import"./d3-selection-C52G7wmG.js";import"./d3-ease-DRPgKoYJ.js";import"./d3-zoom-BYoC3mS3.js";import"./dompurify-J5RlrwSC.js";import"./dagre-d3-es-CTpFWynZ.js";import"./lodash-es-Dt6r0yiR.js";import"./d3-shape-CX8xTzfR.js";import"./d3-path-CimkQT29.js";import"./d3-fetch-BOsq7VnW.js";import"./khroma-DUX6PT6k.js";import"./uuid-DhYbOkY1.js";import"./d3-scale-DRZz3QW5.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-DGRYoJHh.js";import"./d3-format-CzD4bSOQ.js";import"./d3-time-format-CUNN4Ell.js";import"./d3-time-6cSPyVSY.js";import"./d3-axis-DSWTncID.js";import"./elkjs-oKFFZvz7.js";import"./cytoscape-DtBltrT8.js";import"./cytoscape-cose-bilkent-Cgr1thlj.js";import"./cose-base-CwCxnKwh.js";import"./layout-base-CMXQqlmj.js";import"./d3-sankey-DgqkLiUE.js";import"./d3-scale-chromatic-B-NsZVaP.js";import"./ts-dedent-DrFu-skq.js";import"./stylis-D5iaQeiq.js";import"./mdast-util-from-markdown-CLAsVoWb.js";import"./micromark-CTBPIv-_.js";import"./micromark-util-combine-extensions-Bka6Sc1c.js";import"./micromark-util-chunked-DrRIdSP-.js";import"./micromark-factory-space-x2vfxbz5.js";import"./micromark-util-character-Bcm1tP9o.js";import"./micromark-core-commonmark-AH8VCgT7.js";import"./micromark-util-classify-character-Cq7Fg3xE.js";import"./micromark-util-resolve-all-PQCKh0dx.js";import"./decode-named-character-reference-C3-224fz.js";import"./micromark-util-subtokenize-QwsxNXk2.js";import"./micromark-factory-destination-CypD_wgM.js";import"./micromark-factory-label-CRHH4ZHP.js";import"./micromark-factory-title-B7kCBvC9.js";import"./micromark-factory-whitespace-B322EA6O.js";import"./micromark-util-normalize-identifier-C9ANKk3v.js";import"./micromark-util-html-tag-name-DbKNfynz.js";import"./micromark-util-decode-numeric-character-reference-DRnCnno4.js";import"./micromark-util-decode-string-DJl8Y_PO.js";import"./unist-util-stringify-position-Ch_qCilz.js";import"./mdast-util-to-string-C_aolqmU.js";import"./jszip-CFFhfFtd.js";import"./octokit-B6bKu3NB.js";import"./@octokit-MBEWYTsi.js";import"./bottleneck-D_vuF9V7.js";import"./universal-user-agent-CLgqIJsR.js";import"./before-after-hook-y8XtM9xW.js";import"./fast-content-type-parse-3SwieiST.js";const $={javascript:"js",typescript:"ts",python:"py",css:"css",html:"html",json:"json",markdown:"md",plaintext:"txt"},Ze=()=>{const[s,m]=k("devcore_snippets",[{id:1,name:"React Hook Boilerplate",language:"javascript",code:`import { useState } from 'react';

const useCustomHook = () => {
  const [value, setValue] = useState(null);
  return { value, setValue };
};`,tags:["react","hook"]}]),[r,a]=i.useState(null),[f,x]=i.useState(!1),[p,h]=i.useState(""),[b,u]=i.useState(!1),{addNotification:d}=T(),n=i.useMemo(()=>{if(!p)return s;const e=p.toLowerCase();return s.filter(o=>o.name.toLowerCase().includes(e)||o.code.toLowerCase().includes(e)||o.tags&&o.tags.some(c=>c.toLowerCase().includes(e)))},[s,p]);i.useEffect(()=>{!r&&n.length>0&&a(n[0]),r&&a(s.find(e=>e.id===r.id)||null)},[s,r,n]);const l=e=>{m(s.map(o=>o.id===e.id?e:o)),a(e)},j=async()=>{if(r){x(!0);try{const e=F(r.code);let o="";for await(const c of e)o+=c,l({...r,code:o.replace(/^```(?:\w+\n)?/,"").replace(/```$/,"")})}finally{x(!1)}}},y=async e=>{if(e.code.trim())try{const o=await L(e.code),c=[...new Set([...e.tags||[],...o])];l({...e,tags:c}),d("AI tags added!","success")}catch(o){console.error("AI tagging failed:",o),d("AI tagging failed.","error")}},w=()=>{const e={id:Date.now(),name:"New Snippet",language:"plaintext",code:"",tags:[]};m([...s,e]),a(e)},N=e=>{m(s.filter(o=>o.id!==e)),r?.id===e&&a(n.length>1?n[0]:null)},v=()=>{if(!r)return;const e=$[r.language]||"txt",o=`${r.name.replace(/\s/g,"_")}.${e}`;V(r.code,o)},S=e=>{r&&l({...r,name:e.target.value})},C=e=>{if(e.key==="Enter"&&r){const o=e.currentTarget.value.trim();o&&!r.tags.includes(o)&&l({...r,tags:[...r.tags??[],o]}),e.currentTarget.value=""}};return t.jsxs("div",{className:"h-full flex flex-col p-4 sm:p-6 lg:p-8 text-text-primary",children:[t.jsxs("header",{className:"mb-6",children:[t.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[t.jsx(I,{}),t.jsx("span",{className:"ml-3",children:"Snippet Vault"})]}),t.jsx("p",{className:"text-text-secondary mt-1",children:"Store, search, tag, and enhance your reusable code snippets with AI."})]}),t.jsxs("div",{className:"flex-grow flex gap-6 min-h-0",children:[t.jsxs("aside",{className:"w-1/3 bg-surface border border-border p-4 rounded-lg flex flex-col",children:[t.jsx("input",{type:"text",placeholder:"Search snippets...",value:p,onChange:e=>h(e.target.value),className:"w-full px-3 py-1.5 mb-3 rounded-md bg-background border border-border text-sm"}),t.jsx("ul",{className:"space-y-2 flex-grow overflow-y-auto pr-2",children:n.map(e=>t.jsxs("li",{className:"group flex items-center justify-between",children:[t.jsx("button",{onClick:()=>a(e),className:`w-full text-left px-3 py-2 rounded-md ${r?.id===e.id?"bg-primary/10 text-primary":"hover:bg-gray-100 dark:hover:bg-slate-700"}`,children:e.name}),t.jsxs("div",{className:"flex opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(e.code),d("Copied snippet!","success")},className:"ml-2 p-1 text-text-secondary hover:text-primary",title:"Copy",children:t.jsx(A,{})}),t.jsx("button",{onClick:()=>N(e.id),className:"ml-2 p-1 text-text-secondary hover:text-red-500",title:"Delete",children:t.jsx(E,{})})]})]},e.id))}),t.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:t.jsx("button",{onClick:w,className:"btn-primary w-full text-sm py-2",children:"Add New Snippet"})})]}),t.jsx("main",{className:"w-2/3 flex flex-col",children:r?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[b?t.jsx("input",{type:"text",value:r.name,onChange:S,onBlur:()=>u(!1),autoFocus:!0,className:"text-lg font-bold bg-gray-100 dark:bg-slate-700 rounded px-2"}):t.jsx("h3",{onDoubleClick:()=>u(!0),className:"text-lg font-bold cursor-pointer",children:r.name}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>y(r),className:"flex items-center gap-2 px-3 py-1 bg-teal-500/80 text-white font-bold text-xs rounded-md",children:[t.jsx(g,{})," AI Tag"]}),t.jsxs("button",{onClick:j,disabled:f,className:"flex items-center gap-2 px-3 py-1 bg-purple-500/80 text-white font-bold text-xs rounded-md disabled:bg-gray-400",children:[t.jsx(g,{})," AI Enhance"]}),t.jsxs("button",{onClick:v,className:"flex items-center gap-1 px-3 py-1 bg-gray-100 dark:bg-slate-700 text-xs rounded-md",children:[t.jsx(D,{className:"w-4 h-4"})," Download"]})]})]}),t.jsx("textarea",{value:r.code,onChange:e=>l({...r,code:e.target.value}),className:"flex-grow p-4 bg-surface border border-border rounded-md resize-none font-mono text-sm focus:ring-2 focus:ring-primary focus:outline-none"}),t.jsx("div",{className:"mt-2 text-xs text-text-secondary",children:t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:"font-bold",children:"Tags:"})," ",(r.tags??[]).map(e=>t.jsx("span",{className:"bg-gray-200 dark:bg-slate-700 px-2 py-0.5 rounded-full",children:e},e)),t.jsx("input",{type:"text",placeholder:"+ Add tag",onKeyDown:C,className:"bg-transparent border-b border-border focus:outline-none focus:border-primary w-24 text-xs px-1"})]})})]}):t.jsx("div",{className:"flex-grow flex items-center justify-center bg-background border border-border rounded-lg text-text-secondary",children:"Select a snippet or create a new one."})})]})]})};export{Ze as SnippetVault};
//# sourceMappingURL=SnippetVault-B0EQr4gg.js.map
